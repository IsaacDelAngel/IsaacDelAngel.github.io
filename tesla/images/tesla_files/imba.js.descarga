const{Document:t,Node:e,Text:n,Comment:i,Element:s,SVGElement:r,HTMLElement:h,HTMLInputElement:o,HTMLSelectElement:a,HTMLButtonElement:l,HTMLOptionElement:u,HTMLTextAreaElement:c,DocumentFragment:d,ShadowRoot:f,Event:p,CustomEvent:$,MouseEvent:m,KeyboardEvent:g,PointerEvent:v,document:y,getElementType:b}=window,x={cm:1,mm:1,Q:1,pc:1,pt:1,px:1,em:1,ex:1,ch:1,rem:1,vw:1,vh:1,vmin:1,vmax:1,s:1,ms:1,fr:1,"%":1,in:1,turn:1,grad:1,rad:1,deg:1,Hz:1,kHz:1},_={prefix:1,suffix:1,content:1},E=/^([xyz])$/,w=/^([tlbr]|size|[whtlbr]|[mps][tlbrxy]?|[rcxy]?[gs])$/;const C={};class F{constructor(t){this.dom=t,this.string=""}contains(t){return this.dom.classList.contains(t)}add(t){return this.contains(t)||(this.string+=(this.string?" ":"")+t,this.dom.classList.add(t)),this}remove(t){if(!this.contains(t))return this;var e=new RegExp("(^|\\s)*"+t+"(\\s|$)*","g");return this.string=this.string.replace(e,""),this.dom.classList.remove(t),this}toggle(t,e){return void 0===e&&(e=!this.contains(t)),e?this.add(t):this.remove(t)}incr(t){let e=this.stacks||(this.stacks={}),n=e[t]||0;return n<1&&this.add(t),e[t]=Math.max(n,0)+1,this}decr(t){let e=this.stacks||(this.stacks={}),n=e[t]||0;return 1==n&&this.remove(t),e[t]=Math.max(n,1)-1,this}valueOf(){return this.string}toString(){return this.string}sync(){return this.dom.flagSync$()}}var k="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(t){return setTimeout(t,1e3/60)};function N(t){return t?t.toIterable?t.toIterable():t:[]}const O={esc:[27],tab:[9],enter:[13],space:[32],up:[38],down:[40],left:[37],right:[39],del:[8,46]};p.log$mod=function(...t){return console.log(...t),!0},p.sel$mod=function(t){return!!this.event.target.matches(String(t))},p.if$mod=function(t){return!!t},p.wait$mod=function(t=250){return new Promise((function(e){return setTimeout(e,t)}))},p.self$mod=function(){return this.event.target==this.element},p.throttle$mod=function(t=250){var e=this;return!this.handler.throttled&&(this.handler.throttled=!0,this.element.flags.incr("throttled"),imba.once(this.current,"end",(function(){return setTimeout((function(){return e.element.flags.decr("throttled"),e.handler.throttled=!1}),t)})),!0)},p.flag$mod=function(t,e){let n=e instanceof globalThis.Element?e:e?this.element.closest(e):this.element;if(!n)return!0;let i=this.step;this.state[i]=this.id,n.flags.incr(t);let s=Date.now();return imba.once(this.current,"end",(function(){let e=Date.now()-s,i=Math.max(250-e,0);return setTimeout((function(){return n.flags.decr(t)}),i)})),!0},p.busy$mod=function(t){return p.flag$mod.call(this,"busy",250,t)};class I{constructor(t,e){this.params=t,this.closure=e}getHandlerForMethod(t,e){return t?t[e]?t:this.getHandlerForMethod(t.parentNode,e):null}emit(t,...e){return imba.emit(this,t,e)}on(t,...e){return imba.listen(this,t,...e)}once(t,...e){return imba.once(this,t,...e)}un(t,...e){return imba.unlisten(this,t,...e)}async handleEvent(t){t.target;var e=t.currentTarget,n=this.params;let i=!0;this.count||(this.count=0),this.state||(this.state={});let s={element:e,event:t,modifiers:n,handler:this,id:++this.count,step:-1,state:this.state,current:null};if(s.current=s,t.handle$mod&&0==t.handle$mod.apply(s,n.options||[]))return;let r=p[this.type+"$handle"]||p[t.type+"$handle"]||t.handle$mod;if(!r||0!=r.apply(s,n.options||[])){this.currentEvents||(this.currentEvents=new Set),this.currentEvents.add(t);for(let r,h,o=0,a=Object.keys(n),l=a.length;o<l;o++){if(r=a[o],h=n[r],s.step++,"_"==r[0])continue;r.indexOf("~")>0&&(r=r.split("~")[0]);let l,u=null,c=[t,s],d=void 0,f=null;if("$"==r[0]&&"_"==r[1]&&h[0]instanceof Function)r=h[0],c=[t,s].concat(h.slice(1)),f=e;else if(h instanceof Array){c=h.slice(),u=c;for(let e=0,n=N(c),i=n.length;e<i;e++){let i=n[e];if("string"==typeof i&&"~"==i[0]&&"$"==i[1]){let n=i.slice(2).split("."),r=s[n.shift()]||t;for(let t=0,e=N(n),i=e.length;t<i;t++){let n=e[t];r=r?r[n]:void 0}c[e]=r}}}if("string"==typeof r&&(l=r.match(/^(emit|flag|moved|pin|fit|refit|map|remap)-(.+)$/))&&(u||(u=c=[]),c.unshift(l[2]),r=l[1]),"stop"==r)t.stopImmediatePropagation();else if("prevent"==r)t.preventDefault();else if("commit"==r)i=!0;else if("silence"==r||"silent"==r)i=!1;else if("ctrl"==r){if(!t.ctrlKey)break}else if("alt"==r){if(!t.altKey)break}else if("shift"==r){if(!t.shiftKey)break}else if("meta"==r){if(!t.metaKey)break}else if("once"==r)e.removeEventListener(t.type,this);else{if("options"==r)continue;if(O[r]){if(O[r].indexOf(t.keyCode)<0)break}else if("emit"==r){let n=c[0],i=c[1],s=new CustomEvent(n,{bubbles:!0,detail:i});s.originalEvent=t;e.dispatchEvent(s)}else if("string"==typeof r){let n=this.type&&p[this.type+"$"+r+"$mod"];n||(n=t[r+"$mod"]||p[t.type+"$"+r]||p[r+"$mod"]),n instanceof Function?(r=n,f=s,c=u||[]):"_"==r[0]?(r=r.slice(1),f=this.closure):f=this.getHandlerForMethod(e,r)}}if(r instanceof Function?d=r.apply(f||e,c):f&&(d=f[r].apply(f,c)),d&&d.then instanceof Function&&d!=imba.scheduler.$promise&&(i&&imba.$commit(),d=await d),!1===d)break;s.value=d}imba.emit(s,"end",s),i&&imba.$commit(),this.currentEvents.delete(t),0==this.currentEvents.size&&this.emit("idle")}}}function S(t,e=1){let n=1/e;return Math.round(t*n)/n}function T(t){if("string"==typeof t){let[e,n,i]=t.match(/^([-+]?[\d\.]+)(%|\w+)$/);return[parseFloat(n),i]}if("number"==typeof t)return[t]}function B(t,e,n,i,s=.1){let[r,h]=T(n),[o,a]=T(i),[l,u]=T(s);return"%"==h&&(r=r/100*(e-t)),"%"==a&&(o=o/100*(e-t)),"%"==u&&(l=l/100*(o-r)),function(n,i){let h=r+(o-r)*((n-t)/(e-t));return s&&(h=S(h,l)),i&&(h=function(t,e,n){return e>n?Math.max(n,Math.min(e,t)):Math.min(n,Math.max(e,t))}(h,r,o)),h}}var V,A,R;V=v,A={primary$mod(){return!!this.event.isPrimary},mouse$mod(){return"mouse"==this.event.pointerType},pen$mod(){return"pen"==this.event.pointerType},touch$mod(){return"touch"==this.event.pointerType},pressure$mod(t=0){return this.event.pressure>t},lock$mod:t=>!0},R=Object.getOwnPropertyDescriptors(A),Object.defineProperties(V.prototype,R);class L{constructor(t,e,n){this.phase="init",this.events=[],this.event=t,this.handler=e,this.target=this.currentTarget=n}set event(t){this.x=t.clientX,this.y=t.clientY,this.events.push(t)}get start(){return this.events[0]}get event(){return this.events[this.events.length-1]}get elapsed(){return this.event.timeStamp-this.events[0].timeStamp}get pointerId(){return this.event.pointerId}get clientX(){return this.event.clientX}get clientY(){return this.event.clientY}get offsetX(){return this.event.offsetX}get offsetY(){return this.event.offsetY}get type(){return this.event.type}emit(t,...e){return imba.emit(this,t,e)}on(t,...e){return imba.listen(this,t,...e)}once(t,...e){return imba.once(this,t,...e)}un(t,...e){return imba.unlisten(this,t,...e)}}function P(t){return t?t.toIterable?t.toIterable():t:[]}function M(t,e){var n=Object.getOwnPropertyDescriptors(e);return Object.defineProperties(t.prototype,n),t}p.touch$in$mod=function(){return p.touch$reframe$mod.apply(this,arguments)},p.touch$fit$mod=function(){var t,e;(t=this.state)[e=this.step]||(t[e]={clamp:!0});return p.touch$reframe$mod.apply(this,arguments)},p.touch$snap$mod=function(t=1,e=t){return this.event.x=S(this.event.x,t),this.event.y=S(this.event.y,e),!0},p.touch$moved$mod=function(t,e){var n,i,s=this;let r=(n=this.state)[i=this.step]||(n[i]={});if(!r.setup){let n=t||4;"string"==typeof t&&t.match(/^(up|down|left|right|x|y)$/)&&(r.dir=t,n=e||4),r.setup=!0;let[i,s]=T(n);r.threshold=i,r.sy=i,r.x0=this.event.x,r.y0=this.event.y,s&&"px"!=s&&console.warn("only px threshold allowed in @touch.moved")}if(r.active)return!0;let h=r.threshold,o=this.event.x-r.x0,a=this.event.y-r.y0,l=!1;if(o>h&&("right"==r.dir||"x"==r.dir)&&(l=!0),!l&&o<-h&&("left"==r.dir||"x"==r.dir)&&(l=!0),!l&&a>h&&("down"==r.dir||"y"==r.dir)&&(l=!0),!l&&a<-h&&("up"==r.dir||"y"==r.dir)&&(l=!0),!l){Math.sqrt(o*o+a*a)>h&&!r.dir&&(l=!0)}if(l){r.active=!0;let t=this.state.pinTarget;this.element.flags.incr("_move_"),t&&t.flags.incr("_move_"),imba.once(this.current,"end",(function(){return t&&t.flags.decr("_move_"),s.element.flags.decr("_move_")}))}return!!r.active},p.touch$reframe$mod=function(...t){var e,n;let i=(e=this.state)[n=this.step]||(e[n]={});if(i.rect){let t=this.event.x=i.x(this.event.x,i.clamp),e=this.event.y=i.y(this.event.y,i.clamp);this.event.dx=t-this.event.x0,this.event.dy=e-this.event.y0}else{let e=this.element,n=t.length,s=t[0],r=0,h="100%",o=1,a=typeof s;"number"==a||"string"==a&&/^([-+]?\d[\d\.]*)(%|\w+)$/.test(s)||s instanceof Array?s=null:"string"==a&&(s="this"==s||""==s?this.element:"up"==s?this.element.parentNode:"op"==s?this.element.offsetParent:e.closest(s)||e.querySelector(s)),null==s&&(n++,t.unshift(s=e)),2==n?o=t[1]:n>2&&([r,h,o=1]=t.slice(1));let l=s.getBoundingClientRect();r instanceof Array||(r=[r,r]),h instanceof Array||(h=[h,h]),o instanceof Array||(o=[o,o]),i.rect=l,i.x=B(l.left,l.right,r[0],h[0],o[0]),i.y=B(l.top,l.bottom,r[1],h[1],o[1]),this.state.scaleX=i.x,this.state.scaleY=i.y,this.event.x0=this.event.x=i.x(this.event.x,i.clamp),this.event.y0=this.event.y=i.y(this.event.y,i.clamp)}return!0},p.touch$pin$mod=function(...t){let e=this.state[this.step];if(!e){let n=t[0];"string"==typeof n&&(n=this.element.closest(n)||this.element.querySelector(n)),n instanceof s||t.unshift(n=this.state.target);let i=t[1]||0,r=null==t[2]?t[2]=i:t[2],h=n.getBoundingClientRect();e=this.state[this.step]={x:this.state.clientX-(h.left+h.width*i),y:this.state.clientY-(h.top+h.height*r)},n&&(this.state.pinTarget=n,n.flags.incr("_touch_"),this.state.once("end",(function(){return n.flags.decr("_touch_")})))}return this.event.x-=e.x,this.event.y-=e.y,!0},p.touch$lock$mod=function(...t){let e=this.state[this.step];if(!e){e=this.state[this.step]=this.state.target.style;e.touchAction;e.touchAction="none",this.state.once("end",(function(){return e.removeProperty("touch-action")}))}return!0},p.touch$sync$mod=function(t,e="x",n="y"){let i=this.state[this.step];return i||(i=this.state[this.step]={x:t[e]||0,y:t[n]||0,tx:this.state.x,ty:this.state.y}),e&&(t[e]=i.x+(this.state.x-i.tx)),n&&(t[n]=i.y+(this.state.y-i.ty)),!0},p.touch$handle=function(){var t=this;let e=this.event,n=this.element,i=this.state.pointerId;if(this.current=this.state,null!=i)return i==e.pointerId;let s=this.state=this.handler.state=this.current=new L(e,this.handler,n),r=function(t){return t.preventDefault(),!1},h=function(e){let i=e.type;s.event=e;try{t.handler.handleEvent(s)}catch(e){}if("pointerup"==i||"pointercancel"==i)return n.releasePointerCapture(e.pointerId)};return n.flags.incr("_touch_"),n.setPointerCapture(e.pointerId),n.addEventListener("pointermove",h),n.addEventListener("pointerup",h),n.addEventListener("pointercancel",h),n.addEventListener("lostpointercapture",(function(e){return n.flags.decr("_touch_"),s.emit("end"),t.handler.state={},n.removeEventListener("pointermove",h),n.removeEventListener("pointerup",h),n.removeEventListener("pointercancel",h),document.removeEventListener("selectstart",r)}),{once:!0}),document.addEventListener("selectstart",r,{capture:!0}),h(e),!1},M(d,{get $parent(){return this.up$||this.$$parent},setup$(t,e){return this.$start=imba.document.createComment("start"),this.$end=imba.document.createComment("end"),this.$end.replaceWith$=function(t){return this.parentNode.insertBefore(t,this),t},this.appendChild(this.$start),this.appendChild(this.$end)},text$(t){this.$text?this.$text.textContent=t:this.$text=this.insert$(t)},insert$(t,e,n){return this.$$parent?this.$$parent.insert$(t,e,n||this.$end):s.prototype.insert$.call(this,t,e,n||this.$end)},insertInto$(t,e){return this.$$parent||(this.$$parent=t,t.appendChild$(this)),this},replaceWith$(t,e){this.$start.insertBeforeBegin$(t);for(var n=this.$start;n;){let t=n.nextSibling;if(this.appendChild(n),n==this.$end)break;n=t}return t},appendChild$(t){return this.$end?this.$end.insertBeforeBegin$(t):this.appendChild(t),t},removeChild$(t){return t.parentNode&&t.parentNode.removeChild(t),this},isEmpty$(){let t=this.$start,e=this.$end;for(;(t=t.nextSibling)&&t!=e;)if(t instanceof s||t instanceof n)return!1;return!0}}),M(f,{get $parent(){return this.host}});class j{constructor(t,e){this.__F=t,this.$parent=e,!(128&t)&&this instanceof D&&(this.$start=y.createComment("start"),e&&e.appendChild$(this.$start)),256&t||(this.$end=y.createComment("end"),e&&e.appendChild$(this.$end)),this.setup()}appendChild$(t,e){this.$end&&this.$parent?this.$end.insertBeforeBegin$(t):this.$parent&&this.$parent.appendChild$(t)}replaceWith$(t){this.detachNodes(),this.$end.insertBeforeBegin$(t),this.$parent.removeChild$(this.$end),this.$parent=null}joinBefore$(t){return this.insertInto$(t.parentNode,t)}insertInto$(t,e){return this.$parent||(this.$parent=t,e?e.insertBeforeBegin$(this.$end):t.appendChild$(this.$end),this.attachNodes()),this}replace$(t){return this.$parent||(this.$parent=t.parentNode),t.replaceWith$(this.$end),this.attachNodes(),this}setup(){return this}}class D extends j{setup(){return this.array=[],this.changes=new Map,this.dirty=!1,this.$={}}push(t,e){if(!(1&this.__F))return this.array.push(t),void this.appendChild$(t);let n=this.array[e];if(n===t);else{this.dirty=!0;let i=this.array.indexOf(t),s=this.changes.get(t);-1===i?(this.array.splice(e,0,t),this.insertChild(t,e)):i===e+1?(n&&this.changes.set(n,-1),this.array.splice(e,1)):(i>=0&&this.array.splice(i,1),this.array.splice(e,0,t),this.insertChild(t,e)),-1==s&&this.changes.delete(t)}}insertChild(t,e){if(e>0){this.array[e-1].insertAfterEnd$(t)}else this.$start?this.$start.insertAfterEnd$(t):this.$parent.insertAfterBegin$(t)}removeChild(t,e){t.parentNode==this.$parent&&this.$parent.removeChild(t)}attachNodes(){for(let t=0,e=P(this.array),n=e.length;t<n;t++){let n=e[t];this.$end.insertBeforeBegin$(n)}}detachNodes(){for(let t=0,e=P(this.array),n=e.length;t<n;t++){let n=e[t];this.$parent.removeChild(n)}}end$(t){var e=this;if(1&this.__F){if(this.dirty&&(this.changes.forEach((function(t,n){if(-1==t)return e.removeChild(n)})),this.changes.clear(),this.dirty=!1),this.array.length>t)for(;this.array.length>t;){let t=this.array.pop();this.removeChild(t)}}else this.__F|=1}}class q extends j{setup(){return this.$=[],this.length=0}end$(t){let e=this.length;if(e==t||!this.$parent)return;let n=this.$,i=this.$parent;if(e>t)for(;e>t;)i.removeChild$(n[--e]);else if(t>e)for(;t>e;)this.appendChild$(n[e++]);this.length=t}attachNodes(){for(let t=0,e=P(this.$),n=e.length;t<n;t++){let n=e[t];if(t==this.length)break;this.$end.insertBeforeBegin$(n)}}detachNodes(){let t=0;for(;t<this.length;){let e=this.$[t++];this.$parent.removeChild$(e)}}}class H extends h{constructor(){super(),this.flags$ns&&(this.flag$=this.flagExt$),this.setup$(),this.build()}setup$(){return this.__slots={},this.__F=0}init$(){return this.__F|=3,this}flag$(t){this.className=this.flags$ext=t}slot$(t,e){var n;return"__"!=t||this.render?(n=this.__slots)[t]||(n[t]=imba.createLiveFragment(0,null,this)):this}build(){return this}awaken(){return this}mount(){return this}unmount(){return this}rendered(){return this}dehydrate(){return this}hydrate(){return this.autoschedule=!0,this}tick(){return this.commit()}visit(){return this.commit()}commit(){return this.isRender?(this.__F|=256,this.render&&this.render(),this.rendered(),this.__F=-257&(512|this.__F)):this}get autoschedule(){return 0!=(64&this.__F)}set autoschedule(t){t?this.__F|=64:this.__F&=-65}get isRender(){return!0}get isMounting(){return 0!=(16&this.__F)}get isMounted(){return 0!=(32&this.__F)}get isAwakened(){return 0!=(8&this.__F)}get isRendered(){return 0!=(512&this.__F)}get isRendering(){return 0!=(256&this.__F)}get isScheduled(){return 0!=(128&this.__F)}get isHydrated(){return 0!=(2&this.__F)}schedule(){return imba.scheduler.listen("render",this),this.__F|=128,this}unschedule(){return imba.scheduler.unlisten("render",this),this.__F&=-129,this}end$(){return this.visit()}connectedCallback(){let t=this.__F,e=1&t,n=8&t;if(48&t)return;this.__F|=16,e||this.init$(),2&t||(this.flags$ext=this.className,this.hydrate(),this.__F|=2,this.commit()),n||(this.awaken(),this.__F|=8);let i=this.mount();return i&&i.then instanceof Function&&i.then(imba.commit),t=this.__F=-17&(32|this.__F),64&t&&this.schedule(),this}disconnectedCallback(){return this.__F=-49&this.__F,128&this.__F&&this.unschedule(),this.unmount()}}const W={};function z(t,e){var n=Object.getOwnPropertyDescriptors(e);return Object.defineProperties(t.prototype,n),t}const X={};function Y(t){return t?t.toIterable?t.toIterable():t:[]}function K(t,e){var n=Object.getOwnPropertyDescriptors(e);return Object.defineProperties(t.prototype,n),t}z(r,{set$(t,e){var n;let i=function t(e,n,i){if(!e)return i[n]=null;if(void 0!==i[n])return i[n];let s=Object.getOwnPropertyDescriptor(e,n);return void 0!==s||e==r?i[n]=s||null:t(Reflect.getPrototypeOf(e),n,i)}(this,t,X[n=this.nodeName]||(X[n]={}));i&&i.set?this[t]=e:this.setAttribute(t,e)}}),z(r,{flag$(t){let e=this.flags$ns;this.className.baseVal=e?e+(this.flags$ext=t):this.flags$ext=t},flagSelf$(t){var e=this;return this.flag$=function(t){return e.flagSync$(e.flags$ext=t)},this.flagSelf$=function(t){return e.flagSync$(e.flags$own=t)},this.flagSelf$(t)},flagSync$(){return this.className.baseVal=(this.flags$ns||"")+(this.flags$ext||"")+" "+(this.flags$own||"")+" "+(this.$flags||"")}});const U={INPUT:!0,SELECT:!0,TEXTAREA:!0,BUTTON:!0};var G=function(t){return t instanceof Array||t&&t.has instanceof Function},Q=function(t,e){return t instanceof Array?t.indexOf(e)>=0:t&&t.has instanceof Function?t.has(e):t&&t.contains instanceof Function?t.contains(e):t==e},J=function(t,e){return t instanceof Array?t.push(e):t&&t.add instanceof Function?t.add(e):void 0},Z=function(t,e){if(t instanceof Array){let n=t.indexOf(e);if(n>=0)return t.splice(n,1)}else if(t&&t.delete instanceof Function)return t.delete(e)};function tt(t,e){var n=Object.getOwnPropertyDescriptors(e);return Object.defineProperties(t.prototype,n),t}K(s,{getRichValue(){return this.value},setRichValue(t){return this.value=t},bind$(t,e){let n=e||[];return"data"==t&&!this.$$bound&&U[this.nodeName]&&(this.$$bound=!0,this.change$&&this.addEventListener("change",this.change$=this.change$.bind(this)),this.input$&&this.addEventListener("input",this.input$=this.input$.bind(this),{capture:!0}),this.click$&&this.addEventListener("click",this.click$=this.click$.bind(this),{capture:!0})),Object.defineProperty(this,t,n instanceof Array?function(t){return{get:function(){return t[0]?t[0][t[1]]:void 0},set:function(e){return t[0]?t[0][t[1]]=e:null}}}(n):n),n}}),Object.defineProperty(s.prototype,"richValue",{get:function(){return this.getRichValue()},set:function(t){return this.setRichValue(t)}}),K(a,{change$(t){let e=this.data,n=this.$$value;this.$$value=void 0;let i=this.getRichValue();if(this.multiple){if(n)for(let t=0,s=Y(n),r=s.length;t<r;t++){let n=s[t];-1==i.indexOf(n)&&Z(e,n)}for(let t=0,s=Y(i),r=s.length;t<r;t++){let i=s[t];n&&-1!=n.indexOf(i)||J(e,i)}}else this.data=i[0];return imba.commit(),this},getRichValue(){var t;if(this.$$value)return this.$$value;t=[];for(let e=0,n=Y(this.selectedOptions),i=n.length;e<i;e++){let i=n[e];t.push(i.richValue)}return this.$$value=t},syncValue(){let t=this.data;if(this.multiple){let e=[];for(let n=0,i=Y(this.options),s=i.length;n<s;n++){let s=i[n],r=s.richValue,h=Q(t,r);s.selected=h,h&&e.push(r)}this.$$value=e}else for(let e=0,n=Y(this.options),i=n.length;e<i;e++){let i=n[e].richValue;if(i==t){this.$$value=[i],this.selectedIndex=e;break}}},end$(){return this.syncValue()}}),K(u,{setRichValue(t){return this.$$value=t,this.value=t},getRichValue(){return void 0!==this.$$value?this.$$value:this.value}}),K(c,{setRichValue(t){return this.$$value=t,this.value=t},getRichValue(){return void 0!==this.$$value?this.$$value:this.value},input$(t){return this.data=this.value,imba.commit()},end$(){if(this.$$bound&&this.value!=this.data)return this.value=this.data}}),K(o,{input$(t){let e=this.type;if("checkbox"!=e&&"radio"!=e)return this.$$value=void 0,this.data=this.richValue,imba.commit()},change$(t){let e=this.data,n=this.richValue;if("checkbox"==this.type||"radio"==this.type){let t=this.checked;G(e)?t?J(e,n):Z(e,n):this.data=!!t&&n}return imba.commit()},setRichValue(t){this.$$value!==t&&(this.$$value=t,this.value!==t&&(this.value=t))},getRichValue(){if(void 0!==this.$$value)return this.$$value;let t=this.value,e=this.type;return"range"==e||"number"==e?(t=this.valueAsNumber,Number.isNaN(t)&&(t=null)):"checkbox"==e&&(null!=t&&"on"!==t||(t=!0)),t},end$(){if(this.$$bound){let t=this.type;if("checkbox"==t||"radio"==t){let t=this.data;this.checked=!0===t||!1===t||null==t?!!t:Q(t,this.richValue)}else this.richValue=this.data}}}),K(l,{get checked(){return this.$checked},set checked(t){t!=this.$checked&&(this.$checked=t,this.flags.toggle("checked",!!t))},setRichValue(t){return this.$$value=t,this.value=t},getRichValue(){return void 0!==this.$$value?this.$$value:this.value},click$(t){let e=this.data,n=this.checked,i=this.richValue;return G(e)?n?Z(e,i):J(e,i):this.data=n?null:i,this.end$(),imba.commit()},end$(){if(this.$$bound){let t=this.data;this.checked=!0===t||!1===t||null==t?!!t:Q(t,this.richValue)}}});var et="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:null,nt={version:"2.0.0",global:et,ctx:null,document:et.document};et.imba=nt,et.customElements||(et.customElements={define:function(){return!0},get:function(){return!0}}),nt.setTimeout=function(t,e){return setTimeout((function(){return t(),nt.$commit()}),e)},nt.setInterval=function(t,e){return setInterval((function(){return t(),nt.$commit()}),e)},nt.clearInterval=et.clearInterval,nt.clearTimeout=et.clearTimeout,Object.defineProperty(nt,"flags",{get:function(){return nt.document.documentElement.classList}}),nt.document=y,nt.q$=function(t,e){return(e instanceof s?e:y).querySelector(t)},nt.q$$=function(t,e){return(e instanceof s?e:y).querySelectorAll(t)},nt.toStyleValue=function(t,e,n){return function(t,e,n){_[n]&&(t=String(t));let i=typeof t;if("number"==i){if(e||(E.test(n)?e="px":w.test(n)?e="u":"rotate"==n&&(e="turn")),e)return x[e]?t+e:"u"==e?4*t+"px":"calc(var(--u_"+e+",1px) * "+t+")"}else"string"==i&&n&&_[n]&&'"'!=t[0]&&"'"!=t[0]&&(t.indexOf('"')>=0?-1==t.indexOf("'")&&(t="'"+t+"'"):t='"'+t+'"');return t}(t,e,n)},nt.inlineStyles=function(t,e){!function t(e,n){if(C.root||"root"==n||t("*,::before,::after {\nbox-sizing: border-box;\nborder-width: 0;\nborder-style: solid;\nborder-color: currentColor;\n}","root"),n&&!C[n]){let t=C[n]={raw:e};t.node=document.createElement("style"),t.node.textContent=t.raw,document.head.appendChild(t.node)}}(t,e)},nt.getAllStyles=function(){return Object.values(C).map((function(t){return t.raw})).join("\n\n")};var it=/-./g;nt.toCamelCase=function(t){return t.indexOf("-")>=0?t.replace(it,(function(t){return t.charAt(1).toUpperCase()})):t};var st=function(t,e,n){let i,s,r;for(;(i=n)&&(n=n.next);)(s=n.listener)&&(r=n.path&&s[n.path]?e?s[n.path].apply(s,e):s[n.path]():e?s.apply(n,e):s.call(n)),n.times&&--n.times<=0&&(i.next=n.next,n.listener=null)};nt.listen=function(t,e,n,i){let s,r,h;return s=t.__listeners__||(t.__listeners__={}),r=s[e]||(s[e]={}),h=r.tail||(r.tail=r.next={}),h.listener=n,h.path=i,r.tail=h.next={},h},nt.once=function(t,e,n){let i=nt.listen(t,e,n);return i.times=1,i},nt.unlisten=function(t,e,n,i){let s,r,h=t.__listeners__;if(h&&(s=h[e]))for(;(r=s)&&(s=s.next);)if(s==n||s.listener==n){r.next=s.next,s.listener=null;break}},nt.emit=function(t,e,n){var i;(i=t.__listeners__)&&(i[e]&&st(0,n,i[e]),i.all&&st(0,[e,n],i.all))},nt.scheduler=new class{constructor(){var t=this;this.queue=[],this.stage=-1,this.batch=0,this.scheduled=!1,this.listeners={},this.$promise=null,this.$resolve=null,this.$ticker=function(e){return t.scheduled=!1,t.tick(e)}}add(t,e){if((e||-1==this.queue.indexOf(t))&&this.queue.push(t),!this.scheduled)return this.schedule()}listen(t,e){var n;return(n=this.listeners)[t]||(n[t]=new Set),this.listeners[t].add(e)}unlisten(t,e){return this.listeners[t]&&this.listeners[t].delete(e)}get promise(){var t=this;return this.$promise||(this.$promise=new Promise((function(e){return t.$resolve=e})))}tick(t){var e,n=this,i=this.queue;if(this.ts||(this.ts=t),this.dt=t-this.ts,this.ts=t,this.queue=[],this.stage=1,this.batch++,i.length)for(let t=0,s=(e=i)?e.toIterable?e.toIterable():e:[],r=s.length;t<r;t++){let e=s[t];"string"==typeof e&&this.listeners[e]?this.listeners[e].forEach((function(t){return t.tick instanceof Function?t.tick(n):t instanceof Function?t(n):void 0})):e instanceof Function?e(this.dt,this):e.tick&&e.tick(this.dt,this)}return this.stage=2,this.stage=this.scheduled?0:-1,this.$promise&&(this.$resolve(this),this.$promise=this.$resolve=null),this}schedule(){return this.scheduled||(this.scheduled=!0,-1==this.stage&&(this.stage=0),k(this.$ticker)),this}},nt.$commit=function(){return nt.scheduler.add("render")},nt.commit=function(){return nt.scheduler.add("render"),nt.scheduler.promise},nt.tick=function(){return nt.commit(),nt.scheduler.promise},nt.mount=function(t,e){let n=e||y.body,i=t;if(t instanceof Function){let e={_:n},s=function(){return nt.ctx=e,t(e)};i=s(),nt.scheduler.listen("render",s)}else i.__F|=64;return n.appendChild(i)};var rt={get(t,e){let n=t,i=void 0;for(;n&&null==i;)(n=n.$parent)&&(i=n[e]);return i}};tt(e,{get $context(){return this.$context_||(this.$context_=new Proxy(this,rt))},get $parent(){return this.up$||this.parentNode},init$(){return this},replaceWith$(t){return t instanceof e||!t.replace$?this.parentNode.replaceChild(t,this):t.replace$(this),t},insertInto$(t){return t.appendChild$(this),this},insertBefore$(t,e){return this.insertBefore(t,e)},insertBeforeBegin$(t){return this.parentNode.insertBefore(t,this)},insertAfterEnd$(t){return this.nextSibling?this.nextSibling.insertBeforeBegin$(t):this.parentNode.appendChild(t)},insertAfterBegin$(t){return this.childNodes[0]?this.childNodes[0].insertBeforeBegin$(t):this.appendChild(t)}}),tt(i,{replaceWith$(t){return t&&t.joinBefore$?t.joinBefore$(this):this.parentNode.insertBefore$(t,this),this.parentNode.removeChild(this),t}}),tt(s,{log(...t){return console.log(...t),this},emit(t,e,n={bubbles:!0}){null!=e&&(n.detail=e);let i=new CustomEvent(t,n);this.dispatchEvent(i);return i},slot$(t,e){return this},on$(t,e,n){let i,s="on$"+t;this[s]instanceof Function&&(i=this[s](e,n)),i=new I(e,n);let r=e.capture,h=e.passive,o=r;return h&&(o={passive:h,capture:r}),/^(pointerdrag|touch)$/.test(t)&&(i.type=t,t="pointerdown"),this.addEventListener(t,i,o),i},text$(t){return this.textContent=t,this},insert$(t,e,s){let r=typeof t;if("undefined"===r||null===t){if(s&&s instanceof i)return s;let t=y.createComment("");return s?s.replaceWith$(t):t.insertInto$(this),t}if(t===s)return t;if("object"!==r){let i,r=t;return 128&e&&256&e?void(this.textContent=r):s?s instanceof n?(s.textContent=r,s):(i=y.createTextNode(r),s.replaceWith$(i,this),i):(this.appendChild$(i=y.createTextNode(r)),i)}return s?s.replaceWith$(t,this):t.insertInto$(this),t},get flags(){return this.$flags||(this.$flags=new F(this),this.flag$==s.prototype.flag$&&(this.flags$ext=this.className),this.flagDeopt$()),this.$flags},flag$(t){let e=this.flags$ns;this.className=e?e+(this.flags$ext=t):this.flags$ext=t},flagDeopt$(){var t=this;this.flag$=this.flagExt$,this.flagSelf$=function(e){return t.flagSync$(t.flags$own=e)}},flagExt$(t){return this.flagSync$(this.flags$ext=t)},flagSelf$(t){return this.flagDeopt$(),this.flagSelf$(t)},flagSync$(){return this.className=(this.flags$ns||"")+(this.flags$ext||"")+" "+(this.flags$own||"")+" "+(this.$flags||"")},open$(){return this},close$(){return this},end$(){this.render&&this.render()},css$(t,e,n){return this.style[t]=e},css$var(t,e,n,i){let s=nt.toStyleValue(e,n,i);this.style.setProperty(t,s)}}),s.prototype.appendChild$=s.prototype.appendChild,s.prototype.removeChild$=s.prototype.removeChild,s.prototype.insertBefore$=s.prototype.insertBefore,s.prototype.replaceChild$=s.prototype.replaceChild,s.prototype.set$=s.prototype.setAttribute,s.prototype.setns$=s.prototype.setAttributeNS,f.prototype.insert$=s.prototype.insert$,f.prototype.appendChild$=s.prototype.appendChild$,nt.createLiveFragment=function(t,e,n){var i=y.createDocumentFragment();return i.setup$(t,e),n&&(i.up$=n),i},nt.createIndexedFragment=function(t,e){return new q(t,e)},nt.createKeyedFragment=function(t,e){return new D(t,e)};const ht={};function ot(t){return t?t.toIterable?t.toIterable():t:[]}nt.tags=new class{constructor(){this.types={}}lookup(t){return this.types[t]}get(t,e){return t&&"component"!=t?this.types[t]?this.types[t]:e&&et[e]?et[e]:et.customElements.get(t)||H:H}create(t){return this.types[t]?this.types[t].create$():y.createElement(t)}define(t,e,n={}){this.types[t]=e,e.nodeName=t;let i=e.prototype,s=i._ns_;if(n.ns){let t=n.ns,e=t+" "+t+"_ ";s&&(e+=i.flags$ns,t+=" "+s),i._ns_=t,i.flags$ns=e}return n.extends?ht[t]=e:et.customElements.define(t,e),e}},nt.registerAsset=function(t,e){return W[t]=e,globalThis},nt.createAssetElement=function(t,n,i){let s=W[t];if(!s.node){let t=y.createElementNS("http://www.w3.org/2000/svg","svg");for(let e,n,i=s.attributes,r=0,h=Object.keys(i),o=h.length;r<o;r++)e=h[r],n=i[e],t.setAttribute(e,n);t.innerHTML=s.content,t.className.baseVal=s.flags.join(" "),s.node=t}let r=s.node.cloneNode(!0),h=r.flags$ns=r.className.baseVal+" ";return r.className.baseVal=h+i,n&&n instanceof e&&r.insertInto$(n),r},nt.getElementById=function(t){return y.getElementById(t)},nt.createElement=function(t,n,i,s,r){var h=y.createElement(t);return i&&(h.className=i),null!==s&&h.text$(s),n&&n instanceof e&&h.insertInto$(n),h},nt.createComponent=function(t,e,n,i,s){var r;return"string"!=typeof t&&t&&t.nodeName&&(t=t.nodeName),ht[t]?((r=ht[t].create$(r)).slot$=H.prototype.slot$,r.__slots={}):r=y.createElement(t),r.up$=e,r.init$(),null!==i&&r.slot$("__").text$(i),(n||r.flags$ns)&&r.flag$(n||""),r},nt.createSVGElement=function(t,n,i,s,r){var h=y.createElementNS("http://www.w3.org/2000/svg",t);return i&&(h.className.baseVal=i),n&&n instanceof e&&h.insertInto$(n),h};const at=new(globalThis.WeakMap||Map),lt={threshold:[0]},ut={};function ct(t=lt){let e=t.threshold.join("-")+t.rootMargin,n=t.root||ut,i=at.get(n);return i||at.set(n,i={}),i[e]||(i[e]=new IntersectionObserver((s="intersect",function(t,e){let n=e.prevRatios||(e.prevRatios=new WeakMap);for(let i=0,r=ot(t),h=r.length;i<h;i++){let t=r[i],h=n.get(t.target)||0,o=t.intersectionRatio,a={entry:t,ratio:o,from:h,delta:o-h,observer:e},l=new $(s,{bubbles:!1,detail:a});l.entry=t,l.isIntersecting=t.isIntersecting,l.delta=a.delta,l.ratio=a.ratio,n.set(t.target,o),t.target.dispatchEvent(l)}}),t));var s}var dt;p.intersect$handle=function(){let t=this.event.detail.observer;return this.modifiers._observer==t},p.intersect$in=function(){return this.event.delta>=0&&this.event.entry.isIntersecting},p.intersect$out=function(){return this.event.delta<0},s.prototype.on$intersect=function(t,e){let n;if(t.options){let e=[],i={threshold:e};for(let n=0,r=ot(t.options),h=r.length;n<h;n++){let t=r[n];t instanceof s?i.root=t:"number"==typeof t&&e.push(t)}if(1==e.length){let t=e[0];if(t>1)for(e[0]=0;e.length<t;)e.push(e.length/(t-1))}0==e.length&&e.push(0),n=ct(i)}else n=ct();return t._observer=n,n.observe(this)},s.prototype.on$selection=function(t,e){return function(){if(!dt)return dt=function(t){if(t.handled$)return;t.handled$=!0;let e=document.activeElement;if(e&&e.matches("input,textarea")){let t=new $("selection",{detail:{start:e.selectionStart,end:e.selectionEnd}});return e.dispatchEvent(t)}},document.addEventListener("selectionchange",dt)}()};var ft=null;!function(t,e){var n=Object.getOwnPropertyDescriptors(e);Object.defineProperties(t.prototype,n)}(s,{on$resize(t,e){return(globalThis.ResizeObserver||ft||(console.warn(":resize not supported in this browser"),ft={observe:function(){return!0}}),ft||(ft=new ResizeObserver((function(t){for(let n=0,i=(e=t)?e.toIterable?e.toIterable():e:[],s=i.length;n<s;n++){let t=i[n],e=new $("resize",{bubbles:!1,detail:t});e.entry=t,e.rect=t.contentRect,e.width=t.target.offsetWidth,e.height=t.target.offsetHeight,t.target.dispatchEvent(e)}var e})))).observe(this)}});