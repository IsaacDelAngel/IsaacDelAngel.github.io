!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=85)}([function(t,e,n){t.exports=n(86)},function(t,e,n){(function(t){function i(t){return t?t.toArray?t.toArray():t:[]}e.VERSION=2,e.SPIV=2,e.MSG={AUTH:1,PUSH:2,STATS:3,PING:4,PONG:5,CHANGE:6,STATE:7,PREPARE:8,RECSTART:9,RECSTOP:10,CALLBACK:11,PUBLISH:12,CONNECTED:13,FORK:15,AUTOSAVE:16,RECREVERT:17,ROLLBACK:18,JOIN:20,LEAVE:21,SYNC:22,SYNCED:23,ERROR:24,ALERT:25,SID:26,TRACKING:27,VIEWSTATE:28,STREAMAPPEND:100,STREAMSTATE:101,STREAMRANGE:102,STREAMGETRANGE:103,STREAMTRIM:104,STREAMERROR:105,STREAMFLATTEN:106,CASTLOCK:110,OK:200,UNAUTHORIZED:401,ERR_NOTFOUND:404,REQUEST_TIMEOUT:408,ERR_PAYLOAD_TOO_LARGE:413,ERR_LOCKED:423,ERR_OUT_OF_RANGE:416,RELOAD_STYLES:1e3,UPDATES_AVAILABLE:1001,NOTIFICATIONS_AVAILABLE:1010},e.ACTION_MAP={},e.WIDGET_TYPE_MAP={},e.GRANT={SHOW:1,EDIT:2},e.DIRTY={SIZE:1,LAYOUT:2};var r=e.ACTION={};window.PROTOCOL_ACTION=r;var o=e.WIDGET={CREATE:15,FLAG:17,UNFLAG:18,UPDATE:20,APPEND:21,CONFIGURE:25,BATCH:27,LAYOUT:28};o.FLAGS={Created:1,Enabled:2,Deleted:4};var s=e.CAST=Object.create(o),a=e.FILE=Object.create(o),u=(e.LAYOUT=Object.create(o),e.AGENT=Object.create(o),e.POINTER=Object.create(o)),p=e.SIMULATOR=Object.create(o),c=e.CONSOLE=Object.create(o),h=e.STREAM={},l=e.DOM={},d=e.KEYS=r.KEY_TYPES=["state","pointer","layout","selection","file","focus","hover","active","enabled","visible","busy","fontSize","width","height","resizing","baseStyle","area","externaljs","colspan","hoverEntry","viewbox","class","style","title","log","info","warn","error","alert","meta","function","element","instance","udef","more","array","div","p","h1","h2","h3","h4","h5","h6","span","b","i","u","get","post","put","options","left","top","contentLeft","contentTop","contentWidth","contentheight","scrollTop","scrollLeft","scrollWidth","scrollHeight","lineHeight","maxWidth","maxHeight"];for(let t=0,e=i(d),n=e.length;t<n;t++)d[e[t].toUpperCase()]=t;e.SCON={parsedURICache:{},clone:function(t){return JSON.parse(JSON.stringify(t))},compare:function(t,e){return JSON.stringify(t)==JSON.stringify(e)},keyToRef:function(t){return d.indexOf(t)>=0?d.indexOf(t):t},refToKey:function(t){return"number"==typeof t&&d[t]||t},paths:{},strToPath:function(t){if(this[t])return this[t];let e=t.split(".");return e=e.map((function(t){return/^\-?\d+$/.test(t)?parseInt(t):t})),this[t]=1==((n=e)&&(n.len instanceof Function?n.len():n.length)||0)?e[0]:e;var n},pathToStr:function(t){return t instanceof Array?t.join("."):String(t)},decodeURI:function(t){if(!("string"==typeof t||t instanceof String))return null;let e=this.parsedURICache[t];if(e)return e;let n=t.match(/(scrimba\:\/\/)?(c[\w\-]+)(\@(\d+))?/),r={cid:n[2],index:n[4]};var o;let s=(o=i(t.substr(n[0].length).split("#")))[0],a=o[1];return r.path=s,a&&(r.rangeString=a,r.selection=this.decodeRangeString(a)),this.parsedURICache[t]=r},decodeRangeString:function(t){let e=(t=t.replace(/\_/g,":")).match(/L(\d+)(\:(\d+))?(-L?(\d+)(\:(\d+))?)?/).map((function(t){return t?parseInt(t):null})),n=e[1],i=e[3],r=e[5],o=e[7];return r?[n,i||1,r,o||1,!i&&!o]:[n,i||1,n,i||1,!i]}};function f(){}e.LCRange=f,f.lclcToArray=function(t,e,n,i){return n==t&&i==e||null==n&&null==i?[t,e]:n==t?[t,e,i-e]:[t,e,i-e,n-t]},f.rangeToArray=function(t){var e=[t.startLineNumber,t.startColumn,t.endColumn-t.startColumn,t.endLineNumber-t.startLineNumber];return 0==e[3]&&(e.pop(),0==e[2]&&e.pop()),e},f.selectionToArray=function(t){var e=[t.selectionStartLineNumber,t.selectionStartColumn,t.positionColumn-t.selectionStartColumn,t.positionLineNumber-t.selectionStartLineNumber];return 0==e[3]&&(e.pop(),0==e[2]&&e.pop()),e},r.SET=1,r.PATCH=2,r.WIDGET_CREATE=o.CREATE=3,r.LCINSERT=a.LCINSERT=4,r.LCDELETE=a.LCDELETE=5,r.LCEDIT=a.LCEDIT=6,r.LCSELECTION=a.LCSELECTION=7,r.LAYOUT=8,r.BROWSER_LAYOUT=9,r.NODE_LAYOUT=10,r.POINTER_UPDATE=12,r.CONSOLE_LOG=c.LOG=16,r.CONSOLE_CLEAR=c.CLEAR=17,r.CONSOLE_VAL_EXPAND=c.VAL_EXPAND=18,r.DOM_MUTATE=l.MUTATE=21,r.DOM_EVENT=l.EVENT=22,r.DOM_SCROLL=l.SCROLL=23,r.DOM_SELECTION=l.SELECTION=24,r.DOM_FOCUSIN=l.FOCUSIN=25,r.DOM_HOVERIN=l.HOVERIN=26,r.DOM_ACTIVEIN=l.ACTIVEIN=27,r.PAGE_LOAD=28,r.PAGE_LOADED=29,r.PAGE_LOG=30,r.PAGE_REQUEST=31,r.PAGE_HISTORY=32,r.RECSTART=s.RECSTART=33,r.RECSTOP=s.RECSTOP=34,r.PING=s.PING=35,r.SNAPSHOT=s.SNAPSHOT=36,r.FORK=s.FORK=37,r.BRANCH=s.BRANCH=38,r.TRIM=39,r.PAGE_UNLOAD=50,r.LOCK=100,r.UNLOCK=101,r.FS_RENAME=110,r.FS_REMOVE=111,r.FS_MOVE=112,r.WIDGET_FLAG=o.FLAG=126,r.WIDGET_UNFLAG=o.UNFLAG=127,r.WIDGET_APPEND=o.APPEND=128,r.SIM_BUILD=p.BUILD=200,r.SIM_RESULT=p.RESULT=201,r.DOM_FOCUSOUT=l.FOCUSOUT=202,r.DOM_HOVEROUT=l.HOVEROUT=203,r.DOM_ACTIVEOUT=l.ACTIVEOUT=204,r.DOM_INSERT=l.INSERT=206,r.DOM_RESET=l.RESET=207,r.LCSCROLL=a.SCROLL=210,s.WORKSPACE=-1,s.CONSOLE=-2,s.SIMULATOR=-3,s.INSPECTOR=-4,s.AGENT=-5,s.STREAM=-6,s.BROWSER=-7,s.FS=-8,s.PRIMARY_EDITOR=-9,s.EXPLORER_PANEL=-10,s.DEPENDENCIES_PANEL=-11,s.SLIDES=-12,s.SIDEBAR=-13,h.TRIM=50,c.LOG_TYPES={LOG:60,WARN:61,ERROR:62,RESULT:63,INFO:71,META:72,META_ERROR:73},c.TYPES={MARKER:"~",NULL:1,UNDEFINED:2,ELEMENT:3,FUNCTION:4,INSTANCE:5,ERROR:6},u.STATEFLAGS={LEFT_BUTTON:1,RIGHT_BUTTON:2,MIDDLE_BUTTON:4,HIDDEN:8,TRANSITION:16,HIGHLIGHT:32,CTRL:64,ALT:128,SHIFT:256},u.FLAGS={Created:1,Enabled:2,Deleted:4,Visible:8},u.STYLES={DEFAULT:0,ROW:1,SMALL_FLIPPED:2};e.POINTERMASK={LEFT_BUTTON:1,RIGHT_BUTTON:2,MIDDLE_BUTTON:4},e.LAYOUTMASK={SCALED:1,BOUNDLESS:2};l.MUTS={RESET:1,INSERT:2,REMOVE:3,INIT:4,INSERT_AFTER:5,INSERT_ADJACENT:6,SETATTR:10,SETPROP:11,SETTEXT:12,POS:["beforebegin","afterbegin","beforeend","afterend"],NAMES:{class:1,value:2,checked:3,style:4},NAME_MAP:{1:"class",2:"value",3:"checked",4:"style"}};var y=n(8),m=e.Bufferish=y.Decoder.prototype.bufferish;function g(t,e){this._socket=e,this._data=new Uint8Array(t);var n=new y.Decoder;if(n.write(this._data),this._params=n.fetch(),"number"==typeof this._params||this._params instanceof Number){let t=n.offset;this._ref=this._params,this._data=this._data.subarray(t),this._params=n.fetch(),this._offset=n.offset-t}else this._offset=n.offset;this.CODE=this._params[0],this[1]=this._params[1],this[2]=this._params[2],this[3]=this._params[3],this[4]=this._params[4]}e.Packet=g,g.prototype.params=function(t){return this._params},g.prototype.setParams=function(t){return this._params=t,this},g.prototype.socket=function(t){return this._socket},g.prototype.setSocket=function(t){return this._socket=t,this},g.prototype.data=function(t){return this._data},g.prototype.setData=function(t){return this._data=t,this},g.prototype.replied=function(t){return this._replied},g.prototype.setReplied=function(t){return this._replied=t,this},g.prototype.payloadSize=function(){return this._data.byteLength-this._offset},g.prototype.retain=function(){return this},g.prototype.payload=function(){return this._payload||(this._payload=this._data.subarray(this._offset))},g.prototype.reply=function(e){return e instanceof Array&&(e=y.encode(e)),this._ref&&(e=m.concat([y.encode(this._ref),e])),this._replied=!0,this.socket().setHeader instanceof Function?(this.socket().setHeader("Content-Type","application/octet-stream"),this.socket().setHeader("Content-Length",e.length),this.socket().send(new t(e,"binary"))):this.socket().send(e),this},g.prototype.sid=function(){return this.socket().sid}}).call(this,n(29).Buffer)},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(128).Stack,a=n(54).Menu,u=n(129).MenuItem,p=n(34),c=p.Button,h=p.IconButton,l=n(130),d=l.TextField,f=l.TextArea,y=l.SelectField,m=n(131).ListItem,g=n(55).Popover,_=n(132).Dialog,v=n(58).Indicator,b=n(57).Form,w=n(56).Snackbar,x=n(133).Tile,S=n(21).Icon,T=n(59).Queue,k=n(134).Actionable,A=n(60),E={},C={},D=function(t){let e=this,n=e.uxa().action();return n&&e.trigger("uxa:action",n),"string"==typeof n||n instanceof String?(t.halt().silence(),e.trigger(n,e.uxa().contextData())):n instanceof Array?(t.halt().silence(),e.trigger(n[0],n.slice(1))):n instanceof Function?(t.halt().silence(),n.call(e,t)):t._responder=null};function O(t){this._owner=t,this._options={}}O.prototype.__md={watch:"mdDidSet",name:"md"},O.prototype.md=function(t){return this._md},O.prototype.setMd=function(t){var e=this.md();return t!=e&&(this._md=t),t!=e&&this.mdDidSet&&this.mdDidSet(t,e,this.__md),this},O.prototype.__action={watch:"actionDidSet",name:"action"},O.prototype.action=function(t){return this._action},O.prototype.setAction=function(t){var e=this.action();return t!=e&&(this._action=t),t!=e&&this.actionDidSet&&this.actionDidSet(t,e,this.__action),this},O.prototype.open=function(t,e){return void 0===e&&(e={}),s.show(t,this._owner,e)},O.prototype.menu=function(t){return this},O.prototype.confirm=function(t){var e=this;return new Promise((function(n,i){var o,s=(o=(o=r(_)).setContent(o.$.A||r("span",o.$,"A",o),2)).on$(0,["uxadismiss",function(){return n(!1)}],e).on$(1,["uxasubmit",function(){return n(!0)}],e).end((o.$.A.setNestedAttr("uxa","md",t).end(),!0));return e.open(s)}))},O.prototype.flash=function(t,e){return t instanceof Error&&(t=t.message,e="dark"),("string"==typeof t||t instanceof String)&&(t=r(w).setFlag(0,e||"dark").setNestedAttr("uxa","md",t).end()),t instanceof w&&this.open(t),this},O.prototype.set=function(t,e){return this[function(t){return C[t]||(C[t]=i.toCamelCase("set-"+t))}(t)](e)},O.prototype.mdDidSet=function(t){return this._owner.dom().innerHTML=E[e=t]||(E[e]=function(t,e){return-1==t.indexOf("\n")&&0==e.indexOf("<p>")?e.slice(3,e.lastIndexOf("</p>")):e}(e,A(e)));var e},O.prototype.actionDidSet=function(t,e){return this._owner.ontap=D,this},O.prototype.contextData=function(){for(var t=null,e=this._owner;e;){if(t=e.data())return t;e=e.parent()}return null},O.prototype.queue=function(){return this._queue||(this._queue=new T(this._owner))},o.extendTag("element",(function(t){t.prototype.uxa=function(){return this._uxa||(this._uxa=new O(this))},t.prototype.uxaSetAttribute=function(t,e){return this.uxa().set(t,e)}})),i.Event.prototype.uxa=function(){return this.target().uxa()};var M=e.UXA=new O(null);c=e.Button=c,h=e.IconButton=h,a=e.Menu=a,u=e.MenuItem=u,d=e.TextField=d,f=e.TextArea=f,y=e.SelectField=y,m=e.ListItem=m;u=e.MenuItem=u;g=e.Popover=g,_=e.Dialog=_,b=e.Form=b,v=e.Indicator=v,w=e.Snackbar=w,x=e.Tile=x,S=e.Icon=S,k=e.Actionable=k;window.UXA=M},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(0),o=r.createElementFactory(),s=n(1),a=s.WIDGET,u=s.SCON,p=(s.ACTION,s.WIDGET_TYPE_MAP),c=n(77).Widgets,h=n(184).WidgetOptions,l=n(11).StreamAction;a.FLAGS;function d(t,e,n){this.__={},this._owner=t,this._id=e.id,this._data=e,this._state={v:0},this._event=n,this._branch=n&&n.branch()||this.space().branch(),this._isLocal=!this.event()||this.event().LOCAL,this.setup()}e.Widget=d,d.prototype.id=function(t){return this._id},d.prototype.setId=function(t){return this._id=t,this},d.prototype.owner=function(t){return this._owner},d.prototype.setOwner=function(t){return this._owner=t,this},d.prototype.data=function(t){return this._data},d.prototype.setData=function(t){return this._data=t,this},d.prototype.state=function(t){return this._state},d.prototype.setState=function(t){return this._state=t,this},d.prototype.localData=function(t){return this._localData},d.prototype.setLocalData=function(t){return this._localData=t,this},d.prototype.isLocal=function(t){return this._isLocal},d.prototype.setIsLocal=function(t){return this._isLocal=t,this},d.prototype.event=function(t){return this._event},d.prototype.setEvent=function(t){return this._event=t,this},d.register=function(t,e){return p[t]||(p[t]=this),c.register(t,this)},d.load=function(t,e,n){return t.widgets().get(e.id)||t.widgets().create(e.type,e,n)},d.option=function(t,e){void 0===e&&(e={});var n=this.prototype,o=n._schema_;if(e.name=t,!n.hasOwnProperty("_schema_")){if(n._schema_=[],o)for(let t,e=0,n=i(o),r=n.length;e<r;e++)t=n[e],this.option(t.name,t);o=n._schema_}if(!o[t])return o.push(e),o[t]=e,n[t]=function(e){return this.options().get(t,e)},n[r.toCamelCase("set-"+t)]=function(n){return this.options().set(t,n,e),this},e;o[t]=e},d.register("widget"),d.prototype.id=function(){return this._id},d.prototype.key=function(){return this.id()},d.prototype.v=function(){return this._options?this._options._v:0},d.prototype.options=function(){return this._options||(this._options=new h(this))},d.prototype.optionsDidUpdate=function(t){return this},d.prototype.delay=function(t,e,n){var i,r=this;return r._timeouts||(r._timeouts={}),clearTimeout(r._timeouts[t]),n||(n=r._timeouts[i=t+"FN"]||(r._timeouts[i]=function(){return r[t]()})),-1!=e&&(r._timeouts[t]=setTimeout(n,e)),r},d.prototype.async=function(t){var e=this;e._asyncTriggers||(e._asyncTriggers={});var n=e._asyncTriggers[t]||(e._asyncTriggers[t]=function(){return e[t]()});return r.TICKER.add(n),e},d.prototype.__uid=function(){if(this._owner==this.space())return this.id();if(this._wid)return this._wid;for(var t=this,e=this._wid=[];t instanceof d;)e.unshift(t.id()),t=t._owner;return this._wid},d.prototype.__lookup=function(t,e){var n;return void 0===e&&(e=0),t instanceof Array?(n=this.getChildById(t[e++]),e==t.length?n:n.__lookup(t,e)):this.getChildById(t)},d.prototype.getChildById=function(t){return this.widgets().get(t)},d.prototype.setup=function(){return this},d.prototype.space=function(){return this._space||(this._space=this._owner&&this._owner.space())},d.prototype.branch=function(){return this._branch},d.prototype.root_=function(){return this.space()},d.prototype.client=function(){return this.space().client()},d.prototype.api=function(){return this.space().api()},d.prototype.tick_=function(){return this},d.prototype.widgets=function(){return this._widgets||(this._widgets=new c(this))},d.prototype.isEnabled=function(){return!0},d.prototype.getAttribute=function(t){return this.data()[t]},d.prototype.setAttribute=function(t,e){return this.data()[t]=e,this},d.prototype.configure=function(t){return this.options().set(t),this},d.prototype.commitAdd=function(){return this.mount_()},d.prototype.revertAdd=function(){return this.unmount_()},d.prototype.commitDel=function(){return this.unmount_()},d.prototype.revertDel=function(){return this.mount_()},d.prototype.mount_=function(){return this.owner().widgets().add(this,this._id),this},d.prototype.unmount_=function(){return this.owner().widgets().remove(this),this},d.prototype.preload=function(){return this},d.prototype.node=function(){return this._node||(this._node=o("div"))},d.prototype.title=function(){return"Widget"},d.prototype.marker=function(){return null},d.prototype.log=function(){for(var t,e=arguments,n=e.length,i=new Array(n>0?n:0);n>0;)i[n-1]=e[--n];return(t=this.api()).log.apply(t,[].concat(["widget:"+this.TYPE],Array.from(i)))},d.prototype.push_=function(t,e,n){n||(n=this.state());let i=this.action(t,e,n);return this.root_().__push(i,n)},d.prototype.batch_=function(t,e){e||(e=this.state());for(let n,r=0,o=i(t),s=o.length;r<s;r++)n=o[r],this.push_(n[0],n[1],e);return this},d.prototype.action=function(t,e,n){return l.type(t).build(e,n,this)},d.prototype.append=function(t,e,n,i){return this},d.prototype.apply=function(t,e,n,i){return!n},d.prototype.revert=function(t,e,n,i){return!n},d.prototype.destroy_=function(){return console.warn("destroy widget"),this.owner().widgets().remove(this)},d.prototype.persist_=function(){return this},d.prototype.synced_=function(){return this._options&&this._options.synced_&&this._options.synced_(),this},d.prototype.focus_=function(){return this.space().agent()&&(this.space().agent().setFocus(this),this)},d.prototype.blur_=function(){var t;if(this.isFocused())return console.log("try to blur widget!",this),this.space().agent().setFocus(t=this.space().agent().prevFocus()),t},d.prototype.isFocused=function(){return this.space().agent()&&this.space().agent().focus()==this},d.prototype.toggleFocus=function(){return this.isFocused()?this.blur_():this.focus_()},d.prototype.serialize=function(t,e){this.persist_();var n=u.clone(this.data());if(n.state,delete n.state,t.local&&this._options&&this._options._overrides)for(let t,e,i=this._options._overrides,r=0,o=Object.keys(i),s=o.length;r<s;r++)e=o[r],t=i[e],n[e]=t;return this._widgets&&(n.widgets=this._widgets.map((function(n){return n.serialize(t,n,e)})).filter((function(t){return t}))),n},d.prototype.deserialize=function(t,e){var n=this.data();for(let e,i,r=0,o=Object.keys(n),s=o.length;r<s;r++)i=o[r],e=n[i],void 0===t[i]&&(t[i]=e);return this._data=t,this._options&&this._options._v++,e.items.push(this),this.owner().widgets().add(this,this._id),t.widgets&&this.deserializeWidgets(t.widgets,e),this},d.prototype.deserializeWidgets=function(t,e){e.stack.push(this);for(let n,r=0,o=i(t),s=o.length;r<s;r++)n=o[r],d.load(this,n,e.event).deserialize(n,e);return e.stack.pop()},d.prototype.deserialized=function(){return this.commitAdd(),this},d.prototype.emit=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return r.emit(this,t,i)},d.prototype.on=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return r.listen.apply(r,[].concat([this,t],Array.from(i)))},d.prototype.un=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return r.unlisten.apply(r,[].concat([this,t],Array.from(i)))},d.prototype.createWidget=function(t,e){return void 0===e&&(e={}),t.id=this.widgets().getNextId(),this.push_(a.CREATE,[this.__uid(),t],e)},d.prototype.isLocal=function(){return this._isLocal},d.prototype.dispose=function(){return this},d.prototype.valueOf=function(t){return this.__uid()}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r={};e.delay=r.delay=function(t){return void 0===t&&(t=1e3),new Promise((function(e,n){return setTimeout(e,t)}))},e.msToStr=r.msToStr=function(t,e){t||(t=0);var n=(t=Math.round(t))<0;t<0&&(t=-t);var i=Math.floor(t%6e4/1e3),r=Math.floor((t-1e3*i)/6e4);60==i&&(i=0,r++);var o=r+":"+("0"+i).slice(-2);return e&&(o=o+"."+("000"+t%1e3).slice(-3)),n&&(o="-"+o),o},e.refreshPseudoClass=r.refreshPseudoClass=function(t,e,n,i){var r=document.body,o=[];for(i&&(n&&n.classList&&n.classList.remove(i),e&&e.classList&&e.classList.add(i));n&&n!=r&&(!e||!n.contains(e));)n.classList&&n.classList.remove(t),n=n.parentNode;for(;e&&e!=r&&r.contains(e);)e.classList&&(o.push(e),e.classList.add(t)),e=e.parentNode;return o},e.callClosest=r.callClosest=function(t,e,n){if(void 0===n&&(n=[]),t){for(t=t._dom||t;t;){if(t._tag&&t._tag[e]instanceof Function)return t._tag[e].apply(t._tag,n);t=t.parentNode}return null}};var o=n(8),s=o.Decoder.prototype.bufferish;e.mpconcat=r.mpconcat=function(t){return s.concat(t)},e.mpencode=r.mpencode=function(){for(var t=arguments,e=t.length,n=new Array(e>0?e:0);e>0;)n[e-1]=t[--e];var r=new o.Encoder({});for(let t=0,e=i(n),o=e.length;t<o;t++)r.write(e[t]);return r.read()},e.delay=r.delay=function(t){return void 0===t&&(t=1e3),new Promise((function(e,n){return setTimeout(e,t)}))},e.msToStr=r.msToStr=function(t,e){var n=Math.floor(t%6e4/1e3),i=Math.floor((t-1e3*n)/6e4);60==n&&(n=0,i++);var r=i+":"+("0"+n).slice(-2);return e&&(r=r+"."+("000"+t%1e3).slice(-3)),r},e.uuid=r.uuid=function(t,e){for(e=t="";t++<36;)e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-";return e},e.rndstr=r.rndstr=function(t){return void 0===t&&(t=16),r.uuid().replace(/\-/g,"").substr(0,t)}},function(t,e,n){var i=e.global=n(103),r=e.hasBuffer=i&&!!i.isBuffer,o=e.hasArrayBuffer="undefined"!=typeof ArrayBuffer,s=e.isArray=n(30);e.isArrayBuffer=o?function(t){return t instanceof ArrayBuffer||f(t)}:g;var a=e.isBuffer=r?i.isBuffer:g,u=e.isView=o?ArrayBuffer.isView||_("ArrayBuffer","buffer"):g;e.alloc=d,e.concat=function(t,n){n||(n=0,Array.prototype.forEach.call(t,(function(t){n+=t.length})));var i=this!==e&&this||t[0],r=d.call(i,n),o=0;return Array.prototype.forEach.call(t,(function(t){o+=l.copy.call(t,r,o)})),r},e.from=function(t){return"string"==typeof t?y.call(this,t):m(this).from(t)};var p=e.Array=n(107),c=e.Buffer=n(108),h=e.Uint8Array=n(109),l=e.prototype=n(31);function d(t){return m(this).alloc(t)}var f=_("ArrayBuffer");function y(t){var e=3*t.length,n=d.call(this,e),i=l.write.call(n,t);return e!==i&&(n=l.slice.call(n,0,i)),n}function m(t){return a(t)?c:u(t)?h:s(t)?p:r?c:o?h:p}function g(){return!1}function _(t,e){return t="[object "+t+"]",function(n){return null!=n&&{}.toString.call(e?n[e]:n)===t}}},function(t,e){var n={VERSION:"1.5.5",createElementFactory:function(){return function(){return!0}},createTagScope:function(){return n},setTimeout:function(t,e){return setTimeout((function(){return e(),n.commit()}),t)},setInterval:function(t,e){return setInterval((function(){return e(),n.commit()}),t)},clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)},subclass:function(t,e){for(let n in e){let i;i=e[n],e.hasOwnProperty(n)&&(t[n]=i)}return t.prototype=Object.create(e.prototype),t.__super__=t.prototype.__super__=e.prototype,t.prototype.initialize=t.prototype.constructor=t,t},iterable:function(t){return t?t.toArray?t.toArray():t:[]},await:function(t){return t instanceof Array?(console.warn("await (Array) is deprecated - use await Promise.all(Array)"),Promise.all(t)):t&&t.then?t:Promise.resolve(t)}},i=/-./g,r={};n.toCamelCase=function(t){return t.indexOf("-")>=0?t.replace(i,(function(t){return t.charAt(1).toUpperCase()})):t},n.toSetter=function(t){return r[t]||(r[t]=n.toCamelCase("set-"+t))},n.indexOf=function(t,e){return e&&e.indexOf?e.indexOf(t):[].indexOf.call(t,e)},n.len=function(t){return t&&(t.len instanceof Function?t.len.call(t):t.length)||0},n.prop=function(t,e,n){if(t.defineProperty)return t.defineProperty(e,n)},n.attr=function(t,e,i){if(void 0===i&&(i={}),t.defineAttribute)return t.defineAttribute(e,i);let r=n.toCamelCase(e),o=n.toCamelCase("set-"+e),s=t.prototype;i.dom?(s[r]=function(){return this.dom()[e]},s[o]=function(t){return t!=this[e]()&&(this.dom()[e]=t),this}):(s[r]=function(){return this.getAttribute(e)},s[o]=function(t){return this.setAttribute(e,t),this})},n.propDidSet=function(t,e,n,i){let r=e.watch;r instanceof Function?r.call(t,n,i,e):("string"==typeof r||r instanceof String)&&t[r]&&t[r](n,i,e)};var o=function(t,e,n){for(var i,r;(i=n)&&(n=n.next);)(r=n.listener)&&(n.path&&r[n.path]?e?r[n.path].apply(r,e):r[n.path]():e?r.apply(n,e):r.call(n)),n.times&&--n.times<=0&&(i.next=n.next,n.listener=null)};n.listen=function(t,e,n,i){var r,o,s;return(s=(o=(r=t.__listeners__||(t.__listeners__={}))[e]||(r[e]={})).tail||(o.tail=o.next={})).listener=n,s.path=i,o.tail=s.next={},s},n.once=function(t,e,i){var r=n.listen(t,e,i);return r.times=1,r},n.unlisten=function(t,e,n,i){var r,o,s=t.__listeners__;if(s&&(r=s[e]))for(;(o=r)&&(r=r.next);)if(r==n||r.listener==n){o.next=r.next,r.listener=null;break}},n.emit=function(t,e,n){var i;(i=t.__listeners__)&&(i[e]&&o(0,n,i[e]),i.all&&o(0,[e,n],i.all))},n.observeProperty=function(t,e,i,r,o){return o&&"object"==typeof o&&n.unlisten(o,"all",t,i),r&&"object"==typeof r&&n.listen(r,"all",t,i),this},t.exports=n},function(t,e,n){function i(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=n(0);function s(t,e){this._owner=t,this._array=[],this._im={};for(let t=0,n=r(e),i=n.length;t<i;t++)this.add(n[t])}function a(){return s.apply(this,arguments)}e.List=s,s.prototype.array=function(t){return this._array},s.prototype.setArray=function(t){return this._array=t,this},s.prototype.add=function(t,e){return this.has(t)||(this._array.push(t),this.register(t,e),this.emit("add",t)),t},s.prototype.register=function(t,e){return null!=e?this._im[e]=t:t.key instanceof Function&&(this._im[e=t.key()]=t),e},s.prototype.deregister=function(t){return t&&t.key instanceof Function&&(this._im[t.key()]=null),this},s.prototype.getNextId=function(){for(var t=this._nextId||(this._nextId=0);++t<1e4;){if(!this._im[t])return this._nextId=t;t++}return null},s.prototype.at=function(t){return this._array[t]},s.prototype.first=function(){return this.at(0)},s.prototype.last=function(){return this.at(i(this)-1)},s.prototype.push=function(t){return this.add(t)},s.prototype.pop=function(){return this.remove(this.last())},s.prototype.shift=function(){return this.remove(this.first())},s.prototype.splice=function(t,e){for(var n=arguments,i=n.length,o=new Array(i>2?i-2:0);i>2;)o[--i-2]=n[i];for(let t=0,e=r(o),n=e.length;t<n;t++)this.register(e[t]);return this._array.splice.apply(this._array,[].concat([t,e],Array.from(o))),this},s.prototype.remove=function(t){this._im[t]&&(t=this._im[t]);var e=this.indexOf(t);return e>=0&&(this._array.splice(e,1),this.deregister(t),this.emit("remove",t)),this},s.prototype.delete=function(t){return this.remove(t)},s.prototype.move=function(t,e){var n=this.indexOf(t);return n>=0?(this._array[n]=null,this._array.splice(e,0,t),this._array.splice(this._array.indexOf(null),1)):(console.log("List.splice at",e,0,t),this._array.splice(e,0,t),this.register(t)),this},s.prototype.has=function(t){return this.indexOf(t)>=0||this._im[t]},s.prototype.get=function(t){if(this._im[t])return this._im[t]},s.prototype.map=function(t){return this.toArray().map(t)},s.prototype.forEach=function(t){return this.toArray().forEach(t)},s.prototype.first=function(t){return t?this.filter(t)[0]:this._array[0]},s.prototype.filter=function(t){return this.toArray().filter(t)},s.prototype.any=function(t){return this.filter(t).length>0},s.prototype.indexOf=function(t){return this._array.indexOf(t)},s.prototype.load=function(t){return this._array=t instanceof Array?t:t.toArray(),this},s.prototype.eachReversed=function(t){for(var e=i(this);e>0;)t(this._array[--e],e);return this},s.prototype.toArray=function(){return this._array},s.prototype.toClonedArray=function(){return this._array.slice(0)},s.prototype.len=function(){return this._array.length},s.prototype.lookup=function(t,e){return this},s.prototype.emit=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return o.emit(this,t,i)},s.prototype.on=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return o.listen.apply(o,[].concat([this,t],Array.from(i)))},s.prototype.un=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return o.unlisten.apply(o,[].concat([this,t],Array.from(i)))},s.prototype.toJSON=function(){return this._array},o.subclass(a,s),e.ModelList=a},function(t,e,n){e.encode=n(44).encode,e.decode=n(49).decode,e.Encoder=n(116).Encoder,e.Decoder=n(117).Decoder,e.createCodec=n(118).createCodec,e.codec=n(119).codec},function(t,e,n){var i=n(0);function r(t,e){var n=this;n._target=t,n._path=e,n._time=0,n._timeout=null,n._trigger=function(){return n.trigger()}}e.Delay=r,r.prototype.data=function(t){return this._data},r.prototype.setData=function(t){return this._data=t,this},r.delay=function(t,e,n,i){var o=t.__delays_||(t.__delays_={}),s=o[e]||(o[e]=new r(t,e));return-1==n?s.cancel():s.delay(n),s},r.prototype.async=function(t){var e=this;e._asyncTriggers||(e._asyncTriggers={});var n=e._asyncTriggers[t]||(e._asyncTriggers[t]=function(){return e[t]()});return i.TICKER.add(n),e},r.prototype.delay=function(t){let e=Date.now()+t;return this._timeout&&e>=this._time?this._time=e:(this._time=e,this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._trigger,t)),this},r.prototype.cancel=function(){return clearTimeout(this._timeout),this._timeout=null,this._time=null,this},r.prototype.trigger=function(){if(clearTimeout(this._timeout),this._timeout=null,this._time){let t=this._time-Date.now();if(t>3)return this.delay(t)}return this._target instanceof Function?this._target(this):this._target[this._path](this),this}},function(t,e,n){var i=n(0),r=n(22).Struct;function o(t){this._v=0,this._data=t}i.subclass(o,r),e.Dimensions=o,o.RESIZING=1,o.MOVING=2,o.PIN_TOP=4,o.PIN_RIGHT=8,o.PIN_BOTTOM=16,o.PIN_LEFT=32,o.desc(["left","top","width","height","scrollLeft","scrollTop","scrollWidth","scrollHeight","vw","vh","scaleX","scaleY","targetRef","mask"]),o.prototype.anchorX=function(){return this.left()/(this.vw()-this.width())},o.prototype.anchorY=function(){return this.top()/(this.vh()-this.height())},o.prototype.round=function(){for(let e=0,n=(t=this._data)?t.toArray?t.toArray():t:[],i=n.length;e<i;e++)this._data[e]=Math.round(n[e]);var t;return this},o.prototype.right=function(){return this.vw()-this.left()-this.width()},o.prototype.bottom=function(){return this.vh()-this.top()-this.height()},o.prototype.resizeParent=function(t,e){if(t==this.vw()&&e==this.vh())return this;var n=this.anchorX(),i=this.anchorY(),r=Math.round((t-this.width())*n),o=Math.round((e-this.height())*i);return n>1?r=t-(this.vw()-this.left()):n<0&&(r=this.left()),i>1?o=e-(this.vh()-this.top()):i<0&&(o=this.top()),this.set({left:r,top:o,vw:t,vh:e})},o.prototype.resize=function(t,e,n){void 0===n&&(n=0);var i=this.anchorX(),r=this.anchorY();n&o.PIN_TOP?r=0:n&o.PIN_BOTTOM&&(r=1),n&o.PIN_LEFT?i=0:n&o.PIN_RIGHT&&(i=1);var s=i>.9||i<.1,a=r>.9||r<.1,u=this.vw()*i-t*i,p=this.vh()*r-e*r;return s&&(u=this.left()+(this.width()-t)*Math.round(i)),a&&(p=this.top()+(this.height()-e)*Math.round(r)),this.set({left:u,top:p,width:t,height:e})},o.prototype.ensureInsideParent=function(t){return void 0===t&&(t=30),this.left()+this.width()<t?this.set({left:t-this.width()}):this.left()>this.vw()-t&&this.set({left:this.vw()-t}),this.top()>this.vh()-t?this.set({top:this.vh()-t}):this.top()<t&&this.set({top:t}),this}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(0),o=n(1),s=o.ACTION_MAP,a=o.ACTION,u=(o.WIDGET,o.CAST),p=o.KEYS,c=(o.SCON,n(22).Struct);function h(t,e){this._params=t,this._branch=e,this._offset=0,this._prev=null,this._next=null,this._receivedAt=Date.now()}function l(){return h.apply(this,arguments)}function d(t,e){this._params=t,this._branch=e,this._offset=0,this._prev=null,this._next=null}function f(){return d.apply(this,arguments)}function y(){return f.apply(this,arguments)}function m(){return h.apply(this,arguments)}function g(){return h.apply(this,arguments)}function _(){return h.apply(this,arguments)}function v(){return h.apply(this,arguments)}function b(){return v.apply(this,arguments)}function w(){return b.apply(this,arguments)}function x(){return b.apply(this,arguments)}function S(){return v.apply(this,arguments)}function T(){return h.apply(this,arguments)}function k(){return h.apply(this,arguments)}function A(){return h.apply(this,arguments)}function E(){return h.apply(this,arguments)}function C(){return h.apply(this,arguments)}function D(){return h.apply(this,arguments)}function O(){return h.apply(this,arguments)}function M(){return O.apply(this,arguments)}function L(){return O.apply(this,arguments)}function P(){return h.apply(this,arguments)}function N(){return P.apply(this,arguments)}function $(){return P.apply(this,arguments)}function R(){return P.apply(this,arguments)}e.StreamAction=h,h.seed=function(t){var e=new this([],t._owner);return e._index=-1,e._byteOffset=1,e},h.handles=function(t,e){return void 0===e&&(e={}),s[t]=this,this._type=this.prototype._type=t,this._options=e,this._strategy=e.strategy,this._diff=e.diff,this},h.type=function(t){return s[t]},h.deserialize=function(t,e){return new(s[t[0]]||this)(t,e)},h.build=function(t,e,n){return t instanceof Array||(t=this.paramify(t)),new this(t,null)},h.encode=function(t,e,n,i){if("dedupe"==this._strategy){let e=JSON.stringify(t);if(null!=n._dupes[e])return[n._dupes[e]]}return t},h.decode=function(t,e,n,i){var r;if("dedupe"==this._strategy)if(1==t.length)t=n._actions[t[0]]._params;else{var o=JSON.stringify(t);null==(r=n._dupes)[o]?r[o]=i:r[o]}return new this(t)},h.schema=function(t){this.prototype._schema=this._schema=t,this._defaults=[];var e=function(t){return function(){return this._params[t]}};for(let n=0,r=i(t),o=r.length;n<o;n++)this._defaults.push(0),this.prototype[r[n]]=e(n);return this},h.paramify=function(t){if(!this._schema)throw"A"+this.prototype._type+" does not support paramify";var e=this._defaults.slice();for(let n,i,r=0,o=Object.keys(t),s=o.length;r<s;r++){i=o[r],n=t[i],e[this._schema.indexOf(i)]=n}return e},h.prototype.offset=function(t){return this._offset},h.prototype.setOffset=function(t){return this._offset=t,this},h.prototype.type=function(t){return this._type},h.prototype.setType=function(t){return this._type=t,this},h.prototype.params=function(t){return this._params},h.prototype.setParams=function(t){return this._params=t,this},h.prototype.index=function(t){return this._index},h.prototype.setIndex=function(t){return this._index=t,this},h.prototype.byteEnd=function(t){return this._byteEnd},h.prototype.setByteEnd=function(t){return this._byteEnd=t,this},h.prototype.receivedAt=function(t){return this._receivedAt},h.prototype.setReceivedAt=function(t){return this._receivedAt=t,this},h.prototype.log=function(){for(var t,e=arguments,n=e.length,i=new Array(n>0?n:0);n>0;)i[n-1]=e[--n];return(t=this.branch()).log.apply(t,[].concat(["action:"+this.constructor.name],Array.from(i)))},h.prototype.addToStream=function(t){return this._stream=t,this._branch||(this._branch=t._owner),this._prev=t._tail,this._parent=t._lastActions[this._type],this._offset=t._lastTimeOffset,this.INDEX=this._index=(e=t)&&(e.len instanceof Function?e.len():e.length)||0;var e},h.prototype.commitToStream=function(t){return this._prev&&(this._prev._next=this),t.lastActions()[this._type]=this,t.actions().push(this),this._byteEnd=t.byteLength(),this},h.prototype.removeFromStream=function(t){return t._lastActions[this._type]=this._parent,t.actions().pop(),this},h.prototype.timeOffset=function(){return this._offset},h.prototype.branch=function(){return this._branch||this._stream._owner},h.prototype.space=function(){return this.branch().space()},h.prototype.data=function(){return this._params[1]},h.prototype.toString=function(){return"A#"+this.INDEX},h.prototype.toStruct=function(){return this._params},h.prototype.addSubAction=function(t,e){return t._branch=this.branch(),this._children||(this._children=[]),this._children.push(t),t.commitWithCursor(e),t},h.prototype.encode=function(t){return this.constructor.encode(this._params,this._parent?this._parent._params:null,t,this._index)},h.prototype.target=function(){return this._branch.__lookup(this._params[0])||this._branch.space()},h.prototype.isEnabled=function(){return!0},h.prototype.isSignificant=function(){return!1},h.prototype.commitWithCursor=function(t){return t._stack.unshift(this),this.commit(t),t._stack.shift(),this},h.prototype.revertWithCursor=function(t){if(t._stack.unshift(this),this._children){for(var e=this._children.length;e>0;)this._children[--e].revertWithCursor(t);this._children=null}return this.revert(t),t._stack.shift(),this},h.prototype.commit=function(t){var e;return(e=this.target())&&(t.markTarget(e),e.apply(this)),this},h.prototype.revert=function(t){var e;return(e=this.target())&&(t.markTarget(e),e.revert(this)),this},h.prototype.discard=function(){return this},r.subclass(l,h),e.CreateWidget=l,l.handles(a.WIDGET_CREATE,["target","config"]),l.prototype.isSignificant=function(){return!0},l.prototype.widget=function(){return this._widget||(this._widget=this.target().widgets().create(this.data().type,this.data(),this))},l.prototype.commit=function(t){return this.widget().commitAdd(),t.markTarget(this.target())},l.prototype.revert=function(t){return this.widget().revertAdd(),t.markTarget(this.target()),this},r.subclass(d,h),e.Snapshot=d,d.handles(u.SNAPSHOT,["data"]),d.prototype.commit=function(){return this.branch().space().isDeserialized()||this.branch().space().deserialize(this._params[0],this),this},d.prototype.revert=function(){return this},r.subclass(f,d),e.BranchAction=f,f.handles(u.BRANCH),f.prototype.commit=function(){return this.branch()==this.branch().space().trunk()&&f.prototype.__super__.commit.apply(this,arguments),this},r.subclass(y,f),e.ForkAction=y,y.handles(a.FORK),r.subclass(m,h),e.PingAction=m,m.handles(a.PING),r.subclass(g,h),e.ConfigSet=g,g.handles(a.SET,[]),g.decode=function(t,e,n,i){return e&&(t.length<2&&t.unshift(e[1]),t.length<3&&t.unshift(e[0])),new this(t)},g.encode=function(t,e){return e&&e.length==t.length&&t[0]==e[0]?t[1]==e[1]?[t[2]]:[t[1],t[2]]:t},g.prototype.key=function(){return p[this._params[1]]||this._params[1]},g.prototype.commit=function(t){var e,n=this.key();if(e=this.target())return t.markTarget(e),this._revertValue||(this._revertValue=e._data[n]),e._data[n]=this._params[2],e.options()._v++},g.prototype.revert=function(t){var e;return(e=this.target())&&(t.markTarget(e),e._data[this.key()]=this._revertValue,e.options()._v++),this},r.subclass(_,h),e.Patch=_,_.handles(a.PATCH),_.prototype.key=function(){return p[this._params[1]]||this._params[1]},_.prototype.data=function(){return this._params[2]},_.prototype.commit=function(t){var e,n=this.key(),i=this.data();if(e=this.target())return t.markTarget(e),this._revertValue=e._data[n],this._value||(this._value=c.decode(this._revertValue||i,i)),e._data[n]=this._value,e.options()._v++},_.prototype.revert=function(t){var e;return(e=this.target())&&(t.markTarget(e),e._data[this.key()]=this._revertValue,e.options()._v++),this},r.subclass(v,h),r.subclass(b,v),e.TextEdit=b,b.handles(a.LCEDIT),b.prototype.isSignificant=function(){return!0},b.prototype.data=function(){return this._params[1]},b.prototype.selAfter=function(){return this._params[2]},b.prototype.selBefore=function(){return this._selBefore},b.prototype.commit=function(t){var e=this.target();return this._selBefore=e._selState,t.markTarget(e),e.model().apply(this.data(),this.LOCAL),this.selAfter()&&(e._selState=this.selAfter()),e.async("modified"),this.LOCAL=null},b.prototype.revert=function(t){if(t.markTarget(this.target()),this.target().model().undo(this.data()),this.selBefore())return this.target()._selState=this.selBefore()},r.subclass(w,b),e.TextInsert=w,w.handles(a.LCINSERT),w.decode=function(t,e,n){if("string"==typeof t){var i=e[4]||[e[1],e[2]+e[3].length];t=[e[0],i[0],i[1],t]}return new this(t)},w.encode=function(t,e){if(!e)return t;var n=e[4]||[e[1],e[2]+e[3].length];return 2!=n.length||n[0]!=t[1]||n[1]!=t[2]||t[4]?t:t[3]},w.prototype.encode=function(t){var e=this._parent&&this._parent._params,n=this._params;if(e&&!n[4]){var i=this._parent.selAfter();if(2==i.length&&i[0]==n[1]&&i[1]==n[2])return n[3]}return n},w.prototype.data=function(){if(this._data)return this._data;let t=this._params,e=[[t[1],t[2]],t[3]];return this._data=[e]},w.prototype.selAfter=function(){return this._selAfter||(this._selAfter=this._params[4]||[this._params[1],this._params[2]+this._params[3].length])},r.subclass(x,b),e.TextDelete=x,x.handles(a.LCDELETE),x.prototype.range=function(){return this._range||(this._range=this._params.slice(1,5))},x.prototype.data=function(){return this._data||(this._data=[[this.range()]])},x.prototype.selAfter=function(){return this._selAfter||(this._selAfter=this._params[5]||this._params.slice(1,3))},r.subclass(S,v),e.TextSelection=S,S.handles(a.LCSELECTION),S.decode=function(t,e,n,i){return e&&t.length<3&&(t=e.slice(0,-t.length).concat(t)),new this(t)},S.encode=function(t,e){if(e&&e.length==t.length){let n=0;for(;n<e.length&&e[n]==t[n];)n++;let i=t.slice(n);if(i.length<3)return i}return t},S.prototype.selAfter=function(){return this._selAfter||(this._selAfter=this._params.slice(1))},S.prototype.commit=function(t){return this._selBefore=this.target()._selState,this.target()._selState=this.selAfter()},S.prototype.revert=function(){return this.target()._selState=this._selBefore},r.subclass(T,h),e.TextScroll=T,T.handles(a.LCSCROLL),r.subclass(k,h),e.NodeLayoutAction=k,k.handles(a.NODE_LAYOUT),k.prototype.sref=function(){return this._params[0]},k.prototype.layout=function(){return this._params[1]},k.prototype.commit=function(){return this._rev=this._stream.layouts()[this.sref()],this._stream.layouts()[this.sref()]=this.layout(),this},k.prototype.revert=function(){return this._stream.layouts()[this.sref()]=this._rev},r.subclass(A,h),e.PointerUpdate=A,A.handles(a.POINTER_UPDATE),A.schema(["x","y","flags","hover","angle","pressure"]),A.decode=function(t,e,n,i){if(e){t[0]+=e[0],t[1]+=e[1];for(var r=t.length;r<e.length;)t[r]=e[r++]}return new this(t)},A.encode=function(t,e,n,i){if(!e)return t;String(t[3])==String(e[3])&&(t[3]=e[3]);var r=t.slice();r[0]=t[0]-e[0],r[1]=t[1]-e[1];for(var o=e.length-1;o>1&&e[o]==t[o];)r.pop(),o--;return r},A.prototype.addToStream=function(t){A.prototype.__super__.addToStream.apply(this,arguments),this._parent&&(this._parent._nextFrame=this)},A.prototype.nextFrame=function(){return this._nextFrame},A.prototype.prevFrame=function(){return this._parent},A.prototype.view=function(){return this._branch._space._view._pointer},A.prototype.target=function(t){return this._target},A.prototype.setTarget=function(t){return this._target=t,this},A.prototype.target=function(){return this._target||(this._target=this.originalTarget())},A.prototype.sref=function(){return this._sref||(this._sref=this.originalSref())},A.prototype.setSref=function(t){return this._sref=t,this._target=this._branch._space._view.lookup(t),this},A.prototype.originalTarget=function(){return this._originalTarget||(this._originalTarget=this._branch._space._view.lookup(this.originalSref()))},A.prototype.originalSref=function(){return this._params[3]},A.prototype.targetLayout=function(){return this._branch._stream.layouts()[this.sref()]},A.prototype.commit=function(){var t;return(t=this.view())&&t.setKeyframe(this),this},A.prototype.revert=function(){var t;return(t=this.view())&&t.setKeyframe(this._parent),this},r.subclass(E,h),e.FSRenameAction=E,E.handles(a.FS_RENAME),E.prototype.target=function(){return this._branch.__lookup(this._params[0])},E.prototype.commit=function(){return this.target().setName(this._params[1]),this},r.subclass(C,h),e.FSMoveAction=C,C.handles(a.FS_MOVE),C.prototype.target=function(){return this._branch.__lookup(this._params[0])},C.prototype.commit=function(){return this._prevDir||(this._prevDir=this.target().parentDir()),this._targetDir=this._branch.__lookup(this._params[1]),this.log("FSMoveAction",this._params),this._prevDir.entries().remove(this.target()),this.target().setParent(this._targetDir),this._targetDir.entries().add(this.target()),this},C.prototype.revert=function(){return this.log("FSMoveAction.revert"),this._targetDir.entries().remove(this.target()),this.target().setParent(this._prevDir),this._prevDir.entries().add(this.target())},r.subclass(D,h),e.FSRemoveAction=D,D.handles(a.FS_REMOVE),D.prototype.target=function(){return this._target||(this._target=this._branch.__lookup(this._params[0]))},D.prototype.commit=function(){return this.target().commitDel()},D.prototype.revert=function(){return this.target().revertDel()},r.subclass(O,h),e.SimAction=O,O.prototype.target=function(){return this._branch._space.simulator()},r.subclass(M,O),e.SimBuild=M,M.handles(a.SIM_BUILD),r.subclass(L,O),e.SimResult=L,L.handles(a.SIM_RESULT),r.subclass(P,h),P.prototype.target=function(){return this._branch._space._console},P.prototype.data=function(){return this._params},P.prototype.commit=function(t){return t.markTarget(this.target()),this.target().apply(this)},P.prototype.revert=function(t){return t.markTarget(this.target()),this.target().revert(this)},P.prototype.isEnabled=function(){return!0},r.subclass(N,P),e.ConsoleClear=N,N.handles(a.CONSOLE_CLEAR),r.subclass($,P),e.ConsoleLog=$,$.handles(a.CONSOLE_LOG),r.subclass(R,P),e.ConsoleValExpand=R,R.handles(a.CONSOLE_VAL_EXPAND);var I=n(25).PlayerPage;function F(){return h.apply(this,arguments)}function z(){return F.apply(this,arguments)}function B(){return F.apply(this,arguments)}function V(){return F.apply(this,arguments)}function U(){return F.apply(this,arguments)}function H(){return F.apply(this,arguments)}function W(){return h.apply(this,arguments)}function j(){return W.apply(this,arguments)}function q(){return W.apply(this,arguments)}function G(){return W.apply(this,arguments)}function Y(){return W.apply(this,arguments)}function X(){return W.apply(this,arguments)}function K(){return W.apply(this,arguments)}function Z(){return W.apply(this,arguments)}function J(){return h.apply(this,arguments)}function Q(){return h.apply(this,arguments)}function tt(){return h.apply(this,arguments)}function et(){return h.apply(this,arguments)}function nt(){return h.apply(this,arguments)}function it(){return nt.apply(this,arguments)}function rt(){return h.apply(this,arguments)}function ot(){return h.apply(this,arguments)}function st(){return h.apply(this,arguments)}r.subclass(F,h),e.PageAction=F,F.prototype.page=function(){return this._page||(this._page=this._stream._lastPage)},F.prototype.browser=function(){return this.branch().space().browser()},F.prototype.commitToStream=function(t){return F.prototype.__super__.commitToStream.apply(this,arguments),this.page()},F.prototype.isEnabled=function(){return!0},F.prototype.baseURI=function(){return this.browser().baseURI(this.index())},r.subclass(z,F),e.PageRequest=z,z.handles(a.PAGE_REQUEST),z.prototype.page=function(){return this._page||(this._page=this._stream._lastPage=new I(this,{url:this.url()}))},z.prototype.url=function(){return this._params[1]},z.prototype.commit=function(){return this.browser().setPage(this.page()),this.url()&&this.browser().setUrl(this.url()),this},z.prototype.revert=function(){return this},r.subclass(B,F),e.PageLoad=B,B.handles(a.PAGE_LOAD),B.prototype.page=function(){return this._page||(this._page=this._stream._lastPage,this._page&&!this._page.loadAction()||(this._page=this._stream._lastPage=new I(this,{url:this.url()})),this._page.setLoadAction(this)),this._page},B.prototype.url=function(){return this._params[1]},B.prototype.commit=function(t){var e;return this.page().setStatus(this._params[0]),this.browser().setPage(this.page()),this.browser().setUrl(e=this.url()),e},B.prototype.revert=function(t){return this.page().setStatus(null),this},r.subclass(V,F),e.PageLoaded=V,V.handles(a.PAGE_LOADED,{strategy:"dedupe"}),V.prototype.commit=function(t){return this._applied||(this._applied=!0,this.page().applyInitialState(this._params),this.page().syncStyleSheets(this.branch().space().files())),this.browser().setPage(this.page()),this.page().setLoaded(this),this},V.prototype.revert=function(){return this.page().setLoaded(null),this},r.subclass(U,F),e.PageLogAction=U,U.handles(a.PAGE_LOG,{strategy:"dedupe"}),U.prototype.commit=function(t){return this._page.logs().push(this._params),t.skipping()||this.space().emit("log",this),this},U.prototype.revert=function(){let t=this._page.logs().pop();return t!=this._params&&console.warn("PageLogAction reverted incorrectly?",this._params,t),this},r.subclass(H,F),e.PageHistoryAction=H,H.handles(a.PAGE_HISTORY),H.prototype.commit=function(t){return this.browser().setUrl(this.url()),this},H.prototype.action=function(){return this._params[0]},H.prototype.url=function(){return this._params[2]},H.prototype.revert=function(){return console.log("page history revert",this._params),this},r.subclass(W,h),e.DOMAction=W,W.prototype.commitToStream=function(t){return W.prototype.__super__.commitToStream.apply(this,arguments),this._target=t._lastPage,this},W.prototype.target=function(){return this._target||(this._target=this.space().simulator()._player.bridge())},W.prototype.browser=function(){return this.branch().space().browser()},W.prototype.node=function(t){return this._node||(this._node=this.target().nodeForPath(null==t?this._params[0]:t))},W.prototype.isEnabled=function(){return!0},r.subclass(j,W),e.DOMReset=j,j.handles(a.DOM_RESET),j.prototype.commit=function(){return this.target().setFocusNode(null),this.target().setActiveNode(null),this.target().setHoverNode(null),this._rev||(this._rev=[].slice.call(this.target().root().childNodes)),this.target().setSelection(null),this.target().root().innerHTML="",this.target().reindexNodes()},j.prototype.revert=function(){var t=this.target().root();for(let e=0,n=i(this._rev),r=n.length;e<r;e++)t.appendChild(n[e]);return this.target().setSelection(null),this.target().reindexNodes()},r.subclass(q,W),e.DOMMutate=q,q.handles(a.DOM_MUTATE),q.prototype.commit=function(){try{this.target().applyMutations(this._params)}catch(t){this.log("mutate errored",t),this._error=t,this.target().setErrored(this)}return this},q.prototype.revert=function(){return this.target().revertMutations(this._params,this),this},r.subclass(G,W),e.DOMSelection=G,G.handles(a.DOM_SELECTION),G.prototype.commit=function(){var t=null;return this._params.length&&(this._params.NODE||(this._params.NODE=this.node()),t=this._params),this._rev=this.target().selection(),this.target().setSelection(t),t},G.prototype.revert=function(){return this.target().setSelection(this._rev),this._rev},r.subclass(Y,W),e.DOMScroll=Y,Y.handles(a.DOM_SCROLL),Y.prototype.commit=function(){var t;if(t=this.node())return this._rev||(this._rev=[null,t.scrollLeft,t.scrollTop]),t.scrollLeft=this._params[1],t.scrollTop=this._params[2]},Y.prototype.revert=function(){if(this._rev)return this.node().scrollLeft=this._rev[1],this.node().scrollTop=this._rev[2]},r.subclass(X,W),e.DOMFocusIn=X,X.handles(a.DOM_FOCUSIN,["domtarget"]),X.prototype.commit=function(){var t;return this._rev=this.target().focusNode(),this.target().setFocusNode(t=this.node()),t},X.prototype.revert=function(){return this.target().setFocusNode(this._rev),this._rev},r.subclass(K,W),e.DOMHoverIn=K,K.handles(a.DOM_HOVERIN,["domtarget"]),K.prototype.commit=function(){var t;return this._rev=this.target().hoverNode(),this.target().setHoverNode(t=this.node()),t},K.prototype.revert=function(){return this.target().setHoverNode(this._rev),this._rev},r.subclass(Z,W),e.DOMActiveIn=Z,Z.handles(a.DOM_ACTIVEIN,["domtarget"]),Z.prototype.commit=function(){var t;return this._rev=this.target().activeNode(),this.target().setActiveNode(t=this.node()),t},Z.prototype.revert=function(){return this.target().setActiveNode(this._rev),this._rev},r.subclass(J,h),e.RecStart=J,J.handles(a.RECSTART),J.prototype.__stop={watch:"stopDidSet",name:"stop"},J.prototype.stop=function(t){return this._stop},J.prototype.setStop=function(t){var e=this.stop();return t!=e&&(this._stop=t),t!=e&&this.stopDidSet&&this.stopDidSet(t,e,this.__stop),this},J.prototype.audio=function(t){return this._audio},J.prototype.setAudio=function(t){return this._audio=t,this},J.prototype.commitToStream=function(t){return this._parent&&(this._parent.stop()||this._parent.setStop(this)),t.recordings().push(this),J.prototype.__super__.commitToStream.apply(this,arguments)},J.prototype.removeFromStream=function(t){return this._parent&&this._parent.stop()==this&&this._parent.setStop(null),t.recordings().pop(),J.prototype.__super__.removeFromStream.apply(this,arguments)},J.prototype.stopDidSet=function(t,e){if(t){this._duration=t.timeOffset()-this.timeOffset();try{this._audio={offset:this.timeOffset(),fid:this._params[1].audiofile.id,span:this._duration},this.branch()._stream.audio().add(this._audio)}catch(t){}}else this._audio&&this.branch()._stream.audio().remove(this._audio);return this},r.subclass(Q,h),e.RecStop=Q,Q.handles(a.RECSTOP),Q.prototype.recording=function(t){return this._recording},Q.prototype.setRecording=function(t){return this._recording=t,this},Q.prototype.commitToStream=function(t){return(this._recording=t.recordings().last())&&(this._recording.stop()||this._recording.setStop(this)),Q.prototype.__super__.commitToStream.apply(this,arguments)},Q.prototype.removeFromStream=function(t){return this._recording&&this._recording.stop()==this&&this._recording.setStop(null),Q.prototype.__super__.removeFromStream.apply(this,arguments)},r.subclass(tt,h),e.TrimAction=tt,tt.handles(a.TRIM),r.subclass(et,h),e.LockAction=et,et.handles(a.LOCK),et.prototype.sid=function(){return this._params[0]},et.prototype.uid=function(){return this._params[1]},et.prototype.commitToStream=function(t){return et.prototype.__super__.commitToStream.apply(this,arguments),t.setCurrentLock(this),this},r.subclass(nt,h),e.LayoutAction=nt,nt.handles(a.LAYOUT),nt.decode=function(t,e){return new this(e?c.decode(e,t):t)},nt.encode=function(t,e){return e?c.diff(e,t)||[0]:t},nt.prototype.target=function(){return this._branch.__lookup(this._params[12])},nt.prototype.commit=function(){var t;(t=this.target())&&(this._prevValue=t._data.layout,t._data.layout=this._params)},nt.prototype.revert=function(){this.target()._data.layout=this._prevValue},r.subclass(it,nt),e.BrowserLayoutAction=it,it.handles(a.BROWSER_LAYOUT),r.subclass(rt,h),e.WidgetAppend=rt,rt.handles(a.WIDGET_APPEND),r.subclass(ot,h),e.WidgetFlag=ot,ot.handles(a.WIDGET_FLAG,["target","int_flag"]),r.subclass(st,h),e.WidgetUnflag=st,st.handles(a.WIDGET_UNFLAG,["target","int_flag"])},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(0).createTagScope().defineTag("InterfaceView",(function(t){t.prototype.__hovered={watch:"hoveredDidSet",name:"hovered"},t.prototype.hovered=function(t){return this._hovered},t.prototype.setHovered=function(t){var e=this.hovered();return t!=e&&(this._hovered=t),t!=e&&this.hoveredDidSet&&this.hoveredDidSet(t,e,this.__hovered),this},t.prototype.__enabled={watch:"enabledDidSet",name:"enabled"},t.prototype.enabled=function(t){return this._enabled},t.prototype.setEnabled=function(t){var e=this.enabled();return t!=e&&(this._enabled=t),t!=e&&this.enabledDidSet&&this.enabledDidSet(t,e,this.__enabled),this},t.prototype.__transitionTime={default:250,name:"transitionTime"},t.prototype.transitionTime=function(t){return this._transitionTime},t.prototype.setTransitionTime=function(t){return this._transitionTime=t,this},t.prototype._transitionTime=250,t.prototype.space=function(){return this.data()},t.prototype.branch=function(){return this.data().branch()},t.prototype.timeline=function(){return this.data().timeline()},t.prototype.enabledDidSet=function(t){var e=this;return e.flag("transitioning"),e.dom().offsetTop,clearTimeout(e._transitioner),e._transitioner=setTimeout((function(){return e.unflag("transitioning")}),e.transitionTime()),e.flag("enabled",t),e.flag("disabled",!t),t?e.reveal():e.conceal()},t.prototype.invalidated=function(){for(var t=arguments,e=t.length,n=new Array(e>0?e:0);e>0;)n[e-1]=t[--e];let r=this._guard||[];this._guard=n;for(let t=0,e=i(n).length;t<e;t++)if(n[t]!=r[t])return this._version=(this._version||0)+1,!0;return!1},t.prototype.reveal=function(){return this},t.prototype.conceal=function(){return this},t.prototype.commit=function(){return this.enabled()&&this.render(),this},t.prototype.exec=function(t){return this.space().actions().exec(t)}}));e.InterfaceView=r},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(0);function o(t,e){var n=this;o.Active.push(n),n._catcher=function(t){return t.preventDefault(),t.stopPropagation()},n._options=e,n._touch=t,n._type=e.type||"gesture",n._handler=e.handler||t.target(),document.addEventListener("selectstart",n._catcher,!0),n._checkForMultitouch=setTimeout((function(){if(r.Touch.count()>1&&!t._cancelled)return t._active=!1,n.ontouchcancel(t)}),300),n.delegate("on"+n._type+"init")}r.subclass(o,r.TouchGesture),e.ScrimbaGesture=o,o.prototype.prevCursor=function(t){return this._prevCursor},o.prototype.setPrevCursor=function(t){return this._prevCursor=t,this},o.prototype.cursor=function(t){return this._cursor},o.prototype.setCursor=function(t){return this._cursor=t,this},o.prototype.type=function(t){return this._type},o.prototype.setType=function(t){return this._type=t,this},o.prototype.box=function(t){return this._box},o.prototype.setBox=function(t){return this._box=t,this},o.prototype.options=function(t){return this._options},o.prototype.setOptions=function(t){return this._options=t,this},o.prototype.touch=function(t){return this._touch},o.prototype.setTouch=function(t){return this._touch=t,this},o.prototype.handler=function(t){return this._handler},o.prototype.setHandler=function(t){return this._handler=t,this},o.Active=[],o.options=function(t,e){void 0===e&&(e={});var n=t.sourceTarget().closest("[data-gesture]");if(e.type||(e.type=n&&n.dataset("gesture")),e.handler||(e.handler=n),e.cursor||(e.cursor=window.getComputedStyle(t.sourceTarget().dom()).cursor),e.type){let t=e.type.split(",");e.type=t[0];for(let n=0,r=i(t),o=r.length;n<o;n++)e[r[n]]||(e[r[n]]=!0)}return e},o.wrap=function(t,e){void 0===e&&(e={});var n=t.sourceTarget().closest("[data-gesture]");if(e.type||(e.type=n&&n.dataset("gesture")),e.handler||(e.handler=n),e.cursor||(e.cursor=window.getComputedStyle(t.sourceTarget().dom()).cursor),!(r.Touch.count()>1)&&e.type){let n=e.type.split(",");e.type=n[0];for(let t=0,r=i(n),o=r.length;t<o;t++)e[r[t]]||(e[r[t]]=!0);return t.extend(new this(t,e))}},o.prototype.dx=function(){return this._touch.dx()},o.prototype.dy=function(){return this._touch.dy()},o.prototype.x=function(){return this._touch.x()},o.prototype.y=function(){return this._touch.y()},o.prototype.clamp=function(t,e,n,i){return void 0===i&&(i=1),Math.min(Math.max(Math.round(e/i)*i,t),n)},o.prototype.target=function(){return this._touch.target()},o.prototype.onstart=function(t){var e,n;return this._started=!0,document.body.classList.add("touching"),(e=this.target())&&e.flag&&e.flag("gesturing"),this.setCursor(n=this._options.cursor),n&&(this.setPrevCursor(document.body.style.cursor),document.body.style.cursor=this.cursor()),this.delegate("on"+this._type+"start")},o.prototype.onupdate=function(t){return this.delegate("on"+this._type+"update")},o.prototype.ontouchupdate=function(t){return this._started||(this.onstart(t),this._started=!0),this._started&&this.onupdate(t),this},o.prototype.ontouchend=function(t){var e;return this._started&&((e=this.target())&&e.unflag&&e.unflag("gesturing"),this.delegate("on"+this._type+"end")),this.teardown(t),this},o.prototype.ontouchcancel=function(t){var e;return this._started&&((e=this.target())&&e.unflag&&e.unflag("gesturing"),this.delegate("on"+this._type+"cancel")),this.teardown(t),this},o.prototype.delegate=function(t){return this[t]?this[t](this):this._handler&&this._handler[t]?this._handler[t](this):this.target()[t]?this.target()[t](this):void 0},o.prototype.teardown=function(){let t=o.Active.indexOf(this);return t>=0&&o.Active.splice(t,1),clearTimeout(this._checkForMultitouch),document.body.style.cursor=this.prevCursor()||"",document.body.classList.remove("touching"),document.removeEventListener("selectstart",this._catcher,!0)}},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=o.defineTag("SidebarPanel",(function(t){t.prototype.space=function(t){return this._space},t.prototype.setSpace=function(t){return this._space=t,this},t.prototype.name=function(t){return this._name},t.prototype.setName=function(t){return this._name=t,this},t.prototype.render=function(){var t=this.$;return this.$open(0).setChildren(t[0]||r("header",t,0,this).setContent(t[1]||r("div",t,1,0).flag("title"),2),2).synced((t[1].setContent(this.name(),3),!0))}}));e.SidebarPanel=s;var a=o.defineTag("SidebarEntry");e.SidebarEntry=a},function(t,e,n){var i;!function(r,o,s){if(r){for(var a,u={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},p={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},h={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l=1;l<20;++l)u[111+l]="f"+l;for(l=0;l<=9;++l)u[l+96]=l.toString();v.prototype.bind=function(t,e,n){return t=t instanceof Array?t:[t],this._bindMultiple.call(this,t,e,n),this},v.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},v.prototype.trigger=function(t,e){return this._directMap[t+":"+e]&&this._directMap[t+":"+e]({},t),this},v.prototype.reset=function(){return this._callbacks={},this._directMap={},this},v.prototype.stopCallback=function(t,e){return!((" "+e.className+" ").indexOf(" mousetrap ")>-1)&&(!function t(e,n){return null!==e&&e!==o&&(e===n||t(e.parentNode,n))}(e,this.target)&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable))},v.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},v.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(u[e]=t[e]);a=null},v.init=function(){var t=v(o);for(var e in t)"_"!==e.charAt(0)&&(v[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},v.init(),r.Mousetrap=v,t.exports&&(t.exports=v),void 0===(i=function(){return v}.call(e,n,e,t))||(t.exports=i)}function d(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function f(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)}function y(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return u[t.which]?u[t.which]:p[t.which]?p[t.which]:String.fromCharCode(t.which).toLowerCase()}function m(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function g(t,e,n){return n||(n=function(){if(!a)for(var t in a={},u)t>95&&t<112||u.hasOwnProperty(t)&&(a[u[t]]=t);return a}()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function _(t,e){var n,i,r,o=[];for(n=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),r=0;r<n.length;++r)i=n[r],h[i]&&(i=h[i]),e&&"keypress"!=e&&c[i]&&(i=c[i],o.push("shift")),m(i)&&o.push(i);return{key:i,modifiers:o,action:e=g(i,o,e)}}function v(t){var e=this;if(t=t||o,!(e instanceof v))return new v(t);e.target=t,e._callbacks={},e._directMap={};var n,i={},r=!1,s=!1,a=!1;function u(t){t=t||{};var e,n=!1;for(e in i)t[e]?n=!0:i[e]=0;n||(a=!1)}function p(t,n,r,o,s,a){var u,p,c,h,l=[],d=r.type;if(!e._callbacks[t])return[];for("keyup"==d&&m(t)&&(n=[t]),u=0;u<e._callbacks[t].length;++u)if(p=e._callbacks[t][u],(o||!p.seq||i[p.seq]==p.level)&&d==p.action&&("keypress"==d&&!r.metaKey&&!r.ctrlKey||(c=n,h=p.modifiers,c.sort().join(",")===h.sort().join(",")))){var f=!o&&p.combo==s,y=o&&p.seq==o&&p.level==a;(f||y)&&e._callbacks[t].splice(u,1),l.push(p)}return l}function c(t,n,i,r){e.stopCallback(n,n.target||n.srcElement,i,r)||!1===t(n,i)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(n),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(n))}function h(t){"number"!=typeof t.which&&(t.which=t.keyCode);var n=y(t);n&&("keyup"!=t.type||r!==n?e.handleKey(n,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):r=!1)}function l(t,e,o,s){function p(e){return function(){a=e,++i[t],clearTimeout(n),n=setTimeout(u,1e3)}}function h(e){c(o,e,t),"keyup"!==s&&(r=y(e)),setTimeout(u,10)}i[t]=0;for(var l=0;l<e.length;++l){var d=l+1===e.length?h:p(s||_(e[l+1]).action);g(e[l],d,s,t,l)}}function g(t,n,i,r,o){e._directMap[t+":"+i]=n;var s,a=(t=t.replace(/\s+/g," ")).split(" ");a.length>1?l(t,a,n,i):(s=_(t,i),e._callbacks[s.key]=e._callbacks[s.key]||[],p(s.key,s.modifiers,{type:s.action},r,t,o),e._callbacks[s.key][r?"unshift":"push"]({callback:n,modifiers:s.modifiers,action:s.action,seq:r,level:o,combo:t}))}e._handleKey=function(t,e,n){var i,r=p(t,e,n),o={},h=0,l=!1;for(i=0;i<r.length;++i)r[i].seq&&(h=Math.max(h,r[i].level));for(i=0;i<r.length;++i)if(r[i].seq){if(r[i].level!=h)continue;l=!0,o[r[i].seq]=1,c(r[i].callback,n,r[i].combo,r[i].seq)}else l||c(r[i].callback,n,r[i].combo);var d="keypress"==n.type&&s;n.type!=a||m(t)||d||u(o),s=l&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var i=0;i<t.length;++i)g(t[i],e,n)},e.enable=function(){d(t,"keypress",h),d(t,"keydown",h),d(t,"keyup",h)},e.disable=function(){f(t,"keypress",h),f(t,"keydown",h),f(t,"keyup",h)},e.enable()}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},function(t,e,n){var i=n(30);e.createCodec=a,e.install=function(t){for(var e in t)o.prototype[e]=s(o.prototype[e],t[e])},e.filter=function(t){return i(t)?function(t){return t=t.slice(),function(n){return t.reduce(e,n)};function e(t,e){return e(t)}}(t):t};var r=n(5);function o(t){if(!(this instanceof o))return new o(t);this.options=t,this.init()}function s(t,e){return t&&e?function(){return t.apply(this,arguments),e.apply(this,arguments)}:t||e}function a(t){return new o(t)}o.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=r.Uint8Array),this},e.preset=a({preset:!0})},function(t,e,n){var i=n(0),r=e.ACCESS={NONE:0,READ:1,WRITE:2,INS:4,PUT:8,DEL:16,ALL:31,read:1,write:2,ins:4,put:8,edit:8,del:16},o=n(19).StreamBuffer,s=n(4).uuid;const a=e.IdentityMap={},u=e.ScrimMap={};function p(t){Object.assign(this,this._raw=t),a[t.id]=this,this._cache={}}function c(){return p.apply(this,arguments)}function h(){return p.apply(this,arguments)}function l(t,e){this._file=t,this._chunks=[],this._size=0,this._api=e,this._blob=null}function d(){return p.apply(this,arguments)}function f(){}e.Resource=p,p.build=function(t){return new this(t)},Object.defineProperty(p.prototype,"orig",{get:function(){return window.store.get(this._raw.id)},configurable:!0}),p.prototype.toJSON=function(){return this._raw},p.prototype.toRaw=function(){let t={};for(let e,n,i=this,r=0,o=Object.keys(i),s=o.length;r<s;r++)n=o[r],e=i[n],"_"!=n[0]&&"$"!=n[0]&&(t[n]=e);return t},p.prototype.isPublished=function(){return!1},p.prototype.isLocal=function(){return this.v<1},p.prototype.isPersisted=function(){return!this.isLocal()},p.prototype.permissions=function(t){return t&&(this.uid==t.id||t.isMod&&t.isMod())?r.ALL:"private"==this.privacy?r.NONE:r.READ},p.prototype.can=function(t,e){return this.permissions(t)&(r[e]||e)},p.prototype.req=async function(t,e,n){void 0===n&&(n={});let i={credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)};Object.assign(i,n);let r=await window.fetch(t,i);if(r.ok)return r.json();throw"did not work "+r.statusText},p.prototype.post=function(t,e){return this.req(t,e,{method:"POST"})},Object.defineProperty(p.prototype,"_ns",{get:function(){return"/files"},configurable:!0}),p.prototype.save=async function(){let t=this.toRaw();await this.req(this._ns,t,{method:"POST"});return this},p.prototype.persist=async function(){let t=this.toRaw(),e=await this.req(this._ns,t,{method:"POST"});return e.data&&(this.orig&&this.orig.$patch(e.data),Object.assign(this,e.data)),this},p.prototype.update=async function(t){void 0===t&&(t={});let e=await this.req(this._ns,t,{method:"POST"});return e&&e.data&&this.orig&&this.orig.$patch(e.data),this},p.prototype.del=function(){return this.orig&&this.orig.$del(),this},i.subclass(c,p),e.User=c,c.prototype.isPublished=function(){return!1},c.prototype.isMod=function(){return this.roles&&this.roles.indexOf("mod")>=0},c.prototype.isAdmin=function(){return this.hasRole("admin")},c.prototype.hasRole=function(t){return this.roles&&this.roles.indexOf(t)>=0},i.subclass(h,p),e.Scrim=h,h.generateId=function(){return"co"+s().substr(10).replace(/-/g,"")},h.build=function(t){return t.id||(t.id=this.generateId()),new this(window.store.add(t))},h.wrap=function(t){var e;return u[e=t.id]||(u[e]=new h(t))},h.prototype.toRaw=function(){let t=h.prototype.__super__.toRaw.apply(this,arguments);return t.user,delete t.user,t},h.prototype.owner=function(){return this._owner||(this._owner=new c(this.user))},Object.defineProperty(h.prototype,"_ns",{get:function(){return"/scrims/"+this.id},configurable:!0}),Object.defineProperty(h.prototype,"url",{get:function(){return"/scrim/"+this.id},configurable:!0}),h.prototype.isPublic=function(){return!this.archived_at&&"public"==this.privacy},h.prototype.isPublished=function(){return!!this.published_at},h.prototype.isTutorial=function(){return"tutorial"==this.type},h.prototype.isDraft=function(){return this.isTutorial()&&!this.published_at},h.prototype.isFork=function(){return"fork"==this.type},h.prototype.isNote=function(){return"note"==this.type},h.prototype.isForkable=function(){return"fork"!=this.type},h.prototype.usernotes=function(){return[]},h.prototype.branches=function(){return this._branches||[]},h.prototype.hasMember=function(t){return this.uid==t||this.members&&this.members.indexOf(t)>=0},h.prototype.permissions=function(t){return t&&(this.hasMember(t.id)||t.isMod&&t.isMod())?r.ALL:"private"==this.privacy?r.NONE:r.READ},h.prototype.stream=function(){return this._cache.stream||(this._cache.stream=new o(null,this))},h.prototype.buffer=function(){return this.stream()},h.prototype.registerProgress=async function(t,e){let n=window.store.course?window.store.course.id:"",i=window.store.playlist?window.store.playlist.id:"",r=this._ns+"/progress?p="+t+"&o="+e+"&g="+n+"&pl="+i;await this.req(r,{},{method:"POST"});return this},h.prototype.fetchStreamBuffer=function(t,e){var n=this;return void 0===e&&(e=0),new Promise((async function(i,r){n.buffer().FETCHING=!0;let o=n.pub&&n.pub.actions,s=o?"/streams/cached-"+o:"/streams/"+n.id;var a=(await window.fetch(s,{headers:{"range-from":e,"range-to":-1}})).body.getReader();let u=[];for(;;){var p=await a.read();let t=u.push(p);if(p.value){if(1==t&&1==p.value.length&&0==p.value[0])continue;n.buffer().add(p.value,n.buffer().size())}if(p.done)break}var c;return n.buffer()._verifiedOffset=(c=n.buffer())&&(c.len instanceof Function?c.len():c.length)||0,t.touch(),n.buffer().FETCHING=!1,i(n.buffer())}))},e.WriteStream=l,l.prototype.write=function(t){return this._chunks.push(t),this._size+=t.size,this},l.prototype.blob=function(){return this._blob},l.prototype.close=function(t){return this._file._blob=this._blob=t||(t=new Blob(this._chunks,{type:this._file.type})),this._file},i.subclass(d,p),e.File=d,d.generateId=function(){return"fo"+s().substr(20)},d.build=function(t){return new this(t)},d.get=function(t){return a[t]||new this({id:t})},d.prototype.createWriteStream=function(t){return new l(this,t)},Object.defineProperty(d.prototype,"_ns",{get:function(){return"/files"},configurable:!0}),d.prototype.save=async function(){let t=await this.post(this._ns,this._raw);return console.log("saved?",t),this},d.prototype.upload=function(t){var e=this;return void 0===t&&(t={}),e._cache.uploader||(e._cache.uploader=new Promise((async function(n,i){await e.save();console.log("saved to server");var r=await e.fetchLocalBlob(),o=new XMLHttpRequest;return o.upload.addEventListener("progress",(function(e){var n=e.loaded,i=e.total,r=n/i;return t.loaded=e.loaded,t.total=e.total,t.progress=r,console.log("progress",e,o.upload.loaded,o.upload.total,n,i,n/i)})),o.onload=function(t){return console.log("request finished uploading!!",t,o.response),n(o.response)},o.open("POST","/files/"+e.id+"/body"),o.send(r)})))},d.prototype.fetchLocalBlob=function(){return this._blob?Promise.resolve(this._blob):null},d.prototype.fetchAsArrayBuffer=function(t){var e=this;return void 0===t&&(t=null),e._fetcher||(e._fetcher=new Promise((async function(n){var i=await e.fetchLocalBlob();if(i){var r=new FileReader;return r.onloadend=function(t){return e._arraybuffer=t.target.result,n(e._arraybuffer)},r.readAsArrayBuffer(i)}var o=new XMLHttpRequest;return o.open("GET",t||"/cdn/"+e.id,!0),o.responseType="arraybuffer",o.onload=function(){return n(e._arraybuffer=o.response)},o.send()})))},d.prototype.repair=async function(){return 0==(await this._db.api().rpc("checkIntegrity",[this.id])).realSize?await this.fetchLocalBlob()?(console.log("found local file! - try to upload"),this.upload()):{error:"file not found"}:this},e.ModelStore=f,f.prototype.read=function(t){return null},f.prototype.touch=function(){return!0},f.prototype.files=function(){return d},f.prototype.scrims=function(){return h}},function(t,e,n){function i(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=n(0),o=n(8),s=o.Decoder.prototype.bufferish;new o.Decoder({});function a(t,e){this.start=t,this.end=e}function u(t){this._buffer=t,this._offsets={},this._chunks=[],this._holes=null}function p(t,e){this._model=e,this._decoder=new o.Decoder({}),this._decoder.buffer=this._buffer=t||null,this._readyState=0,this._fragments=new u(this),this._version=0,this._size=0,this._verifiedOffset=0}r.subclass(a,Error),e.StreamMissingRangeError=a,e.StreamFragments=u,u.prototype.add=function(t,e){var n=t.length;if(!this._last)return this._chunks.push(this._last=[t,e,e+n]),new a(this._buffer.size(),e-1);let i=this._last[1],r=this._last[2];return e==r?(this._last[0]=s.concat([this._last[0],t]),this._last[2]+=n,!0):e>r?(this._chunks.push(this._last=[t,e,e+n]),new a(r,e-1)):e==i?(console.log("already received this fragment",e,n,this._last),e+n>r&&console.log("got a longer fragment now"),!0):(console.log("fragment cannot even be handled"),!0)},u.prototype.pull=function(t){var e=this._chunks[0];if(e){if(e[1]==t)return this._chunks.shift()[0];if(e[2]<=t)return this._chunks.shift(),this.pull(t)}return null},u.prototype.len=function(){return this._chunks.length},e.StreamBuffer=p,p.OK=3,p.FRAGMENTED=4,p.decode=function(t,e){void 0===e&&(e=!0);var n=new o.Decoder({});n.write(t);for(var i=[];n.offset<t.byteLength;){let t=n.offset,r=n.fetch();e&&r instanceof Array&&(r.START=t,r.END=n.offset),i.push(r)}return i},p.encode=function(t,e){void 0===e&&(e=0);var n,i=new o.Encoder({});for(let e=0,r=(n=t)?n.toArray?n.toArray():n:[],o=r.length;e<o;e++)i.write(r[e]);var r=i.read();return r.PROTOCOL=e,r},p.concat=function(t){return s.concat(t)},p.alloc=function(t){return s.alloc(t)},p.prototype.buffer=function(t){return this._buffer},p.prototype.setBuffer=function(t){return this._buffer=t,this},p.prototype.readyState=function(t){return this._readyState},p.prototype.setReadyState=function(t){return this._readyState=t,this},p.prototype.state=function(){return i(this._fragments)?"fragmented":"synced"},p.prototype.id=function(){return this._model.id+":stream"},p.prototype.emit=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return r.emit(this,t,i)},p.prototype.on=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return r.listen.apply(r,[].concat([this,t],Array.from(i)))},p.prototype.un=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return r.unlisten.apply(r,[].concat([this,t],Array.from(i)))},p.prototype.write=function(t,e){return void 0===e&&(e=0),this},p.prototype.resize=function(t){let e=this._buffer;return this._buffer.length<t&&(this._buffer=s.alloc(t),this._buffer.set(e,0)),this._buffer},p.prototype.set=function(t,e){let n=t.length;return e+n>=this._buffer.length&&this.resize(e+n+1e4),this._buffer.set(t,e),this._size=e+n,this},p.prototype.add=function(t,e){void 0===e&&(e=0),t instanceof Array&&(t=o.encode(t));var n=t.length;if(this._buffer){var i=this._size;if(0==e&&1==i)this._buffer=t,this._size=n;else{if(e!=i){if(e<i){if(i>=e+n)return!0;let r=e;for(;r++<i-1;)if(this._buffer[r]!=t[r-e])return console.warn("the buffer is incorrect!!",e,r,i,this,t),!1;return this.add(t.subarray(r-e),i)}return this._fragments.add(t,e)}this.set(t,e)}}else{if(0!=e)return this._fragments.add(t,e);this._buffer=t,this._size=n}return this._decoder.buffer=this._buffer,this.emit("add",this),this.repair(),!0},p.prototype.repair=function(){var t=this._size,e=this._fragments.pull(t);if(e)return this.add(e,t)},p.prototype.len=function(){return this.size()},p.prototype.size=function(){return this._size},p.prototype.slice=function(t,e){return e?this._buffer.slice(t,e):this._buffer.slice(t,this._size)},p.prototype.trim=function(t){return i(this)>t&&(this._buffer=this._buffer.slice(0,t),this._size=t,this._fragments=new u(this),this._verifiedOffset=Math.min(this._verifiedOffset,t),this._version++,this.emit("trim",t,this)),this},p.prototype.toJSON=function(){return p.decode(this._buffer,!1)}},function(t,e){function n(){this._value=void 0,this._resolved=!1,this._listeners=[]}e.LongPromise=n,n.prototype.then=function(t){return this._resolved?t(this._value):this._listeners.push(t),this},n.prototype.resolve=function(t){this._resolved=!0,this._value=t;for(let t=0,n=(e=this._listeners)?e.toArray?e.toArray():e:[],i=n.length;t<i;t++)n[t](this._value);var e;return this._listeners=[],this}},function(t,e,n){var i=n(0).createTagScope().defineTag("Icon","i",(function(t){t.prototype.__data={watch:"dataDidSet",name:"data"},t.prototype.data=function(t){return this._data},t.prototype.setData=function(t){var e=this.data();return t!=e&&(this._data=t),t!=e&&this.dataDidSet&&this.dataDidSet(t,e,this.__data),this},t.prototype.build=function(){return this.flag("uxa")},t.prototype.dataDidSet=function(t){var e;return("string"==typeof t||t instanceof String)&&(1==((e=t)&&(e.len instanceof Function?e.len():e.length)||0)?this.setText(t):t.indexOf("<svg")>=0&&(this.flag("svg"),this.dom().innerHTML=t)),this}}));e.Icon=i},function(t,e){function n(t){return t?t.toArray?t.toArray():t:[]}function i(t){this._v=0,this._data=t}e.Struct=i,i.diff=function(t,e,n){if(void 0===n&&(n=!0),t==e)return null;if(!t)return[0].concat(e);var i=[0],r=0,o=t.length,s=e.length;if(o<1)return[0].concat(e);for(s>o&&(o=s);r<o;){let o=t[r],s=e[r];if(o==s){r++;continue}let a=s;if(n){let t=typeof s;t==typeof o&&"number"==t&&(a=s-(o||0))}i[0]=i[0]|1<<r,i.push(a),r++}return 0==i[0]?null:i},i.patch=function(t,e,n){if(void 0===n&&(n=!0),!e)return t;if(!t)return e.slice(1);var i=e[0];if(0==i&&1==e.length)return t;for(var r=0,o=0,s=t.length;r<s||i>=1<<r;){if(0==i||i&1<<r){var a=e[++o];if(n){var u=typeof a;u==typeof t[r]&&"number"==u&&(a=(t[r]||0)+(a||0))}t[r]=a}r++}return t},i.decode=function(t,e,n){return void 0===n&&(n=!0),this.patch(t.slice(),e,n)},i.diffold=function(t,e){if(t==e)return null;if(!t)return e;var n=this.encode(t,e);return n.length>1?n:null},i.desc=function(t){this.prototype._map=this._map=t,this._defaults=[];var e=function(t){return function(){return this._data[t]}};for(let i=0,r=n(t),o=r.length;i<o;i++)this._defaults.push(0),this.prototype[r[i]]=e(i);return this},i.build=function(t,e){return void 0===e&&(e=null),t instanceof this?t:t instanceof Array?new this(t):t instanceof Object?new this(this._defaults.slice()).set(t):new this(this._defaults.slice())},i.fromObject=function(t){return this},i.equals=function(t,e){return t===e||JSON.stringify(t&&t._data||t)==JSON.stringify(e&&e._data||e)},i.prototype.wrap=function(t){return t instanceof this.constructor&&(t=t._data),this._data!=t&&(this._data=t,this._v++),this},i.prototype.clone=function(){return new this.constructor(this._data.slice())},i.prototype.equals=function(t){return this.constructor.equals(this,t)},i.prototype.set=function(t,e){if(t instanceof Object){for(let e,n,i=0,r=Object.keys(t),o=r.length;i<o;i++)n=r[i],e=t[n],this.set(n,e);return this}let n=this._map.indexOf(t);return n>=0&&(this._data[n]=e),this},i.prototype.toObject=function(){var t={};for(let e=0,i=n(this._map),r=i.length;e<r;e++)t[i[e]]=this._data[e];return t},i.prototype.toArray=function(){return this._data},i.prototype.valueOf=function(){return this._data}},function(t,e,n){var i=n(0),r=n(8),o=e.TYPES={ENTER:0,LEAVE:1,VISIBILITY:2,PLAYSTATE:10,BRANCH:11,SELECTION:12,COPY:13,CREATE_BRANCH:14},s=e.TYPE_NAME={};function a(t){this._packet=t}s[o.ENTER]="enter",s[o.LEAVE]="leave",s[o.VISIBILITY]="visibility",s[o.PLAYSTATE]="playstate",s[o.BRANCH]="branch",s[o.SELECTION]="selection",s[o.COPY]="copy",e.encode={}.encode=function(t,e){void 0===e&&(e=[]);var n=[Date.now(),t].concat(e);return r.encode(n)},a.prototype.timestamp=function(){return this._packet[0]},a.prototype.code=function(){return this._packet[1]},a.prototype.params=function(){return this._packet.slice(2)},a.prototype.date=function(){return this._date||(this._date=new Date(this.timestamp()))},a.prototype.name=function(){return s[this.code()]};var u={};function p(){return a.apply(this,arguments)}function c(){return a.apply(this,arguments)}function h(t){this._data=new Uint8Array(t),this._decoder=new r.Decoder,this._decoder.write(this._data)}a.handles=function(t){return u[t]=this,this},a.decode=function(t){return new(u[t[1]]||a)(t)},i.subclass(p,a),p.handles(o.PLAYSTATE),p.prototype.playState=function(){return this.params()[0]},p.prototype.timeOffset=function(){return this.params()[1]},p.prototype.playRate=function(){return this.params()[2]},i.subclass(c,a),c.handles(o.VISIBILITY),c.prototype.isVisible=function(){return this.params()[0]},e.Decoder=h,h.prototype.fetch=function(){if(this._decoder.offset<this._data.byteLength){var t=this._decoder.fetch();return this.decode(t)}},h.prototype.decode=function(t){return a.decode(t)},h.prototype.fetchAll=function(){for(var t,e=[];t=this.fetch();)e.push(t);return e}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(0),o=n(65),s=(n(161),n(66));function a(){this._loaders={},this._buffers={},this._waveforms={},this._volume=1,this._muted=!1,this._media=[]}e.AudioManager=a,a.instance=function(){return this._instance||(this._instance=new this)},a.prototype.__outputLatency={default:0,name:"outputLatency"},a.prototype.outputLatency=function(t){return this._outputLatency},a.prototype.setOutputLatency=function(t){return this._outputLatency=t,this},a.prototype._outputLatency=0,a.prototype.enumerateDevices=function(){var t=this;return t._enumerator||(t._enumerator=window.navigator.mediaDevices.enumerateDevices().then((function(e){return t._devices=e.filter((function(t){return"audioinput"==t.kind})),t._enumerator=null,r.Scheduler.event(t)})))},a.prototype.devices=function(){var t=this;return t._devices||(t._devices=[],window.navigator.mediaDevices.ondevicechange=function(e){return t.enumerateDevices()},t.enumerateDevices()),t._devices},a.prototype.canRecordAudio=function(){return window.navigator.mediaDevices&&window.navigator.mediaDevices.getUserMedia&&window.MediaRecorder},a.prototype.mute=function(){return this._muted=!0,this.updateGain()},a.prototype.unmute=function(){return this._muted=!1,this.updateGain(),this},a.prototype.getMuted=function(){return this._muted},a.prototype.getVolume=function(){return this._volume},a.prototype.setVolume=function(t){return this._volume=t,this.updateGain()},a.prototype.getRealVolume=function(){return this.getMuted()?0:this.getVolume()},a.prototype.updateGain=function(){var t=this.getRealVolume();this._context&&(this.gainNode().gain.value=t);for(let e=0,n=i(this._media),r=n.length;e<r;e++)n[e].volume=t;return this},a.prototype.urlForId=function(t){let e=this._audioElement||(this._audioElement=document.createElement("audio")),n="/cdn/"+t;return e.canPlayType('audio/ogg;codecs="opus"')?n.replace(".ogg","")+".ogg":e.canPlayType('audio/webm;codecs="opus"')?n.replace(".webm","")+".webm":e.canPlayType("audio/mp4")?n+".m4a":n+".mp3"},a.prototype.loadBufferForId=function(t){var e=this;return e._loaders[t]||(e._loaders[t]=new Promise((async function(n){var i=SDB.files().get(t),r=await i.fetchAsArrayBuffer(e.urlForId(t));e.context().decodeAudioData(r,(function(i){return e._buffers[t]=i,n(i)}),(function(t){return console.log("error from decodeAudioData",t),n(null)}))})))},a.prototype.waveformForAudioBuffer=function(t){return new Promise((function(e){return s({scale:512,amplitude_scale:1},(function(t,n,i){return e(n)}))(t)}))},a.prototype.waveformForId=function(t){var e=this,n=t+".dat";return e._loaders[n]||(e._loaders[n]=new Promise((async function(i){var r=await window.$cache.get(n);if(r)return console.time("waveFormCreate"),i(o.create(r.body)),void console.timeEnd("waveFormCreate");var s=await e.loadBufferForId(t);if(console.log("got waveformBuffer",t,s),!s||s instanceof Error)return i(null);var a=await e.waveformForAudioBuffer(s);console.log("returned from wf",a);var u=a.adapter.data.buffer;return await window.$cache.set(n,{body:u}),i(a)})))},a.prototype.durationForBlob=function(t,e){return void 0===e&&(e=36e5),new Promise((function(n){var i=new Audio,r=!1,o=function(){var t=i.duration;if(console.log("checkDuration",t),t!=1/0&&!r)return i.ondurationchange=null,i.onloadeddata=null,r=!0,n(1e3*t)};i.ondurationchange=o,i.onloadeddata=o,i.src=URL.createObjectURL(t),i.load(),i.currentTime=e/1e3*1.5,i.onerror=function(t){if(console.log("error!",t),!r)return r=!0,n(0)}}))},a.prototype.audioBufferFromBlob=function(t){var e=this;return new Promise((function(n,i){var r=new FileReader;return r.onload=function(){let t=this.result;return e.context().decodeAudioData(t,n,i)},r.readAsArrayBuffer(t)}))},a.prototype.durationForAudioElement=function(t,e){return void 0===e&&(e=36e5),new Promise((function(n){var i=!1,r=function(){var e=t.duration;if(console.log("checkDuration",e),e!=1/0&&!Number.isNaN(e)&&!i)return i=!0,t.ondurationchange=null,t.onloadeddata=null,t.currentTime=0,n(1e3*e)};t.ondurationchange=r,t.onloadeddata=r,t.onerror=function(t){if(console.log("error!",t),!i)return i=!0,n(0)},t.load(),t.currentTime=e/1e3*1.5,r()}))},a.prototype.context=function(){return this._context||(this._context=new(window.AudioContext||window.webkitAudioContext))},a.prototype.output=function(){return this.context().destination},a.prototype.gainNode=function(){return this._gainNode||(this._gainNode=this.context().createGain(),this._gainNode.connect(this.output()),this._gainNode.gain.value=this.getRealVolume()),this._gainNode},a.prototype.sourceForMedia=function(t){return t._mediaSource||(t._mediaSource=this.context().createMediaElementSource(t))},a.prototype.registerMedia=function(t){return t.volume=this.getRealVolume(),this._media.indexOf(t)<0&&this._media.push(t),this},a.prototype.deregisterMedia=function(t){var e=this._media.indexOf(t);return e>=0&&this._media.splice(e,1),this},a.prototype.scheduleClips=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=1);var r=1e3*this.context().currentTime;this.outputLatency()&&(e+=this.outputLatency());for(let c,h=0,l=i(t),d=l.length;h<d;h++){c=l[h];var o=c.buffer||this._buffers[c.fid];if(!o)continue;var s=c.t0-e+r,a=c.t1-c.t0,u=c.skip;if(r>s+a)continue;if(s<r&&(u+=r-s,a-=r-s,s=r),a<200)continue;if(1e3*o.duration-u<100)continue;var p=c.node=this.context().createBufferSource();p.buffer=o,s=(s-r)/n+r,p.connect(this.gainNode()),p.start(s/1e3,u/1e3,a/1e3),1!=n&&(p.playbackRate.value=n)}return t},a.prototype.unscheduleClips=function(t){for(let e,n=0,r=i(t),o=r.length;n<o;n++)e=r[n],e.node&&e.node.stop();return this}},function(t,e,n){function i(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=n(0),s=o.createTagList,a=o.createTagMap,u=o.createTagLoopResult,p=o.createElementFactory(),c=o.createTagScope(),h=n(1),l=(h.ACTION,h.DOM),d=h.SCON,f=h.KEYS,y=l.MUTS,m=n(74).patchString,g=n(175),_=n(35).Container,v=(n(75),n(76)),b={head:"html",body:"html",thead:"table",tbody:"table",tr:"tbody",td:"tr",th:"td",option:"select"},w=null;w=(w=n(176)).default;var x=c.defineTag("LogAttributes",(function(t){t.prototype.render=function(){var t=this.$,e=[];for(let t,i=0,o=r(this.data()),s=o.length;i<s;i++)if(t=o[i],i%2){var n=[d.refToKey(this.data()[i-1])];null!=t&&n.push(t),e.push(n)}i(e);return this.$open(0).setChildren(function(t,n,i,r){for(let o,s=0,a=e.length;s<a;s++)o=e[s],r.push(" "),r.push((t[s]||p("span",t,s).flag("name")).setContent(o[0],3)),o[1]&&(r.push(n[s]||p("u",n,s).setText("=")),r.push((i[s]||p(S,i,s)).bindData(o,1).end()));return r}(t[0]||a(t,0),t[1]||a(t,1),t[2]||a(t,2),[]),3).synced()}})),S=c.defineTag("LogVal",(function(t){t.prototype.type=function(){var t,e;return this.data()instanceof Array?f[this.data()[0]]:"string"==typeof(t=this.data())||t instanceof String?"string":"number"==typeof(e=this.data())||e instanceof Number?"number":null==this.data()?"null":null==this.data()?"undefined":1==this.data()||0==this.data()?"bool":this.data()instanceof Array?"array":this.data()instanceof Object?"object":"value"},t.prototype.errorPosition=function(t){try{var e=t[3][2]}catch(t){}return e?" ("+e[2]+":"+e[3]+")":""},t.prototype.render=function(){var t=this.$,e=this.type(),n=this.data();return this.$open(0).setFlag(-1,"tok-"+e).setChildren("string"==e?o.static([t[0]||p("u",t,0,this).setText('"'),n,t[1]||p("u",t,1,this).setText('"')],1,1):"array"==e?o.static([t[2]||p("u",t,2,this).setText("["),function(t,e,i){for(let o=0,s=r(n),a=s.length;o<a;o++)o<=1||(o>2&&i.push(t[o]||p("u",t,o).setText(", ")),i.push((e[o]||p(S,e,o)).setData(s[o]).end()));return i}(t[3]||a(t,3),t[4]||a(t,4),u()),n.length<n[1]?o.static([t[5]||p("u",t,5,this).setText(", "),t[6]||p("u",t,6,this).flag("more").setText("...")],2,2):void 0,t[7]||p("u",t,7,this).setText("]")],1,3):"function"==e?n[1]:"element"==e?o.static([t[8]||p("u",t,8,this).setText("<"),(t[9]||p("span",t,9,this).flag("name")).setContent(d.refToKey(n[1]),3),(t[10]||p(x,t,10,this)).bindData(n,2).end(),t[11]||p("u",t,11,this).setText(">")],2,4):"error"==e?o.static([(t[12]||p("span",t,12,this).flag("category")).setContent(n[1]+": ",3),(t[13]||p("span",t,13,this).flag("message")).setContent(n[2],3),(t[14]||p("span",t,14,this)).setContent(this.errorPosition(n),3)],2,5):"object"==e?o.static([t[15]||p("u",t,15,this).setText("{"),function(t,e,i){var o;for(let s,a=0,u=r(Object.keys(n)),c=u.length;a<c;a++)s=u[a],a>0&&i.push(t[a]||p("u",t,a).flag("delim").setText(", ")),i.push((o=e[a]||(o=p("span",e,a)).flag("kv").setContent([p("span",o.$,"A",o).flag("tok-key"),p("u",o.$,"B",o).setText(": "),p(S,o.$,"C",o).flag("value")],2)).end((o.$.A.setContent(s,3),o.$.C.bindData(n,s).end(),!0)));return i}(t[16]||a(t,16),t[17]||a(t,17),u()),t[18]||p("u",t,18,this).setText("}")],1,6):"null"==e?"null":"udef"==e?"undefined":"bool"==e?n?"true":"false":n instanceof Array?n[1]:n,3).synced()}})),T=c.defineTag("LogEntry",(function(t){t.prototype.__data={watch:"dataDidSet",name:"data"},t.prototype.data=function(t){return this._data},t.prototype.setData=function(t){var e=this.data();return t!=e&&(this._data=t),t!=e&&this.dataDidSet&&this.dataDidSet(t,e,this.__data),this};let e={warn:"▲",error:"!"};t.prototype.dataDidSet=function(){return this._dirty=!0},t.prototype.type=function(){return this.data()[0]},t.prototype.items=function(){return this.data()[1]},t.prototype.badge=function(){return this.data()[2]},t.prototype.render=function(){var t=this.$,n=this;if(!n._dirty)return;n._dirty=!1;let i=f[n.type()];return n.$open(0).flag("scon").setFlag(-1,"typ-"+i).setChildren([(t[0]||p("i",t,0,n)).setContent(e[i]||">",3),n.badge()>1?(t[1]||p("div",t,1,n).flag("badge").setContent(t[2]||p("span",t,2,1).flag("num"),2)).end((t[2].setContent(n.badge(),3),!0)):void 0,function(t,e,i){for(let o=0,s=r(n.items()),a=s.length;o<a;o++)i.push((t[o]||p(S,t,o)).setData(s[o]).end()),i.push(e[o]||p("u",e,o).setText(","));return i}(t[3]||s(t,3),t[4]||s(t,4),u())],1).synced(),n}}));e.LogEntry=T;var k=c.defineTag("Logs",(function(t){t.prototype.build=function(){return this._dirty=!0},t.prototype.push=function(t){return this._dirty=!0,this._data.push(t)},t.prototype.pop=function(){return this._dirty=!0,this._data.pop()},t.prototype.len=function(){return this._data.length},t.prototype.render=function(){var t=this,e=this.$;if(t._dirty)return t._dirty=!1,t.$open(0).setChildren(function(e){for(let n=0,i=r(t.data()),o=e.taglen=i.length;n<o;n++)(e[n]||p(T,e,n)).setData(i[n]).end();return e}(e[0]||s(e,0)),4).synced()}})),A=1;function E(t,e){var n,i;void 0===e&&(e={});{this._initiator=t,this._logs=p(k).setData(e.logs||[]).end(),this._document=(n=(i=document)&&i.implementation)&&n.createHTMLDocument&&n.createHTMLDocument("Player"),this._pageNumber=A++,this._document?this._html=this._document.documentElement:(this._document=document,this._html=document.createElement("html")),this._root=this._html,this._base=this._document.createElement("base"),this._ref;let r=this.container().origin()+(e.url||"/").split("/").slice(0,-1).join("/")+"/";this.setBaseURI(r),this._base.href=r,this._base.dataset.scrimbaInternal=!0,this._options=e,this._styleNodes=[],this._nodes=[],this._currentStyleSheets={},e.html&&(this.applyInitialState(e.html),this.setLoadAction(!0),this.setLoaded(!0)),this.setStatus(e.status||0)}}e.PlayerPage=E,E.prototype.html=function(t){return this._html},E.prototype.setHtml=function(t){return this._html=t,this},E.prototype.__selection={watch:"selectionDidSet",name:"selection"},E.prototype.selection=function(t){return this._selection},E.prototype.setSelection=function(t){var e=this.selection();return t!=e&&(this._selection=t),t!=e&&this.selectionDidSet&&this.selectionDidSet(t,e,this.__selection),this},E.prototype.focusNode=function(t){return this._focusNode},E.prototype.setFocusNode=function(t){return this._focusNode=t,this},E.prototype.hoverNode=function(t){return this._hoverNode},E.prototype.setHoverNode=function(t){return this._hoverNode=t,this},E.prototype.activeNode=function(t){return this._activeNode},E.prototype.setActiveNode=function(t){return this._activeNode=t,this},E.prototype.__baseURI={watch:"baseURIDidSet",name:"baseURI"},E.prototype.baseURI=function(t){return this._baseURI},E.prototype.setBaseURI=function(t){var e=this.baseURI();return t!=e&&(this._baseURI=t),t!=e&&this.baseURIDidSet&&this.baseURIDidSet(t,e,this.__baseURI),this},E.prototype.logs=function(t){return this._logs},E.prototype.setLogs=function(t){return this._logs=t,this},E.prototype.requestAction=function(t){return this._requestAction},E.prototype.setRequestAction=function(t){return this._requestAction=t,this},E.prototype.loadAction=function(t){return this._loadAction},E.prototype.setLoadAction=function(t){return this._loadAction=t,this},E.prototype.loadedAction=function(t){return this._loadedAction},E.prototype.setLoadedAction=function(t){return this._loadedAction=t,this},E.prototype.location=function(t){return this._location},E.prototype.setLocation=function(t){return this._location=t,this},E.prototype.status=function(t){return this._status},E.prototype.setStatus=function(t){return this._status=t,this},E.prototype.loaded=function(t){return this._loaded},E.prototype.setLoaded=function(t){return this._loaded=t,this},E.prototype.loading=function(t){return this._loading},E.prototype.setLoading=function(t){return this._loading=t,this},E.prototype.tracker=function(t){return this._tracker},E.prototype.setTracker=function(t){return this._tracker=t,this},E.prototype.__tracking={default:!0,name:"tracking"},E.prototype.tracking=function(t){return this._tracking},E.prototype.setTracking=function(t){return this._tracking=t,this},E.prototype._tracking=!0,E.prototype.cancelled=function(t){return this._cancelled},E.prototype.setCancelled=function(t){return this._cancelled=t,this},E.prototype.__errored={default:!1,name:"errored"},E.prototype.errored=function(t){return this._errored},E.prototype.setErrored=function(t){return this._errored=t,this},E.prototype._errored=!1,E.prototype.snapshot=function(t){return this._snapshot},E.prototype.setSnapshot=function(t){return this._snapshot=t,this},E.prototype.history=function(t){return this._history},E.prototype.setHistory=function(t){return this._history=t,this},E.toOptionValue=function(t){return t},E.fromOptionValue=function(t,e){if(t instanceof E)return t;if(t instanceof Object){if(t._RICH)return t._RICH;var n=new this(e,t);return Object.defineProperty(this,"_RICH",{value:n,enumerable:!1,configurable:!0}),n}},E.prototype.container=function(){return _.instance()},E.prototype.branch=function(){return this._initiator&&this._initiator.branch&&this._initiator.branch()},E.prototype.browser=function(){return this._initiator&&this._initiator.browser&&this._initiator.browser()},E.prototype.isLoading=function(){return!this.loaded()},E.prototype.toJSON=function(){return{html:[this.serializeNode(this.html(),!1,!0),this.serializeAttributes(this.html())],logs:this.logs().data(),status:this.status(),url:this._options.url}},E.prototype.doc=function(){return this._document},E.prototype.selectionDidSet=function(t,e){if(this._selectionDidChange=!0,t){var n=t.NODE;return t.ENDNODE||(t.ENDNODE=t[3]?this.nodeForPath(t[3]):n)}},E.prototype.render=function(t){var e=t.document,n=e.documentElement;if(n!=this._html&&(this._document=e,n?e.replaceChild(this._html,n):e.appendChild(this._html)),this._focusNodeSynced!=this._focusNode){var i=this._focusNodeSynced,r=this._focusNode;i&&i.classList&&i.classList.remove("__focus"),r&&r.classList&&r.classList.add("__focus"),this._focusNodeSynced=this._focusNode}return this._hoverNodeSynced!=this._hoverNode&&(this.refreshPseudoClass("__hover",this._hoverNode,this._hoverNodeSynced),this._hoverNodeSynced=this._hoverNode),this._activeNodeSynced!=this._activeNode&&(this.refreshPseudoClass("__active",this._activeNode,this._activeNodeSynced),this._activeNodeSynced=this._activeNode),this._selectionDidChange&&(this.applySelection(t),this._selectionDidChange=!1),this},E.prototype.detach=function(){return this},E.prototype.indexNode=function(t){if(!t.hasChildNodes()){let e=this._nodes.push(t);return t.SCRIMBA_INDEX=e-1,this}for(var e,n=NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT|NodeFilter.SHOW_COMMENT,i=this.doc().createNodeIterator(t,n,null);e=i.nextNode();)"BASE"==e.nodeName&&e.dataset.scrimbaInternal||(e.SCRIMBA_INDEX=this._nodes.push(e)-1);return this},E.prototype.reindexNodes=function(){return this._nodes=[],this.indexNode(this._root),this},E.prototype.nodeForPath=function(t){return this._nodes?this._nodes[t]:null},E.prototype.serializeAttributes=function(t){var e=[];return Array.from(t.attributes).forEach((function(t){let n=d.keyToRef(t.name);return e.push(n),e.push(t.value||null)})),e},E.prototype.serializeNode=function(t,e,n){return g.serializeNode(this.doc(),t,e,n)},E.prototype.deserializeNode=function(t){return"number"==typeof t||t instanceof Number?this.nodeForPath(t):this.nodeForHTML(t)},E.prototype.nodeForHTML=function(t){if(t instanceof Array)t="<div>placeholder</div>";else{if(t.text)return this.doc().createTextNode(t.text);if(t.comment)return this.doc().createComment(t.comment);if(8==t.TYPE)return this.doc().createComment(t.value)}var e=t.slice(1).match(/^\w+/)[0],n=this.doc().createElement(b[e]||"div");return n.innerHTML=t,"body"==e?n.lastElementChild:n.firstElementChild},E.prototype.cleanTextSplitters=function(t){for(var e,n=this.doc().createNodeIterator(t,NodeFilter.SHOW_COMMENT,null);e=n.nextNode();)"§S§"==e.textContent?e.parentNode.removeChild(e):"§S§B"==e.textContent&&e.parentNode.replaceChild(this.doc().createTextNode(""),e);return t},E.prototype.rewriteInlineStyles=function(t){for(let e,n=0,i=r(t.getElementsByTagName("style")),o=i.length;n<o;n++){e=i[n];let t=e.childNodes,o=0;for(;o<e.childNodes.length;){let n=t[o],i=t[o+1],s=n.textContent;if(s.indexOf("\x3c!--§S§--\x3e")>=0){let t=s.split("\x3c!--§S§--\x3e");s=t[0];for(let n=0,o=r(t.slice(1)),s=o.length;n<s;n++){let t=document.createTextNode(o[n]);i?e.insertBefore(t,i):e.appendChild(t)}}s.match(/\:(hover|pressed|active|focus)/)&&(s=v.process(s,{rewritePseudoStates:!0})),n.textContent!=s&&(n.textContent=s),o++}}return this},E.prototype.applyInitialState=function(t){var e=t[0];return e=e.replace(/(<\s*head[^\>]*>)/,"$1"+this._base.outerHTML),e=g.deserializeReferences(e,{BASECSS:w}),this._html.innerHTML=e,this.rewriteInlineStyles(this._html),t[0].indexOf("§S§")>=0&&this.cleanTextSplitters(this._html),this.applyAttributes(this._html,t[1]),this.reindexNodes(),this._currentStyleSheets={},this},E.prototype.applyAttributes=function(t,e){if(e)for(var n=0,i=e.length;n<i;){let i=d.refToKey(e[n]),r=e[n+1];t.setAttribute(i,r),n+=2}},E.prototype.applyMutations=function(t){if(!this._errored){var e,n=!1;for(let p,c=0,h=r(t),l=h.length;c<l;c++)if(p=h[c],p[0]==y.INSERT){n=!0;var i=this.nodeForPath(p[1]),o=p[2],s=p.NODE||(p.NODE=this.deserializeNode(p[3])),a=i.childNodes[o];a?i.insertBefore(s,a):i.appendChild(s),this.indexNode(s)}else if(p[0]==y.INSERT_ADJACENT){n=!0;let t=p.RELNODE||(p.RELNODE=this.nodeForPath(p[1])),e=y.POS[p[2]];if(p.NODES){for(let e,n=0,i=r(p.NODES),o=i.length;n<o;n++)e=i[n],0==p[2]?t.parentNode.insertBefore(e,t):2==p[2]?t.appendChild(e):console.log("node not added in M.INSERT_ADJACENT!!",p);continue}let i,o=p[3],s=t.previousSibling,a=(t.nextSibling,t.parentNode),u=t.lastChild,c=null,h="",l=[];if(0==p[2]&&t.nodeType!=Node.ELEMENT_NODE&&(c=document.createElement("span"),a.insertBefore(c,t),t=c),"number"==typeof o){let n=this.nodeForPath(o);t.insertAdjacentElement(e,n),l.push(n),p.NODES=[n],c&&a.removeChild(c);continue}if("string"==typeof o){if("HTML"==t.nodeName){let n=this.nodeForHTML(o);t.insertAdjacentElement(e,n)}else t.insertAdjacentHTML(e,o);h+=o}else for(let n,i=0,s=r(o),a=s.length;i<a;i++)if(n=s[i],"string"==typeof n){if("HTML"==t.nodeName){let i=this.nodeForHTML(n);t.insertAdjacentElement(e,i)}else t.insertAdjacentHTML(e,n);h+=n}else if("number"==typeof n){let i=this.nodeForPath(n);t.insertAdjacentElement(e,i),l.push(i)}let d=[];for(h.indexOf("<style")>=0&&this.rewriteInlineStyles(a),h.indexOf("§S§")>=0&&this.cleanTextSplitters(a),"beforeend"==e?i=u?u.nextSibling:t.firstChild:"beforebegin"==e&&(i=s?s.nextSibling:a.firstChild);i&&i!=t;)l.indexOf(i)<0&&this.indexNode(i),d.push(i),i=i.nextSibling;c&&c.parentNode==a&&a.removeChild(c),p.NODES=d}else if(p[0]==y.REMOVE)n=!0,(e=p.NODE||(p.NODE=this.nodeForPath(p[1])))&&(p.REL||(p.REL=e.nextSibling),p.PARENT||(p.PARENT=e.parentNode),e.parentNode?e.parentNode.removeChild(e):console.warn("M.REMOVE has no parent",e,e.parentNode,p,p.PARENT));else if(p[0]==y.SETTEXT)(e=p.NODE=this.nodeForPath(p[1]))&&(p.PREV=e.textContent,e.textContent=m(p.PREV,p[2]));else if((e=p.NODE=this.nodeForPath(p[1]))&&p[0]==y.SETPROP){var u=y.NAME_MAP[p[2]]||p[2];p.PREV||(p.PREV=e[u]),e[u]=p[3]}else e&&p[0]==y.SETATTR&&(u=y.NAME_MAP[p[2]]||p[2],p.PREV||(p.PREV=e.getAttribute(u)),"class"==u&&(p.STATEFLAGS||(p.STATEFLAGS=e.className.split(" ").filter((function(t){return t.match(/^__\w+/)})))),"STYLE"==e.nodeName||"LINK"==e.nodeName||(null==p[3]?e.removeAttribute(u):e.setAttribute(u,p[3])),"IMG"==e.nodeName&&"src"==u&&this.rewriteImageSrc(e),p.STATEFLAGS&&p.STATEFLAGS.map((function(t){return e.classList.add(t)})));return n&&this.reindexNodes(),this}},E.prototype.revertMutations=function(t){if(!this.errored()){for(var e,n=!1,o=i(t)-1;o>=0;){var s=t[o--];if(s[0]==y.INSERT)n=!0,(e=s.NODE)&&(e.parentNode?e.parentNode.removeChild(e):console.warn("revert INSERT - no parent!",e));else if(s[0]==y.INSERT_ADJACENT){n=!0;for(let t,e=0,n=r(s.NODES),i=n.length;e<i;e++)t=n[e],t.parentNode?t.parentNode.removeChild(t):console.warn("revert INSERT_ADJACENT - no parent!",t,s)}else if(s[0]==y.REMOVE){n=!0;var a=s.PARENT;s.REL?a.insertBefore(s.NODE,s.REL):a.appendChild(s.NODE)}else if(s[0]==y.SETTEXT&&s.NODE)s.NODE.textContent=s.PREV;else if(s[0]==y.SETPROP&&s.NODE){var u=y.NAME_MAP[s[2]]||s[2];s.NODE[u]=s.PREV}else s[0]==y.SETATTR&&s.NODE&&(u=y.NAME_MAP[s[2]]||s[2],null==s.PREV?s.NODE.removeAttribute(u):s.NODE.setAttribute(u,s.PREV))}return n&&this.reindexNodes(),this}},E.prototype.refreshPseudoClass=function(t,e,n){for(;n&&n!=this._root&&(!e||!n.contains(e));)n.classList&&n.classList.remove(t),n=n.parentNode;for(;e&&e!=this._root&&this._root.contains(e);)e.classList&&e.classList.add(t),e=e.parentNode},E.prototype.applySelection=function(t){var e=this.selection(),n=t.getSelection();if(n){if(!e||!e.NODE||e.NODE==this._document.body)return n&&n.removeAllRanges(),this;var i=e.NODE,r=e[1],o=e[2],s=e.ENDNODE;if("INPUT"==i.nodeName||"TEXTAREA"==i.nodeName){if("INPUT"==i.nodeName&&!/text|search|password|tel|url/.test(i.type))return;return r<o?i.setSelectionRange(r,o,"forward"):r>o?i.setSelectionRange(o,r,"backward"):i.setSelectionRange(r,o,"none")}var a=this.doc().createRange();return i!=s?i.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_PRECEDING?(a.setStart(s,o),a.setEnd(i,r)):(a.setStart(i,r),a.setEnd(s,o)):(3==i.nodeType&&(r=Math.min(i.length,r),o=Math.min(i.length,o)),r<=o?(a.setStart(i,r),a.setEnd(i,o)):(a.setStart(i,o),a.setEnd(i,r)),r==o&&a.collapse(!1)),n.removeAllRanges(),n.addRange(a)}},E.prototype.syncStyleSheets=function(t,e){void 0===e&&(e=!1);for(let t,n=0,i=r(this.html().querySelectorAll('link[rel="stylesheet"]')),o=i.length;n<o;n++){t=i[n];t.href;e&&(t.href=t.href.split("?")[0]+"?"+Math.random())}let n=[];for(let e,a=0,u=r(t),p=u.length;a<p;a++)if(e=u[a],"css"==e.lang()){var o=e.path();if(!o.startsWith(this.browser().rootPath()))continue;o=o.slice(i(this.browser().rootPath())-1);var s=e.currentBody();n.push(this._currentStyleSheets[o]!=s&&(this._currentStyleSheets[o]=s,this.setCSSText(o,v.process(s,{rewritePseudoStates:!0}))))}return n},E.prototype.setCSSText=function(t,e){var n,i=t.slice(1);if(n=this.html().querySelector("style[scrimba-live='"+t+"'],style[scrimba-live][href='"+i+"']"))return e="/*SCRIMBA:IGNORE:START*/"+e+"/*SCRIMBA:IGNORE:END*/",n.textContent=e},E.prototype.setStyles=function(t){return this}},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=n(1).ACTION,s=n(79).PaneTab,a=n(3).Widget,u=n(196).PaneView;s=n(79).PaneTab;e.PaneTab=s,e.PaneView=u;var p=n(10).Dimensions;function c(){return a.apply(this,arguments)}i.subclass(c,a),e.PaneWidget=c,c.register("pane"),c.option("layout",{overridable:!0,type:p,action:o.LAYOUT}),c.prototype.tab=function(){this.$$||(this.$$={});return(this._tab=this._tab||r(s,this).flag("tab")).setData(this).end()},c.prototype.clientLayout=function(){return(this._clientLayout||(this._clientLayout=new p(null))).wrap(this.options().locals().layout)},c.prototype.streamLayout=function(){return(this._streamLayout||(this._streamLayout=p.build({}))).wrap(this._data.layout)},c.prototype.agentLayout=function(){return this.streamLayout()},c.prototype.localLayout=function(){return this.clientLayout()},c.prototype.setLayout=function(t){return this.options().set("layout",t)},c.prototype.streamPosToClientPos=function(t){return this},c.prototype.posToScreen=function(t,e,n,i){if(n||(n=this.agentLayout()),i||(i=this.localLayout()),!(n&&i&&n._data&&i._data))return null;var r=t,o=e,s=(i.scaleX()||1)/(n.scaleX()||1),a=(i.scaleY()||1)/(n.scaleY()||1);let u=(r-n.left()+(n.scrollLeft()||0))*s,p=(o-n.top()+(n.scrollTop()||0))*a;return[u+i.left()-(i.scrollLeft()||0),p+i.top()-(i.scrollTop()||0)]}},function(t,e,n){var i=n(28).ExtBuffer,r=n(111),o=n(112),s=n(17);function a(){var t=this.options;return this.encode=function(t){var e=o.getWriteType(t);return function(t,n){var i=e[typeof n];if(!i)throw new Error('Unsupported type "'+typeof n+'": '+n);i(t,n)}}(t),t&&t.preset&&r.setExtPackers(this),this}s.install({addExtPacker:function(t,e,n){n=s.filter(n);var r=e.name;if(r&&"Object"!==r){(this.extPackers||(this.extPackers={}))[r]=o}else{(this.extEncoderList||(this.extEncoderList=[])).unshift([e,o])}function o(e){return n&&(e=n(e)),new i(e,t)}},getExtPacker:function(t){var e=this.extPackers||(this.extPackers={}),n=t.constructor,i=n&&n.name&&e[n.name];if(i)return i;for(var r=this.extEncoderList||(this.extEncoderList=[]),o=r.length,s=0;s<o;s++){var a=r[s];if(n===a[0])return a[1]}},init:a}),e.preset=a.call(s.preset)},function(t,e,n){e.ExtBuffer=function t(e,n){if(!(this instanceof t))return new t(e,n);this.buffer=i.from(e),this.type=n};var i=n(5)},function(t,e,n){"use strict";(function(t){/*!
* The buffer module from node.js, for the browser.
*
* @author Feross Aboukhadijeh <http://feross.org>
* @license MIT
*/var i=n(104),r=n(105),o=n(106);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return p(this,t,e,n)}function p(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=l(t,e);return t}(t,e,n,i):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|f(e,n),r=(t=a(t,i)).write(e,n);r!==i&&(t=t.slice(0,r));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?a(t,0):l(t,e);if("Buffer"===e.type&&o(e.data))return l(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=a(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function l(t,e){var n=e.length<0?0:0|d(e.length);t=a(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function f(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(t).length;default:if(i)return B(t).length;e=(""+e).toLowerCase(),i=!0}}function y(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return k(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function m(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function g(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=u.from(e,i)),u.isBuffer(e))return 0===e.length?-1:_(t,e,n,i,r);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):_(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function _(t,e,n,i,r){var o,s=1,a=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function p(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var c=-1;for(o=n;o<a;o++)if(p(t,o)===p(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var h=!0,l=0;l<u;l++)if(p(t,o+l)!==p(e,l)){h=!1;break}if(h)return o}return-1}function v(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function b(t,e,n,i){return U(B(e,t.length-n),t,n,i)}function w(t,e,n,i){return U(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function x(t,e,n,i){return w(t,e,n,i)}function S(t,e,n,i){return U(V(e),t,n,i)}function T(t,e,n,i){return U(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function k(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,u,p=t[r],c=null,h=p>239?4:p>223?3:p>191?2:1;if(r+h<=n)switch(h){case 1:p<128&&(c=p);break;case 2:128==(192&(o=t[r+1]))&&(u=(31&p)<<6|63&o)>127&&(c=u);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(u=(15&p)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&p)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return n}(i)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return p(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,i){return c(e),e<=0?a(t,e):void 0!==n?"string"==typeof i?a(t,e).fill(n,i):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=u.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},u.byteLength=f,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):y.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,i,r){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),p=this.slice(i,r),c=t.slice(e,n),h=0;h<a;++h)if(p[h]!==c[h]){o=p[h],s=c[h];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},u.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function C(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function D(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=z(t[o]);return r}function O(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function M(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,n,i,r,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function P(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function N(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function $(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(t,e,n,i,o){return o||$(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function I(t,e,n,i,o){return o||$(t,0,n,8),r.write(t,e,n,i,52,8),n+8}u.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var r=e-t;n=new u(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},u.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),r.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),r.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),r.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),r.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||L(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||L(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);L(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);L(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return R(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return R(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return I(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return I(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:B(new u(t,i).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function z(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function U(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(12))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var i,r=n(110);e.copy=p,e.slice=c,e.toString=function(t,e,n){var i=!a&&o.isBuffer(this)?this.toString:r.toString;return i.apply(this,arguments)},e.write=(i="write",function(){var t=this[i]||r[i];return t.apply(this,arguments)});var o=n(5),s=o.global,a=o.hasBuffer&&"TYPED_ARRAY_SUPPORT"in s,u=a&&!s.TYPED_ARRAY_SUPPORT;function p(t,e,n,i){var s=o.isBuffer(this),a=o.isBuffer(t);if(s&&a)return this.copy(t,e,n,i);if(u||s||a||!o.isView(this)||!o.isView(t))return r.copy.call(this,t,e,n,i);var p=n||null!=i?c.call(this,n,i):this;return t.set(p,e),p.length}function c(t,e){var n=this.slice||!u&&this.subarray;if(n)return n.call(this,t,e);var i=o.alloc.call(this,e-t);return p.call(this,i,0,t,e),i}},function(t,e,n){(function(t){!function(e){var n,i=void 0!==t&&t,r="undefined"!=typeof Uint8Array&&Uint8Array,o="undefined"!=typeof ArrayBuffer&&ArrayBuffer,s=[0,0,0,0,0,0,0,0],a=Array.isArray||function(t){return!!t&&"[object Array]"==Object.prototype.toString.call(t)},u=4294967296;function p(t,a,p){var b=a?0:4,w=a?4:0,x=a?0:3,S=a?1:2,T=a?2:1,k=a?3:0,A=a?m:_,E=a?g:v,C=M.prototype,D="is"+t,O="_"+D;return C.buffer=void 0,C.offset=0,C[O]=!0,C.toNumber=L,C.toString=function(t){var e=this.buffer,n=this.offset,i=N(e,n+b),r=N(e,n+w),o="",s=!p&&2147483648&i;s&&(i=~i,r=u-r);t=t||10;for(;;){var a=i%t*u+r;if(i=Math.floor(i/t),r=Math.floor(a/t),o=(a%t).toString(t)+o,!i&&!r)break}s&&(o="-"+o);return o},C.toJSON=L,C.toArray=c,i&&(C.toBuffer=h),r&&(C.toArrayBuffer=l),M[D]=function(t){return!(!t||!t[O])},e[t]=M,M;function M(t,e,i,a){return this instanceof M?function(t,e,i,a,p){r&&o&&(e instanceof o&&(e=new r(e)),a instanceof o&&(a=new r(a)));if(!(e||i||a||n))return void(t.buffer=y(s,0));if(!d(e,i)){p=i,a=e,i=0,e=new(n||Array)(8)}if(t.buffer=e,t.offset=i|=0,void 0===a)return;"string"==typeof a?function(t,e,n,i){var r=0,o=n.length,s=0,a=0;"-"===n[0]&&r++;var p=r;for(;r<o;){var c=parseInt(n[r++],i);if(!(c>=0))break;a=a*i+c,s=s*i+Math.floor(a/u),a%=u}p&&(s=~s,a?a=u-a:s++);P(t,e+b,s),P(t,e+w,a)}(e,i,a,p||10):d(a,p)?f(e,i,a,p):"number"==typeof p?(P(e,i+b,a),P(e,i+w,p)):a>0?A(e,i,a):a<0?E(e,i,a):f(e,i,s,0)}(this,t,e,i,a):new M(t,e,i,a)}function L(){var t=this.buffer,e=this.offset,n=N(t,e+b),i=N(t,e+w);return p||(n|=0),n?n*u+i:i}function P(t,e,n){t[e+k]=255&n,n>>=8,t[e+T]=255&n,n>>=8,t[e+S]=255&n,n>>=8,t[e+x]=255&n}function N(t,e){return 16777216*t[e+x]+(t[e+S]<<16)+(t[e+T]<<8)+t[e+k]}}function c(t){var e=this.buffer,i=this.offset;return n=null,!1!==t&&0===i&&8===e.length&&a(e)?e:y(e,i)}function h(e){var r=this.buffer,o=this.offset;if(n=i,!1!==e&&0===o&&8===r.length&&t.isBuffer(r))return r;var s=new i(8);return f(s,0,r,o),s}function l(t){var e=this.buffer,i=this.offset,s=e.buffer;if(n=r,!1!==t&&0===i&&s instanceof o&&8===s.byteLength)return s;var a=new r(8);return f(a,0,e,i),a.buffer}function d(t,e){var n=t&&t.length;return e|=0,n&&e+8<=n&&"string"!=typeof t[e]}function f(t,e,n,i){e|=0,i|=0;for(var r=0;r<8;r++)t[e++]=255&n[i++]}function y(t,e){return Array.prototype.slice.call(t,e,e+8)}function m(t,e,n){for(var i=e+8;i>e;)t[--i]=255&n,n/=256}function g(t,e,n){var i=e+8;for(n++;i>e;)t[--i]=255&-n^255,n/=256}function _(t,e,n){for(var i=e+8;e<i;)t[e++]=255&n,n/=256}function v(t,e,n){var i=e+8;for(n++;e<i;)t[e++]=255&-n^255,n/=256}p("Uint64BE",!0,!0),p("Int64BE",!0,!1),p("Uint64LE",!1,!0),p("Int64LE",!1,!1)}("string"!=typeof e.nodeName?e:this||{})}).call(this,n(29).Buffer)},function(t,e,n){var i=n(28).ExtBuffer,r=n(114),o=n(51).readUint8,s=n(115),a=n(17);function u(){var t=this.options;return this.decode=function(t){var e=s.getReadToken(t);return function(t){var n=o(t),i=e[n];if(!i)throw new Error("Invalid type: "+(n?"0x"+n.toString(16):n));return i(t)}}(t),t&&t.preset&&r.setExtUnpackers(this),this}a.install({addExtUnpacker:function(t,e){(this.extUnpackers||(this.extUnpackers=[]))[t]=a.filter(e)},getExtUnpacker:function(t){return(this.extUnpackers||(this.extUnpackers=[]))[t]||function(e){return new i(e,t)}},init:u}),e.preset=u.call(a.preset)},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(21).Icon,a=o.defineTag("Button","button",(function(t){t.prototype.action=function(t){return this._action},t.prototype.setAction=function(t){return this._action=t,this},t.prototype.icon=function(t){return this._icon},t.prototype.setIcon=function(t){return this._icon=t,this},t.prototype.label=function(t){return this._label},t.prototype.setLabel=function(t){return this._label=t,this},t.prototype.href=function(t){return this._href},t.prototype.setHref=function(t){return this._href=t,this},t.prototype.uxaAnchor=function(t){return this._uxaAnchor},t.prototype.setUxaAnchor=function(t){return this._uxaAnchor=t,this},t.prototype.build=function(){return this.dom().setAttribute("type","button")},t.prototype.contextData=function(){for(var t=null,e=this;e;){if(t=e.data())return t;e=e.parent()}return null},t.prototype.ontap=function(t){var e=this.action();return e&&this.trigger("uxa:action",e),"string"==typeof e||e instanceof String?(t.halt().silence(),this.trigger(e,this.contextData())):e instanceof Array?(t.halt().silence(),this.trigger(e[0],e.slice(1))):t._responder=null,this},t.prototype.ontouchstart=function(t){return this.flag("_touch")},t.prototype.ontouchend=function(){return this.unflag("_touch")},t.prototype.ontouchcancel=function(){return this.unflag("_touch")},t.prototype.render=function(){var t=this.$;return this.$open(0).flag("uxa").setChildren([this.icon()?(t[0]||r(s,t,0,this)).bindData(this,"icon",[]).end():void 0,this.label()?this.href()?(t[1]||r("b",t,1,this).setContent(t[2]||r("a",t,2,1),2)).end((t[2].setHref(this.href()).setNestedAttr("uxa","md",this.label()).end(),!0)):(t[3]||r("b",t,3,this)).setNestedAttr("uxa","md",this.label()).end():void 0],1).synced()}}));e.Button=a;var u=o.defineTag("IconButton",a);e.IconButton=u},function(t,e,n){var i=n(0),r=i.createTagScope(),o=i.createElementFactory(),s=r.defineTag("ServiceWorkerFrame","iframe",(function(t){t.prototype.send=function(t){return this.dom().contentWindow.postMessage(t,"*")}}));function a(t){this._id=t,this._runner=o(s).setSrc(this.origin()+"/__sw__.html?"+t).end(),this._player=o(s).setSrc("/__sw__.html?"+t).end()}e.Container=a,a.prototype.__controller={watch:"controllerDidSet",name:"controller"},a.prototype.controller=function(t){return this._controller},a.prototype.setController=function(t){var e=this.controller();return t!=e&&(this._controller=t),t!=e&&this.controllerDidSet&&this.controllerDidSet(t,e,this.__controller),this},a.prototype.runner=function(t){return this._runner},a.prototype.setRunner=function(t){return this._runner=t,this},a.prototype.player=function(t){return this._player},a.prototype.setPlayer=function(t){return this._player=t,this};var u={};a.instance=function(t){return void 0===t&&(t=window.CONTAINER_ID),u[t]||(u[t]=new this(t))},a.prototype.origin=function(t){let e=this._id;return t&&(e+="-"+t),document.location.origin.replace("://","://"+e+".")},a.prototype.mount=function(){var t=this;return t._mounted||(t._onmessage=function(e){return e.source==t._runner.dom().contentWindow?t.onrunnermessage(e.data,e):e.source==t._player.dom().contentWindow?t.onplayermessage(e.data,e):void 0},document.body.appendChild(t._runner.dom()),document.body.appendChild(t._player.dom()),window.addEventListener("message",t._onmessage),t._mounted=!0),t},a.prototype.unmount=function(){return this._mounted&&(window.removeEventListener("message",this._onmessage),this._onmessage=null,this._mounted=!1,this._runner.orphanize(),this._player.orphanize()),this},a.prototype.onrunnermessage=function(t,e){var n,i=this;if(i.controller()){return(n=i.controller())&&n.oncontainermessage&&n.oncontainermessage(t,(function(e){return t.ref&&t.ref>0&&(e.ref=-t.ref),i.runner().send(e)}),"runner")}},a.prototype.onplayermessage=function(t,e){var n,i=this;if(i.controller()){return(n=i.controller())&&n.oncontainermessage&&n.oncontainermessage(t,(function(e){return t.ref&&t.ref>0&&(e.ref=-t.ref),i.player().send(e)}),"player")}},a.prototype.controllerDidSet=function(t,e){return this.mount()},a.prototype.send=function(t){return this.runner().send(t),this.player().send(t)},a.prototype.sync=function(t){var e=t.toRunStaticSnapshot();return this.send({type:"snapshot",data:e}),this}},function(t,e){const n=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];e.conf={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\$\^\&\*\(\)\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\s]+)/g,comments:{blockComment:["\x3c!--","--\x3e"]},brackets:[["\x3c!--","--\x3e"],["<",">"],["{","}"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:'"',close:'"'},{open:"'",close:"'"},{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"}],onEnterRules:[{beforeText:new RegExp("<(?!(?:"+n.join("|")+"))([_:\\w][_:\\w-.\\d]*)([^/>]*(?!/)>)[^<]*$","i"),afterText:/^<\/([_:\w][_:\w-.\d]*)\s*>$/i,action:{indentAction:2}},{beforeText:new RegExp("<(?!(?:"+n.join("|")+"))(\\w[\\w\\d]*)([^/>]*(?!/)>)[^<]*$","i"),action:{indentAction:1}}]},e.language={defaultToken:"",tokenPostfix:".html",ignoreCase:!0,tokenizer:{root:[[/<!DOCTYPE/,"metatag","@doctype"],[/<!--/,"comment","@comment"],[/(<)((?:[\w\-]+:)?[\w\-]+)(\s*)(\/>)/,["delimiter","tag","","delimiter"]],[/(<)(script)/,["delimiter",{token:"tag",next:"@script"}]],[/(<)(style)/,["delimiter",{token:"tag",next:"@style"}]],[/(<)((?:[\w\-]+:)?[\w\-]+)/,["delimiter",{token:"tag",next:"@otherTag"}]],[/(<\/)((?:[\w\-]+:)?[\w\-]+)/,["delimiter",{token:"tag",next:"@otherTag"}]],[/</,"delimiter"],[/[^<]+/]],doctype:[[/[^>]+/,"metatag.content"],[/>/,"metatag","@pop"]],comment:[[/-->/,"comment","@pop"],[/[^-]+/,"comment.content"],[/./,"comment.content"]],otherTag:[[/\/?>/,"delimiter","@pop"],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w\-]+/,"attribute.name"],[/=/,"delimiter"],[/[ \t\r\n]+/]],script:[[/type/,"attribute.name","@scriptAfterType"],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w\-]+/,"attribute.name"],[/=/,"delimiter"],[/>/,{token:"delimiter",next:"@scriptEmbedded",nextEmbedded:"text/javascript"}],[/[ \t\r\n]+/],[/(<\/)(script\s*)(>)/,["delimiter","tag",{token:"delimiter",next:"@pop"}]]],scriptAfterType:[[/=/,"delimiter","@scriptAfterTypeEquals"],[/>/,{token:"delimiter",next:"@scriptEmbedded",nextEmbedded:"text/javascript"}],[/[ \t\r\n]+/],[/<\/script\s*>/,{token:"@rematch",next:"@pop"}]],scriptAfterTypeEquals:[[/('|")module('|")/,{token:"string",next:"@scriptTypeModule.$2"}],[/"([^"]*)"/,{token:"attribute.value",switchTo:"@scriptWithCustomType.$1"}],[/'([^']*)'/,{token:"attribute.value",switchTo:"@scriptWithCustomType.$1"}],[/>/,{token:"delimiter",next:"@scriptEmbedded",nextEmbedded:"text/javascript"}],[/[ \t\r\n]+/],[/<\/script\s*>/,{token:"@rematch",next:"@pop"}]],scriptWithCustomType:[[/>/,{token:"delimiter",next:"@scriptEmbedded.$S2",nextEmbedded:"$S2"}],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w\-]+/,"attribute.name"],[/=/,"delimiter"],[/[ \t\r\n]+/],[/<\/script\s*>/,{token:"@rematch",next:"@pop"}]],scriptEmbedded:[[/<\/script/,{token:"@rematch",next:"@pop",nextEmbedded:"@pop"}],[/[^<]+/,""]],scriptTypeModule:[[/>/,{token:"delimiter",nextEmbedded:"text/javascript"}],[/<\/script/,{token:"@rematch",next:"@pop",nextEmbedded:"@pop"}]],style:[[/type/,"attribute.name","@styleAfterType"],[/lang/,"attribute.name","@styleAfterType"],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w\-]+/,"attribute.name"],[/=/,"delimiter"],[/>/,{token:"delimiter",next:"@styleEmbedded",nextEmbedded:"text/css"}],[/[ \t\r\n]+/],[/(<\/)(style\s*)(>)/,["delimiter","tag",{token:"delimiter",next:"@pop"}]]],styleAfterType:[[/=/,"delimiter","@styleAfterTypeEquals"],[/>/,{token:"delimiter",next:"@styleEmbedded",nextEmbedded:"text/css"}],[/[ \t\r\n]+/],[/<\/style\s*>/,{token:"@rematch",next:"@pop"}]],styleAfterTypeEquals:[[/"([^"]*)"/,{token:"attribute.value",switchTo:"@styleWithCustomType.$1"}],[/'([^']*)'/,{token:"attribute.value",switchTo:"@styleWithCustomType.$1"}],[/>/,{token:"delimiter",next:"@styleEmbedded",nextEmbedded:"text/css"}],[/[ \t\r\n]+/],[/<\/style\s*>/,{token:"@rematch",next:"@pop"}]],styleWithCustomType:[[/>/,{token:"delimiter",next:"@styleEmbedded.$S2",nextEmbedded:"$S2"}],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w\-]+/,"attribute.name"],[/=/,"delimiter"],[/[ \t\r\n]+/],[/<\/style\s*>/,{token:"@rematch",next:"@pop"}]],styleEmbedded:[[/<\/style/,{token:"@rematch",next:"@pop",nextEmbedded:"@pop"}],[/[^<]+/,""]]}}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(0);function o(t,e){this._data=t,this._data._cue=this,this._owner=e,this._version=0}function s(){return o.apply(this,arguments)}function a(){return o.apply(this,arguments)}function u(t){var e=this;e._data=t,e._ranges=[],e._cues=(t.cues||[]).map((function(t){return new s(t,e)})).sort((function(t,e){return t.start()-e.start()})),e._version=0,e._dirty=!0,e.compute()}e.Segment=o,o.deserialize=function(t,e){return new this(t,e)},o.prototype.version=function(t){return this._version},o.prototype.setVersion=function(t){return this._version=t,this},o.prototype.data=function(t){return this._data},o.prototype.setData=function(t){return this._data=t,this},o.prototype.__disabled={watch:"dirty",name:"disabled"},o.prototype.disabled=function(t){return this._disabled},o.prototype.setDisabled=function(t){var e=this.disabled();return t!=e&&(this._disabled=t),t!=e&&this.dirty&&this.dirty(t,e,this.__disabled),this},o.prototype.span=function(){return this.end()-this.start()},o.prototype.start=function(){return this._data[1]},o.prototype.span=function(){return this._data[2]},o.prototype.end=function(){return this.start()+this._data[2]},o.prototype.duration=function(){return this._data[3]||0},o.prototype.options=function(){return this._data[4]},o.prototype.setOptions=function(t){return this._data[4]=t,this.dirty()},o.prototype.dirty=function(){return this._version++,this._owner&&this._owner.dirty&&this._owner.dirty(),this},o.prototype.moveTo=function(t,e){return void 0===e&&(e=0),this._data[1]=Math.round(t-this.span()*e),this.dirty()},o.prototype.anchor=function(t){return void 0===t&&(t=0),this.start()+this.span()*t},o.prototype.contains=function(t){return"number"==typeof t||t instanceof Number?t>=this.start()&&this.end()>=t:t instanceof o&&(t.start()>=this.start()&&this.end()>=t.end())},o.prototype.setStart=function(t,e){if(void 0===e&&(e=!1),this.start()!=t){let n=this.start()-t;this._data[1]=t,e||(this._data[2]+=n),this.dirty()}return this},o.prototype.setEnd=function(t,e){return void 0===e&&(e=!1),this.end()!=t&&(this._data[2]=Math.max(0,t-this.start()),this.dirty()),this},o.prototype.setSpan=function(t){return this.span()!=t&&(this._data[2]=t,this.dirty()),this},o.prototype.setDuration=function(t){return this.duration()!=t&&(this._data[3]=t,this.dirty()),this},r.subclass(s,o),e.Cue=s,r.subclass(a,o),e.Media=a,e.TimelineCues=u,u.prototype.data=function(t){return this._data},u.prototype.setData=function(t){return this._data=t,this},u.prototype.cues=function(t){return this._cues},u.prototype.setCues=function(t){return this._cues=t,this},u.prototype.ranges=function(t){return this._ranges},u.prototype.setRanges=function(t){return this._ranges=t,this},u.prototype.version=function(t){return this._version},u.prototype.setVersion=function(t){return this._version=t,this},u.prototype.media=function(t){return this._media},u.prototype.setMedia=function(t){return this._media=t,this},u.prototype.normalizeMedia=function(){this.media().sort((function(t,e){return t.start()-e.start()}));for(let t=0,e=i(this.media()).length;t<e;t++){this.media()[t+1]}return this},u.prototype.markers=function(){return this._data.markers||[]},u.prototype.audio=function(){return this._data.audio||this.markers().filter((function(t){return"audio"==t.type}))},u.prototype.lastAudioMarkerOffset=function(){var t=this.audio().map((function(t){return t[1]+t[2]}));return Math.max.apply(Math,t)},u.prototype.dirty=function(){return this._dirty=!0,this._version++,this._data.cues=this._cues.map((function(t){return t.data()})),this},u.prototype.ranges=function(){return this.compute(),this._ranges},u.prototype.addCue=function(t){let e=s.deserialize(t,this);return this._cues.push(e),this._cues.sort((function(t,e){return t.start()-e.start()})),this.dirty(),e},u.prototype.removeCue=function(t){return this._cues=this._cues.filter((function(e){return e!=t&&e.data()!=t})),this.dirty()},u.prototype.trimCuesAndAudio=function(t){this._cues=this._cues.filter((function(e){return e.start()<t}));for(let e,n=0,r=i(this._cues),o=r.length;n<o;n++)e=r[n],e.end()<=t||e.setEnd(t);return this._data.audio=this._data.audio.filter((function(e){return e[1]<t})),this._data.end=t,this.dirty(),this._data},u.prototype.compute=function(){if(!this._dirty)return this._ranges;this._dirty=!1;var t={o0:0,o1:0,t0:0,t1:0};this._ranges=[];var e=this._cues.slice(0).filter((function(t){return t.span()>0&&!t.disabled()}));e=e.map((function(t){return t.data().slice(0)})).sort((function(t,e){return t[1]-e[1]}));let n=0;for(var r;r=e[n];){let t=e[n-1];if(t){let i=t[1]+t[2],o=r[1]+r[2];if(r[1]>=t[1]&&i>=o){e.splice(n,1);continue}if(i>r[1]){let t=i-r[1];r[1]+=t,r[2]-=t}}n++}for(let n,r=0,u=i(e),p=u.length;r<p;r++){n=u[r];var o=e[r+1];let i=n[3];i<0&&(i=n[2]*-i);var s={o0:Math.max(n[1],0),o1:Math.max(n[1]+n[2],0),duration:i,options:n[4]};if(!(s.o1-s.o0<=0)){o&&(s.o1=Math.min(s.o1,o[1]));var a=s.o0-t.o1;s.t0=t.t1+a,s.t1=s.t0+(s.duration||0),this._ranges.push(s),t=s}}return this._ranges},u.prototype.timeToOffset=function(t){this.compute();var e=0,n=this._ranges.length,i=null;if(0==n)return t;for(;e<n;){if(t<(i=this._ranges[e++]).t0)return i.o0-(i.t0-t);if(t<i.t1)return i.o0+(i.o1-i.o0)*((t-i.t0)/(i.t1-i.t0))}return i.o1+(t-i.t1)},u.prototype.offsetToTime=function(t){this.compute();var e=0,n=this._ranges.length,i=null;if(0==n)return t;for(;e<n;){if(t<(i=this._ranges[e++]).o0)return i.t0-(i.o0-t);if(t<i.o1)return i.t0+(i.t1-i.t0)*((t-i.o0)/(i.o1-i.o0))}return i.t1+(t-i.o1)},u.prototype.duration=function(){return this.offsetToTime(this._data.end||this.lastAudioMarkerOffset())-this.offsetToTime(this._data.start||0)},u.prototype.endOffset=function(){return this._data.end||this.lastAudioMarkerOffset()},u.prototype.compileFunction=function(t){void 0===t&&(t=!1);var e="return EXPR",n=function(e,n){return e.replace(/([ot]\d)/g,(function(e,i){return t&&(i="t"==i[0]?"o"+i[1]:"t"+i[1]),n[i]}))},r=null;for(let t,o=0,s=i(this._ranges),a=s.length;o<a;o++)t=s[o],r=t,e=e.replace("EXPR",n("( v<o0 ? (t0-(o0-v)) : (v<o1? t0 + (t1-t0)*((v-o0)/(o1-o0)) : EXPR ) )",t));return e=e.replace("EXPR",n("(t1+(v-o1))",r)),new Function("v",e)},u.prototype.audioclips=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=!1),this.sliceClips(this.audio(),t,e,n)},u.prototype.sliceClips=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=!1),this.compute();var o=[];for(let e,n=0,r=i(t),a=r.length;n<a;n++){e=r[n];let i=t[n+1],a=e[1],u=e[2];i&&a+u>i[1]&&(u=i[1]-a);var s={source:e,skip:0,fid:e[3],o0:a,o1:a+u,t0:this.offsetToTime(a),t1:this.offsetToTime(a+u)};s.duration=s.o1-s.o0,u&&o.push(s)}for(var a=0;s=o[a++];){var u=s.t0,p=s.t1;for(let t,e=0,n=i(this._ranges),c=n.length;e<c;e++){t=n[e];let i=t.t0,c=t.t1,h=t.duration>0&&t.options instanceof Array;if(!(i>p||u>c)){if(u>=i&&c>=p){s.disabled=t;break}if(t.o0>s.o0){if(r||h){let e={cue:t,source:s.source,fid:s.fid,o0:t.o0,t0:t.t0,o1:Math.min(s.o1,t.o1),t1:Math.min(s.t1,t.t1),skip:s.skip+(t.o0-s.o0)};h&&(e.realSkip=e.skip,e.skip+=t.options[0]-t.o0),o.splice(a++,0,e)}if(t.o1<s.o1){let e={source:s.source,fid:s.fid,o0:t.o1,t0:t.t1,o1:s.o1,t1:s.t1,skip:s.skip+(t.o1-s.o0)};o.splice(a,0,e)}s.o1=t.o0,s.t1=t.t0;break}if(t.o1>s.o0){if(r){let e={cue:t,source:s.source,fid:s.fid,o0:s.o0,t0:s.t0,o1:Math.min(s.o1,t.o1),t1:Math.min(s.t1,t.t1),skip:s.skip};h&&(console.log("special gap will be wrong"),e.skip+=t.options[0]-t.o0),o.splice(a++,0,e)}s.skip=s.skip+(t.o1-s.o0),s.t0=t.t1,s.o0=t.o1}}}}if(o.map((function(t){return t.duration=t.t1-t.t0})),o=r?o.sort((function(t,e){return t.o0-e.o0})):(o=o.filter((function(t){return!t.disabled}))).sort((function(t,e){return t.t0-e.t0})),n){var c=this.offsetToTime(n);for(let t,e=0,n=i(o),r=n.length;e<r;e++)t=n[e],t.t0>c&&(t.outOfBounds=!0),t.t1>c&&(t.t1=c)}if(e){let t=this.offsetToTime(e);for(let e,n=0,r=i(o),s=r.length;n<s;n++)e=r[n],e.t0-=t,e.t1-=t,e.t0<0&&(e.skip+=Math.abs(e.t0),e.t0=0)}return r||(o=o.filter((function(t){return t.t1>0&&!t.outOfBounds&&t.t1-t.t0>0}))),o}},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(2),a=s.Menu,u=s.MenuItem,p=n(68).DependencyAddDialog,c=(n(69).CastDialog,n(39).readTextFile),h=o.defineTag("SpaceMenu",a,(function(t){t.prototype.space=function(){return this.data()},t.prototype.hide=function(){return this.trigger("uxa:hide")},t.prototype.ontap=function(t){return this.hide()},t.prototype.newFile=function(t){var e=window.prompt("Name file");if(e)return this.space().fs().mkfile(e)},t.prototype.newDirectory=function(t){var e=window.prompt("Name directory");if(e)return this.space().fs().mkdir(e)},t.prototype.addDependency=function(){return this.uxa().open(r(p).bindData(this,"space",[]).end())},t.prototype.importDependenciesFromFile=function(){var t=this,e=r("input").setType("file").end();return e.dom().onchange=async function(){for(let i,s=0,a=(o=e.dom().files)?o.toArray?o.toArray():o:[],u=a.length;s<u;s++)if(i=a[s],"package.json"==i.name){var n=await c(i),r=JSON.parse(n);t.space().browser().overwritePackages(r.dependencies),t.api().analytics().packageJSONImport(t.space().type())}var o;return i.commit()},e.dom().click()},t.prototype.render=function(){var t=this.$,e=this.space().model().can(this.api().user(),"edit");return this.$open(0).flag("space-menu").setChildren([e?i.static([this.space().model().isPublished()?(t[0]||r(u,t,0,this).setAction("branchpublish").setLabel("Re-publish")).bindData(this.space(),"trunk",[]).end():void 0,t[1]||r("hr",t,1,this)],1,1):void 0,t[2]||r("div",t,2,this).flag("action").on$(0,["tap","newFile"],this).setText("New File..."),t[3]||r("div",t,3,this).flag("action").on$(0,["tap","newDirectory"],this).setText("New Folder..."),t[4]||r("div",t,4,this).flag("action").on$(0,["tap","addDependency"],this).setText("Add dependency..."),t[5]||r("div",t,5,this).flag("action").on$(0,["tap","importDependenciesFromFile"],this).setText("Import package.json"),e?i.static([t[6]||r("hr",t,6,this),(t[7]||r(u,t,7,this).setAction("importslides").setLabel("Import Google Slides")).end(),this.space().slides().url()?(t[8]||r(u,t,8,this).setAction("reimportslides").setLabel("Resync with Google Slides")).end():void 0],1,2):void 0],1).synced()}}));e.SpaceMenu=h},function(t,e){var n={};e.readTextFile=n.readTextFile=function(t){return new Promise((function(e,n){var i=new FileReader;return i.onload=function(t){return e(t.target.result)},i.readAsText(t)}))},e.readArrayBuffer=n.readArrayBuffer=function(t){return new Promise((function(e,n){var i=new FileReader;return i.onload=function(t){return e(t.target.result)},i.readAsArrayBuffer(t)}))},e.readFileSystemEntry=n.readFileSystemEntry=function(t){return new Promise((function(e,n){return t.file(e,n)}))}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=e.Actions={},o=n(16);function s(t){this._options=t,0!=t.enabled&&(this._enabled=!0),this._cooldown=this._options.cooldown||0,this._mousetraps=[],this._scopes=this._options.scope||[],("string"==typeof this._scopes||this._scopes instanceof String)&&(this._scopes=[this._scopes])}function a(t){var e=this;e._context=t,e._actions=[],e._mousetraps=[],e._mappings={},e._combinations=[],e.onkeycombo=e.onkeycombo.bind(e),e._scopes={slides:function(){return e.space().slides().visible()},recording:function(){return e.space().recording()},browser:function(){return e.space().browser().visible()},watching:function(){return!e.space().isEditing()},paused:function(){return e.space().isPaused()},playing:function(){return e.space().isPlaying()},playback:function(){return e.space().isPlaying()||e.space().isPaused()},editing:function(){return e.space().isEditing()},brushup:function(){return e.space().isAnnotating()},space:function(){return!0}};for(let t,n,i=0,o=Object.keys(r),s=o.length;i<s;i++)n=o[i],t=r[n],e.get(n)}e.Action=s,s.register=function(t,e,n){return null==n&&"function"==typeof e&&(n=e,e={}),null==e&&(e={}),t instanceof Object?t=(e=t).name:(e.name||(e.name=t),e.cmd||(e.cmd=n)),r[t]=new s(e)},s.lookup=function(t){return r[t]},s.prototype.active=function(t){return this._active},s.prototype.setActive=function(t){return this._active=t,this},s.prototype.cooldown=function(t){return this._cooldown},s.prototype.setCooldown=function(t){return this._cooldown=t,this},s.prototype.options=function(t){return this._options},s.prototype.setOptions=function(t){return this._options=t,this},s.prototype.scopes=function(t){return this._scopes},s.prototype.setScopes=function(t){return this._scopes=t,this},s.prototype.exec=function(t,e,n){var i=t||this.context();if(!this.available(i))return!1;var r=this._options.cmd.call(this,i,e||this._options.params,n);return this._lastExec=Date.now(),r||!0},s.prototype.available=function(t){return void 0===t&&(t=this.context()),this.enabled(t)&&(!this._lastExec||Date.now()-this._lastExec>this._cooldown)},s.prototype.enabled=function(t){void 0===t&&(t=this.context());var e=this.getOption("enabled",t);return null==e?this._enabled||!1:e},s.prototype.setEnabled=function(t){return this._enabled=t,this},s.prototype.getOption=function(t,e){void 0===e&&(e=this.context());var n=this._options[t];return n instanceof Function&&(n=n.call(this,e)),n},s.prototype.name=function(t){return this._options.name},s.prototype.desc=function(t){return this.getOption("desc",t)},s.prototype.icon=function(t){return this.getOption("icon",t)},s.prototype.shortcut=function(){return this._options.shortcut},s.prototype.o=function(t){return this._options[t]},s.prototype.state=function(t){return void 0===t&&(t=this.context()),this.getOption("state",t)},s.prototype.context=function(){return this._options.context},s.prototype.space=function(){return this.context()},s.prototype.clone=function(t){void 0===t&&(t={});var e=Object.create(this._options,{});for(let n,i,r=0,o=Object.keys(t),s=o.length;r<s;r++)i=o[r],n=t[i],e[i]=n;return new s(e)},s.prototype.mousetrap=function(){var t=this;return t._mousetrap||(t._mousetrap=function(e,n){if(e.target.matches("textarea,input,button,.input")){if(!/mod|ctrl|shift/.test(n))return}else if(e.target.closest(".Overlay"))return void console.log("no mousetrap inside overlay");return!t.exec(t.context(),n,e)})},s.prototype.bindToMousetrap=function(t){if(this.shortcut())return t.bind(this.shortcut(),this.mousetrap()),t._toDispose||(t._toDispose=[]),t._toDispose.push(this.shortcut())},e.ActionManager=a,a.prototype.context=function(t){return this._context},a.prototype.setContext=function(t){return this._context=t,this},a.prototype.scopes=function(t){return this._scopes},a.prototype.setScopes=function(t){return this._scopes=t,this},a.prototype.space=function(){return this._context},a.prototype.get=function(t){var e=this._actions[t];if(!e&&s.lookup(t)){e=s.lookup(t),e=this._actions[t]=s.lookup(t).clone({context:this.context()}),this._actions.push(e);let n=e.shortcut();n instanceof Array||(n=[n]);for(let t,i=0,r=n.length;i<r;i++)t=n[i],t&&(this._combinations.indexOf(t)<0&&this._combinations.push(t),this._mappings[t]||(this._mappings[t]=[]),this._mappings[t].push(e))}return e},a.prototype.exec=function(t){var e=this.get(t);return e&&e.exec()},a.prototype.trap=function(t,e){return-1==this._mousetraps.indexOf(t)&&this._mousetraps.push(t),t.bind(this._combinations,this.onkeycombo),this},a.prototype.onkeycombo=function(t,e){var n=this;if(t.target.matches("textarea,input,button,.input")&&!/mod|ctrl|shift/.test(e))return;if(t.target.closest(".Overlay"))return;for(let r,o=0,s=i(n._mappings[e]),a=s.length;o<a;o++){if(r=s[o],r.scopes().some((function(t){return t.split("+").every((function(t){return!n._scopes[t]||n._scopes[t](r)}))}))&&r.enabled(r.context())&&r.exec(r.context(),e,t))return!1}return!0},a.prototype.mousetrap=function(t,e){return t.MOUSETRAP||(t.MOUSETRAP=new o(t),this.trap(t.MOUSETRAP,e)),t.MOUSETRAP},a.prototype.dispose=function(){for(let t,e=0,n=i(this._mousetraps),r=n.length;e<r;e++)t=n[e],t.unbind(this._combinations),t.reset();return this._mousetraps=[],this._actions=[],this._context=null}},function(t,e,n){function i(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=n(0),o=r.createElementFactory(),s=r.createTagScope(),a=n(1),u=a.SCON,p=a.DIRTY,c=a.ACTION,h=n(61).EditorView,l=n(9).Delay,d=n(153).PointerView,f=n(63).BrushupView,y=n(67).Notification,m=n(38).SpaceMenu,g=n(164).RecDialog,_=(n(166).SaveDialog,n(71).PublishDialog),v=n(167).NewFileDialog,b=(n(168).CourseJoinDialog,n(169).CastCreateDialog),w=n(68).DependencyAddDialog,x=(n(170).AskDialog,f=n(63).BrushupView,n(13).InterfaceView),S=(h=n(61).EditorView,n(72).ExplorerView,n(171).SidebarView),T=n(177).TitlebarView,k=n(178).SpaceControls,A=n(4);Mousetrap=n(16);var E,C=n(181),D=s.defineTag("ViewportOverlay",x,(function(t){t.prototype.start=function(){return this.space().timeline().play()},t.prototype.render=function(){var t=this.$;return this.$open(0).setChildren(t[0]||o("div",t,0,this).flag("PlayButton").flag("button").on$(0,["click","start"],this).setIcon("play"),2).synced((t[0].end(),!0))}})),O=s.defineTag("SpaceViewport",(function(t){t.prototype.build=function(){return this.setTabindex(-1),-1}})),M=n(25).LogEntry,L=s.defineTag("LogEntryTip",(function(t){var e;t.show=function(t,n){return e&&(e.hide(),e=null),r.mount(e=o(L).setData(t).setContainer(n).end(),n)},t.prototype.container=function(t){return this._container},t.prototype.setContainer=function(t){return this._container=t,this},t.prototype.render=function(){var t=this.$;return this.$open(0).flag("xl").flag("dark").setChildren(t[0]||o("div",t,0,this).flag("main"),2).synced((t[0].setContent([t[1]||o("div",t,1,0).flag("triangle"),i(this.data())>1?t[2]||o("div",t,2,0).flag("more").setText("..."):void 0,(t[3]||o(M,t,3,0)).bindData(this.data(),i(this.data())-1).end()],1),!0))},t.prototype.mount=function(){var t=this;return t.dom().offsetWidth,t.flag("show"),setTimeout((function(){return t.hide()}),2500)},t.prototype.setup=function(){return this.render(),this.autosize()},t.prototype.autosize=function(){let t=this.dom().innerText.split("\n"),e=Math.max.apply(Math,t.map((function(t){return t.length}))),n=.8*this.container().offsetWidth/(.6*e),i=Math.round(Math.min(Math.max(n,15),30));return this.css("fontSize",i+"px"),this.flag("overflows",n<15),this},t.prototype.hide=function(){var t=this;if(!t.hasFlag("hide"))return t.flag("hide"),setTimeout((function(){if(t.orphanize(),e==t)return e=null}),3e3)}})),P=s.defineTag("SpaceView",(function(t){t.prototype.dirty=function(t){return this._dirty},t.prototype.setDirty=function(t){return this._dirty=t,this},t.prototype.__activeNode={watch:"activeNodeDidSet",name:"activeNode"},t.prototype.activeNode=function(t){return this._activeNode},t.prototype.setActiveNode=function(t){var e=this.activeNode();return t!=e&&(this._activeNode=t),t!=e&&this.activeNodeDidSet&&this.activeNodeDidSet(t,e,this.__activeNode),this},t.prototype.__activeWidget={watch:"activeWidgetDidSet",name:"activeWidget"},t.prototype.activeWidget=function(t){return this._activeWidget},t.prototype.setActiveWidget=function(t){var e=this.activeWidget();return t!=e&&(this._activeWidget=t),t!=e&&this.activeWidgetDidSet&&this.activeWidgetDidSet(t,e,this.__activeWidget),this},t.prototype.shortcuts=function(t){return this._shortcuts},t.prototype.setShortcuts=function(t){return this._shortcuts=t,this},t.prototype.__showInspector={watch:"markLayout",name:"showInspector"},t.prototype.showInspector=function(t){return this._showInspector},t.prototype.setShowInspector=function(t){var e=this.showInspector();return t!=e&&(this._showInspector=t),t!=e&&this.markLayout&&this.markLayout(t,e,this.__showInspector),this},t.prototype.__mode={watch:"modeDidSet",name:"mode"},t.prototype.mode=function(t){return this._mode},t.prototype.setMode=function(t){var e=this.mode();return t!=e&&(this._mode=t),t!=e&&this.modeDidSet&&this.modeDidSet(t,e,this.__mode),this},t.prototype.__size={default:"auto",watch:"sizeDidSet",name:"size"},t.prototype.size=function(t){return this._size},t.prototype.setSize=function(t){var e=this.size();return t!=e&&(this._size=t),t!=e&&this.sizeDidSet&&this.sizeDidSet(t,e,this.__size),this},t.prototype._size="auto",t.prototype.tab=function(t){return this._tab},t.prototype.setTab=function(t){return this._tab=t,this},t.prototype.__fontSize={default:12,watch:"fontSizeDidSet",name:"fontSize"},t.prototype.fontSize=function(t){return this._fontSize},t.prototype.setFontSize=function(t){var e=this.fontSize();return t!=e&&(this._fontSize=t),t!=e&&this.fontSizeDidSet&&this.fontSizeDidSet(t,e,this.__fontSize),this},t.prototype._fontSize=12,t.prototype.__userFontSize={watch:"userFontSizeDidSet",name:"userFontSize"},t.prototype.userFontSize=function(t){return this._userFontSize},t.prototype.setUserFontSize=function(t){var e=this.userFontSize();return t!=e&&(this._userFontSize=t),t!=e&&this.userFontSizeDidSet&&this.userFontSizeDidSet(t,e,this.__userFontSize),this},t.prototype.__sidebarWidth={watch:"syncStyleVar",unit:"px",reflow:!0,name:"sidebarWidth"},t.prototype.sidebarWidth=function(t){return this._sidebarWidth},t.prototype.setSidebarWidth=function(t){var e=this.sidebarWidth();return t!=e&&(this._sidebarWidth=t),t!=e&&this.syncStyleVar&&this.syncStyleVar(t,e,this.__sidebarWidth),this},t.prototype.syncStyleVar=function(t,e,n){let i=n.name,r=n.unit;if(this.dom().style.setProperty("--"+i,r?t+r:t),n.reflow)return this.space().emit("reflow")},t.prototype.userFontSizeDidSet=function(t){return this.setFontSize(t),t},t.prototype.fontSizeDidSet=function(t){if(this.setFlag("fontSize","fs"+t),this.api().setFontSize(t),this._mounted)return this.reflow()},t.prototype.hasTouchInterface=function(){return this.hasFlag("touch-ux")},t.prototype.space=function(){return this.data()},t.prototype.browser=function(){return this.space().browser()},t.prototype.model=function(){return this.space().model()},t.prototype.branch=function(){return this.space().branch()},t.prototype.timeline=function(){return this.space().timeline()},t.prototype.client=function(){return this.data().client()},t.prototype.setup=function(){return this._t0=Date.now(),this.setUserFontSize(this.api().fontSize()),this._autoFontSize=this.userFontSize()||12,this._dirty=p.SIZE,this._shortcuts=new Mousetrap(document.body),this.data().actions().trap(this._shortcuts,"space"),this},t.prototype.mount=function(){var t=this;return t._mounted=!0,t.setTabindex(0),t.space().emit("mounted"),t._onresized=new l((function(){return t._dirty|=p.SIZE,t.reflow()})),t._onresize=function(){return t._resized=!0,t._onresized.delay(200)},t._onreflow=function(){return t._resized=!1,t.reflow()},t._onwheel=function(t){if(0!=t.deltaX)return t.preventDefault()},window.addEventListener("resize",t._onresize,!0),window.addEventListener("orientationchange",t._onreflow,!0),document.addEventListener("wheel",t._onwheel,{capture:!0,passive:!1}),t.api().on("reflow",t._onreflow),t.api().isEmbed()&&!E&&t.space().timeline().audio&&(E={},setTimeout((function(){if(t.space().timeline().audio())return(E=new C.HTML5Adapter(t.space().timeline().audio())).ready()}),10)),t.mountLogAlerts(),t},t.prototype.mountLogAlerts=function(){var t=this;let e=[],n=function(){let n=e[e.length-1],i=t.space().timeline().currentOffset();return n&&Math.abs(i-n.timeOffset())<1e3&&L.show(e.map((function(t){return t._params})),t._viewport.dom()),e=[]};return t.space().on("log",(function(t){return e.push(t),e.TIMEOUT||(e.TIMEOUT=setTimeout(n,15))}))},t.prototype.unmount=function(){var t;return(t=this.space())&&t.emit&&t.emit("unmounted"),window.removeEventListener("resize",this._onresize,!0),window.removeEventListener("orientationchange",this._onreflow,!0),document.removeEventListener("wheel",this._onwheel,!0),this.api().un("reflow",this._onreflow),this._modeNotification&&(this._modeNotification.hide(),this._modeNotification=null),this},t.prototype.dispose=function(){var t=this;return t._activeEl=null,t._controls&&t._controls.dispose&&t._controls.dispose(),t._shortcuts&&t._shortcuts.disable&&t._shortcuts.disable(),t._shortcuts=null,t.render=function(){return t},t},t.prototype.alert=function(t,e){return y.show(t,e)},t.prototype.box=function(){return this._box||(this._box={top:0,left:0,width:window.innerWidth,height:window.innerHeight})},t.prototype.modeDidSet=function(t,e){let n;if(this._modeNotification&&(this._modeNotification.hide(),this._modeNotification=null),"paused"==t&&"playing"==e&&this.space().timeline().progress()<.99)n="_pause_ paused";else if("playing"==t&&"paused"==e&&this.space().timeline().currentTime()>50)n="_play_ resumed";else if("editing"==t&&this.branch().isLocal())return this.trigger("enterplayground"),n="Start editing",this.alert(this._modeNotification=o(y).flag("system").flag("info").setSticky(!1).setText(n).end());if(n)return this.alert(this._modeNotification=o(y).flag("system").setText(n).end())},t.prototype.checkActiveWidget=function(){var t,e=document.activeElement;if(e&&e._tag&&this._viewport.contains(e))return this.setActiveWidget(t=A.callClosest(e._tag,"focusWidgetForNode")),t},t.prototype.activeNodeDidSet=function(t,e){var n;if(t&&this._viewport.contains(t))return this.setActiveWidget(n=A.callClosest(t,"focusWidgetForNode")),n},t.prototype.activeWidgetDidSet=function(t,e){if(this.log("activeWidgetDidSet",t&&t.TYPE,e&&e.TYPE),e&&(this._prevActiveWidget=e),this.space().agent().setFocus(t),!this.browser().windowed()&&(t==this.browser()&&this.browser().setMinimized(!1),e==this.browser()))return this.browser().setMinimized(!0),!0},t.prototype.sizeDidSet=function(t,e){if(this.setFlag("size","size-"+t),this.flagIf("centered",t&&"auto"!=t),this._mounted)return this.reflow()},t.prototype.checkActiveElement=function(){return this.setActiveNode(r.getTagForDom(document.activeElement)),this},t.prototype.focusViewport=function(){return this._viewport.contains(document.activeElement)||this._viewport.dom().focus(),this},t.prototype.timelog=function(){for(var t=arguments,e=t.length,n=new Array(e>0?e:0);e>0;)n[e-1]=t[--e];return console.log.apply(console,[].concat([Date.now()-this._t0],Array.from(n)))},t.prototype.reflow=function(){var t=this,e=t._viewport&&t._viewport.dom();if(e&&!t._reflowing){t._box;var n=e.getBoundingClientRect(),i=n.width,r=n.height;if(0!=i){if(t._reflowing=!0,t._box={top:Math.round(n.top),left:Math.round(n.left),width:Math.round(n.width),height:Math.round(n.height)},!t.userFontSize()){let e=t._autoFontSize;t._autoFontSize=i<500?10:i<900?11:i<1280?12:13,t.fontSize()==e&&t.setFontSize(t._autoFontSize)}t._dirty|=p.SIZE;var o=i*r;return o>0&&o<36e4&&!t.hasFlag("touch-ux")&&t.flag("touch-controls"),t.flag("touch-ux",o<36e4&&"ontouchstart"in window),t.flag("portrait",r>=i),t.flag("landscape",r<i),t.flag("sidebar-float",i<700),t._dirty&&(t.flag("reflowing"),clearTimeout(t._reflowTimeout),t._reflowTimeout=setTimeout((function(){return t.unflag("reflowing")}),300)),t.space().agent().setVw(t._box.width),t.space().agent().setVh(t._box.height),t.space().emit("resize"),t.space().emit("reflow",t._dirty),t.space().emit("resized"),t._dirty=0,t._reflowing=!1,t}}},t.prototype.onfocusin=function(t){},t.prototype.onfocusout=function(t){},t.prototype.getStyleVar=function(t){return window.getComputedStyle(this.dom()).getPropertyValue("--"+t)},t.prototype.setStyleVar=function(t,e){return this.dom().style.setPropertyValue("--"+t,e),this},t.prototype.targetForPointer=function(t){let e=this.space().browser();if(this.space().agent().focus()==e&&!e.windowed()&&!e.minimized()&&!e.node().contains(t))return e.node();let n=t.closest("[data-sref]");return n?n._tag||n:null},t.prototype.lookup=function(t){if(t instanceof Element)return t._tag;if(t instanceof r.Tag)return t;"string"==typeof t||t instanceof String||(t=u.pathToStr(t));let e=this.dom().querySelector('[data-sref="'+t+'"]');return e?e._tag:null},t.prototype.layoutForNode=function(t){var e;if(!(t instanceof r.Tag))return null;if(t.nodeForLayout&&(t=t.nodeForLayout()),t.layoutForNode)return t.layoutForNode(this);var n=t._dom||t;if(!this.dom().contains(n))return null;let i=n.getBoundingClientRect();return[Math.round(i.top-this.box().top),Math.round(i.left-this.box().left),Math.round(i.width),Math.round(i.height),(e=t)&&e.layoutMask&&e.layoutMask()||0]},t.prototype.pushNodeLayout=function(t,e){if(this.space().isEditing()){var n=t.sref();e||(e=this.layoutForNode(t));var i=this.space().branch().stream().layouts()[n];return String(e)!=String(i)&&(this.log("force add layout!",n,e,i),this.branch().push_(c.NODE_LAYOUT,[n,e],{})),t}},t.prototype.oncontextmenu=function(t){return t.prevent().halt()},t.prototype.onannotate=function(t,e){return t.stop(),e.startAnnotating(),this.dom().focus()},t.prototype.onbrushupstop=function(t){return t.halt()},t.prototype.oneditstart=function(t,e){return e.startEditing(),t.halt()},t.prototype.oneditstop=function(t,e){return t.halt(),e.stopEditing()},t.prototype.onrecstart=function(t,e){return t.halt(),e.space().navigateTo(e),this.uxa().open(o(g).setData(e).end())},t.prototype.onrecstop=function(t,e){return t.halt(),e.stopRecording(),this},t.prototype.onspacezip=async function(t){t.halt(),this.uxa().flash("Generating .zip");let e=this.space().toRunStaticSnapshot(),n=this.space().branch().id()+".zip",i=await window.fetch("/rpc/download/"+n,{headers:{"Content-Type":"application/json"},mode:"cors",method:"POST",body:JSON.stringify(e)}),r=await i.blob();var o=window.URL.createObjectURL(r),s=document.createElement("a");s.href=o,s.download=n,document.body.appendChild(s),s.click(),s.remove()},t.prototype.onspacefork=async function(t){var e=this.space().clone();if(this.log("onspaceclone",t,e),await this.api().tryLogin(),this.api().user())return this.uxa().open(o(b).setData(e).end())},t.prototype.onspaceclone=async function(t){this.log("onspaceclone",t);var e=await this.api().rpc("castClone",[this.space().branch().id()],{models:!0});if(e)return App.router().go(e.url())},t.prototype.onspacemenu=function(t){return t.halt(),t.uxa().open(o(m).bindData(this,"space",[]).end())},t.prototype.onshowannotation=function(t,e){return t.halt(),this.space().setAnnotation(e),e},t.prototype.onbranchsave=async function(t,e){if(t.halt(),this.log("onbranchsave",e),await this.api().tryLogin(),this.api().user()){if(e.isLocal())return"note"==e.type()&&(e.model().privacy="unlisted"),e.save();var n=u.clone(e.model());return n.stream=e.model().stream().toJSON(),n.snapshot=e._initialSnapshot,n.id,delete n.id,this.log("params is",n),this.uxa().open(o(b).setData(n).end())}},t.prototype.onbranchdiscard=function(t,e){return t.halt(),e.discard(),this},t.prototype.onbranchpublish=function(t,e){return t.halt(),this.uxa().open(o(_).setData(e).end())},t.prototype.onbranchunpublish=async function(t,e){if(t.halt(),await t.uxa().confirm("Are you sure you want to unpublish '"+e.title()+"'?"))return e.unpublish()},t.prototype.onbranchenter=function(t,e){return t.halt(),this.space().navigateTo(e)},t.prototype.onbranchdelete=async function(t,e){if(t.halt(),await t.uxa().confirm("Are you sure you want to delete '"+e.title()+"'?"))return this.space().branch()==e&&this.space().navigateTo(this.space().trunk()),await e.model().update({archived_at:new Date})},t.prototype.onnotedel=async function(t,e){if(t.halt(),await t.uxa().confirm("Are you sure you want to delete '"+e.title+"'?"))return this.space().branch().model()==e&&this.space().navigateTo(this.space().trunk()),await e.destroy(),this},t.prototype.onnotediscard=async function(t,e){t.halt();let n=await this.space().resolveBranchForModel(e);if(n&&e.isLocal())return n.discard()},t.prototype.onnotesave=async function(t,e){if(t.halt(),Date.now()-(this._savingNote||0)<500)return;this._savingNote=Date.now();let n=await this.space().resolveBranchForModel(e);return this.onbranchsave(t,n)},t.prototype.onbrowsertoggle=function(t){return t.halt(),this.space().simulator()&&this.space().simulator().setVisible(!1),this.space().browser().setVisible(!this.space().browser().visible()),this},t.prototype.onconsoletoggle=function(t){var e;return t.halt(),this.space().console().setEnabled(e=!this.space().console().enabled()),e},t.prototype.onbrowserrun=function(t){return t.halt(),this.space().browser().run(),this},t.prototype.onnewfile=function(t){return t.halt(),this.uxa().open(o(v).bindData(this,"space",[]).end())},t.prototype.onplay=function(t){t.halt();var e=this.space().timeline();if(e.isPaused())return e.play(),this.trigger("spaceplay")},t.prototype.ontoggleplayback=function(t,e){t.halt();var n=e||this.space().timeline();return n.isPlaying()?(n.pause(),this.trigger("spacepaused")):n.isPaused()?(n.play(),this.trigger("spaceplay")):void 0},t.prototype.resume=function(){return this.space().timeline().isPaused()&&(this.space().timeline().play(),this.trigger("spaceplay"),this.dom().focus()),this},t.prototype.ondependencyadd=function(t){return t.halt(),this.log("ondependencyadd"),this.uxa().open(o(w).bindData(this,"space",[]).end())},t.prototype.oncontrolsevent=function(t){if(!(t.event()instanceof Event))return t.redirect(this)},t.prototype.onactionevent=function(t){if(!(t.event()instanceof Event))return t.redirect(this)},t.prototype.onimportslides=function(t){t.halt();var e=window.prompt("Link to presentation");return e&&e.match(/google\.com(.*)\/pub/)?this.space().slides().importFromGoogleSlides(e):this.uxa().flash("Link must be to a 'Publish to the web' link from Google Slides")},t.prototype.onreimportslides=function(t){if(t.halt(),this.space().slides().url())return this.space().slides().importFromGoogleSlides(this.space().slides().url())},t.prototype.ongoto=function(t,e){return t.halt(),this.space().navigateTo(e)},t.prototype.markLayout=function(t,e,n){return this.flag(n.name,!!t),this._dirty|=p.LAYOUT},t.prototype.synced=function(){return t.prototype.__super__.synced.apply(this,arguments),!this._dirty&&this._ow||this.reflow(),this},t.prototype.editor=function(){this.$$||(this.$$={});return this._editor||(this._editor=this._editor||o(h,this).flag("editor")).bindData(this.space(),"primaryEditor",[]).end()},t.prototype.titlebar=function(){this.$$||(this.$$={});return this._titlebar||(this._titlebar=this._titlebar||o(T,this).flag("titlebar").setEnabled(!0)).bindData(this,"space",[]).end()},t.prototype.sidebar=function(){this.$$||(this.$$={});return this._sidebar||(this._sidebar=this._sidebar||o(S,this).flag("sidebar")).bindData(this.space(),"sidebar",[]).end()},t.prototype.render=function(){var t,e,n=this.$;if("init"==this.data().readyState()||"disposing"==this.data().readyState())return this;let i="complete"==this.data().readyState();return i&&(this.flag("browser-on",this.data().browser().visible()),this.flag("simulator-on",(t=this.data().simulator())&&t.enabled&&t.enabled()),this.setShowInspector(this.data().console().enabled()),this.setMode(this.space().timeline().playState()),this.flag("play",this.data().timeline().isPlaying()),this.setFlag("playstate","ps-"+this.data().timeline().state()),this.flag("is-annotating",this.branch().isAnnotating()),this.flag("ws-unstable",this.branch().syncer().latency()>1500),this.flag("can-edit",this.branch().canEdit()),this.flag("unsaved",this.branch().isLocal()),this.flag("mine",this.branch().isMine()),this.setSidebarWidth(this.space().sidebar().width()),this.checkActiveElement()),this.space()._isNavigating?void 0:this.$open(0).flag("resize").flag("night").setFlag(-1,"trunk-"+this.space().trunk().type()).setFlag(-2,this.space().state()).setFlag(-3,this.space().branch().type()).setChildren([(e=this._viewport=this._viewport||(e=o(O,this)).flag("viewport")).setContent([this.titlebar().end(),this.editor().end(),this.space().inspector().node().end(),this.sidebar().end(),i&&this.space().simulator()?this.space().simulator().node().end():void 0,this.space().browser().node().end(),this.space().slides().node().end(),(this._pointer=this._pointer||o(d,e).flag("pointer")).bindData(this,"space",[]).end(),"tutorial"==this.space().type()?(n[0]||o(D,n,0,e)).bindData(this,"space",[]).setEnabled(0==this.space().timeline().currentTime()&&this.space().isPaused()&&this.branch()==this.space().trunk()).end():void 0],1).end(),this.branch().isAnnotating()?(n[1]||o(f,n,1,this).setEnabled(!0)).bindData(this,"space",[]).end():void 0,(n[2]||o(k,n,2,this).flag("timeline-controls").setEnabled(!0)).bindData(this,"space",[]).end()],1).synced()}}));e.SpaceView=P},function(t,e,n){var i=n(6);i.Pointer=function(){return this._button=-1,this._event={x:0,y:0,type:"uninitialized"},this},i.Pointer.prototype.button=function(){return this._button},i.Pointer.prototype.touch=function(){return this._touch},i.Pointer.prototype.update=function(t){return this._event=t,this._dirty=!0,this},i.Pointer.prototype.process=function(){var t=this._event;if(this._dirty)if(this._prevEvent=t,this._dirty=!1,"mousedown"==t.type){if(this._button=t.button,this._touch&&0!=this._button)return;this._touch&&this._touch.cancel(),this._touch=new i.Touch(t,this),this._touch.mousedown(t,t)}else"mousemove"==t.type?this._touch&&this._touch.mousemove(t,t):"mouseup"==t.type&&(this._button=-1,this._touch&&this._touch.button()==t.button&&(this._touch.mouseup(t,t),this._touch=null));else this._touch&&this._touch.idle();return this},i.Pointer.prototype.x=function(){return this._event.x},i.Pointer.prototype.y=function(){return this._event.y}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(0).createTagScope(),o={esc:"⎋",enter:"⏎",shift:"⇧",command:"⌘",option:"⌥",alt:"⎇",del:"⌦",backspace:"⌫"},s={"command+1":!0,"command+2":!0,"command+3":!0,"command+4":!0,"command+5":!0,"command+6":!0,"command+7":!0,"command+8":!0,"command+9":!0,"command+0":!0,"command+n":!0,"command+f":!0,"command+k":!0,"command+j":!0,"command+s":!0,"command+r":!0,"ctrl+s":!0,"ctrl+r":!0,esc:!0,"shift+command+f":!0},a=n(16);a.prototype.stopCallback=function(t,e,n){return!!e.closest(".no-mousetrap")||!((" "+e.className+" ").indexOf(" mousetrap ")>-1)&&(!t.mousetrappable&&(!s[n]&&(("INPUT"!=e.tagName||"down"!=n&&"up"!=n)&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||(!(!e.contentEditable||"true"!=e.contentEditable&&"plaintext-only"!=e.contentEditable&&!e.closest(".editable"))||void 0)))))};var u=e.manager={_combos:{"*":{}},_identifiers:{},_labels:{},register:function(t,e){return void 0===e&&(e={}),this._combos[t]||(this._combos[t]=!0,this._handler||(this._handler=this.handle.bind(this)),a.bind(t,this._handler)),e.global&&(s[t]=!0),this},comboIdentifier:function(t){return this._identifiers[t]||(this._identifiers[t]="shortcut-"+t.replace(/\+/g,"_").replace(/\ /g,"-").replace(/\*/g,"all"))},shortcutHTML:function(t){return("<u>"+this.comboLabel(t).split(" ").join("</u><u>")+"</u>").replace("<u>/</u>","<span>or</span>")},comboLabel:function(t){return this._labels[t]||(this._labels[t]=t.split(" ").map((function(t){return t.split("+").map((function(t){return o[t]||t.toUpperCase()})).join("")})).join(" "))},handle:function(t,e){let n=this.comboIdentifier(e),r=Array.from(document.querySelectorAll("."+n+",.shortcut-all"));var o;((o=r)&&(o.len instanceof Function?o.len():o.length)||0)>1&&(r=r.reverse().filter((function(t){return!t.closest(".hiding")})));for(let n,o=0,s=i(r),a=s.length;o<a;o++){n=s[o];let i=n._tag.shortcut(),a=Object.assign({},i,{combo:e,event:t,receivers:r});if(!n._tag.trigger("beforeshortcut",a).isPrevented()){if(n._tag&&n._tag.onshortcut)t.preventDefault(),n._tag.onshortcut(t,e);else if(n.matches("input,.markour"))t.preventDefault(),n._tag.focus();else{if(i.within&&!n.parentNode.contains(document.activeElement))continue;(/command|cmd|ctrl|shift/.test(e)||i.prevent)&&t.preventDefault();let r=n._tag.trigger("exec",a);if(r.responder()||n.click(),r.responder()&&i.bubble&&r.bubble())continue}break}}return this}};r.extendTag("element",(function(t){t.prototype.shortcut=function(){return this._shortcut||(this._shortcut={})},t.prototype.setShortcut=function(t,e){if(void 0===e&&(e={}),t!=this.shortcut().value){Object.assign(this.shortcut(),e,{value:t}),(t=t.replace(/mod/g,this.api()&&this.api().ua().isMac()?"command":"ctrl")).indexOf("command")>=0&&this.api()&&!this.api().ua().isMac()&&(t=t.replace(/command/g,"ctrl"));let r=[];for(let n,o=0,a=i(t.split("|")),p=a.length;o<p;o++)n=a[o],u.register(n,e),this.flag(u.comboIdentifier(n)),r.push(u.comboLabel(n)),e.global&&(s[n]=!0);var n=this._shortcutLabel=r.join(" / ");this.dom().dataset.shortcut=n,this._shortcutHTML=("<u>"+n.split(" ").join("</u><u>")+"</u>").replace("<u>/</u>","<span>or</span>"),this._tip&&this._tip.indexOf("KEY")>=0&&this.setTipContent(this._tip.replace("KEY",this._shortcutHTML))}return this},t.prototype.shortcutSetAttribute=function(t,e){return this.shortcut()[t]=e,this}})),r.defineTag("shortcut")},function(t,e,n){e.encode=function(t,e){var n=new i(e);return n.write(t),n.read()};var i=n(45).EncodeBuffer},function(t,e,n){e.EncodeBuffer=r;var i=n(27).preset;function r(t){if(!(this instanceof r))return new r(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}n(48).FlexEncoder.mixin(r.prototype),r.prototype.codec=i,r.prototype.write=function(t){this.codec.encode(this,t)}},function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,u=(1<<a)-1,p=u>>1,c=-7,h=n?r-1:0,l=n?-1:1,d=t[e+h];for(h+=l,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=l,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+t[e+h],h+=l,c-=8);if(0===o)o=1-p;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,i),o-=p}return(d?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,u,p=8*o-r-1,c=(1<<p)-1,h=c>>1,l=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,f=i?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?l/u:l*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[n+d]=255&a,d+=f,a/=256,r-=8);for(s=s<<r|a,p+=r;p>0;t[n+d]=255&s,d+=f,s/=256,p-=8);t[n+d-f]|=128*y}},function(t,e){for(var n=e.uint8=new Array(256),i=0;i<=255;i++)n[i]=r(i);function r(t){return function(e){var n=e.reserve(1);e.buffer[n]=t}}},function(t,e,n){e.FlexDecoder=r,e.FlexEncoder=o;var i=n(5);function r(){if(!(this instanceof r))return new r}function o(){if(!(this instanceof o))return new o}function s(){throw new Error("method not implemented: write()")}function a(){throw new Error("method not implemented: fetch()")}function u(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function p(t){(this.buffers||(this.buffers=[])).push(t)}function c(){return(this.buffers||(this.buffers=[])).shift()}function h(t){return function(e){for(var n in t)e[n]=t[n];return e}}r.mixin=h({bufferish:i,write:function(t){var e=this.offset?i.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=e?t?this.bufferish.concat([e,t]):e:t,this.offset=0},fetch:a,flush:function(){for(;this.offset<this.buffer.length;){var t,e=this.offset;try{t=this.fetch()}catch(t){if(t&&"BUFFER_SHORTAGE"!=t.message)throw t;this.offset=e;break}this.push(t)}},push:p,pull:c,read:u,reserve:function(t){var e=this.offset,n=e+t;if(n>this.buffer.length)throw new Error("BUFFER_SHORTAGE");return this.offset=n,e},offset:0}),r.mixin(r.prototype),o.mixin=h({bufferish:i,write:s,fetch:function(){var t=this.start;if(t<this.offset){var e=this.start=this.offset;return i.prototype.slice.call(this.buffer,t,e)}},flush:function(){for(;this.start<this.offset;){var t=this.fetch();t&&this.push(t)}},push:p,pull:function(){var t=this.buffers||(this.buffers=[]),e=t.length>1?this.bufferish.concat(t):t[0];return t.length=0,e},read:u,reserve:function(t){var e=0|t;if(this.buffer){var n=this.buffer.length,i=0|this.offset,r=i+e;if(r<n)return this.offset=r,i;this.flush(),t=Math.max(t,Math.min(2*n,this.maxBufferSize))}return t=Math.max(t,this.minBufferSize),this.buffer=this.bufferish.alloc(t),this.start=0,this.offset=e,0},send:function(t){var e=t.length;if(e>this.minBufferSize)this.flush(),this.push(t);else{var n=this.reserve(e);i.prototype.copy.call(t,this.buffer,n)}},maxBufferSize:65536,minBufferSize:2048,offset:0,start:0}),o.mixin(o.prototype)},function(t,e,n){e.decode=function(t,e){var n=new i(e);return n.write(t),n.read()};var i=n(50).DecodeBuffer},function(t,e,n){e.DecodeBuffer=r;var i=n(33).preset;function r(t){if(!(this instanceof r))return new r(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}n(48).FlexDecoder.mixin(r.prototype),r.prototype.codec=i,r.prototype.fetch=function(){return this.codec.decode(this)}},function(t,e,n){var i=n(46),r=n(32),o=r.Uint64BE,s=r.Int64BE;e.getReadFormat=function(t){var e=a.hasArrayBuffer&&t&&t.binarraybuffer,n=t&&t.int64;return{map:p&&t&&t.usemap?h:c,array:l,str:d,bin:e?y:f,ext:m,uint8:g,uint16:v,uint32:w,uint64:S(8,n?A:T),int8:_,int16:b,int32:x,int64:S(8,n?E:k),float32:S(4,C),float64:S(8,D)}},e.readUint8=g;var a=n(5),u=n(31),p="undefined"!=typeof Map;function c(t,e){var n,i={},r=new Array(e),o=new Array(e),s=t.codec.decode;for(n=0;n<e;n++)r[n]=s(t),o[n]=s(t);for(n=0;n<e;n++)i[r[n]]=o[n];return i}function h(t,e){var n,i=new Map,r=new Array(e),o=new Array(e),s=t.codec.decode;for(n=0;n<e;n++)r[n]=s(t),o[n]=s(t);for(n=0;n<e;n++)i.set(r[n],o[n]);return i}function l(t,e){for(var n=new Array(e),i=t.codec.decode,r=0;r<e;r++)n[r]=i(t);return n}function d(t,e){var n=t.reserve(e),i=n+e;return u.toString.call(t.buffer,"utf-8",n,i)}function f(t,e){var n=t.reserve(e),i=n+e,r=u.slice.call(t.buffer,n,i);return a.from(r)}function y(t,e){var n=t.reserve(e),i=n+e,r=u.slice.call(t.buffer,n,i);return a.Uint8Array.from(r).buffer}function m(t,e){var n=t.reserve(e+1),i=t.buffer[n++],r=n+e,o=t.codec.getExtUnpacker(i);if(!o)throw new Error("Invalid ext type: "+(i?"0x"+i.toString(16):i));return o(u.slice.call(t.buffer,n,r))}function g(t){var e=t.reserve(1);return t.buffer[e]}function _(t){var e=t.reserve(1),n=t.buffer[e];return 128&n?n-256:n}function v(t){var e=t.reserve(2),n=t.buffer;return n[e++]<<8|n[e]}function b(t){var e=t.reserve(2),n=t.buffer,i=n[e++]<<8|n[e];return 32768&i?i-65536:i}function w(t){var e=t.reserve(4),n=t.buffer;return 16777216*n[e++]+(n[e++]<<16)+(n[e++]<<8)+n[e]}function x(t){var e=t.reserve(4),n=t.buffer;return n[e++]<<24|n[e++]<<16|n[e++]<<8|n[e]}function S(t,e){return function(n){var i=n.reserve(t);return e.call(n.buffer,i,!0)}}function T(t){return new o(this,t).toNumber()}function k(t){return new s(this,t).toNumber()}function A(t){return new o(this,t)}function E(t){return new s(this,t)}function C(t){return i.read(this,t,!1,23,4)}function D(t){return i.read(this,t,!1,52,8)}},function(t,e,n){!function(e){t.exports=e;var n={on:function(t,e){return o(this,t).push(e),this},once:function(t,e){var n=this;return i.originalListener=e,o(n,t).push(i),n;function i(){r.call(n,t,i),e.apply(this,arguments)}},off:r,emit:function(t,e){var n=this,i=o(n,t,!0);if(!i)return!1;var r=arguments.length;if(1===r)i.forEach(a);else if(2===r)i.forEach(u);else{var s=Array.prototype.slice.call(arguments,1);i.forEach(p)}return!!i.length;function a(t){t.call(n)}function u(t){t.call(n,e)}function p(t){t.apply(n,s)}}};function i(t){for(var e in n)t[e]=n[e];return t}function r(t,e){var n,i=this;if(arguments.length){if(e){if(n=o(i,t,!0)){if(!(n=n.filter(s)).length)return r.call(i,t);i.listeners[t]=n}}else if((n=i.listeners)&&(delete n[t],!Object.keys(n).length))return r.call(i)}else delete i.listeners;return i;function s(t){return t!==e&&t.originalListener!==e}}function o(t,e,n){if(!n||t.listeners){var i=t.listeners||(t.listeners={});return i[e]||(i[e]=[])}}i(e.prototype),e.mixin=i}((function t(){if(!(this instanceof t))return new t}))},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,p=[],c=!1,h=-1;function l(){c&&u&&(c=!1,u.length?p=u.concat(p):h=-1,p.length&&d())}function d(){if(!c){var t=a(l);c=!0;for(var e=p.length;e;){for(u=p,p=[];++h<e;)u&&u[h].run();h=-1,e=p.length}u=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function y(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new f(t,e)),1!==p.length||c||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){var i=n(0).createTagScope().defineTag("Menu");e.Menu=i},function(t,e,n){var i=n(0).createTagScope().defineTag("Popover");e.Popover=i},function(t,e,n){var i=n(0).createTagScope().defineTag("Snackbar");e.Snackbar=i},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(0).createTagScope().defineTag("Form","form",(function(t){t.prototype.__formData={watch:"formDataDidSet",name:"formData"},t.prototype.formData=function(t){return this._formData},t.prototype.setFormData=function(t){var e=this.formData();return t!=e&&(this._formData=t),t!=e&&this.formDataDidSet&&this.formDataDidSet(t,e,this.__formData),this},t.prototype.formDataDidSet=function(t){if(this._commited)return this.applyFormData(t)},t.prototype.loadFormData=function(){if(this._formData)return this.applyFormData(this._formData)},t.prototype.commit=function(){return t.prototype.__super__.commit.apply(this,arguments),this._commited||(this.loadFormData(),this._commited=!0),this},t.prototype.formElements=function(){var t=[];for(let e,n=0,r=i(this.dom().elements),o=r.length;n<o;n++){e=r[n];let i=e,o=e.name;o&&t.push(i),t[o]?(t[o]instanceof Array||(t[o]=[t[o]]),t[o].push(i)):t[o]=i}return t},t.prototype.applyFormData=function(t){void 0===t&&(t={});for(let e,n=0,r=i(this.formElements()),o=r.length;n<o;n++){e=r[n];let i=e.type,o=t[e.name];null!=o&&("radio"==i||"checked"==i?e.checked=e.value==o:e._tag?e._tag.setValue(o):e.value=o)}return this},t.prototype.formData=function(){var t={};for(let e,n=0,r=i(this.dom().elements),o=r.length;n<o;n++){if(e=r[n],"checkbox"==e.type){if(!e.checked)continue}else if("radio"==e.type&&!e.checked)continue;e.name&&(t[e.name]=e._tag&&e._tag.value?e._tag.value():e.value)}return t},t.prototype.onsubmit=async function(t){if(t.cancel().halt(),!this.uxa().queue().busy())return this.trigger("uxa:submit",this.formData()),await this.uxa().queue(),this.uxa().queue().failed()&&(this.log("failed?!?!",this.uxa().queue().error()),this.uxa().flash(this.uxa().queue().error()),this.uxa().queue().reset()),this},t.prototype.onuxabusy=function(t){return t.halt(),this.flag("uxa-busy")},t.prototype.onuxaidle=function(t){var e=this;return t.halt(),setTimeout((function(){if(e.uxa().queue().idle())return e.unflag("uxa-busy")}),200)}}));e.Form=r},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(59).Queue,a=o.defineTag("Indicator",(function(t){t.prototype.__progress={default:0,watch:"progressDidSet",name:"progress"},t.prototype.progress=function(t){return this._progress},t.prototype.setProgress=function(t){var e=this.progress();return t!=e&&(this._progress=t),t!=e&&this.progressDidSet&&this.progressDidSet(t,e,this.__progress),this},t.prototype._progress=0,t.prototype.__type={default:"indeterminate",name:"type"},t.prototype.type=function(t){return this._type},t.prototype.setType=function(t){return this._type=t,this},t.prototype._type="indeterminate",t.prototype.__busy={watch:"busyDidSet",name:"busy"},t.prototype.busy=function(t){return this._busy},t.prototype.setBusy=function(t){var e=this.busy();return t!=e&&(this._busy=t),t!=e&&this.busyDidSet&&this.busyDidSet(t,e,this.__busy),this},t.prototype.__state={default:"idle",watch:"stateDidSet",name:"state"},t.prototype.state=function(t){return this._state},t.prototype.setState=function(t){var e=this.state();return t!=e&&(this._state=t),t!=e&&this.stateDidSet&&this.stateDidSet(t,e,this.__state),this},t.prototype._state="idle",t.prototype.__time={default:2100,name:"time"},t.prototype.time=function(t){return this._time},t.prototype.setTime=function(t){return this._time=t,this},t.prototype._time=2100,t.prototype.__threshold={default:0,name:"threshold"},t.prototype.threshold=function(t){return this._threshold},t.prototype.setThreshold=function(t){return this._threshold=t,this},t.prototype._threshold=0,t.prototype.busyDidSet=function(t){return t?this.start():this.stop()},t.prototype.setup=function(){return this._items=[],this._starter=null,this._endAt=0,this.data()instanceof s&&(this._queue=this.data(),this._handler=this.refresh.bind(this),this.data().on("incr",this._handler),this.data().on("decr",this._handler)),this},t.prototype.refresh=function(){var t;this.expectedEndAt();return(t=this._queue)&&(t.len instanceof Function?t.len():t.length)?this.start():this.stop(),this},t.prototype.expectedEndAt=function(){if(this._queue){var t=this._queue.map((function(t){return t._uxa.endAt||0})),e=Math.max.apply(Math,t);return Math.max(e,Date.now())}return Math.max(this._endAt,Date.now())},t.prototype.start=function(t){return void 0===t&&(t=1e3),this.setBusy(!0),"done"!=this.state()&&"idle"!=this.state()||(this._startAt=Date.now(),this._endAt=this._startAt+t,this.setState("prep")),this},t.prototype.stop=function(){return this.setBusy(!1),"prep"==this.state()?this.setState("done"):"busy"!=this.state()&&"stalled"!=this.state()||this.setState("finish"),this},t.prototype.calculatedProgress=function(){return(Date.now()-this._startAt)/(this._endAt-this._startAt)},t.prototype.step=function(){var t;return"prep"==this.state()?(this.setState(t="start"),t):"start"==this.state()?this.busy()?(this.setState(t="busy"),t):(this.setState(t="finish"),t):"busy"==this.state()?this._queue&&!this._queue.idle()?(this.setState(t="stalled"),t):(this.setState(t="finish"),t):"finish"==this.state()?(this.setState(t="done"),t):"done"==this.state()?(this.setState(t="idle"),t):void 0},t.prototype.stateDidSet=function(t,e){var n=this;n.setFlag("state",t),clearTimeout(n._stateTimeout);let i,r=2,o=0;if("prep"==t)n.unflag("running"),r=n.threshold()||2,n._ind.css({transition:"none",transform:"scaleX(0)"}),n.dom().offsetParent,n.flag("running");else if("start"==t)n._startedAt=Date.now(),r=240,o=.12,i="cubic-bezier(0.250, 1.190, 0.300, 0.865)",n._ind.css({transition:"transform "+r+"ms "+i,transform:"scaleX(0.1)"});else if("busy"==t)r=n.expectedEndAt()-Date.now(),o=.85,i="cubic-bezier(0.225, 0.710, 0.565, 0.985)",n._ind.css({transition:"transform "+r+"ms "+i,transform:"scaleX(0.85)"});else if("stalled"==t)n._ind.css({transition:"transform 3s linear",transform:"scaleX(0.95)"});else if("finish"==t){var s=Date.now()-n._startedAt;r=Math.max(200,600-s),i="cubic-bezier(0.260, 0.025, 0.000, 0.995)",i="cubic-bezier(0.4, 0.0, 0.2, 1)",o=1,n._ind.css({transition:"transform "+r+"ms "+i,transform:"scaleX(1)"})}else"done"==t&&(n.unflag("running"),r=200);return n._stateTimeout=setTimeout((function(){return n.step()}),r)},t.prototype.render=function(){this.$;return this.$open(0).flag("uxa").setFlag(-1,this.type()).setChildren(this._ind=this._ind||r("div",this).flag("ind"),2).synced((this._ind.setFlag(0,this.type()),!0))}}));e.Indicator=a},function(t,e,n){function i(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=n(0);function o(t,e){this._parent=e,this._owner=t,this._commit=t.commit,this._pending=[],this._errors=[],this._state="idle"}e.Queue=o,o.prototype.error=function(t){return this._error},o.prototype.setError=function(t){return this._error=t,this},o.prototype.errors=function(t){return this._errors},o.prototype.setErrors=function(t){return this._errors=t,this},o.prototype.__state={watch:"stateDidSet",name:"state"},o.prototype.state=function(t){return this._state},o.prototype.setState=function(t){var e=this.state();return t!=e&&(this._state=t),t!=e&&this.stateDidSet&&this.stateDidSet(t,e,this.__state),this},o.prototype.emit=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return r.emit(this,t,i)},o.prototype.on=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return r.listen.apply(r,[].concat([this,t],Array.from(i)))},o.prototype.un=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return r.unlisten.apply(r,[].concat([this,t],Array.from(i)))},o.prototype.map=function(t){return this._pending.map(t)},o.prototype.len=function(){return this._pending.length},o.prototype.busy=function(){return i(this)>0},o.prototype.idle=function(){return 0==i(this)},o.prototype.failed=function(){return i(this._errors)},o.prototype.reset=function(){return this._errors=[],this},o.prototype.error=function(){return this._errors[0]&&this._errors[0]._uxa.error},o.prototype.add=function(t,e){var n=this;null==e&&"function"==typeof t&&(e=t,t={}),null==t&&(t={}),("number"==typeof t||t instanceof Number)&&(t={duration:t}),t.duration||(t.duration=1e3),t.startAt=Date.now(),t.state="pending",t.duration&&(t.endAt=t.startAt+t.duration);var i=e;return i instanceof Function&&(i=i()),i&&i.then?(i._uxa=t,n.incr(i),i.then((function(t){return n.decr(i,t)}),(function(t){return n.fail(i,t)}))):n},o.prototype.incr=function(t){if(this._pending.push(t),1==i(this._pending)&&this.setState("busy"),r.emit(this,"incr",[this,t]),this._parent)return this._parent.incr(t)},o.prototype.decr=function(t,e){var n=this._pending.indexOf(t);if(n>=0&&(this._pending.splice(n,1),t._uxa.endedAt=Date.now(),t._uxa.error&&this._errors.push(t),r.emit(this,"decr",[this,t]),0==i(this._pending)&&this.setState("idle"),this._parent))return this._parent.decr(t,e)},o.prototype.fail=function(t,e){return t._uxa.error=e,this.decr(t)},o.prototype.stateDidSet=function(t,e){return"busy"==t?this._owner&&this._owner.trigger&&this._owner.trigger("uxa:busy"):"idle"==t&&(this._owner&&this._owner.trigger&&this._owner.trigger("uxa:idle"),this._owner&&this._owner.commit&&this._owner.commit()),r.emit(this,t,[])},o.prototype.then=function(t){return"idle"==this.state()?t():r.once(this,"idle",t)}},function(t,e,n){(function(e){!function(e){"use strict";var n={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:y,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:y,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:y,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n?(?!hr|heading|lheading| {0,3}>|tag)[^\n]+)+)/,text:/^[^\n]+/};function i(t){this.tokens=[],this.tokens.links={},this.options=t||g.defaults,this.rules=n.normal,this.options.gfm&&(this.options.tables?this.rules=n.tables:this.rules=n.gfm)}n._label=/(?:\\[\[\]]|[^\[\]])+/,n._title=/(?:"(?:\\"|[^"]|"[^"\n]*")*"|'\n?(?:[^'\n]+\n?)*'|\([^()]*\))/,n.def=h(n.def).replace("label",n._label).replace("title",n._title).getRegex(),n.bullet=/(?:[*+-]|\d+\.)/,n.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,n.item=h(n.item,"gm").replace(/bull/g,n.bullet).getRegex(),n.list=h(n.list).replace(/bull/g,n.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+n.def.source+")").getRegex(),n._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b",n.html=h(n.html).replace("comment",/<!--[\s\S]*?-->/).replace("closed",/<(tag)[\s\S]+?<\/\1>/).replace("closing",/<tag(?:"[^"]*"|'[^']*'|\s[^'"\/>\s]*)*?\/?>/).replace(/tag/g,n._tag).getRegex(),n.paragraph=h(n.paragraph).replace("hr",n.hr).replace("heading",n.heading).replace("lheading",n.lheading).replace("tag","<"+n._tag).getRegex(),n.blockquote=h(n.blockquote).replace("paragraph",n.paragraph).getRegex(),n.normal=m({},n),n.gfm=m({},n.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),n.gfm.paragraph=h(n.paragraph).replace("(?!","(?!"+n.gfm.fences.source.replace("\\1","\\2")+"|"+n.list.source.replace("\\1","\\3")+"|").getRegex(),n.tables=m({},n.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),i.rules=n,i.lex=function(t,e){return new i(e).lex(t)},i.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},i.prototype.token=function(t,e){var i,r,o,s,a,u,p,c,h,l,d;for(t=t.replace(/^ +$/gm,"");t;)if((o=this.rules.newline.exec(t))&&(t=t.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(t))t=t.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});else if(o=this.rules.fences.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]||""});else if(o=this.rules.heading.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(e&&(o=this.rules.nptable.exec(t))){for(t=t.substring(o[0].length),u={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},c=0;c<u.align.length;c++)/^ *-+: *$/.test(u.align[c])?u.align[c]="right":/^ *:-+: *$/.test(u.align[c])?u.align[c]="center":/^ *:-+ *$/.test(u.align[c])?u.align[c]="left":u.align[c]=null;for(c=0;c<u.cells.length;c++)u.cells[c]=u.cells[c].split(/ *\| */);this.tokens.push(u)}else if(o=this.rules.hr.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,e),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(t)){for(t=t.substring(o[0].length),d=(s=o[2]).length>1,this.tokens.push({type:"list_start",ordered:d,start:d?+s:""}),i=!1,l=(o=o[0].match(this.rules.item)).length,c=0;c<l;c++)p=(u=o[c]).length,~(u=u.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(p-=u.length,u=this.options.pedantic?u.replace(/^ {1,4}/gm,""):u.replace(new RegExp("^ {1,"+p+"}","gm"),"")),this.options.smartLists&&c!==l-1&&(s===(a=n.bullet.exec(o[c+1])[0])||s.length>1&&a.length>1||(t=o.slice(c+1).join("\n")+t,c=l-1)),r=i||/\n\n(?!\s*$)/.test(u),c!==l-1&&(i="\n"===u.charAt(u.length-1),r||(r=i)),this.tokens.push({type:r?"loose_item_start":"list_item_start"}),this.token(u,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(t))t=t.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===o[1]||"script"===o[1]||"style"===o[1]),text:o[0]});else if(e&&(o=this.rules.def.exec(t)))t=t.substring(o[0].length),o[3]&&(o[3]=o[3].substring(1,o[3].length-1)),h=o[1].toLowerCase(),this.tokens.links[h]||(this.tokens.links[h]={href:o[2],title:o[3]});else if(e&&(o=this.rules.table.exec(t))){for(t=t.substring(o[0].length),u={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<u.align.length;c++)/^ *-+: *$/.test(u.align[c])?u.align[c]="right":/^ *:-+: *$/.test(u.align[c])?u.align[c]="center":/^ *:-+ *$/.test(u.align[c])?u.align[c]="left":u.align[c]=null;for(c=0;c<u.cells.length;c++)u.cells[c]=u.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(u)}else if(o=this.rules.lheading.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(e&&(o=this.rules.paragraph.exec(t)))t=t.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(t))t=t.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var r={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:y,tag:/^<!--[\s\S]*?-->|^<\/?[a-zA-Z0-9\-]+(?:"[^"]*"|'[^']*'|\s[^<'">\/\s]*)*?\/?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^_([^\s_](?:[^_]|__)+?[^\s_])_\b|^\*((?:\*\*|[^*])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:y,text:/^[\s\S]+?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function o(t,e){if(this.options=e||g.defaults,this.links=t,this.rules=r.normal,this.renderer=this.options.renderer||new s,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=r.breaks:this.rules=r.gfm:this.options.pedantic&&(this.rules=r.pedantic)}function s(t){this.options=t||{}}function a(){}function u(t){this.tokens=[],this.token=null,this.options=t||g.defaults,this.options.renderer=this.options.renderer||new s,this.renderer=this.options.renderer,this.renderer.options=this.options}function p(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function c(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""}))}function h(t,e){return t=t.source,e=e||"",{replace:function(e,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),t=t.replace(e,n),this},getRegex:function(){return new RegExp(t,e)}}}function l(t,e){return d[" "+t]||(/^[^:]+:\/*[^/]*$/.test(t)?d[" "+t]=t+"/":d[" "+t]=t.replace(/[^/]*$/,"")),t=d[" "+t],"//"===e.slice(0,2)?t.replace(/:[\s\S]*/,":")+e:"/"===e.charAt(0)?t.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+e:t+e}r._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,r._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,r.autolink=h(r.autolink).replace("scheme",r._scheme).replace("email",r._email).getRegex(),r._inside=/(?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]]|\](?=[^\[]*\]))*/,r._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,r.link=h(r.link).replace("inside",r._inside).replace("href",r._href).getRegex(),r.reflink=h(r.reflink).replace("inside",r._inside).getRegex(),r.normal=m({},r),r.pedantic=m({},r.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),r.gfm=m({},r.normal,{escape:h(r.escape).replace("])","~|])").getRegex(),url:h(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("email",r._email).getRegex(),_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:h(r.text).replace("]|","~]|").replace("|","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|").getRegex()}),r.breaks=m({},r.gfm,{br:h(r.br).replace("{2,}","*").getRegex(),text:h(r.gfm.text).replace("{2,}","*").getRegex()}),o.rules=r,o.output=function(t,e,n){return new o(e,n).output(t)},o.prototype.output=function(t){for(var e,n,i,r,o="";t;)if(r=this.rules.escape.exec(t))t=t.substring(r[0].length),o+=r[1];else if(r=this.rules.autolink.exec(t))t=t.substring(r[0].length),i="@"===r[2]?"mailto:"+(n=p(this.mangle(r[1]))):n=p(r[1]),o+=this.renderer.link(i,null,n);else if(this.inLink||!(r=this.rules.url.exec(t))){if(r=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),t=t.substring(r[0].length),o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):p(r[0]):r[0];else if(r=this.rules.link.exec(t))t=t.substring(r[0].length),this.inLink=!0,o+=this.outputLink(r,{href:r[2],title:r[3]}),this.inLink=!1;else if((r=this.rules.reflink.exec(t))||(r=this.rules.nolink.exec(t))){if(t=t.substring(r[0].length),e=(r[2]||r[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){o+=r[0].charAt(0),t=r[0].substring(1)+t;continue}this.inLink=!0,o+=this.outputLink(r,e),this.inLink=!1}else if(r=this.rules.strong.exec(t))t=t.substring(r[0].length),o+=this.renderer.strong(this.output(r[2]||r[1]));else if(r=this.rules.em.exec(t))t=t.substring(r[0].length),o+=this.renderer.em(this.output(r[2]||r[1]));else if(r=this.rules.code.exec(t))t=t.substring(r[0].length),o+=this.renderer.codespan(p(r[2].trim(),!0));else if(r=this.rules.br.exec(t))t=t.substring(r[0].length),o+=this.renderer.br();else if(r=this.rules.del.exec(t))t=t.substring(r[0].length),o+=this.renderer.del(this.output(r[1]));else if(r=this.rules.text.exec(t))t=t.substring(r[0].length),o+=this.renderer.text(p(this.smartypants(r[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else r[0]=this.rules._backpedal.exec(r[0])[0],t=t.substring(r[0].length),"@"===r[2]?i="mailto:"+(n=p(r[0])):(n=p(r[0]),i="www."===r[1]?"http://"+n:n),o+=this.renderer.link(i,null,n);return o},o.prototype.outputLink=function(t,e){var n=p(e.href),i=e.title?p(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,i,this.output(t[1])):this.renderer.image(n,i,p(t[1]))},o.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t},o.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,n="",i=t.length,r=0;r<i;r++)e=t.charCodeAt(r),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},s.prototype.code=function(t,e,n){if(this.options.highlight){var i=this.options.highlight(t,e);null!=i&&i!==t&&(n=!0,t=i)}return e?'<pre><code class="'+this.options.langPrefix+p(e,!0)+'">'+(n?t:p(t,!0))+"\n</code></pre>\n":"<pre><code>"+(n?t:p(t,!0))+"\n</code></pre>"},s.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},s.prototype.html=function(t){return t},s.prototype.heading=function(t,e,n){return"<h"+e+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},s.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},s.prototype.list=function(t,e,n){var i=e?"ol":"ul";return"<"+i+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+i+">\n"},s.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},s.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},s.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},s.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},s.prototype.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' style="text-align:'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},s.prototype.strong=function(t){return"<strong>"+t+"</strong>"},s.prototype.em=function(t){return"<em>"+t+"</em>"},s.prototype.codespan=function(t){return"<code>"+t+"</code>"},s.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},s.prototype.del=function(t){return"<del>"+t+"</del>"},s.prototype.link=function(t,e,n){if(this.options.sanitize){try{var i=decodeURIComponent(c(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return n}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return n}this.options.baseUrl&&!f.test(t)&&(t=l(this.options.baseUrl,t));var r='<a href="'+t+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>"},s.prototype.image=function(t,e,n){this.options.baseUrl&&!f.test(t)&&(t=l(this.options.baseUrl,t));var i='<img src="'+t+'" alt="'+n+'"';return e&&(i+=' title="'+e+'"'),i+=this.options.xhtml?"/>":">"},s.prototype.text=function(t){return t},a.prototype.strong=a.prototype.em=a.prototype.codespan=a.prototype.del=a.prototype.text=function(t){return t},a.prototype.link=a.prototype.image=function(t,e,n){return""+n},a.prototype.br=function(){return""},u.parse=function(t,e){return new u(e).parse(t)},u.prototype.parse=function(t){this.inline=new o(t.links,this.options),this.inlineText=new o(t.links,m({},this.options,{renderer:new a})),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},u.prototype.next=function(){return this.token=this.tokens.pop()},u.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},u.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},u.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,c(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,i,r="",o="";for(n="",t=0;t<this.token.header.length;t++)n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(r+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",i=0;i<e.length;i++)n+=this.renderer.tablecell(this.inline.output(e[i]),{header:!1,align:this.token.align[i]});o+=this.renderer.tablerow(n)}return this.renderer.table(r,o);case"blockquote_start":for(o="";"blockquote_end"!==this.next().type;)o+=this.tok();return this.renderer.blockquote(o);case"list_start":o="";for(var s=this.token.ordered,a=this.token.start;"list_end"!==this.next().type;)o+=this.tok();return this.renderer.list(o,s,a);case"list_item_start":for(o="";"list_item_end"!==this.next().type;)o+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(o);case"loose_item_start":for(o="";"list_item_end"!==this.next().type;)o+=this.tok();return this.renderer.listitem(o);case"html":var u=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(u);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};var d={},f=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function y(){}function m(t){for(var e,n,i=1;i<arguments.length;i++)for(n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function g(t,e,n){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(n||"function"==typeof e){n||(n=e,e=null);var r,o,s=(e=m({},g.defaults,e||{})).highlight,a=0;try{r=i.lex(t,e)}catch(t){return n(t)}o=r.length;var c=function(t){if(t)return e.highlight=s,n(t);var i;try{i=u.parse(r,e)}catch(e){t=e}return e.highlight=s,t?n(t):n(null,i)};if(!s||s.length<3)return c();if(delete e.highlight,!o)return c();for(;a<r.length;a++)!function(t){"code"!==t.type?--o||c():s(t.text,t.lang,(function(e,n){return e?c(e):null==n||n===t.text?--o||c():(t.text=n,t.escaped=!0,void(--o||c()))}))}(r[a])}else try{return e&&(e=m({},g.defaults,e)),u.parse(i.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",(e||g.defaults).silent)return"<p>An error occurred:</p><pre>"+p(t.message+"",!0)+"</pre>";throw t}}y.exec=y,g.options=g.setOptions=function(t){return m(g.defaults,t),g},g.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new s,xhtml:!1,baseUrl:null},g.Parser=u,g.parser=u.parse,g.Renderer=s,g.TextRenderer=a,g.Lexer=i,g.lexer=i.lex,g.InlineLexer=o,g.inlineLexer=o.output,g.parse=g,t.exports=g}(this||"undefined"!=typeof window&&window)}).call(this,n(12))},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(0),o=r.createTagCache,s=r.createElementFactory(),a=r.createTagScope(),u=n(1),p=(u.FILE,u.SCON),c=(u.DIRTY,n(9).Delay),h=(n(10).Dimensions,n(23)),l=n(62),d=n(152),f=a.defineTag("CodePreview",(function(t){t.prototype.file=function(t){return this._file},t.prototype.setFile=function(t){return this._file=t,this},t.prototype.__value={watch:"valueDidSet",name:"value"},t.prototype.value=function(t){return this._value},t.prototype.setValue=function(t){var e=this.value();return t!=e&&(this._value=t),t!=e&&this.valueDidSet&&this.valueDidSet(t,e,this.__value),this},t.prototype.build=function(){($_=this.$).$build$||($_.$build$=o(this));return this.$open("build0").setChildren(this._code=this._code||s("pre",this).flag("code"),2).synced()},t.prototype.valueDidSet=function(t){return this._code.dom().innerText=t},t.prototype.render=function(){if(this.file())return this.setValue(this.file().currentBody()),this},t.prototype.setScrollPosition=function(t){return null!=t.scrollLeft&&(this.dom().scrollLeft=this._scrollLeft=t.scrollLeft),null!=t.scrollTop&&(this.dom().scrollTop=this._scrollTop=t.scrollTop),this},t.prototype.getScrollTop=function(){return this.dom().scrollTop},t.prototype.getScrollLeft=function(){return this.dom().scrollLeft},t.prototype.getScrollWidth=function(){return 0},t.prototype.getScrollHeight=function(){return 0}})),y=a.defineTag("EditorView",(function(t){t.prototype.layout=function(t){return this._layout},t.prototype.setLayout=function(t){return this._layout=t,this},t.prototype.__file={watch:"fileDidSet",name:"file"},t.prototype.file=function(t){return this._file},t.prototype.setFile=function(t){var e=this.file();return t!=e&&(this._file=t),t!=e&&this.fileDidSet&&this.fileDidSet(t,e,this.__file),this},t.prototype.__fontSize={watch:"fontSizeDidSet",name:"fontSize"},t.prototype.fontSize=function(t){return this._fontSize},t.prototype.setFontSize=function(t){var e=this.fontSize();return t!=e&&(this._fontSize=t),t!=e&&this.fontSizeDidSet&&this.fontSizeDidSet(t,e,this.__fontSize),this},t.prototype.__selState={watch:"selStateDidSet",name:"selState"},t.prototype.selState=function(t){return this._selState},t.prototype.setSelState=function(t){var e=this.selState();return t!=e&&(this._selState=t),t!=e&&this.selStateDidSet&&this.selStateDidSet(t,e,this.__selState),this},t.prototype.__scrollState={watch:"scrollStateDidSet",name:"scrollState"},t.prototype.scrollState=function(t){return this._scrollState},t.prototype.setScrollState=function(t){var e=this.scrollState();return t!=e&&(this._scrollState=t),t!=e&&this.scrollStateDidSet&&this.scrollStateDidSet(t,e,this.__scrollState),this},t.prototype.__streamLayout={watch:"streamLayoutDidSet",name:"streamLayout"},t.prototype.streamLayout=function(t){return this._streamLayout},t.prototype.setStreamLayout=function(t){var e=this.streamLayout();return t!=e&&(this._streamLayout=t),t!=e&&this.streamLayoutDidSet&&this.streamLayoutDidSet(t,e,this.__streamLayout),this},t.prototype.__autoScroll={default:!0,watch:"autoScrollDidSet",name:"autoScroll"},t.prototype.autoScroll=function(t){return this._autoScroll},t.prototype.setAutoScroll=function(t){var e=this.autoScroll();return t!=e&&(this._autoScroll=t),t!=e&&this.autoScrollDidSet&&this.autoScrollDidSet(t,e,this.__autoScroll),this},t.prototype._autoScroll=!0,t.prototype.space=function(){return this.data().space()},t.prototype.build=function(){return this._syncing=!1,this._dirty={},this._bridge=this._preview=s(f).end(),this._layout={},this._layouter=new c(this,"relayout"),this._scrollTarget={},this.dom().appendChild(this._preview.dom()),this.dom().appendChild(s("div").flag("left-shadow").dom()),this.dom().appendChild(s("div").flag("top-shadow").dom()),this},t.prototype.setup=function(){var t=this;return t.data().setView(t),t.setSref(t.data().id()),t.layoutCodePreview(),t.space().once("dispose",(function(){return t.dispose()})),t._v=t.data().options()._v,t.space().on("reflow",(function(e){return t._top=t._left=t._width=t._height=0,t.relayout()})),t.space().on("watch",(function(){return t.log("Space:watch"),t.setAutoScroll(!0),!0})),t.space().on("playing",(function(){return t.log("Space:playing",t.autoScroll()),t.setAutoScroll(!0),t.space().agent().options().reset("file")})),t},t.prototype.posToScreen=function(t,e){return this.data().agentToLocalPoint(t,e)},t.prototype.batch=function(t){var e=this._syncing;return this._syncing=!0,t(),this._syncing=e,this},t.prototype.mount=function(){var t=this;return t._mounted=!0,t.load(),t.render(),setTimeout((function(){return t.relayout()}),20),t},t.prototype.fontSize=function(){return this.space().view().fontSize()},t.prototype.unmount=function(){return this},t.prototype.focus=function(){if(this.log("called focus"),this._editor)return this._editor.focus()},t.prototype.onfocus=function(t){if(t.event().target==this)return this.log("editor onfocus"),this._editor.focus()},t.prototype.autoScrollDidSet=function(t){if(t)return this.unsyncScroll()},t.prototype.getDynamicOptions=function(){var t=this.space().view().fontSize(),e=this.space().model().pub;return{renderWhitespace:this.data().renderWhitespace()?"boundary":"none",renderIndentGuides:this.data().renderIndentGuides(),fontSize:this._fontSize=t,lineHeight:this._lineHeight=Math.ceil(1.5*this._fontSize),lineDecorationsWidth:t+4,wordWrapColumn:this.data().wordWrapColumn(),wordWrap:!this.data().wordWrap()||e&&e.noWordWrap?"off":"wordWrapColumn",wrappingIndent:this.data().wrappingIndent()}},t.prototype.configuration=function(){return this._editor.viewModel.configuration},t.prototype.fontInfo=function(){return this.configuration().editor.fontInfo},t.prototype.layoutInfo=function(){return this.configuration().editor.layoutInfo},t.prototype.leftPadding=function(){var t=this.getDynamicOptions();return Math.round(.6*t.fontSize*5)+t.lineDecorationsWidth},t.prototype.top=function(){return this._top||(this._top=this.dom().offsetTop)},t.prototype.left=function(){return this._left||(this._left=this.dom().offsetLeft)},t.prototype.width=function(){return this._layout.width||this._width},t.prototype.height=function(){return this._layout.height||this._height},t.prototype.contentTop=function(){return 20},t.prototype.contentLeft=function(){return this._layout.contentLeft||this.leftPadding()},t.prototype.scrollTop=function(){return this._bridge.getScrollTop()},t.prototype.scrollLeft=function(){return this._bridge.getScrollLeft()},t.prototype.lineHeight=function(){return Math.ceil(1.5*this._fontSize)},t.prototype.setScrollPosition=function(t){let e=this._scrollTarget;return t.scrollTop==e.scrollTop&&t.scrollLeft==e.scrollLeft||(e.scrollTop=t.scrollTop,e.scrollLeft=t.scrollLeft,this._bridge.setScrollPosition(t)),this},t.prototype.setSelections=function(t){if(this._editor)return this._monacoSel=l.opToSelections(t),this._editor.setSelections(this._monacoSel)},t.prototype.layoutCodePreview=function(){return this._preview.css({left:this.contentLeft()+"px",paddingTop:this.contentTop()+"px",fontSize:this.fontSize()+"px",lineHeight:this.lineHeight()+"px"})},t.prototype.currentCodeAnchor=function(t){if(void 0===t&&(t="uri"),!this._editor||!this._file)return;var e=this._editor.getSelection(),n=this.space().cursor().current();let i=this.space().timeline().currentOffset(),r={cid:n.branch().id(),index:n.index(),offset:n.offset(),t:i,fid:this._file.id(),text:this._editor.model.getValueInRange(e)};var o="scrimba://"+n.branch().id()+"@"+n.index();if(this.file()&&e){let t=e.startLineNumber,n=e.startColumn,i=e.endLineNumber,s=e.endColumn;o+=this.file().path()+"#";let a="L"+t;1==n&&1==s?i-1>t&&(a+="-"+(i-1)):(a+=":"+n,t==i&&n==s||(1==s?(i-=1,a+="-"+i,1!=n&&(a+=":"+this._editor.model.getLineMaxColumn(i))):a+="-"+i+":"+s)),r.loc=a,o+=a}r.uri=o,r.hash=r.index+"."+(i-n.offset())+"."+r.fid+"."+r.loc.replace(/\:/g,"_");let s=new URL(document.location.href);return s.searchParams.set("a",r.hash),r.href=s.toString(),"uri"==t?{uri:o,text:r.text}:"hash"==t?r.hash:r},t.prototype.batchEdits=function(t){var e=this;return e._editor?(e.batch((function(){e._editor.getModel();var n=e._editor.cursor;if(n&&(n._isHandling=!0),t(),n)return n._isHandling=!1})),e):e.batch(t)},t.prototype.render=function(){var t=this;if(t._mounted)return t.batch((function(){if(t.setFile(t.data().currentFile()),t.flagIf("hasAgentFocus",t.file()&&(t.space().agent().focus()==t.file()||t.space().agent().focus()==t.data())),t.file()){t._editor||t._preview.render();var e=t.file().selState();if(e!=t.selState()&&t._editor&&(t.setSelState(e),e.LOCAL||t.setSelections(e)),t.syncScroll(),t.data().options()._v!=t._v&&t._editor&&(t._v=t.data().options()._v,t._editor.updateOptions(t.getDynamicOptions())),t.file().isLanguageStale()){const e="."+t.file().ext();for(let n,r=0,o=i(monaco.languages.getLanguages()),s=o.length;r<s;r++)if(n=o[r],n.extensions.includes(e)){monaco.editor.setModelLanguage(t.file().model().model(),n.id),t.file().syncExtension();break}}return t._editor&&t._editor.render(),t.pushLayout()}})),t},t.prototype.relayout=function(){var t=this._width||(this._width=this.dom().offsetWidth),e=this._height||(this._height=this.dom().offsetHeight);if(t&&this._editor)return this._compositingLayout=!0,this._syncedFontSize!=this.space().view().fontSize()&&(this._editor.updateOptions(this.getDynamicOptions()),this._syncedFontSize=this.space().view().fontSize()),t==this._syncedWidth&&e==this._syncedHeight||(this._syncedWidth=t,this._syncedHeight=e,this._editor.layout({height:e,width:t})),this._compositingLayout=!1,this},t.prototype.pushLayout=function(){if(this.space().isEditing()&&this._editor)return this.data().setLeft(this.left()),this.data().setTop(this.top()),this.data().setWidth(this.width()),this.data().setHeight(this.height()),this.data().setContentLeft(this.contentLeft()),this.data().setContentTop(this.contentTop()),this.data().setFontSize(this.fontSize()),this.data().setLineHeight(this.lineHeight()),this.file()&&this._editor&&(this.file().setScrollTop(this._editor.getScrollTop()),this.file().setScrollLeft(this._editor.getScrollLeft())),this},t.prototype.syncScroll=function(){if(this.space().isEditing()||!this.autoScroll())return;var t=this.data().lineHeight()||21,e=this.file().scrollTop()||0,n=this.file().scrollLeft()||0;let i=this.data().height()/t;var r=this._monacoSel&&this._monacoSel[0];let o={},s=this.height()/this.lineHeight()/i,a=o.scrollTop=Math.round(e*(this.lineHeight()/t)),u=(o.scrollLeft=Math.round(n*(this.fontSize()/(this.data().fontSize()||14))),this._agentPointerX,this._agentPointerY);this._scrollTarget;if(r&&s<1){this._editor.getTopForLineNumber(r.startLineNumber),this._editor.getTopForLineNumber(r.endLineNumber);let n=this._editor.getTopForLineNumber(r.positionLineNumber),i=(n/this.lineHeight()*t-e)/this.data().height(),s=(n-a)/this.height(),p=Math.round(n-this.height()*i),c=(1-s)*this.height();this.height();c>this.lineHeight()||(o.scrollTop=p),u<o.scrollTop&&(o.scrollTop=Math.round(u-this.lineHeight()))}return this.setScrollPosition(o),e!=this._agentScrollTop&&(this._agentScrollTop=e),n!=this._agentScrollLeft&&(this._agentScrollLeft=n),this},t.prototype.unsyncScroll=function(){return this._agentScrollLeft=this._agentScrollTop=-1},t.prototype.fileDidSet=function(t,e){if(this.flag("hasFile",!!t),e&&e.setEditor(null),this._preview.setFile(t),t&&t.setEditor(this),this._dirty.file=!0,this.flag("binary-file",t&&t.isBinary()),this._editor){t&&t.isBinary()&&(t=null),(this.space().isPlaying()||this.space().isWatching())&&this.setAutoScroll(!0),this.unsyncScroll();var n=!1;if(this._bridge.isFocused()&&(n=!0),t){let e=t.model().model();this._editor.setModel(e),this._editor.FILE=t;try{this._editor.viewModel.viewLayout._linesLayout.insertWhitespace(0,0,this.contentTop())}catch(t){}this.space().isEditing()?(this.setScrollPosition({scrollTop:t.scrollTop()||0,scrollLeft:t.scrollLeft()||0}),this.relayout()):!this.autoScroll()&&t._lastScrollPosition&&(this.log("restore local scrollPosition!"),this.setScrollPosition({scrollTop:t._lastScrollPosition.scrollTop,scrollLeft:t._lastScrollPosition.scrollLeft}))}else this._editor.setModel(null);return t&&t.selState()&&(this.setSelState(t.selState()),this._editor.render(),this.setSelections(this.selState())),n?this._editor.focus():void 0}},t.prototype.focusWidgetForNode=function(){return this.data()},t.prototype.oncopy=function(){var t=l.selectionToArray(this._editor.getSelection());return this.api().sendTracking(h.TYPES.COPY,[this.space().timeline().currentOffset(),this.file().id(),t])},t.prototype.oncut=function(){return this.oncopy()},t.prototype.load=async function(){var t=this;if(t._editor||t._loading)return t;t._loading=!0,await l.load();var e=p.clone(window.MonacoEnvironment.defaults);for(let n,i,r=t.getDynamicOptions(),o=0,s=Object.keys(r),a=s.length;o<a;o++)i=s[o],n=r[i],e[i]=n;t._toDispose=[],t._timeouts=[];t._file&&t._file.ext();var n={logService:console};monaco.languages.typescript.typescriptDefaults.setEagerModelSync(!0),monaco.languages.typescript.typescriptDefaults.setCompilerOptions({experimentalDecorators:!0}),t._editor=monaco.editor.create(t.dom(),e,n),t._lastCursorSelection=Date.now(),l.patchEditor(t._editor),t._toDispose.push(t._editor.onDidChangeCursorSelection((function(e){!t.file()||t.space().isSyncing()||t._syncing||(t.file().model().onDidChangeCursorSelection(e),t._lastCursorSelection=Date.now(),r.commit(e))}))),t._toDispose.push(t._editor.onDidScrollChange((function(e){var n;if(t._file&&(e.scrollTopChanged||e.scrollLeftChanged)&&(t.file()._lastScrollPosition=e,t.space().touch("locals"),!t._syncing&&!t.space().cursor().syncing()))return t.setAutoScroll(!1),t.log("scroll",e),t.space().isEditing()?(t.file().setScrollTop(e.scrollTop),t.file().setScrollLeft(n=e.scrollLeft),n):void 0}))),t._toDispose.push(t._editor.onDidLayoutChange((function(e){return t.log("onDidLayoutChange",e),t._layout=e}))),t._toDispose.push(t._editor.onDidFocusEditor((function(e){return t.log("onDidFocusEditor")}))),t._toDispose.push(t._editor.onDidBlurEditor((function(e){return t.log("onDidBlurEditor")}))),t._editor.addAction({id:"inline-transpiled-code",label:"Inline transpiled code",keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyCode.KEY_J],run:function(t){if(["imba","imba2"].includes(t.model.getModeId()))return d.inlineCompiledCode(t.model,t)}}),t._bridge=t._editor,t._layout=t._editor.getLayoutInfo(),t._file||t._editor.setModel(null);for(let e=0,n=i(t.space().files()),r=n.length;e<r;e++)n[e].model().model();return t.batch((function(){if(t._agentScrollTop=t._agentScrollLeft=-1,t._scrollTarget={},t._file)return t.fileDidSet(t._file)})),t.flag("loaded"),t.render(),window.performance&&console.log("editor loaded",window.performance.now()),t},t.prototype.dispose=function(){var t;for(let e=0,n=i(this._toDispose),r=n.length;e<r;e++)(t=n[e])&&t.dispose&&t.dispose();this._toDispose=null;for(let t=0,e=i(this._timeouts),n=e.length;t<n;t++)clearTimeout(e[t]);if(this._timeouts=null,this.setFile(null),window.SE=null,this._editor){this._editor.setModel(null),this._editor.dispose();try{this._editor.domElement.innerHTML=""}catch(t){}this._editor.domElement=null}return this._model&&(this._model.dispose(),this._model=null),this._editor=null,this._dom._tag=null,this._dom.innerHTML=null,this._data.setView(null),this._data=null,this._owner=null,this._dom.parentNode.removeChild(this._dom),this}}));e.EditorView=y},function(t,e,n){var i={},r=n(0).createElementFactory(),o=n(60),s=null,a=n(1),u=a.LCRange,p=a.SCON,c=SCRIMBA_API,h="Source Code Pro",l=[],d=n(137).Theme,f={js:"javascript",ts:"typescript",svelte:"svelte",py:"python",md:"markdown"},y=window.MonacoEnvironment={defaults:{codeLens:!1,colorDecorators:!0,contextmenu:!1,cursorBlinking:"smooth",detectIndentation:!0,dragAndDrop:!1,folding:!1,fontFamily:h,fontIsMonospace:!0,fontSize:14,fontWeight:"normal",glyphMargin:0,hideCursorInOverviewRuler:!0,iconsInSuggestions:!1,lineDecorationsWidth:"1ch",lineNumbersMinChars:5,links:!1,minimap:{enabled:!1},multiCursorModifier:"alt",occurrencesHighlight:!1,outlineMarkers:!1,quickSuggestions:!0,readOnly:!1,renderIndentGuides:!1,renderLineHighlight:"gutter",renderWhitespace:"none",roundedSelection:!0,scrollBeyondLastLine:!0,selectionHighlight:!1,fixedOverflowWidgets:!0,suggestOnTriggerCharacters:!0,acceptSuggestionOnEnter:!0,theme:"scrimba-dark",wordBasedSuggestions:!0,wordWrapColumn:100,wordWrap:"wordWrapColumn",wrappingIndent:"same",scrollbar:{useShadows:!1,verticalScrollbarSize:8,horizontalScrollbarSize:8}},languages:[{id:"imba",extensions:[".imba"],aliases:["Imba","imba"],mimetypes:["application/imba"],language:n(138)},{id:"imba2",extensions:[".imba2"],aliases:["Imba2","imba2"],mimetypes:["application/imba2"],language:n(142)},{id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile"],aliases:["Ruby","rb"],language:n(143)},{id:"css",extensions:[".css",".scss"],aliases:["CSS","css","scss"],mimetypes:["text/css"],language:n(144)},{id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",language:n(145)},{id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],language:n(36)},{id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],language:n(146)},{id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],language:n(147)},{id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],language:n(148)},{id:"svelte",extensions:[".svelte"],aliases:["Svelte","svelte"],language:n(36)},{id:"vue",extensions:[".vue"],aliases:["Vue","vue"],language:n(149)},{id:"scss",extensions:[".scss"],aliases:["Scss"],language:n(150)}],javascript:n(151),marked:o,getWorkerUrl:function(){return c.monacoPath()+"/monaco.worker.js"},didLoad:function(){var t;monaco.editor.defineTheme("scrimba-dark",d.toMonaco()),y.languages.map((function(t){var e=t.language;return monaco.languages.register(t),monaco.languages.onLanguage(t.id,(function(){return e.language&&monaco.languages.setMonarchTokensProvider(t.id,e.language),e.conf&&monaco.languages.setLanguageConfiguration(t.id,e.conf),e.setup&&e.setup(monaco,t)}))}));try{var e=document.createElement("canvas");(t=e.getContext("2d")).font="bold 14px '"+h+"'",t.measureText("0123456789"),t.font="italic 14px '"+h+"'",t.measureText("0123456789"),t.font="14px '"+h+"'";t.measureText("0123456789")}catch(t){}var n=monaco.editor.setModelMarkers;monaco.editor.setModelMarkers=function(t,e,i){return i=i.filter((function(t){return!/Cannot find module/.test(t.message)})),n.apply(monaco.editor,arguments)};return setTimeout((function(){0;try{t.font="14px '"+h+"'";t.measureText("0123456789")}catch(t){console.log("failed font checker",t)}try{var e=monaco.languages.css.cssDefaults.diagnosticsOptions.lint;e.emptyRules="ignore",e.duplicateProperties="ignore"}catch(t){}s=monaco;for(let t=0,e=l.length;t<e;t++)l[t](monaco);return l=[]}),0)}};e.load=i.load=function(){return new Promise((function(t,e){return s?t(s):l.push(t)}))},e.injectStyles=i.injectStyles=function(t){if(y.CUSTOMCSS)return;let e=t._tokenTheme._match("delimiter.access.imba"),n=y.CUSTOMCSS=document.createElement("style");n.innerHTML='.delimiter.access.imba:before {\n\tposition: absolute;\n\tcontent: ".";\n\tcolor: #ea9b80;\n}'.replace("delimiter.access.imba","mtk"+e._foreground),document.head.appendChild(n)},e.patchEditor=i.patchEditor=function(t){return y.PATCHED||(window.SE=t,y.PATCHED=!0,y.THEME=t._themeService._theme,i.injectStyles(y.THEME),t._view.viewCursors.constructor.prototype._getCursorBlinking=function(){try{var t=this._context.model.model.FILE_MODEL;return t&&t.space().primaryEditor().hasFocus()?2:1}catch(t){}return 2}),t},window.require=function(){},window.define=function(){},e.rangeToArray=i.rangeToArray=function(t){return u.lclcToArray(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn)},e.selectionToArray=i.selectionToArray=function(t){return u.lclcToArray(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)},e.arrayToSelection=i.arrayToSelection=function(t){return new monaco.Selection(t[0],t[1],t[0]+(t[3]||0),t[1]+(t[2]||0))},e.arrayToRange=i.arrayToRange=function(t){return 5==t.length?new monaco.Range(t[0],t[1],t[2],t[3]):new monaco.Range(t[0],t[1],t[0]+(t[3]||0),t[1]+(t[2]||0))},e.stringToRange=i.stringToRange=function(t){let e=p.decodeRangeString(t);return new monaco.Range(e[0],e[1],e[2],e[3])},e.uriToMode=i.uriToMode=function(t){let e=(t.match(/\.(\w+)(\#|$)/)||[])[1];return f[e||t]||e||t},e.colorize=i.colorize=function(t,e,n){if(void 0===n&&(n={}),!s)return Promise.resolve(t);let o=i.uriToMode(e);return monaco.editor.colorize(t,o).then((function(t){var e=r("code").flag("monaco-hl").flagIf("show-lines",n.startLine).dataset("mode",o).end();return n.startLine&&e.css({counterReset:"code-line "+(parseInt(n.startLine)-1)}),e.dom().outerHTML.slice(0,-7)+t+"</code>"}))},e.opToSelections=i.opToSelections=function(t){if(t[0]instanceof Array){let n=[];for(let r=0,o=(e=t)?e.toArray?e.toArray():e:[],s=o.length;r<s;r++)n.push(i.arrayToSelection(o[r]));return n}return"number"==typeof t[0]||t[0]instanceof Number?[i.arrayToSelection(t)]:t;var e}},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(4),a=n(13).InterfaceView,u=n(37),p=(u.TimelineCues,u.Segment),c=n(14).ScrimbaGesture,h=n(64).WindowGesture,l=n(154),d=l.TimelineOverview,f=l.TimelineRegionCanvas,y=n(2),m=(y.Button,y.IconButton,n(16)),g={clipColors:["#977f9e","#7f939e","#7f9e89","#9e8a7f","#9e7f85"],cutColor:"#e4e3e3",bgColor:"#f0f1f1",actionsHeight:4,waveAnchorY:.5,renderTimeTicks:!0,renderCollapsed:!0,log:!0},_={clipColors:["#BF94CA"],cutColor:"#D6D6D6",bgColor:"#ffffff",actionsHeight:2,tickFontSize:8,waveAnchorY:.5,renderCollapsed:!0,minimap:!0},v=o.defineTag("BrushupView",a,(function(t){t.prototype.__pxps={default:60,watch:"pxpsDidSet",name:"pxps"},t.prototype.pxps=function(t){return this._pxps},t.prototype.setPxps=function(t){var e=this.pxps();return t!=e&&(this._pxps=t),t!=e&&this.pxpsDidSet&&this.pxpsDidSet(t,e,this.__pxps),this},t.prototype._pxps=60,t.prototype.__currentSegment={watch:"currentSegmentDidSet",name:"currentSegment"},t.prototype.currentSegment=function(t){return this._currentSegment},t.prototype.setCurrentSegment=function(t){var e=this.currentSegment();return t!=e&&(this._currentSegment=t),t!=e&&this.currentSegmentDidSet&&this.currentSegmentDidSet(t,e,this.__currentSegment),this},t.prototype.__showCollapsed={default:!0,watch:"showCollapsedDidSet",name:"showCollapsed"},t.prototype.showCollapsed=function(t){return this._showCollapsed},t.prototype.setShowCollapsed=function(t){var e=this.showCollapsed();return t!=e&&(this._showCollapsed=t),t!=e&&this.showCollapsedDidSet&&this.showCollapsedDidSet(t,e,this.__showCollapsed),this},t.prototype._showCollapsed=!0,t.prototype.viewRange=function(t){return this._viewRange},t.prototype.setViewRange=function(t){return this._viewRange=t,this},t.prototype.timeline=function(){return this.data().timeline()},t.prototype.branch=function(){return this.data().branch()},t.prototype.space=function(){return this.data().space()},t.prototype.hide=function(){return this.unflag("on")},t.prototype.show=function(){return this.flag("on")},t.prototype.recording=function(){return this.data().recording()},t.prototype.shouldHide=function(){return!1},t.prototype.ondblclick=function(t){return t.halt()},t.prototype.dispose=function(){var t=this;return t.unschedule(),t.render=function(){return t},t},t.prototype.version=function(){return this._version},t.prototype.trim=function(){var t=this.data().branch().currentOffset(),e=this.data().timeline().currentTime();if(window.confirm("Are you sure you want to remove everything after "+s.msToStr(e)+"? This action cannot be undone"))return this.data().branch().trimToTimeOffset(t)},t.prototype.currentOffset=function(){return this.timeline().currentOffset()},t.prototype.cues=function(){return this.timeline().cues()},t.prototype.setup=function(){var t=this;return t.dom().tabIndex=-1,t._version=0,t._zoomLevels=[12,30,60,120,180,240],t._width=1e3,t._viewRange=new p([0,0,t._width/t.pxps()*1e3],t),t.onplaying=t.onplaying.bind(t),t.onpaused=t.onpaused.bind(t),t._shortcuts=new m(t.dom()),t._shortcuts.bind(["space"],(function(e){return e.stopPropagation(),t.togglePlay()})),t._shortcuts.bind(["backspace"],(function(e){if(e.stopPropagation(),t.currentSegment())return t.trigger("segdel",t.currentSegment())})),t},t.prototype.syncViewRange=function(t){return this},t.prototype.playheadIsInView=function(){return this.offsetIsInView(this.currentOffset())},t.prototype.offsetIsInView=function(t,e){void 0===e&&(e=0);let n=this._zoomed.offset2px(t);return n>=0&&this._zoomed.vw()-e>=n},t.prototype.togglePlay=function(){return this.timeline().isPlaying()?(this.timeline().pause(),this._autoFollowPlayhead=!1):(this.timeline().play(),this._autoFollowPlayhead=this.playheadIsInView()),this},t.prototype.currentSegmentDidSet=function(t,e){if(t&&(t._selected=!0),e)return e._selected=!1},t.prototype.pxpsDidSet=function(t,e){let n=this.viewRange().anchor(.5);return this.viewRange().setSpan(Math.round(this.dom().offsetWidth/this.pxps()*1e3)),this.viewRange().moveTo(n,.5)},t.prototype.onchange=function(t){var e;return t.halt(),this.setPxps(this._zoomLevels[e=t.target().value()]),this._zoomLevels[e]},t.prototype.onshowrange=function(t,e){return t.halt(),e.start&&(this.viewRange().moveTo(e.start,0),this._autoFollowPlayhead=!1),this.dirty()},t.prototype.onzoom=function(t,e){let n=0;e.scale,this.pxps();return e.anchorTime&&(n=(e.anchorTime-this.viewRange().start())/this.viewRange().span()),this.setPxps(Math.round(Math.max(10,e.scale))),e.anchorTime&&this.viewRange().moveTo(Math.round(e.anchorTime),n),this.dirty()},t.prototype.onseek=function(t,e){t.halt();let n=e.offset;if(this.timeline().seek(n),this.timeline().loopSegment()&&!this.timeline().loopSegment().contains(n)&&this.timeline().setLoopSegment(null),t.target()==this._overview){this._zoomed.setStartOffset(n);let t=this._zoomed.val2offset(this._zoomed.px2val(-.5*this._zoomed.vw()));return this.viewRange().moveTo(Math.max(t,0),0)}},t.prototype.onsegsel=function(t,e){return t.halt(),this.setCurrentSegment(e),e},t.prototype.onsegdel=function(t,e){if(e==this.currentSegment()&&this.setCurrentSegment(null),this.cues().removeCue(e),this.trigger("autosave"),e==this.timeline().loopSegment()&&this.timeline().setLoopSegment(null),e==this._zoomed.markedRange())return this._zoomed.setMarkedRange(null),null},t.prototype.onfinish=function(t){return t.halt(),this.timeline().space().view().trigger("brushupstop")},t.prototype.onplaying=function(t){return this._autoFollowPlayhead=this.playheadIsInView()},t.prototype.onpaused=function(t){return this._autoFollowPlayhead=!1},t.prototype.dirty=function(){return this._version++},t.prototype.mount=function(){return this._prevSpaceSize=this.space().view().size(),this._savedVersion=this.cues()._version,this._savedCueData=JSON.stringify(this.cues()._data),this.schedule({raf:!0,events:!1}),this.space().on("playing",this.onplaying),this.space().on("paused",this.onpaused)},t.prototype.unmount=function(){return this.unschedule(),"desktop"==this.space().view().size()&&this.space().view().setSize(this._prevSpaceSize),this.space().un("playing",this.onplaying),this.space().un("paused",this.onpaused)},t.prototype.onautosave=function(t){return this.autosave()},t.prototype.autosave=function(){var t=this;if(t._savedVersion!=t.cues()._version)return clearTimeout(t._autosaver),t._savedVersion=t.cues()._version,t._autosaver=setTimeout((function(){return t.save()}),1e3)},t.prototype.model=function(){return this.timeline().branch().model()},t.prototype.branch=function(){return this.timeline().branch()},t.prototype.save=function(){return JSON.stringify(this.cues()._data)!=this._savedCueData&&(this._savedCueData=JSON.stringify(this.cues()._data),console.log("saving")),this},t.prototype.ontouchstart=function(t){if(!this.hasFlag("abs"))return;let e=h.options(t);return"move"==e.type||"resize"==e.type?h.wrap(t,e):void 0},t.prototype.ontouchend=function(t){return this},t.prototype.toggleCollapsed=function(){return this.setShowCollapsed(!this.showCollapsed()),g.renderCollapsed=!g.renderCollapsed,_.renderCollapsed=!_.renderCollapsed,this},t.prototype.cancelBrushup=async function(){return await this.branch().cancelAnnotating(),this},t.prototype.finishBrushup=async function(){return await this.branch().finishAnnotating(),console.log("did save!!")},t.prototype.render=function(){var t,e=this.$;this._viewRange.setSpan(Math.round(1e3*this.dom().offsetWidth/this.pxps()));this.cues().endOffset();let n=this.currentOffset();if(0==i.Touch.count()&&0==c.Active.length&&this.autosave(),this._zoomed&&this._autoFollowPlayhead&&this.timeline().isPlaying()){let t=this.timeline().loopSegment();if(t)n>t.end()&&this.timeline().seek(n=t.start());else if(0==((o=c.Active)&&(o.len instanceof Function?o.len():o.length)||0)){let t=this._zoomed.offset2px(n);if(t<10||t>this._zoomed.vw()-10){let e=this._zoomed.val2offset(this._zoomed.px2val(t-20));this.viewRange().moveTo(e,0)}}}var o;return this._prevOffset=n,this.$open(0).setChildren(e.$=e.$||[r("header",e,0,this).dataset("gesture","move,noTranslate").setContent([r("div",e,1,0).flag("title"),r("div",e,7,0).flag("buttons").setContent([r("div",e,8,7).flag("button").flag("red").on$(0,["click","stop","cancelBrushup"],this).setText("Cancel"),r("div",e,9,7).flag("button").flag("green").on$(0,["click","stop","finishBrushup"],this).setText("Done")],2),r("div",e,10,0).flag("resizer").dataset("gesture","resize,r")],2),this._zoomed=this._zoomed||r(f,this).flag("zoomed"),t=(t=r("footer",e,11,this)).setContent(this._overview=this._overview||r(d,t).flag("overview"),2)],2).synced((e[0].end((e[1].setContent([(e[2]||r("span",e,2,1).flag("hint").setNestedAttr("uxa","md","*space* to play/pause")).end(),(e[3]||r("span",e,3,1).flag("hint").setNestedAttr("uxa","md","*shift* to mark range")).end(),(e[4]||r("span",e,4,1).flag("hint").setNestedAttr("uxa","md","*alt* to pan")).end(),this.currentSegment()?(e[5]||r("span",e,5,1).flag("hint").setNestedAttr("uxa","md","*⌫* to remove segment")).end():void 0,(e[6]||r("span",e,6,1).flag("hint").on$(0,["tap","toggleCollapsed"],this).setNestedAttr("uxa","md","*toggle* collapsed")).end()],1),e[10].end(),!0)),this._zoomed.bindData(this,"timeline",[]).setStartOffset(this.viewRange().start()).setPxps(this.pxps()).setCurrentOffset(n).setOptions(g).end(),this._overview.bindData(this,"timeline",[]).setViewRange(this.viewRange()).setCurrentOffset(n).setOptions(_).end(),!0))}}));e.BrushupView=v},function(t,e,n){var i=n(0),r=n(14).ScrimbaGesture;function o(){o.prototype.__super__.constructor.apply(this,arguments),this.touch().capture()}i.subclass(o,r),e.WindowGesture=o,o.prototype.box=function(t){return this._box},o.prototype.setBox=function(t){return this._box=t,this},o.prototype.getLayout=function(t){void 0===t&&(t=this.target());var e=t.dom();return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}},o.prototype.onstart=function(){return this._box=this.target().dom().getBoundingClientRect(),this._outer=this.target().dom().offsetParent.getBoundingClientRect(),this._layout=this.getLayout(),o.prototype.__super__.onstart.apply(this,arguments),this},o.prototype.onmoveupdate=function(t){var e=Math.max(-(this._box.top-34),this.dy());return this.options().noTranslate?this.target().css({left:this._layout.left+this.dx(),top:this._layout.top+e}):this.target().css({transform:"translate("+this.dx()+"px,"+e+"px)"}),this},o.prototype.onmoveend=function(){this.target().dom().offsetTop,this.target().dom().offsetLeft;var t,e,n=Math.max(-(this._box.top-34),this.dy());return this._layout.top+=n,this._layout.left+=this.dx(),this.target().css({transform:"none",top:this._layout.top,left:this._layout.left,right:"auto",bottom:"auto"}),(t=this.target())&&t.onmove&&t.onmove(this,this.getLayout()),(e=this.target())&&e.onmoveend&&e.onmoveend(this),this},o.prototype.onresizestart=function(){var t=this.getLayout();return this.target().css({transform:"none",top:t.top,left:t.left,right:"auto",bottom:"auto"}),this},o.prototype.onresizeupdate=function(){var t,e=this.options(),n=this._layout;return e.l&&this.target().css({left:n.left+this.dx(),width:n.width-this.dx()}),e.r&&this.target().css({width:n.width+this.dx()}),e.b&&this.target().css({height:n.height+this.dy()}),e.t&&this.target().css({top:n.top+this.dy(),height:n.height-this.dy()}),(t=this.target())&&t.onresize&&t.onresize(this,this.getLayout()),this},o.prototype.onresizeend=function(){var t,e=this.getLayout();return e.width=Math.min(e.width,window.innerWidth),e.height=Math.min(e.height,window.innerHeight-20),this.target().css(e),(t=this.target())&&t.onresize&&t.onresize(this,e),this}},function(t,e,n){"use strict";var i=n(155);i.adapters=n(158),t.exports=i},function(t,e,n){"use strict";var i=n(65),r=n(163);t.exports=function(t,e){return function(n){var o=new r((function(){this.addEventListener("message",(function(t){var e,n,i=t.data.scale,r=t.data.amplitude_scale,o=t.data.audio_buffer,s=function(t,e){var n=Math.floor(t/e);return t-n*e>0&&n++,n}(o.length,i),a=new DataView(new ArrayBuffer(20+2*s)),u=o.channels,p=1/0,c=-1/0,h=0,l=o.length,d=20;for(a.setInt32(0,1,!0),a.setUint32(4,1,!0),a.setInt32(8,o.sampleRate,!0),a.setInt32(12,i,!0),a.setInt32(16,s,!0),n=0;n<l;n++){var f=0;for(e=0;e<u.length;++e)f+=u[e][n];(f=Math.floor(127*f*r/u.length))<p&&(p=f)<-128&&(p=-128),f>c&&(c=f)>127&&(c=127),++h===i&&(a.setInt8(d++,Math.floor(p)),a.setInt8(d++,Math.floor(c)),p=1/0,c=-1/0,h=0)}h>0&&(a.setInt8(d++,Math.floor(p)),a.setInt8(d++,Math.floor(c))),this.postMessage(a)}))}));o.addEventListener("message",(function(t){var r=t.data;e(null,new i(r.buffer,i.adapters.arraybuffer),n)}));for(var s={length:n.length,sampleRate:n.sampleRate,channels:[]},a=0;a<n.numberOfChannels;++a)s.channels[a]=n.getChannelData(a);o.postMessage({scale:t.scale,amplitude_scale:t.amplitude_scale,audio_buffer:s})}}},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope().defineTag("Notification",(function(t){var e;t.prototype.text=function(t){return this._text},t.prototype.setText=function(t){return this._text=t,this},t.prototype.sticky=function(t){return this._sticky},t.prototype.setSticky=function(t){return this._sticky=t,this},t.show=function(t,n){void 0===n&&(n={}),e&&(e.hide(),e=null);let s=t instanceof o?t:r(o).setData(n).setText(t).setSticky(n.sticky).end(),a=document.querySelector(".SpaceView");return i.mount(e=s,a)},t.prototype.setup=function(){return this._data||(this._data={}),this.render(),this.autosize()},t.prototype.mount=function(){var t=this;if(t.dom().offsetWidth,t.flag("show"),!t.sticky())return setTimeout((function(){return t.hide()}),t.data().duration||2e3)},t.prototype.autosize=function(){let t=this.dom().innerText.split("\n"),e=Math.max.apply(Math,t.map((function(t){return t.length}))),n=.8*window.innerWidth/(.6*e),i=Math.round(Math.min(Math.max(n,15),30));return this.css("fontSize",i+"px"),this.flag("overflows",n<15),this},t.prototype.hide=function(){var t=this;if(!t.hasFlag("hide"))return t.flag("hide"),setTimeout((function(){if(t.orphanize(),e==t)return e=null}),3e3)},t.prototype.ontap=function(){return this.hide()},t.prototype.render=function(){var t=this.$;return this.$open(0).flagIf("info",this.data().info).setFlag(-1,this.data().type).setFlag(-2,this.data().size).setChildren(t[0]||r("div",t,0,this).flag("main").setContent([r("div",t,1,0).flag("triangle"),r("div",t,2,0).flag("item")],2),2).synced((t[2].setNestedAttr("uxa","md",this.text()).end(),!0))}}));e.Notification=o},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(2),a=s.Dialog,u=s.TextField,p=o.defineTag("DependencyAddDialog",a,(function(t){t.prototype.mount=function(){return this.schedule({events:!0}),this._packageName.input().dom().focus()},t.prototype.space=function(){return this.data()},t.prototype.submitLabel=function(){return"Add"},t.prototype.bundle=function(){return this.space().browser().npmPackages()||{resolved:[]}},t.prototype.body=function(){let t;this.$$||(this.$$={});return(t=this._body=this._body||(t=r("div",this)).flag("body").setContent([r("h2",t.$,"A",t).setText("Add NPM package"),this._packageName=this._packageName||r(u,t).flag("packageName").setLabel("Package name").setName("query").setPlaceholder("Submit name of package...").setAutocomplete("off")],2)).end((this._packageName.setDesc('You can assign specific version with "@", ex. "react@0.14.7" or "react@next"').end(),!0))},t.prototype.onuxasubmit=function(t,e){var n=this;if(t.prevent().halt(),e.query)return n.uxa().queue().add(300,(async function(){return await n.space().browser().addPackage(e.query),n.hide()}))}}));e.DependencyAddDialog=p},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(2),a=s.Dialog,u=s.TextField,p=s.TextArea,c=(s.Button,o.defineTag("CastDialog",a,(function(t){t.prototype.body=function(){let t;this.$$||(this.$$={});return(t=this._body=this._body||(t=r("div",this)).flag("body").setContent([r(u,t.$,"A",t).setType("text").setName("title").setLabel("Title").setRequired(!0).setPlaceholder("Untitled cast").setAutocomplete("off"),r(p,t.$,"B",t).flag("mb-md").setName("description").setLabel("Description").setDesc("Short description (markdown supported)")],2)).end((t.$.A.end(),t.$.B.end(),!0))},t.prototype.onuxasubmit=function(t){var e=this;return e.uxa().queue().add(200,(async function(){var t=e.formData();return e.log("onsubmit",t),await e.api().db().get(e.data().id).update(t)}))}})));e.CastDialog=c},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}function r(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var o=n(20).LongPromise,s=["audio/ogg; codecs=opus;","audio/webm; codecs=opus;","audio/opus"],a=n(24).AudioManager;function u(t){if(void 0===t&&(t={}),this._options=t,this._space=t.space,this._constraints=t.constraints,this._chunkSize=480,this._frameSize=this.api().ua().isChrome()?60:20,this._audioBitRate=t.audioBitsPerSecond||48e3,this._size=0,this._chunks=[],this._warnings=[],this._timecodes=[],this._startPromise=new o,this._donePromise=new o,this._state="init",this._timecodeDuration=0,window.MediaRecorder)for(let t,e=0,n=s.length;e<n;e++)t=s[e],MediaRecorder.isTypeSupported(t)&&(this._mimeType=t,this._ext=t.match(/\/(\w+)/)[1])}e.MediaRecording=u,u.prototype.size=function(t){return this._size},u.prototype.setSize=function(t){return this._size=t,this},u.prototype.warnings=function(t){return this._warnings},u.prototype.setWarnings=function(t){return this._warnings=t,this},u.prototype.stream=function(t){return this._stream},u.prototype.setStream=function(t){return this._stream=t,this},u.prototype.options=function(t){return this._options},u.prototype.setOptions=function(t){return this._options=t,this},u.prototype.state=function(t){return this._state},u.prototype.setState=function(t){return this._state=t,this},u.prototype.audio=function(t){return this._audio},u.prototype.setAudio=function(t){return this._audio=t,this},u.prototype.space=function(t){return this._space},u.prototype.setSpace=function(t){return this._space=t,this},u.prototype.mimeType=function(t){return this._mimeType},u.prototype.setMimeType=function(t){return this._mimeType=t,this},u.prototype.chunkSize=function(t){return this._chunkSize},u.prototype.setChunkSize=function(t){return this._chunkSize=t,this},u.prototype.audioBitRate=function(t){return this._audioBitRate},u.prototype.setAudioBitRate=function(t){return this._audioBitRate=t,this},u.prototype.error=function(t){return this._error},u.prototype.setError=function(t){return this._error=t,this},u.prototype.startAt=function(t){return this._startAt},u.prototype.setStartAt=function(t){return this._startAt=t,this},u.prototype.startedAt=function(t){return this._startedAt},u.prototype.setStartedAt=function(t){return this._startedAt=t,this},u.prototype.stopAt=function(t){return this._stopAt},u.prototype.setStopAt=function(t){return this._stopAt=t,this},u.prototype.stoppedAt=function(t){return this._stoppedAt},u.prototype.setStoppedAt=function(t){return this._stoppedAt=t,this},u.prototype.manager=function(){return a.instance()},u.prototype.api=function(){return App.api()},u.prototype.log=function(){for(var t,e=arguments,n=e.length,i=new Array(n>0?n:0);n>0;)i[n-1]=e[--n];return(t=this.api()).log.apply(t,[].concat(["media"],Array.from(i)))},u.prototype.proxy=function(t,e){if(this.setState(this._recorder.state),this["onrec"+t])return this["onrec"+t](e)},u.prototype.setup=function(){var t=this;return t._setupPromise||(t._setupPromise=new Promise((function(e,n){t._state="setup";return window.navigator.mediaDevices.getUserMedia({video:!1,audio:t._constraints}).then((function(n){return t.setStream(n),setTimeout((function(){return t._state="ready",e(t)}),500)}),(function(e){return t.log("error!!!",e),t._error=e,t.setState("error"),n(e)}))})))},u.prototype.start=async function(){var t=this;if(t._startAt)return t._startPromise;t._startAt=Date.now();await t.setup();if(!t._error){t._state="starting";var e=t._audioBitRate;if(t._space){let n=t.api().db().files().generateId();t._model=t.api().db().files().build({id:n+"."+t._ext,uid:t.api().uid(),cid:t._space&&t._space.id(),type:t.mimeType(),state:"streaming",size:0,metadata:{constraints:t._constraints,chunkSize:t._chunkSize,bitsPerSecond:e,mimeType:t.mimeType()}}),t._writer=t._model.createWriteStream(t.space().api())}var n={mimeType:t._mimeType,audioBitsPerSecond:e};return t._recorder=new MediaRecorder(t.stream(),n),t._recorder.audioChannels=1,["start","stop","error","dataavailable","pause","resume"].map((function(e){return t._recorder["on"+e]=function(n){return t.proxy(e,n)}})),t._startAt=Date.now(),t._recorder.start(t._chunkSize),window.MRI=t,t._startPromise}t._startPromise.resolve(t)},u.prototype.stop=function(){return this._requestedStop?this:(this._requestedStop=!0,this._stopAt=Date.now(),this._recorder.stop(),this._donePromise)},u.prototype.warn=function(t){return console.warn(t),this},u.prototype.check=function(){if(this._lastChunkAt){var t=Date.now()-this._lastChunkAt;return t>4*this._chunkSize?(this._warn=!0,this.warn("no audio received in the last "+t+"ms")):this._warn&&(console.log("got back!!"),this._warn=!1),this}},u.prototype.duration=function(){return this._duration?this._duration:this._stoppedAt?this._stoppedAt-this._startedAt:this._stopAt?this._stopAt-this._startedAt:this._startedAt?Date.now()-this._startedAt:0},u.prototype.onrecstart=function(t){var e=this;return e._checker=setInterval((function(){return e.check()}),e._chunkSize),e._startedAt=Date.now(),e.log("recstart",e._startedAt-e._startAt),setTimeout((function(){if(!r(e._chunks))return console.warn("something wrong with recording?! Timed out")}),5e3),e._startPromise.resolve(e),e},u.prototype.onrecstop=function(t){var e=this;clearInterval(e._checker),e._stoppedAt=Date.now();let n=e.duration()%e._frameSize;return e._calcDuration=e._stoppedAt-e._startedAt,e.api().ua().isChrome()&&(e._calcDuration-=n),e._duration=e._calcDuration,e.log("recstop",e._duration,n),e.finalize(),setTimeout((function(){return e.teardown()}),200),e},u.prototype.onrecdataavailable=function(t){this._stoppedAt&&console.error("Received audio-data after stopping");let e=r(this._chunks);this._chunks.push(t.data),this._size+=t.data.size;let n=Date.now(),i=t.timecode||0;this._timecodes.push(i);let o=this._lastTimecode?i-this._lastTimecode:0;return this.log("audiochunk",t.data.size,this._size,n-(this._lastChunkAt||n),o,i),0==e?this._timecodeDuration=n-this._startAt:this._timecodeDuration+=o,this._lastTimecode=i,this._lastChunkAt=n,this._firstChunkAt||(this._firstChunkAt=this._lastChunkAt),this._writer&&this._writer.write(t.data,this.api()),this},u.prototype.onrecerror=function(t){return this.log("ERROR",t),console.error(t),this._error||(this._error=t,this.setState("error"),this._donePromise.resolve(this._error)),this},u.prototype.finalize=async function(){var t=this,e=t._blob||(t._blob=new Blob(t._chunks,{type:t.mimeType()})),n=!window.DEBUG_AUDIO&&!t._options.debug;await(t._writer&&t._writer.close(e));try{return n&&t.api().localStore().get("calcRecDuration")?(console.log("trusting the calculated duration"),t._donePromise.resolve(t),t):(t._audioBuffer=await t.manager().audioBufferFromBlob(e),t.log("response from buffer",t._audioBuffer.duration),t._bufferDuration=1e3*t._audioBuffer.duration,t._duration=t._bufferDuration,Math.abs(t._bufferDuration-t._calcDuration)<3?(console.log("calculated duration is correct",t._bufferDuration-t._calcDuration),t.api().localStore().set("calcRecDuration",1)):t.api().localStore().del("calcRecDuration"),n?(t._donePromise.resolve(t),t):t.manager().durationForAudioElement(t.audio(),t.duration()).then((function(e){return t.log("duration according to manager",e),t._blobDuration=Math.round(e),Math.abs(t._blobDuration-t._duration)>1e3&&(t.setError("Duration mismatch from audio recording"),App.uxa().flash("Duration mismatch from audio recording")),t._donePromise.resolve(t)})))}catch(t){}},u.prototype.audio=function(){if(this._audio||!this._stoppedAt)return this._audio;var t=this._blob||new Blob(this._chunks,{type:this.mimeType()}),e=APB=this._audio=new Audio;return e.src=URL.createObjectURL(t),e.controls=!0,e.load(),this._audio},u.prototype.play=function(){return this.audio().currentTime=0,this.audio().play(),this},u.prototype.upload=function(){if(!this._model){let t=this.api().db().files().generateId();this._model=this.api().db().files().build({id:t+"."+this._ext,uid:this.api().uid(),cid:window.SP.id(),type:this.mimeType(),state:"streaming",size:0,metadata:{constraints:this._constraints,chunkSize:this._chunkSize,bitsPerSecond:this._audioBitRate,mimeType:this.mimeType()}}),this._writer=this._model.createWriteStream(this.api());for(let t=0,e=i(this._chunks),n=e.length;t<n;t++)this._writer.write(e[t],this.api());this._writer.close()}return this._model.upload()},u.prototype.discard=function(){return this},u.prototype.teardown=function(){if(this._stream){for(let t,e=0,n=i(this._stream.getAudioTracks()),r=n.length;e<r;e++){t=n[e],window.MTR=t;let i=t.getConstraints();window.CTR=i,t.stop()}this._stream=null}return this}},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(2),a=s.Dialog,u=s.TextField,p=s.TextArea,c=o.defineTag("PublishDialog",a,(function(t){t.prototype.model=function(){return this.data().model()},t.prototype.toggleBusy=function(){return this.toggleFlag("busy")},t.prototype.submitLabel=function(){return this.model().isPublished()?"publish again":"publish"},t.prototype.body=function(){let t;this.$$||(this.$$={});return(t=this._body=this._body||(t=r("div",this)).flag("body").setContent([r("h2",t.$,"A",t).setText("Publish screencast"),r(u,t.$,"B",t).setType("text").setName("title").setLabel("Title").setRequired(!0).setPlaceholder("Untitled cast").setAutocomplete("off"),r(p,t.$,"C",t).flag("mb-md").setName("description").setLabel("Description").setDesc("Short description (markdown supported)"),"Privacy settings can be changed "],2)).end((t.$.B.end(),t.$.C.end(),!0))},t.prototype.onuxashow=function(t){var e;return this.data().model().privacy="public",this.setFormData(e=this.data().model()),e},t.prototype.onuxasubmit=function(t){var e=this;return e.uxa().queue().add(1e4,(async function(){var t=e.formData();console.log("formData is",t),await e.model().update({title:t.title,description:t.description});await e.data().publish(t);return e.api().analytics().cast(e.model().id,"Published")}))}}));e.PublishDialog=c},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(0),o={},s=(r.createTagList,r.createTagMap),a=r.createTagLoopResult,u=r.createTagScope(),p=r.createElementFactory(),c=n(1),h=(c.ACTION,c.CAST),l=n(2),d=(l.IconButton,l.Icon,l.Menu),f=l.MenuItem,y=n(15),m=y.SidebarPanel,g=y.SidebarEntry,_=n(38).SpaceMenu,v=n(39),b=v.readTextFile,w=v.readArrayBuffer,x=v.readFileSystemEntry,S=h.EXPLORER_PANEL+"$",T=u.defineTag("EntryHead",(function(t){t.prototype.build=function(){return this.setAttribute("draggable",!0)},t.prototype.ondragstart=function(t){t.event().dataTransfer;return t.event().dataTransfer.setData("scrimba/widget",""+this.data().id())}})),k=u.defineTag("Entry",g,(function(t){t.prototype.__level={default:0,name:"level"},t.prototype.level=function(t){return this._level},t.prototype.setLevel=function(t){return this._level=t,this},t.prototype._level=0,t.prototype.onrename=function(t){t.halt();var e=window.prompt("Rename",this.name());return this.log("onrename!",e),this.data().rename(e)},t.prototype.ondel=function(t){if(t.halt(),window.confirm("Are you sure you want to delete "+this.data().path()+"?"))return this.data().rm()},t.prototype.name=function(){return this.data().name()},t.prototype.icon=function(){this.$$||(this.$$={});return(this._icon=this._icon||p("i",this).flag("icon")).setFlag(0,this.data().ext())},t.prototype.head=function(){this.$$||(this.$$={});let t,e=this.name().length+2*this.level()>28,n=this.data().ext();return(t=this._head=this._head||(t=p(T,this)).flag("head")).bindData(this,"data",[]).setSref(S+this.data().id()).setContent([this.icon(),e?r.static([(t.$.A||p("div",t.$,"A",t).flag("name").flag("long")).setTitle(this.name()).setContent(n?this.name().slice(0,-n.length-1):this.name(),3).end(),(t.$.B||p("div",t.$,"B",t).flag("ext")).setText("."+n)],2,1):(t.$.C||p("div",t.$,"C",t).flag("name")).setContent(this.name(),3)],1).end()},t.prototype.render=function(){return this.$open(0).setChildren(this.head(),3).synced()},t.prototype.oncontextmenu=function(t){var e;return t.prevent().halt(),this._head.uxa().open((e=(e=p(d)).flag("dark").flag("narrow").setContent([p(f,e.$,"A",e).setIcon(">").setAction("rename").setLabel("Rename..."),p(f,e.$,"B",e).flag("neg").setIcon("x").setAction("del").setLabel("Delete File")],2)).end((e.$.A.end(),e.$.B.end(),!0)))}})),A=u.defineTag("FileEntry",k,(function(t){t.prototype.focusWidgetForNode=function(){return null},t.prototype.ontap=function(t){var e=this;return t.halt(),e.data().space().agent().setFile(e.data()),setTimeout((function(){if(e.data().space().isEditing())return e.data().space().view().editor().focus()}),0)},t.prototype.sontouchstart=function(t){return this},t.prototype.sontouchend=function(t){return this},t.prototype.render=function(){return this.flag("active",this.data().clientIsShowing()),this.flag("active-agent",this.data().agentIsShowing()),t.prototype.__super__.render.apply(this,arguments)}}));o.checkBinary=async function(t){var e=await w(t.slice(0,1024));for(let t,n=0,r=i(new Uint8Array(e)),o=r.length;n<o;n++)if(t=r[n],0==t)return!0;return!1},o.uploadBlob=async function(t){var e=await window.fetch("/blobs",{credentials:"include",method:"POST",body:t,headers:{"Content-Type":"application/octet-stream"}});return(await e.json()).id};o.addFileToDirectory=async function(t,e){var n=await o.checkBinary(e),i=n?5242880:512e3;if(!(e.size>i)){var r={name:e.name};return n?r.blobId=await o.uploadBlob(e):r.body=await b(e),t.mkfile(r.name,r)}},o.ignoreEntry=function(t){return r.indexOf(t.name,[".DS_Store","node_modules"])>=0};var E=async function(t,e){for(let n,r=0,s=i(e),a=s.length;r<a;r++)if(n=s[r],!o.ignoreEntry(n))if(n.isDirectory){let e=t.mkdir(n.name);n.createReader().readEntries((function(t){return E(e,t)}))}else if(n.isFile){let e=await x(n);await o.addFileToDirectory(t,e)}return null},C=u.defineTag("DirEntry",k,(function(t){t.prototype.onnewfile=function(t){var e,n=this;t.stop();var i=window.prompt("Name file");if(i&&(e=n.data().mkfile(i)))return n.data().space().agent().setFile(e),setTimeout((function(){return n.data().space().view().editor().focus()}),0)},t.prototype.onnewdir=function(t){t.stop();var e=window.prompt("Name directory");if(e)return this.data().mkdir(e)},t.prototype.toggle=function(t){var e;return this.data().setExpanded(e=!this.data().expanded()),e},t.prototype.ontap=function(t){return t.stop(),this.toggle()},t.prototype.entries=function(){return this.data().entries().toArray().slice().sort((function(t,e){return t.TYPE==e.TYPE?t.name()>e.name()?1:-1:"dir"==t.TYPE?-1:1}))},t.prototype.oncontextmenu=function(t){var e;return t.prevent().stop(),this._head.uxa().open((e=(e=p(d)).flag("dark").flag("narrow").setContent([p(f,e.$,"A",e).setIcon(">").setAction("newfile").setLabel("New File"),p(f,e.$,"B",e).setIcon(">").setAction("rename").setLabel("Rename..."),p("hr",e.$,"C",e),p(f,e.$,"D",e).setIcon(">").setAction("newdir").setLabel("New Folder..."),p(f,e.$,"E",e).flag("neg").setIcon("x").setAction("del").setLabel("Delete Folder")],2)).end((e.$.A.end(),e.$.B.end(),e.$.D.end(),e.$.E.end(),!0)))},t.prototype.head=function(){let t;this.$$||(this.$$={});return(t=this._head=this._head||(t=p(T,this)).flag("head").setContent([this._icon=this._icon||p("i",t).flag("icon").flag("folder").flag("toggler"),p("div",t.$,"A",t).flag("name")],2)).bindData(this,"data",[]).setSref(S+this.data().id()).end((t.$.A.setContent(this.data().name(),3),!0))},t.prototype.body=function(){this.$$||(this.$$={});var t,e=this;return(t=e._body=e._body||(t=p("div",e)).flag("body")).setFlag(0,"l"+e.level()).setContent(function(t,n,r){for(let o,s=0,a=i(e.entries()),u=a.length;s<u;s++)o=a[s],"file"==o.TYPE?r.push((t[s]||p(A,t,s)).setData(o).setLevel(e._level+1).end()):r.push((n[s]||p(C,n,s)).setData(o).setLevel(e._level+1).end());return r}(t.$.A||s(t.$,"A",e._body),t.$.B||s(t.$,"B",e._body),a()),5)},t.prototype.render=function(){return this.$open(0).flagIf("expanded",this.data().expanded()).setChildren([this.head(),this.data().expanded()?this.body():void 0],1).synced()}})),D=u.defineTag("RootEntry",C,(function(t){t.prototype.name=function(){return"Workspace"},t.prototype.ontap=function(t){return t.halt()}})),O=u.defineTag("ExplorerView",m,(function(t){t.prototype.__droptarget={watch:"droptargetDidSet",name:"droptarget"},t.prototype.droptarget=function(t){return this._droptarget},t.prototype.setDroptarget=function(t){var e=this.droptarget();return t!=e&&(this._droptarget=t),t!=e&&this.droptargetDidSet&&this.droptargetDidSet(t,e,this.__droptarget),this},t.prototype.oncontextmenu=function(t){return t.prevent().stop(),this.showMenu()},t.prototype.showMenu=function(t){return t.uxa().open(p(_).flag("sm").bindData(this,"space",[]).end())},t.prototype.onnewfile=function(t){t.stop();var e=window.prompt("Name file");if(e)return this.space().fs().mkfile(e)},t.prototype.onnewdir=function(t){t.stop();var e=window.prompt("Name directory");if(e)return this.space().fs().mkdir(e)},t.prototype.ondragenter=function(t){var e;t.prevent().stop();try{var n=t.event().target.closest(".DirEntry");return this.setDroptarget(e=n?n._tag:this._main),e}catch(t){}},t.prototype.ondragover=function(t){return t.prevent().stop()},t.prototype.ondragleave=function(t){if(t.prevent().stop(),!this.dom().contains(t.event().relatedTarget))return this.setDroptarget(null),null},t.prototype.ondrop=async function(t){var e=this;if(e.droptarget()){var n=t.event().dataTransfer,r=e.droptarget();t.prevent().stop(),e.setDroptarget(null);var o=[],s=[],a=null;o=[];for(let t,r=0,u=i(n.items),p=u.length;r<p;r++){t=u[r];let n=t;e.log("ondrop",t),"scrimba/widget"!=t.type?(t.webkitGetAsEntry&&(n=t.webkitGetAsEntry(),console.log("webkit entry",n)),(n.isDirectory||n.isFile)&&o.push(n)):s.push(new Promise((function(n){return t.getAsString((function(t){let i=e.space().__lookup(t);return e.log("found widget",t),a=i,n(i)}))})))}return await Promise.all(s),a&&a.moveTo(r.data()),E(r.data(),o)}},t.prototype.droptargetDidSet=function(t,e){var n,i;return(n=t)&&n.flag&&n.flag("droptarget"),(i=e)&&i.unflag&&i.unflag("droptarget")},t.prototype.render=function(){var t=this.$;return this.$open(0).setSref(this.data().id()).setChildren(t.$=t.$||[this._header=this._header||p("header",this).flag("header").setContent([p("div",t,0,this._header).flag("title").setText("Explorer"),p("div",t,1,this._header).flag("tools").setContent(t[2]||p("div",t,2,1).flag("tool").setIcon("more-horizontal").on$(0,["tap","showMenu"],this),2)],2),this._main=this._main||p(D,this).flag("main")],2).synced((t[2].end(),this._main.bindData(this.space(),"fs",[]).end(),!0))}}));e.ExplorerView=O},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(15).SidebarPanel,a=o.defineTag("WidgetPanel",s,(function(t){t.prototype.ontap=function(t){return this.log("ontap",t.target()),this.toggle()},t.prototype.state=function(){return this.data().visible()?"on":"off"},t.prototype.render=function(){return this.$open(0).setFlag(-1,this.state()).setSref("sidebar$"+this.data().id()).setChildren(this.header(),3).synced()},t.prototype.header=function(){let t;this.$$||(this.$$={});return(t=this._header=this._header||(t=r("header",this)).flag("header").setContent([r("div",t.$,"A",t).flag("title"),r("div",t.$,"B",t).flag("tools")],2)).end((t.$.A.setContent(this.name(),3),!0))}}));e.WidgetPanel=a},function(t,e){var n={};e.diffString=n.diffString=function(t,e){for(var n=0,i=Math.max(t.length,e.length),r=0;n<i;){var o=t[n],s=e[n];if(n++,o!=s)break;r++}var a=i;n=i;for(var u=t.length,p=e.length;n>0&&(n--,(o=t[--u])==(s=e[--p]));)a--;a=u+1;var c=e.slice(r,p+1);return e.length<6?e:[r,a,c]},e.patchString=n.patchString=function(t,e){return e instanceof Array?t.substr(0,e[0])+e[2]+t.slice(e[1]):e}},function(t,e,n){"use strict";(function(e){function n(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function i(t,e){for(var n,i="",r=0,o=-1,s=0,a=0;a<=t.length;++a){if(a<t.length)n=t.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(i.length<2||2!==r||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var u=i.lastIndexOf("/");if(u!==i.length-1){-1===u?(i="",r=0):r=(i=i.slice(0,u)).length-1-i.lastIndexOf("/"),o=a,s=0;continue}}else if(2===i.length||1===i.length){i="",r=0,o=a,s=0;continue}e&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+="/"+t.slice(o+1,a):i=t.slice(o+1,a),r=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return i}var r={resolve:function(){for(var t,r="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var a;s>=0?a=arguments[s]:(void 0===t&&(t=e.cwd()),a=t),n(a),0!==a.length&&(r=a+"/"+r,o=47===a.charCodeAt(0))}return r=i(r,!o),o?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(t){if(n(t),0===t.length)return".";var e=47===t.charCodeAt(0),r=47===t.charCodeAt(t.length-1);return 0!==(t=i(t,!e)).length||e||(t="."),t.length>0&&r&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return n(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,e=0;e<arguments.length;++e){var i=arguments[e];n(i),i.length>0&&(void 0===t?t=i:t+="/"+i)}return void 0===t?".":r.normalize(t)},relative:function(t,e){if(n(t),n(e),t===e)return"";if((t=r.resolve(t))===(e=r.resolve(e)))return"";for(var i=1;i<t.length&&47===t.charCodeAt(i);++i);for(var o=t.length,s=o-i,a=1;a<e.length&&47===e.charCodeAt(a);++a);for(var u=e.length-a,p=s<u?s:u,c=-1,h=0;h<=p;++h){if(h===p){if(u>p){if(47===e.charCodeAt(a+h))return e.slice(a+h+1);if(0===h)return e.slice(a+h)}else s>p&&(47===t.charCodeAt(i+h)?c=h:0===h&&(c=0));break}var l=t.charCodeAt(i+h);if(l!==e.charCodeAt(a+h))break;47===l&&(c=h)}var d="";for(h=i+c+1;h<=o;++h)h!==o&&47!==t.charCodeAt(h)||(0===d.length?d+="..":d+="/..");return d.length>0?d+e.slice(a+c):(a+=c,47===e.charCodeAt(a)&&++a,e.slice(a))},_makeLong:function(t){return t},dirname:function(t){if(n(t),0===t.length)return".";for(var e=t.charCodeAt(0),i=47===e,r=-1,o=!0,s=t.length-1;s>=1;--s)if(47===(e=t.charCodeAt(s))){if(!o){r=s;break}}else o=!1;return-1===r?i?"/":".":i&&1===r?"//":t.slice(0,r)},basename:function(t,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');n(t);var i,r=0,o=-1,s=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var a=e.length-1,u=-1;for(i=t.length-1;i>=0;--i){var p=t.charCodeAt(i);if(47===p){if(!s){r=i+1;break}}else-1===u&&(s=!1,u=i+1),a>=0&&(p===e.charCodeAt(a)?-1==--a&&(o=i):(a=-1,o=u))}return r===o?o=u:-1===o&&(o=t.length),t.slice(r,o)}for(i=t.length-1;i>=0;--i)if(47===t.charCodeAt(i)){if(!s){r=i+1;break}}else-1===o&&(s=!1,o=i+1);return-1===o?"":t.slice(r,o)},extname:function(t){n(t);for(var e=-1,i=0,r=-1,o=!0,s=0,a=t.length-1;a>=0;--a){var u=t.charCodeAt(a);if(47!==u)-1===r&&(o=!1,r=a+1),46===u?-1===e?e=a:1!==s&&(s=1):-1!==e&&(s=-1);else if(!o){i=a+1;break}}return-1===e||-1===r||0===s||1===s&&e===r-1&&e===i+1?"":t.slice(e,r)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,e){var n=e.dir||e.root,i=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+i:n+t+i:i}("/",t)},parse:function(t){n(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;var i,r=t.charCodeAt(0),o=47===r;o?(e.root="/",i=1):i=0;for(var s=-1,a=0,u=-1,p=!0,c=t.length-1,h=0;c>=i;--c)if(47!==(r=t.charCodeAt(c)))-1===u&&(p=!1,u=c+1),46===r?-1===s?s=c:1!==h&&(h=1):-1!==s&&(h=-1);else if(!p){a=c+1;break}return-1===s||-1===u||0===h||1===h&&s===u-1&&s===a+1?-1!==u&&(e.base=e.name=0===a&&o?t.slice(1,u):t.slice(a,u)):(0===a&&o?(e.name=t.slice(1,s),e.base=t.slice(1,u)):(e.name=t.slice(a,s),e.base=t.slice(a,u)),e.ext=t.slice(s,u)),a>0?e.dir=t.slice(0,a-1):o&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,t.exports=r}).call(this,n(53))},function(t,e,n){var i={},r={};i.rewriteColor=function(t){let e=0,n=0,o=t.length,s=[],a=0;for(;a<1e3;){a++,n=e=t.indexOf("color(",n);let i=1;if(-1==n)break;for(n+=6;i>0&&n<o;)"("==t[n]?i++:")"==t[n]&&i--,n++;s.unshift([e,n-e])}for(let e,n=0,o=s.length;n<o;n++){e=s[n];let o=t.substr(e[0],e[1]),a=r[o]||(r[o]=i.csscolorfunc().convert(o));t=t.replace(o,a)}return t},e.process=i.process=function(t,e){return void 0===e&&(e={}),e.rewritePseudoStates&&(t=t.replace(/:(hover|focus|active)\b/g,(function(t,e){return".__"+e}))),t}},function(t,e,n){var i=n(0),r=n(7).List,o=e.WidgetTypes={};function s(){return r.apply(this,arguments)}i.subclass(s,r),e.Widgets=s,s.register=function(t,e){return o[t]=e,e.TYPE=e.prototype.TYPE=t},s.type=function(t){return o[t]||s[t]},s.prototype.create=function(t,e,n){return("string"==typeof t||t instanceof String)&&(t=o[t]),null==e.id?e.id=this.nextId():e.id,e.type||(e.type=t.TYPE),new(t||o.widget)(this._owner,e,n)},s.prototype.load=function(t,e){return this.get(t.id)||this.create(t.type,t,e)}},function(t,e,n){function i(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o,s=n(0),a=(n(3).Widget,n(26).PaneWidget),u=n(1),p=(u.WIDGET,u.FILE),c=(u.SCON,u.ACTION),h=(u.LCRange,n(7).List,n(197).TextModel);o=n(62);var l=n(198);n(10).Dimensions;function d(t){this._file=t,this._batch=[],this._batchState={},this._changes=[],this._raw=new h(this._file.initialBody()),this.model()}function f(){return a.apply(this,arguments)}d.prototype.file=function(t){return this._file},d.prototype.setFile=function(t){return this._file=t,this},d.prototype.model=function(t){return this._model},d.prototype.setModel=function(t){return this._model=t,this},d.prototype.id=function(){return this.file().__uid()},d.prototype.space=function(){return this.file().space()},d.prototype.body=function(){return this._raw.getValue()},d.prototype.logLine=function(t){var e=this._raw._lines[t],n=this._model._lines[t];return[e,n._text,e.length,n._text.length]},d.prototype.applyEdits=function(t,e){if(void 0===e&&(e=!1),!t.MONACO){let e=[];for(let n,i=0,s=r(t),a=s.length;i<a;i++)n=s[i],e.push({range:o.arrayToRange(n[0]),text:n[1]});t.MONACO=e}return this._applyEditsRaw.call(this._model,t.MONACO)},d.prototype.isSyncing=function(){return this._syncing||this.space().isSyncing()},d.prototype.model=function(){return this.setupMonaco(),this._model},d.prototype.setupMonaco=function(){var t=this;if(t._model||t._initing||!window.monaco)return;t._initing=!0,t._uri=monaco.Uri.parse(t.file().uri()),t._changes=[];let e=monaco.editor.getModel(t._uri);e&&e.FILE_MODEL.dispose(),t._model=monaco.editor.createModel(t._raw.getValue(),null,t._uri),t._initing=!1,t._model.FILE_MODEL=t;var n={trimAutoWhitespace:!1};t._file.useTabs()&&(n.insertSpaces=!1,n.tabSize=4),t._model.updateOptions(n);var s=t._applyEditsRaw=t._model.applyEdits;return t._model.applyEdits=function(e){var n=s.call(t._model,e);if(!t.isSyncing()){t._batchState.significant=!0,t._batchState.preapplied=!0;var a=[],u=i(e);for(let i,s=0,p=r(e),h=p.length;s<h;s++){i=p[s],n[s]&&l.containsEmoji(n[s].text)&&(i.range.startColumn=n[s].range.startColumn);let e=o.rangeToArray(i.range);if(i.text?a.push([e,i.text]):a.push([e]),1==u){if(i.text&&2==e.length)return t.pushEvent(c.LCINSERT,[t.id(),e[0],e[1],i.text]),n;if(!i.text)return t.pushEvent(c.LCDELETE,[t.id()].concat(e)),n}}t.pushEvent(c.LCEDIT,[t.id(),a])}return n},t},d.prototype.onDidChangeCursorSelection=function(t){if(!this.isSyncing()){var e=o.selectionToArray(t.selection),n=[e];for(let i=0,s=r(t.secondarySelections),a=s.length;i<a;i++)e=null,n.push(o.selectionToArray(s[i]));let u=this._batch[i(this._batch)-1]||{};if(u.TYPE==c.LCINSERT){var s;(s=r(u))[0];let t=s[1],i=s[2],o=s[3];(o.indexOf("\n")>=0||!e||e[0]!=t||e[1]-(i+o.length)!=0)&&u.push(e||n)}else if(u.TYPE==c.LCDELETE){var a;(a=r(u))[0];let t=a[1],i=a[2];(!e||e[0]!=t||e[1]!=i||e.length>2)&&(u[5]=e||n)}else u.TYPE==c.LCEDIT?u.push(e||n):this.file().space().isEditing()?this.pushEvent(c.LCSELECTION,[this.id()].concat(e||n)):(this.file().setLocalSel(e||n),this.file().space().isPlaying()&&this.file().space().timeline().pause());this.flushEvents()}return this},d.prototype.pushEvent=function(t,e){var n=this;return e.TYPE=t,n._batch.push(e),setTimeout((function(){return n.flushEvents()}),0),n},d.prototype.flushEvents=function(){if(i(this._batch)){var t=this._batch.slice(0),e=this._batchState;if(this._batch=[],this._batchState={},this.file().setLocalSel(null),1==i(t))this.file().push_(t[0].TYPE,t[0],e);else{let n,i=[];for(let e,n=0,o=r(t),s=o.length;n<s;n++)e=o[n],i.push([e.TYPE,e]);n=i,this.file().batch_(n,e)}}return this},d.prototype.apply=function(t,e){return void 0===e&&(e=!1),this._raw.apply(t),e&&e.preapplied||this._changes.push(t),this},d.prototype.undo=function(t){this._raw.apply(t.UNDO,-1);for(let e=0,n=r(t.UNDO),i=n.length;e<i;e++)this._changes.push([n[e]]);return this},d.prototype.flushChanges=function(){var t=this;if(t._model){var e=t._file._editor,n=t._changes;Date.now();if(0==i(n))return t;if(t._changes=[],t._syncing=!0,i(n)>3){t._changeDiff={model:t._model.getValue(),raw:t._raw.getValue()};var o=t._raw.getDiff(t._model._lines);t._changeDiff.diff=o,o&&1==o[0][0]?t._model.setValue(t._raw.getValue()):o&&t.applyEdits([o])}else if(e)e.batchEdits((function(){let e=[];for(let i=0,o=r(n),s=o.length;i<s;i++)e.push(t.applyEdits(o[i]));return e}));else for(let e=0,i=r(n),o=i.length;e<o;e++)t.applyEdits(i[e]);return t._syncing=!1,t._file.async("modified"),t}},d.prototype.enable=function(){return this._enabled=!0,this},d.prototype.disable=function(){return this._enabled=!1,this},d.prototype.dispose=function(){return this._model&&this._model.dispose&&this._model.dispose(),this._model=null,this},s.subclass(f,a),e.FileWidget=f,f.register("file",p),f.prototype.body=function(t){return this.getAttribute("body")},f.prototype.setBody=function(t){return this.setAttribute("body",t),this},f.prototype.lang=function(t){return this.getAttribute("lang")},f.prototype.setLang=function(t){return this.setAttribute("lang",t),this},f.prototype.blobId=function(t){return this.getAttribute("blobId")},f.prototype.setBlobId=function(t){return this.setAttribute("blobId",t),this},f.prototype.buffer=function(t){return this._buffer},f.prototype.setBuffer=function(t){return this._buffer=t,this},f.prototype.diff=function(t){return this._diff},f.prototype.setDiff=function(t){return this._diff=t,this},f.prototype.stream=function(t){return this._stream},f.prototype.setStream=function(t){return this._stream=t,this},f.prototype.editor=function(t){return this._editor},f.prototype.setEditor=function(t){return this._editor=t,this},f.prototype.scrollState=function(t){return this._scrollState},f.prototype.setScrollState=function(t){return this._scrollState=t,this},f.prototype.selState=function(t){return this._selState},f.prototype.setSelState=function(t){return this._selState=t,this},f.prototype.__localSel={watch:"localSelDidSet",name:"localSel"},f.prototype.localSel=function(t){return this._localSel},f.prototype.setLocalSel=function(t){var e=this.localSel();return t!=e&&(this._localSel=t),t!=e&&this.localSelDidSet&&this.localSelDidSet(t,e,this.__localSel),this},f.prototype.localScroll=function(t){return this._localScroll},f.prototype.setLocalScroll=function(t){return this._localScroll=t,this},f.option("name"),f.option("parent",{type:"widget"}),f.option("scrollTop"),f.option("scrollLeft"),f.prototype.setup=function(){return this._localScroll=!1,this._selState=[[1,1]],this._stream=[],this._edits=0,this._initialBody=this.data().body,this._decorations={},this},f.prototype.posToScreen=function(t,e,n,i){if(this._editor){let n=this.agentLayout(),i={top:n.top(),left:n.left(),contentTop:0,contentLeft:0,scrollTop:n.scrollTop(),scrollLeft:n.scrollLeft(),fontSize:n.scaleX(),lineHeight:n.scaleY()};return this.space().primaryEditor().agentToLocalPoint(t,e,i)}return null},f.prototype.model=function(){return this._model||(this._model=new d(this))},f.prototype.localLayout=function(){return this._editor?this.clientLayout():null},f.prototype.uri=function(){return""+this.space().namespace()+this.path()},f.prototype.ext=function(){let t=this.name().lastIndexOf(".");return t>0?this.name().substr(t+1):""},f.prototype.lang=function(){return this.data().lang||this.ext()||"text"},f.prototype.isLanguageStale=function(){try{return this.ext()!==this.model()._uri.path.split(".")[1]}catch(t){return!1}},f.prototype.syncExtension=function(){return this.model()._uri=this.uri()},f.prototype.title=function(){return this.name()},f.prototype.commitAdd=function(){return f.prototype.__super__.commitAdd.apply(this,arguments),this._initialBody=this.data().body,this},f.prototype.mount_=function(){return f.prototype.__super__.mount_.apply(this,arguments),this.space().files().add(this,this.id()),this.parentDir().entries().add(this)},f.prototype.unmount_=function(){return f.prototype.__super__.unmount_.apply(this,arguments),this.space().files().remove(this,this.id()),this.parentDir().entries().remove(this)},f.prototype.parentDir=function(){return this.parent()||this.space().fs()},f.prototype.replaceBody=function(t,e){void 0===e&&(e=!1);var n=this.body(),i=new h(t).getDiff(this.model().body());e&&(i=[this.model()._raw.expandedRange([1,1],n),t]);if(this.log("replacBody",i),i)return this.push_(c.LCEDIT,[this.id(),[i]])},f.prototype.deltaDecorations=function(t,e){var n;for(let t,i=0,s=r(e),a=s.length;i<a;i++)t=s[i],"string"==typeof(n=t.range)||n instanceof String?t.range=o.stringToRange(t.range):t.range instanceof Array&&(t.range=o.arrayToRange(t.range));return this.log("deltaDecorations",e),this._decorations[t]=this.model().model().deltaDecorations(this._decorations[t]||[],e)},f.prototype.initialBody=function(){return null==this._initialBody?this._initialBody=this.data().body:this._initialBody},f.prototype.currentBody=function(){return this.model().body()},f.prototype.localSelDidSet=function(t){return this},f.prototype.flushLocals=function(){return this.localSel()&&this.push_(c.LCSELECTION,[this.id()].concat(this.localSel())),this},f.prototype.buffer=function(){return this.data().buffer||this.data().body},f.prototype.toString=function(){return this.currentBody()},f.prototype.persist_=function(){return this._data.body=this.currentBody(),this._data.selState=this._selState,this},f.prototype.modified=function(){return this.emit("modified",this),this},f.prototype.synced_=function(){return this._data.body=this.currentBody(),this._model&&this._model.flushChanges&&this._model.flushChanges()},f.prototype.pointer=function(){return this._editor&&this._editor.pointer()},f.prototype.node=function(){return this._editor},f.prototype.agentIsShowing=function(){return this.space().agent().options().get("file",!1)==this},f.prototype.clientIsShowing=function(){return this.space().agent().file()==this},f.prototype.isBinary=function(){return!!this.blobId()},f.prototype.useTabs=function(){return"imba"==this.lang()||"imba2"==this.lang()},f.prototype.quicksave=function(){return this.space().emit("quicksave",this),this},f.prototype.dispose=function(){return this._editor=null,this._model&&this._model.dispose&&this._model.dispose()},f.prototype.rename=function(t){return!t||t==this.name()||this.parentDir().entries().any((function(e){return e.name()==t}))?this:this.push_(c.FS_RENAME,[this.id(),t])},f.prototype.moveTo=function(t){if(this.log("moveTo",t),this.parent()!=t)return this.push_(c.FS_MOVE,[this.id(),t.id()]),this},f.prototype.path=function(){return this.parentDir().path()+"/"+this.name()},f.prototype.rm=function(){return this.space().agent().file()==this&&(this.space().agent().setFocus(null),this.space().agent().setFile(null)),this.push_(c.FS_REMOVE,[this.id()])}},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(2),a=s.Menu,u=s.MenuItem,p=o.defineTag("PaneTab",(function(t){t.prototype.group=function(t){return this._group},t.prototype.setGroup=function(t){return this._group=t,this},t.prototype.__warnings={default:0,name:"warnings"},t.prototype.warnings=function(t){return this._warnings},t.prototype.setWarnings=function(t){return this._warnings=t,this},t.prototype._warnings=0,t.prototype.__errors={default:0,name:"errors"},t.prototype.errors=function(t){return this._errors},t.prototype.setErrors=function(t){return this._errors=t,this},t.prototype._errors=0,t.prototype.__active={watch:"activeDidSet",name:"active"},t.prototype.active=function(t){return this._active},t.prototype.setActive=function(t){var e=this.active();return t!=e&&(this._active=t),t!=e&&this.activeDidSet&&this.activeDidSet(t,e,this.__active),this},t.prototype.render=function(){var t=this.$;return this.$open(0).setFlag(-1,this.data().TYPE).flagIf("errors",this.errors()).flagIf("warnings",this.warnings()).setChildren(t.$=t.$||[r("div",t,0,this).flag("title"),r("div",t,1,this).flag("badges").setContent([r("div",t,2,1).flag("badge").flag("errors"),r("div",t,3,1).flag("badge").flag("warnings"),r("div",t,4,1).flag("badge").flag("participant")],2)],2).synced((t[0].setContent(this.data().title()||"Pane",3),t[2].setContent(this.errors()||"",3),t[3].setContent(this.warnings()||"",3),!0))},t.prototype.ontouchstart=function(t){return 2==t.button()?this:this.trigger("tabtap",{item:this.data()})},t.prototype.oncontextmenu=function(t){var e;t.prevent().halt();let n=this.data().title();return t.target().uxa().open((e=(e=r(a)).setContent([r(u,e.$,"A",e).setAction("mv"),r(u,e.$,"B",e).setAction("rm")],2)).end((e.$.A.setLabel("Rename "+n).end(),e.$.B.setLabel("Delete "+n).end(),!0)))},t.prototype.onrm=function(){var t=this;return setTimeout((function(){if(window.confirm("Are you sure you want to delete "+t.data().title()+"?"))return t.data().rm()}),10)},t.prototype.onmv=function(t){var e=this;return setTimeout((function(){let t=window.prompt("New name for file",e.data().title());return console.log("renamed to",t),e.data().mv(t)}),10),e}}));e.PaneTab=p},function(t,e,n){function i(t,e){var n=this;void 0===e&&(e={}),n._options=e,n._file=t,n._dom=document.createElement("style"),n._dom.setAttribute("data-name",t.name()),n._dom.innerHTML=".item { }",t.on("modified",(function(){return n.refresh()})),n.refresh()}e.Stylesheet=i,i.prototype.options=function(t){return this._options},i.prototype.setOptions=function(t){return this._options=t,this},i.prototype.file=function(t){return this._file},i.prototype.setFile=function(t){return this._file=t,this},i.prototype.dom=function(t){return this._dom},i.prototype.setDom=function(t){return this._dom=t,this},i.prototype.__doc={watch:"docDidSet",name:"doc"},i.prototype.doc=function(t){return this._doc},i.prototype.setDoc=function(t){var e=this.doc();return t!=e&&(this._doc=t),t!=e&&this.docDidSet&&this.docDidSet(t,e,this.__doc),this},i.forFile=function(t){return t},i.prototype.docDidSet=function(t,e){return this.dom().parentNode&&this.dom().parentNode.removeChild(this.dom()),t?(this.doc().adoptNode(this.dom()),this.doc().head.appendChild(this.dom())):window.document.adoptNode(this.dom())},i.prototype.refresh=function(){var t=this.file().currentBody();return this.options().fakePseudoStates&&(t=t.replace(/:(hover|focus|active)/g,(function(t,e){return".__"+e}))),this.dom().innerHTML=t}},function(t,e,n){var i=n(0),r=n(14).ScrimbaGesture;function o(){o.prototype.__super__.constructor.apply(this,arguments),this.touch().capture(),this._vp=this.target().data().space().layout().viewport(),this._layout=this._options.layout.clone(),this._left=this._layout[0],this._top=this._layout[1],this._width=this._layout[2],this._height=this._layout[3],this._tracker=this.target().data().space().pointerTracker(),this._ax=0,this._ay=0}i.subclass(o,r),e.LayoutGesture=o,o.prototype.box=function(t){return this._box},o.prototype.setBox=function(t){return this._box=t,this},o.prototype.layout=function(t){return this._layout},o.prototype.setLayout=function(t){return this._layout=t,this},o.prototype.top=function(t){return this._top},o.prototype.setTop=function(t){return this._top=t,this},o.prototype.left=function(t){return this._left},o.prototype.setLeft=function(t){return this._left=t,this},o.prototype.width=function(t){return this._width},o.prototype.setWidth=function(t){return this._width=t,this},o.prototype.height=function(t){return this._height},o.prototype.setHeight=function(t){return this._height=t,this},o.prototype.vp=function(t){return this._vp},o.prototype.setVp=function(t){return this._vp=t,this},o.prototype.ax=function(t){return this._ax},o.prototype.setAx=function(t){return this._ax=t,this},o.prototype.ay=function(t){return this._ay},o.prototype.setAy=function(t){return this._ay=t,this},o.prototype.onresizestart=function(){var t,e=this.options(),n=this.target().dom().getBoundingClientRect(),i=this.x()-n.left,r=this.y()-n.top;return e.l||e.r||e.b||e.t?(e.l?this.setAx(-1):e.r&&this.setAx(1),e.b?this.setAy(1):e.t&&this.setAy(-1)):(i>n.width-20?this.setAx(1):i<20&&this.setAx(-1),r>n.height-20?this.setAy(1):r<20&&this.setAy(-1)),(t=this.target())&&t.onresizestart&&t.onresizestart(this)},o.prototype.onstart=function(t){return this._tracker&&(this._prevTargetLock=this._tracker.lockedOnTarget(),this._tracker.setLockedOnTarget(this._tracker.targetForElement(this.target().dom()))),o.prototype.__super__.onstart.apply(this,arguments)},o.prototype.teardown=function(){return this._tracker&&this._tracker.setLockedOnTarget(this._prevTargetLock),o.prototype.__super__.teardown.apply(this,arguments)}},function(t,e,n){var i=n(0),r=n(3).Widget;function o(){return r.apply(this,arguments)}i.subclass(o,r),e.EditorWidget=o,o.register("editor"),o.option("left"),o.option("top"),o.option("width"),o.option("height"),o.option("contentTop"),o.option("contentLeft"),o.option("fontSize"),o.option("lineHeight"),o.option("renderIndentGuides",{default:!1}),o.option("renderWhitespace",{default:!1,overridable:!0}),o.option("wordWrap",{default:!0,overridable:!0}),o.option("wordWrapColumn",{default:100,overridable:!0}),o.option("wrappingIndent",{default:"same",overridable:!0}),o.prototype.view=function(t){return this._view},o.prototype.setView=function(t){return this._view=t,this},o.prototype.setup=function(){return this},o.prototype.currentFile=function(){return this.space().agent().file()},o.prototype.agentFile=function(){return this.space().agent().file(!1)},o.prototype.hasFocus=function(){return this.space().agent().focus()==this||this.space().agent().focus(!1)==this},o.prototype.posToScreen=function(t,e){return this.agentToLocalPoint(t,e)},o.prototype.agentToLocalPoint=function(t,e,n){void 0===n&&(n=this._data);var i=this.currentFile();if(!i||i!=this.agentFile())return null;n.top,n.contentTop,n.left,n.contentLeft;var r=this.view().top()+this.view().contentTop(),o=this.view().left()+this.view().contentLeft(),s=t-(n.left+n.contentLeft)+(n.scrollLeft||i.scrollLeft()||0),a=e-(n.top+n.contentTop)+(n.scrollTop||i.scrollTop()||0),u=this.view().fontSize()/(n.fontSize||14),p=this.view().lineHeight()/(n.lineHeight||21),c=s*u-this.view().scrollLeft(),h=a*p-this.view().scrollTop();this.view()&&(this.view()._agentPointerX=s*u,this.view()._agentPointerY=a*p);var l=Math.round(r+h);return[Math.round(o+c),l]}},function(t,e){e.animate=function(t,e,i,r,o,s){if("number"==typeof t&&"number"==typeof e&&"number"==typeof i&&"function"==typeof r){"string"==typeof o&&n[o]&&(o=n[o]),"function"!=typeof o&&(o=n.linear),"function"!=typeof s&&(s=function(){});var a=window.requestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},u=!1,p=e-t;r(t);var c=window.performance&&window.performance.now?window.performance.now():+new Date;return a((function n(h){if(!u){var l=(h||+new Date)-c;l>=0&&r(o(l,t,p,i)),l>=0&&l>=i?(r(e),s()):a(n)}})),{cancel:function(){u=!0}}}},e.animateCSS=function(t,n,i,r,o,s,a,u){return e.animate(r,o,s,(function(e){t.style[n]=e+i}),a,u)},e.cancel=function(t){t&&t.cancel()};var n=e.easings={};n.linear=function(t,e,n,i){return n*t/i+e},n.easeInQuad=function(t,e,n,i){return n*(t/=i)*t+e},n.easeOutQuad=function(t,e,n,i){return-n*(t/=i)*(t-2)+e},n.easeInOutQuad=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},n.easeInCubic=function(t,e,n,i){return n*(t/=i)*t*t+e},n.easeOutCubic=function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},n.easeInOutCubic=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},n.easeInQuart=function(t,e,n,i){return n*(t/=i)*t*t*t+e},n.easeOutQuart=function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},n.easeInOutQuart=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},n.easeInQuint=function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},n.easeOutQuint=function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},n.easeInOutQuint=function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},n.easeInSine=function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},n.easeOutSine=function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},n.easeInOutSine=function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},n.easeInExpo=function(t,e,n,i){return 0==t?e:n*Math.pow(2,10*(t/i-1))+e},n.easeOutExpo=function(t,e,n,i){return t==i?e+n:n*(1-Math.pow(2,-10*t/i))+e},n.easeInOutExpo=function(t,e,n,i){return 0==t?e:t==i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e},n.easeInCirc=function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},n.easeOutCirc=function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},n.easeInOutCirc=function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},n.easeInElastic=function(t,e,n,i){var r=0,o=n;if(0==t)return e;if(1==(t/=i))return e+n;if(r||(r=.3*i),o<Math.abs(n)){o=n;var s=r/4}else s=r/(2*Math.PI)*Math.asin(n/o);return-o*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/r)+e},n.easeOutElastic=function(t,e,n,i){var r=0,o=n;if(0==t)return e;if(1==(t/=i))return e+n;if(r||(r=.3*i),o<Math.abs(n)){o=n;var s=r/4}else s=r/(2*Math.PI)*Math.asin(n/o);return o*Math.pow(2,-10*t)*Math.sin((t*i-s)*(2*Math.PI)/r)+n+e},n.easeInOutElastic=function(t,e,n,i){var r=0,o=n;if(0==t)return e;if(2==(t/=i/2))return e+n;if(r||(r=i*(.3*1.5)),o<Math.abs(n)){o=n;var s=r/4}else s=r/(2*Math.PI)*Math.asin(n/o);return t<1?o*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/r)*-.5+e:o*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/r)*.5+n+e},n.easeInBack=function(t,e,n,i,r){return null==r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},n.easeOutBack=function(t,e,n,i,r){return null==r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},n.easeInOutBack=function(t,e,n,i,r){return null==r&&(r=1.70158),(t/=i/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},n.easeInBounce=function(t,e,i,r){return i-n.easeOutBounce(r-t,0,i,r)+e},n.easeOutBounce=function(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},n.easeInOutBounce=function(t,e,i,r){return t<r/2?.5*n.easeInBounce(2*t,0,i,r)+e:.5*n.easeOutBounce(2*t-r,0,i,r)+.5*i+e}},function(t,e,n){"use strict";(function(t){var n="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,i=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(n&&navigator.userAgent.indexOf(t[e])>=0)return 1;return 0}();var r=n&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then((function(){e=!1,t()})))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout((function(){e=!1,t()}),i))}};function o(t){return t&&"[object Function]"==={}.toString.call(t)}function s(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function a(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function u(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=s(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/(auto|scroll|overlay)/.test(n+r+i)?t:u(a(t))}function p(t){return t&&t.referenceNode?t.referenceNode:t}var c=n&&!(!window.MSInputMethodContext||!document.documentMode),h=n&&/MSIE 10/.test(navigator.userAgent);function l(t){return 11===t?c:10===t?h:c||h}function d(t){if(!t)return document.documentElement;for(var e=l(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===s(n,"position")?d(n):n:t?t.ownerDocument.documentElement:document.documentElement}function f(t){return null!==t.parentNode?f(t.parentNode):t}function y(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?t:e,r=n?e:t,o=document.createRange();o.setStart(i,0),o.setEnd(r,0);var s,a,u=o.commonAncestorContainer;if(t!==u&&e!==u||i.contains(r))return"BODY"===(a=(s=u).nodeName)||"HTML"!==a&&d(s.firstElementChild)!==s?d(u):u;var p=f(t);return p.host?y(p.host,e):y(t,f(e).host)}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n="top"===e?"scrollTop":"scrollLeft",i=t.nodeName;if("BODY"===i||"HTML"===i){var r=t.ownerDocument.documentElement,o=t.ownerDocument.scrollingElement||r;return o[n]}return t[n]}function g(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=m(e,"top"),r=m(e,"left"),o=n?-1:1;return t.top+=i*o,t.bottom+=i*o,t.left+=r*o,t.right+=r*o,t}function _(t,e){var n="x"===e?"Left":"Top",i="Left"===n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"])+parseFloat(t["border"+i+"Width"])}function v(t,e,n,i){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],l(10)?parseInt(n["offset"+t])+parseInt(i["margin"+("Height"===t?"Top":"Left")])+parseInt(i["margin"+("Height"===t?"Bottom":"Right")]):0)}function b(t){var e=t.body,n=t.documentElement,i=l(10)&&getComputedStyle(n);return{height:v("Height",e,n,i),width:v("Width",e,n,i)}}var w=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},x=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),S=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},T=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function k(t){return T({},t,{right:t.left+t.width,bottom:t.top+t.height})}function A(t){var e={};try{if(l(10)){e=t.getBoundingClientRect();var n=m(t,"top"),i=m(t,"left");e.top+=n,e.left+=i,e.bottom+=n,e.right+=i}else e=t.getBoundingClientRect()}catch(t){}var r={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o="HTML"===t.nodeName?b(t.ownerDocument):{},a=o.width||t.clientWidth||r.width,u=o.height||t.clientHeight||r.height,p=t.offsetWidth-a,c=t.offsetHeight-u;if(p||c){var h=s(t);p-=_(h,"x"),c-=_(h,"y"),r.width-=p,r.height-=c}return k(r)}function E(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=l(10),r="HTML"===e.nodeName,o=A(t),a=A(e),p=u(t),c=s(e),h=parseFloat(c.borderTopWidth),d=parseFloat(c.borderLeftWidth);n&&r&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var f=k({top:o.top-a.top-h,left:o.left-a.left-d,width:o.width,height:o.height});if(f.marginTop=0,f.marginLeft=0,!i&&r){var y=parseFloat(c.marginTop),m=parseFloat(c.marginLeft);f.top-=h-y,f.bottom-=h-y,f.left-=d-m,f.right-=d-m,f.marginTop=y,f.marginLeft=m}return(i&&!n?e.contains(p):e===p&&"BODY"!==p.nodeName)&&(f=g(f,e)),f}function C(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.ownerDocument.documentElement,i=E(t,n),r=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),s=e?0:m(n),a=e?0:m(n,"left"),u={top:s-i.top+i.marginTop,left:a-i.left+i.marginLeft,width:r,height:o};return k(u)}function D(t){var e=t.nodeName;if("BODY"===e||"HTML"===e)return!1;if("fixed"===s(t,"position"))return!0;var n=a(t);return!!n&&D(n)}function O(t){if(!t||!t.parentElement||l())return document.documentElement;for(var e=t.parentElement;e&&"none"===s(e,"transform");)e=e.parentElement;return e||document.documentElement}function M(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},s=r?O(t):y(t,p(e));if("viewport"===i)o=C(s,r);else{var c=void 0;"scrollParent"===i?"BODY"===(c=u(a(e))).nodeName&&(c=t.ownerDocument.documentElement):c="window"===i?t.ownerDocument.documentElement:i;var h=E(c,s,r);if("HTML"!==c.nodeName||D(s))o=h;else{var l=b(t.ownerDocument),d=l.height,f=l.width;o.top+=h.top-h.marginTop,o.bottom=d+h.top,o.left+=h.left-h.marginLeft,o.right=f+h.left}}var m="number"==typeof(n=n||0);return o.left+=m?n:n.left||0,o.top+=m?n:n.top||0,o.right-=m?n:n.right||0,o.bottom-=m?n:n.bottom||0,o}function L(t){return t.width*t.height}function P(t,e,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var s=M(n,i,o,r),a={top:{width:s.width,height:e.top-s.top},right:{width:s.right-e.right,height:s.height},bottom:{width:s.width,height:s.bottom-e.bottom},left:{width:e.left-s.left,height:s.height}},u=Object.keys(a).map((function(t){return T({key:t},a[t],{area:L(a[t])})})).sort((function(t,e){return e.area-t.area})),p=u.filter((function(t){var e=t.width,i=t.height;return e>=n.clientWidth&&i>=n.clientHeight})),c=p.length>0?p[0].key:u[0].key,h=t.split("-")[1];return c+(h?"-"+h:"")}function N(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=i?O(e):y(e,p(n));return E(n,r,i)}function $(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),i=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+i,height:t.offsetHeight+n}}function R(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,(function(t){return e[t]}))}function I(t,e,n){n=n.split("-")[0];var i=$(t),r={width:i.width,height:i.height},o=-1!==["right","left"].indexOf(n),s=o?"top":"left",a=o?"left":"top",u=o?"height":"width",p=o?"width":"height";return r[s]=e[s]+e[u]/2-i[u]/2,r[a]=n===a?e[a]-i[p]:e[R(a)],r}function F(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function z(t,e,n){return(void 0===n?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex((function(t){return t[e]===n}));var i=F(t,(function(t){return t[e]===n}));return t.indexOf(i)}(t,"name",n))).forEach((function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=t.function||t.fn;t.enabled&&o(n)&&(e.offsets.popper=k(e.offsets.popper),e.offsets.reference=k(e.offsets.reference),e=n(e,t))})),e}function B(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=N(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=P(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=I(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=z(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function V(t,e){return t.some((function(t){var n=t.name;return t.enabled&&n===e}))}function U(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<e.length;i++){var r=e[i],o=r?""+r+n:t;if(void 0!==document.body.style[o])return o}return null}function H(){return this.state.isDestroyed=!0,V(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[U("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function W(t){var e=t.ownerDocument;return e?e.defaultView:window}function j(t,e,n,i){n.updateBound=i,W(t).addEventListener("resize",n.updateBound,{passive:!0});var r=u(t);return function t(e,n,i,r){var o="BODY"===e.nodeName,s=o?e.ownerDocument.defaultView:e;s.addEventListener(n,i,{passive:!0}),o||t(u(s.parentNode),n,i,r),r.push(s)}(r,"scroll",n.updateBound,n.scrollParents),n.scrollElement=r,n.eventsEnabled=!0,n}function q(){this.state.eventsEnabled||(this.state=j(this.reference,this.options,this.state,this.scheduleUpdate))}function G(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,W(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach((function(t){t.removeEventListener("scroll",e.updateBound)})),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function Y(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function X(t,e){Object.keys(e).forEach((function(n){var i="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&Y(e[n])&&(i="px"),t.style[n]=e[n]+i}))}var K=n&&/Firefox/i.test(navigator.userAgent);function Z(t,e,n){var i=F(t,(function(t){return t.name===e})),r=!!i&&t.some((function(t){return t.name===n&&t.enabled&&t.order<i.order}));if(!r){var o="`"+e+"`",s="`"+n+"`";console.warn(s+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return r}var J=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Q=J.slice(3);function tt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Q.indexOf(t),i=Q.slice(n+1).concat(Q.slice(0,n));return e?i.reverse():i}var et="flip",nt="clockwise",it="counterclockwise";function rt(t,e,n,i){var r=[0,0],o=-1!==["right","left"].indexOf(i),s=t.split(/(\+|\-)/).map((function(t){return t.trim()})),a=s.indexOf(F(s,(function(t){return-1!==t.search(/,|\s/)})));s[a]&&-1===s[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var u=/\s*,\s*|\s+/,p=-1!==a?[s.slice(0,a).concat([s[a].split(u)[0]]),[s[a].split(u)[1]].concat(s.slice(a+1))]:[s];return(p=p.map((function(t,i){var r=(1===i?!o:o)?"height":"width",s=!1;return t.reduce((function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,s=!0,t):s?(t[t.length-1]+=e,s=!1,t):t.concat(e)}),[]).map((function(t){return function(t,e,n,i){var r=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+r[1],s=r[2];if(!o)return t;if(0===s.indexOf("%")){var a=void 0;switch(s){case"%p":a=n;break;case"%":case"%r":default:a=i}return k(a)[e]/100*o}if("vh"===s||"vw"===s){return("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o}return o}(t,r,e,n)}))}))).forEach((function(t,e){t.forEach((function(n,i){Y(n)&&(r[e]+=n*("-"===t[i-1]?-1:1))}))})),r}var ot={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],i=e.split("-")[1];if(i){var r=t.offsets,o=r.reference,s=r.popper,a=-1!==["bottom","top"].indexOf(n),u=a?"left":"top",p=a?"width":"height",c={start:S({},u,o[u]),end:S({},u,o[u]+o[p]-s[p])};t.offsets.popper=T({},s,c[i])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n=e.offset,i=t.placement,r=t.offsets,o=r.popper,s=r.reference,a=i.split("-")[0],u=void 0;return u=Y(+n)?[+n,0]:rt(n,o,s,a),"left"===a?(o.top+=u[0],o.left-=u[1]):"right"===a?(o.top+=u[0],o.left+=u[1]):"top"===a?(o.left+=u[0],o.top-=u[1]):"bottom"===a&&(o.left+=u[0],o.top+=u[1]),t.popper=o,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var n=e.boundariesElement||d(t.instance.popper);t.instance.reference===n&&(n=d(n));var i=U("transform"),r=t.instance.popper.style,o=r.top,s=r.left,a=r[i];r.top="",r.left="",r[i]="";var u=M(t.instance.popper,t.instance.reference,e.padding,n,t.positionFixed);r.top=o,r.left=s,r[i]=a,e.boundaries=u;var p=e.priority,c=t.offsets.popper,h={primary:function(t){var n=c[t];return c[t]<u[t]&&!e.escapeWithReference&&(n=Math.max(c[t],u[t])),S({},t,n)},secondary:function(t){var n="right"===t?"left":"top",i=c[n];return c[t]>u[t]&&!e.escapeWithReference&&(i=Math.min(c[n],u[t]-("right"===t?c.width:c.height))),S({},n,i)}};return p.forEach((function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";c=T({},c,h[e](t))})),t.offsets.popper=c,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,i=e.reference,r=t.placement.split("-")[0],o=Math.floor,s=-1!==["top","bottom"].indexOf(r),a=s?"right":"bottom",u=s?"left":"top",p=s?"width":"height";return n[a]<o(i[u])&&(t.offsets.popper[u]=o(i[u])-n[p]),n[u]>o(i[a])&&(t.offsets.popper[u]=o(i[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!Z(t.instance.modifiers,"arrow","keepTogether"))return t;var i=e.element;if("string"==typeof i){if(!(i=t.instance.popper.querySelector(i)))return t}else if(!t.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var r=t.placement.split("-")[0],o=t.offsets,a=o.popper,u=o.reference,p=-1!==["left","right"].indexOf(r),c=p?"height":"width",h=p?"Top":"Left",l=h.toLowerCase(),d=p?"left":"top",f=p?"bottom":"right",y=$(i)[c];u[f]-y<a[l]&&(t.offsets.popper[l]-=a[l]-(u[f]-y)),u[l]+y>a[f]&&(t.offsets.popper[l]+=u[l]+y-a[f]),t.offsets.popper=k(t.offsets.popper);var m=u[l]+u[c]/2-y/2,g=s(t.instance.popper),_=parseFloat(g["margin"+h]),v=parseFloat(g["border"+h+"Width"]),b=m-t.offsets.popper[l]-_-v;return b=Math.max(Math.min(a[c]-y,b),0),t.arrowElement=i,t.offsets.arrow=(S(n={},l,Math.round(b)),S(n,d,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(V(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var n=M(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),i=t.placement.split("-")[0],r=R(i),o=t.placement.split("-")[1]||"",s=[];switch(e.behavior){case et:s=[i,r];break;case nt:s=tt(i);break;case it:s=tt(i,!0);break;default:s=e.behavior}return s.forEach((function(a,u){if(i!==a||s.length===u+1)return t;i=t.placement.split("-")[0],r=R(i);var p=t.offsets.popper,c=t.offsets.reference,h=Math.floor,l="left"===i&&h(p.right)>h(c.left)||"right"===i&&h(p.left)<h(c.right)||"top"===i&&h(p.bottom)>h(c.top)||"bottom"===i&&h(p.top)<h(c.bottom),d=h(p.left)<h(n.left),f=h(p.right)>h(n.right),y=h(p.top)<h(n.top),m=h(p.bottom)>h(n.bottom),g="left"===i&&d||"right"===i&&f||"top"===i&&y||"bottom"===i&&m,_=-1!==["top","bottom"].indexOf(i),v=!!e.flipVariations&&(_&&"start"===o&&d||_&&"end"===o&&f||!_&&"start"===o&&y||!_&&"end"===o&&m),b=!!e.flipVariationsByContent&&(_&&"start"===o&&f||_&&"end"===o&&d||!_&&"start"===o&&m||!_&&"end"===o&&y),w=v||b;(l||g||w)&&(t.flipped=!0,(l||g)&&(i=s[u+1]),w&&(o=function(t){return"end"===t?"start":"start"===t?"end":t}(o)),t.placement=i+(o?"-"+o:""),t.offsets.popper=T({},t.offsets.popper,I(t.instance.popper,t.offsets.reference,t.placement)),t=z(t.instance.modifiers,t,"flip"))})),t},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],i=t.offsets,r=i.popper,o=i.reference,s=-1!==["left","right"].indexOf(n),a=-1===["top","left"].indexOf(n);return r[s?"left":"top"]=o[n]-(a?r[s?"width":"height"]:0),t.placement=R(e),t.offsets.popper=k(r),t}},hide:{order:800,enabled:!0,fn:function(t){if(!Z(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=F(t.instance.modifiers,(function(t){return"preventOverflow"===t.name})).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,i=e.y,r=t.offsets.popper,o=F(t.instance.modifiers,(function(t){return"applyStyle"===t.name})).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s=void 0!==o?o:e.gpuAcceleration,a=d(t.instance.popper),u=A(a),p={position:r.position},c=function(t,e){var n=t.offsets,i=n.popper,r=n.reference,o=Math.round,s=Math.floor,a=function(t){return t},u=o(r.width),p=o(i.width),c=-1!==["left","right"].indexOf(t.placement),h=-1!==t.placement.indexOf("-"),l=e?c||h||u%2==p%2?o:s:a,d=e?o:a;return{left:l(u%2==1&&p%2==1&&!h&&e?i.left-1:i.left),top:d(i.top),bottom:d(i.bottom),right:l(i.right)}}(t,window.devicePixelRatio<2||!K),h="bottom"===n?"top":"bottom",l="right"===i?"left":"right",f=U("transform"),y=void 0,m=void 0;if(m="bottom"===h?"HTML"===a.nodeName?-a.clientHeight+c.bottom:-u.height+c.bottom:c.top,y="right"===l?"HTML"===a.nodeName?-a.clientWidth+c.right:-u.width+c.right:c.left,s&&f)p[f]="translate3d("+y+"px, "+m+"px, 0)",p[h]=0,p[l]=0,p.willChange="transform";else{var g="bottom"===h?-1:1,_="right"===l?-1:1;p[h]=m*g,p[l]=y*_,p.willChange=h+", "+l}var v={"x-placement":t.placement};return t.attributes=T({},v,t.attributes),t.styles=T({},p,t.styles),t.arrowStyles=T({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,n;return X(t.instance.popper,t.styles),e=t.instance.popper,n=t.attributes,Object.keys(n).forEach((function(t){!1!==n[t]?e.setAttribute(t,n[t]):e.removeAttribute(t)})),t.arrowElement&&Object.keys(t.arrowStyles).length&&X(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,i,r){var o=N(r,e,t,n.positionFixed),s=P(n.placement,o,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",s),X(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},st=function(){function t(e,n){var i=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};w(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=r(this.update.bind(this)),this.options=T({},t.Defaults,s),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(T({},t.Defaults.modifiers,s.modifiers)).forEach((function(e){i.options.modifiers[e]=T({},t.Defaults.modifiers[e]||{},s.modifiers?s.modifiers[e]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(t){return T({name:t},i.options.modifiers[t])})).sort((function(t,e){return t.order-e.order})),this.modifiers.forEach((function(t){t.enabled&&o(t.onLoad)&&t.onLoad(i.reference,i.popper,i.options,t,i.state)})),this.update();var a=this.options.eventsEnabled;a&&this.enableEventListeners(),this.state.eventsEnabled=a}return x(t,[{key:"update",value:function(){return B.call(this)}},{key:"destroy",value:function(){return H.call(this)}},{key:"enableEventListeners",value:function(){return q.call(this)}},{key:"disableEventListeners",value:function(){return G.call(this)}}]),t}();st.Utils=("undefined"!=typeof window?window:t).PopperUtils,st.placements=J,st.Defaults=ot,e.a=st}).call(this,n(12))},function(t,e,n){var i={},r=n(0),o=r.createTagScope();n(96),n(97),n(98),n(43),n(100);var s=n(102).API;const a=n(4),u=document.documentElement.classList,p=window.localStorage;var c;i.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){let e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))};try{var h=Date.now();let t=0;for(;t<50;){let e="cw"+t++;var l=p.getItem("sw:"+e);if(!l||parseInt(l)<h){c=e;break}}p.getItem("scrimba:debug")&&u.add("debug")}catch(t){c="c"+i.uuidv4().substr(0,8)}window.CONTAINER_ID=c,p.setItem("sw:"+c,Date.now()+2592e5),window.addEventListener("beforeunload",(function(){return p.removeItem("sw:"+c)})),SCRIMBA_API=s.instance(),SCRIMBA_API.isEmbed=function(){return!1},SDB=SCRIMBA_API.db();n(35).Container;var d=n(18).Scrim;n(136);var f=n(182).Space;window.Player=f,f.Scrim=d,f.API=SCRIMBA_API;document.documentElement;window.path=n(75),window.ANIM=n(83),window.MP=n(8),r.Event.prototype.cancel=function(){return this.prevent()},o.extendTag("element",(function(t){t.prototype.root=function(){return App},t.prototype.api=function(){return SCRIMBA_API},t.prototype.util=function(){return a},t.prototype.log=function(){for(var t,e=arguments,n=e.length,i=new Array(n>0?n:0);n>0;)i[n-1]=e[--n];return(t=this.api()).log.apply(t,[].concat([this.constructor._name],Array.from(i)))},t.prototype.dispatch=function(t,e){let n=new CustomEvent(t,{detail:e,bubbles:!0});return this.dom().dispatchEvent(n)},t.prototype.ua=function(){return this.api().ua()},t.prototype.anim=function(){return window.ANIM}})),o.extendTag("html",(function(t){t.prototype.parent=function(){return null}})),window.imba.commit()},function(t,e,n){(function(e){var i=n(6),r=!1,o="undefined"!=typeof window?window:void 0!==e?e:null;o&&o.Imba?(console.warn("Imba v"+o.Imba.VERSION+" is already loaded."),i=o.Imba):o&&(o.Imba=i,r=!0,o.define&&o.define.amd&&o.define("imba",[],(function(){return i}))),t.exports=i,n(87),n(88),r&&i.EventManager.activate()}).call(this,n(12))},function(t,e,n){var i,r,o=n(6);function s(){var t=this;t._queue=[],t._stage=-1,t._scheduled=!1,t._ticker=function(e){return t._scheduled=!1,t.tick(e)}}r=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitRequestAnimationFrame,(i=window.requestAnimationFrame)||(i=window.webkitRequestAnimationFrame),i||(i=window.mozRequestAnimationFrame),i||(i=function(t){return setTimeout(t,1e3/60)}),s.prototype.stage=function(t){return this._stage},s.prototype.setStage=function(t){return this._stage=t,this},s.prototype.queue=function(t){return this._queue},s.prototype.setQueue=function(t){return this._queue=t,this},s.prototype.add=function(t,e){if((e||-1==this._queue.indexOf(t))&&this._queue.push(t),!this._scheduled)return this.schedule()},s.prototype.tick=function(t){var e,n=this._queue;if(this._ts||(this._ts=t),this._dt=t-this._ts,this._ts=t,this._queue=[],this._stage=1,this.before(),n.length)for(let t,i=0,r=(e=n)?e.toArray?e.toArray():e:[],o=r.length;i<o;i++)t=r[i],t instanceof Function?t(this._dt,this):t.tick&&t.tick(this._dt,this);return this._stage=2,this.after(),this._stage=this._scheduled?0:-1,this},s.prototype.schedule=function(){return this._scheduled||(this._scheduled=!0,-1==this._stage&&(this._stage=0),i(this._ticker)),this},s.prototype.before=function(){return this},s.prototype.after=function(){return o.TagManager&&o.TagManager.refresh(),this},o.TICKER=new s,o.SCHEDULERS=[],o.ticker=function(){return o.TICKER},o.requestAnimationFrame=function(t){return i(t)},o.cancelAnimationFrame=function(t){return r(t)};var a=0;o.commit=function(t){a++,o.emit(o,"commit",null!=t?[t]:void 0),0==--a&&o.TagManager&&o.TagManager.refresh()},o.Scheduler=function(t){var e=this;e._id=u++,e._target=t,e._marked=!1,e._active=!1,e._marker=function(){return e.mark()},e._ticker=function(t){return e.tick(t)},e._dt=0,e._frame={},e._scheduled=!1,e._timestamp=0,e._ticks=0,e._flushes=0,e.onevent=e.onevent.bind(e)};var u=0;o.Scheduler.event=function(t){return o.emit(o,"event",t)},o.Scheduler.prototype.__raf={watch:"rafDidSet",name:"raf"},o.Scheduler.prototype.raf=function(t){return this._raf},o.Scheduler.prototype.setRaf=function(t){var e=this.raf();return t!=e&&(this._raf=t),t!=e&&this.rafDidSet&&this.rafDidSet(t,e,this.__raf),this},o.Scheduler.prototype.__interval={watch:"intervalDidSet",name:"interval"},o.Scheduler.prototype.interval=function(t){return this._interval},o.Scheduler.prototype.setInterval=function(t){var e=this.interval();return t!=e&&(this._interval=t),t!=e&&this.intervalDidSet&&this.intervalDidSet(t,e,this.__interval),this},o.Scheduler.prototype.__events={watch:"eventsDidSet",name:"events"},o.Scheduler.prototype.events=function(t){return this._events},o.Scheduler.prototype.setEvents=function(t){var e=this.events();return t!=e&&(this._events=t),t!=e&&this.eventsDidSet&&this.eventsDidSet(t,e,this.__events),this},o.Scheduler.prototype.marked=function(t){return this._marked},o.Scheduler.prototype.setMarked=function(t){return this._marked=t,this},o.Scheduler.prototype.rafDidSet=function(t){return t&&this._active&&this.requestTick(),this},o.Scheduler.prototype.intervalDidSet=function(t){return clearInterval(this._intervalId),this._intervalId=null,t&&this._active&&(this._intervalId=setInterval(this.oninterval.bind(this),t)),this},o.Scheduler.prototype.eventsDidSet=function(t,e){return this._active&&t&&!e?o.listen(o,"commit",this,"onevent"):!t&&e?o.unlisten(o,"commit",this,"onevent"):void 0},o.Scheduler.prototype.active=function(){return this._active},o.Scheduler.prototype.dt=function(){return this._dt},o.Scheduler.prototype.configure=function(t){return void 0===t&&(t={}),null!=t.raf&&this.setRaf(t.raf),null!=t.interval&&this.setInterval(t.interval),null!=t.events&&this.setEvents(t.events),this},o.Scheduler.prototype.mark=function(){return this._marked=!0,this._scheduled||this.requestTick(),this},o.Scheduler.prototype.flush=function(){return this._flushes++,this._target.tick(this),this._marked=!1,this},o.Scheduler.prototype.tick=function(t,e){return this._ticks++,this._dt=t,e&&(this._scheduled=!1),this.flush(),this._raf&&this._active&&this.requestTick(),this},o.Scheduler.prototype.requestTick=function(){return this._scheduled||(this._scheduled=!0,o.TICKER.add(this)),this},o.Scheduler.prototype.activate=function(t){return void 0===t&&(t=!0),this._active||(this._active=!0,this._commit=this._target.commit,this._target.commit=function(){return this},this._target&&this._target.flag&&this._target.flag("scheduled_"),o.SCHEDULERS.push(this),this._events&&o.listen(o,"commit",this,"onevent"),this._interval&&!this._intervalId&&(this._intervalId=setInterval(this.oninterval.bind(this),this._interval)),t?this.tick(0):this._raf&&this.requestTick()),this},o.Scheduler.prototype.deactivate=function(){if(this._active){this._active=!1,this._target.commit=this._commit;let t=o.SCHEDULERS.indexOf(this);t>=0&&o.SCHEDULERS.splice(t,1),this._events&&o.unlisten(o,"commit",this,"onevent"),this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this._target&&this._target.unflag&&this._target.unflag("scheduled_")}return this},o.Scheduler.prototype.track=function(){return this._marker},o.Scheduler.prototype.oninterval=function(){return this.tick(),o.TagManager.refresh(),this},o.Scheduler.prototype.onevent=function(t){return!this._events||this._marked||(this._events instanceof Function?this._events(t,this)&&this.mark():this._events instanceof Array?this._events.indexOf(t&&t.type||t)>=0&&this.mark():this.mark()),this}},function(t,e,n){var i=n(6);n(89),n(90),i.TagManager=new i.TagManagerClass,n(91),n(92),n(42),n(93),n(94),n(95)},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(6);r.TagManagerClass=function(){this._inserts=0,this._removes=0,this._mounted=[],this._mountables=0,this._unmountables=0,this._unmounting=0},r.TagManagerClass.prototype.mounted=function(){return this._mounted},r.TagManagerClass.prototype.insert=function(t,e){this._inserts++,t&&t.mount&&this.regMountable(t)},r.TagManagerClass.prototype.remove=function(t,e){return this._removes++},r.TagManagerClass.prototype.changes=function(){return this._inserts+this._removes},r.TagManagerClass.prototype.mount=function(t){},r.TagManagerClass.prototype.refresh=function(t){if(void 0===t&&(t=!1),t||0!=this.changes())return(this._inserts&&this._mountables>this._mounted.length||t)&&this.tryMount(),(this._removes||t)&&this._mounted.length&&this.tryUnmount(),this._inserts=0,this._removes=0,this},r.TagManagerClass.prototype.unmount=function(t){return this},r.TagManagerClass.prototype.regMountable=function(t){if(!(t.FLAGS&r.TAG_MOUNTABLE))return t.FLAGS|=r.TAG_MOUNTABLE,this._mountables++},r.TagManagerClass.prototype.tryMount=function(){for(let t,e=0,n=i(document.body.querySelectorAll(".__mount")),r=n.length;e<r;e++)t=n[e],t&&t._tag&&-1==this._mounted.indexOf(t._tag)&&this.mountNode(t._tag);return this},r.TagManagerClass.prototype.mountNode=function(t){-1==this._mounted.indexOf(t)&&(this.regMountable(t),this._mounted.push(t),t.FLAGS|=r.TAG_MOUNTED,t.mount&&t.mount())},r.TagManagerClass.prototype.tryUnmount=function(){this._unmounting++;var t=[];document.body;for(let e,n=0,r=i(this._mounted),o=r.length;n<o;n++)e=r[n],e&&(document.documentElement.contains(e._dom)||(t.push(e),this._mounted[n]=null));if(this._unmounting--,t.length){this._mounted=this._mounted.filter((function(e){return e&&-1==t.indexOf(e)}));for(let e,n=0,i=t.length;n<i;n++)e=t[n],e.FLAGS=e.FLAGS&~r.TAG_MOUNTED,e.unmount&&e._dom?e.unmount():e._scheduler&&e.unschedule()}return this}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(6);n(42);var o=["keydown","keyup","keypress","textInput","input","change","submit","focusin","focusout","focus","blur","contextmenu","selectstart","dblclick","selectionchange","mousewheel","wheel","scroll","beforecopy","copy","beforepaste","paste","beforecut","cut","dragstart","drag","dragend","dragenter","dragover","dragleave","dragexit","drop","mouseup","mousedown","mouseenter","mouseleave","mouseout","mouseover","mousemove","transitionstart","transitionend","transitioncancel","animationstart","animationiteration","animationend"];r.EventManager=function(t,e){var n=this;e&&e.constructor===Object||(e={});var r=void 0!==e.events?e.events:[];n._shimFocusEvents=window.netscape&&void 0===t.onfocusin,n.setRoot(t),n.setListeners([]),n.setDelegators({}),n.setDelegator((function(t){return n.delegate(t),!0}));for(let t=0,e=i(r),o=e.length;t<o;t++)n.register(e[t]);return n},r.EventManager.prototype.root=function(t){return this._root},r.EventManager.prototype.setRoot=function(t){return this._root=t,this},r.EventManager.prototype.count=function(t){return this._count},r.EventManager.prototype.setCount=function(t){return this._count=t,this},r.EventManager.prototype.__enabled={default:!1,watch:"enabledDidSet",name:"enabled"},r.EventManager.prototype.enabled=function(t){return this._enabled},r.EventManager.prototype.setEnabled=function(t){var e=this.enabled();return t!=e&&(this._enabled=t),t!=e&&this.enabledDidSet&&this.enabledDidSet(t,e,this.__enabled),this},r.EventManager.prototype._enabled=!1,r.EventManager.prototype.listeners=function(t){return this._listeners},r.EventManager.prototype.setListeners=function(t){return this._listeners=t,this},r.EventManager.prototype.delegators=function(t){return this._delegators},r.EventManager.prototype.setDelegators=function(t){return this._delegators=t,this},r.EventManager.prototype.delegator=function(t){return this._delegator},r.EventManager.prototype.setDelegator=function(t){return this._delegator=t,this};var s=[];r.EventManager.prototype.enabledDidSet=function(t){return t?this.onenable():this.ondisable(),this},r.EventManager.bind=function(t){return r.Events?r.Events.autoregister(t):-1==s.indexOf(t)&&o.indexOf(t)>=0?s.push(t):void 0},r.EventManager.activate=function(){return r.Events||(r.Events=new r.EventManager(r.document(),{events:[]}),r.POINTER||(r.POINTER=new r.Pointer),window&&void 0!==window.ontouchstart&&(r.Events.listen("touchstart",(function(t){return r.Touch.ontouchstart(t)})),r.Events.listen("touchmove",(function(t){return r.Touch.ontouchmove(t)})),r.Events.listen("touchend",(function(t){return r.Touch.ontouchend(t)})),r.Events.listen("touchcancel",(function(t){return r.Touch.ontouchcancel(t)}))),r.Events.register("click",(function(t){if(t.timeStamp-r.Touch.LastTimestamp>r.Touch.TapTimeout){t._imbaSimulatedTap=!0;var e=new r.Event(t);if(e.setType("tap"),e.process(),e._responder&&e.defaultPrevented)return t.preventDefault()}return r.Events.delegate(t)})),r.Events.listen("mousedown",(function(t){if(t.timeStamp-r.Touch.LastTimestamp>r.Touch.TapTimeout&&r.POINTER)return r.POINTER.update(t).process()})),r.Events.listen("mouseup",(function(t){if(t.timeStamp-r.Touch.LastTimestamp>r.Touch.TapTimeout&&r.POINTER)return r.POINTER.update(t).process()})),r.Events.register(["mousedown","mouseup"]),r.Events.register(s),r.Events.setEnabled(!0)),r.Events},r.EventManager.prototype.register=function(t,e){if(void 0===e&&(e=!0),t instanceof Array){for(let n=0,r=i(t),o=r.length;n<o;n++)this.register(r[n],e);return this}if(this.delegators()[t])return this;var n=this.delegators()[t]=e instanceof Function?e:this.delegator();return this.enabled()?this.root().addEventListener(t,n,!0):void 0},r.EventManager.prototype.autoregister=function(t){return-1==o.indexOf(t)?this:this.register(t)},r.EventManager.prototype.listen=function(t,e,n){return void 0===n&&(n=!0),this.listeners().push([t,e,n]),this.enabled()&&this.root().addEventListener(t,e,n),this},r.EventManager.prototype.delegate=function(t){return r.Event.wrap(t).process(),this._shimFocusEvents&&("focus"==t.type?r.Event.wrap(t).setType("focusin").process():"blur"==t.type&&r.Event.wrap(t).setType("focusout").process()),this},r.EventManager.prototype.create=function(t,e,n){n&&n.constructor===Object||(n={});var i=void 0!==n.data?n.data:null,o=void 0!==n.source?n.source:null,s=r.Event.wrap({type:t,target:e});return null!=i&&s.setData(i),o&&s.setSource(o),s},r.EventManager.prototype.trigger=function(){return this.create.apply(this,arguments).process()},r.EventManager.prototype.onenable=function(){for(let t,e,n=this.delegators(),i=0,r=Object.keys(n),o=r.length;i<o;i++)e=r[i],t=n[e],this.root().addEventListener(e,t,!0);for(let t,e=0,n=i(this.listeners()),r=n.length;e<r;e++)t=n[e],this.root().addEventListener(t[0],t[1],t[2]);return window.addEventListener("hashchange",r.commit),window.addEventListener("popstate",r.commit),this},r.EventManager.prototype.ondisable=function(){for(let t,e,n=this.delegators(),i=0,r=Object.keys(n),o=r.length;i<o;i++)e=r[i],t=n[e],this.root().removeEventListener(e,t,!0);for(let t,e=0,n=i(this.listeners()),r=n.length;e<r;e++)t=n[e],this.root().removeEventListener(t[0],t[1],t[2]);return window.removeEventListener("hashchange",r.commit),window.removeEventListener("popstate",r.commit),this}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(6);function o(t){return this._target=t,this._cache={},this}r.CSSKeyMap={},r.TAG_BUILT=1,r.TAG_SETUP=2,r.TAG_MOUNTING=4,r.TAG_MOUNTED=8,r.TAG_SCHEDULED=16,r.TAG_AWAKENED=32,r.TAG_MOUNTABLE=64,r.TAG_AUTOCLASS_GLOBALS=!0,r.TAG_AUTOCLASS_LOCALS=!0,r.TAG_AUTOCLASS_SVG=!0,r.document=function(){return window.document},r.root=function(){return r.getTagForDom(r.document().body)},r.static=function(t,e,n){return t._type=e,t.static=n,t},r.mount=function(t,e){return e||(e=r.document().body),e.appendChild(t.dom()),r.TagManager.insert(t,e),t.scheduler().configure({events:!0}).activate(!1),r.TagManager.refresh(),t},r.createTextNode=function(t){return t&&3==t.nodeType?t:r.document().createTextNode(t)},o.build=function(t){return new Proxy(t,new this(t))},o.prototype.setter=function(t,e){var n=this;return function(i,r){return n._target[t]=i,e}},o.prototype.get=function(t,e,n){let i=t.V1CACHE||(t.V1CACHE={});if(i[e])return i[e];if("dom"==e)return i[e]=function(){return t};if("tag"==e)return i[e]=function(){return t};if("_tag"==e||"_dom"==e||"_slot_"==e)return t;if("end"==e)return i[e]=function(){return t.end$(),n};if(e.match(/^set[A-Z]/)){let t=e[3].toLowerCase()+e.slice(4);return i[e]=this.setter(t,n)}return t[e]instanceof Function?t[e]:i[e]=function(){return t[e]}},r.Tag=function(t,e){this.setDom(t),this.$=s.build(this),this.$up=this._owner_=e,this._tree_=null,this.FLAGS=0,this.build()},r.Tag.buildNode=function(){var t=r.document().createElement(this._nodeType||"div");if(this._classes){var e=this._classes.join(" ");e&&(t.className=e)}return t},r.Tag.createNode=function(){return(this._protoDom||(this._protoDom=this.buildNode())).cloneNode(!1)},r.Tag.build=function(t){return new this(this.createNode(),t)},r.Tag.dom=function(){return this._protoDom||(this._protoDom=this.buildNode())},r.Tag.end=function(){return this.commit(0)},r.Tag.inherit=function(t){return t._protoDom=null,this._nodeType?(t._nodeType=this._nodeType,t._classes=this._classes.slice(),t._flagName?t._classes.push(t._flagName):void 0):(t._nodeType=t._name,t._flagName=null,t._classes=[])},r.Tag.prototype.optimizeTagStructure=function(){var t=this.constructor;let e=Object.keys(this);e.indexOf("mount")>=0&&(t._classes&&-1==t._classes.indexOf("__mount")&&t._classes.push("__mount"),t._protoDom&&t._protoDom.classList.add("__mount"));for(let t,n=0,o=i(e),s=o.length;n<s;n++)t=o[n],/^on/.test(t)&&r.EventManager.bind(t.slice(2));return this},r.attr(r.Tag,"accesskey"),r.attr(r.Tag,"autocapitalize"),r.attr(r.Tag,"contenteditable"),r.attr(r.Tag,"contextmenu"),r.attr(r.Tag,"dir"),r.attr(r.Tag,"draggable"),r.attr(r.Tag,"dropzone"),r.attr(r.Tag,"hidden"),r.attr(r.Tag,"inputmode"),r.attr(r.Tag,"itemid"),r.attr(r.Tag,"itemprop"),r.attr(r.Tag,"itemref"),r.attr(r.Tag,"itemscope"),r.attr(r.Tag,"itemtype"),r.attr(r.Tag,"lang"),r.attr(r.Tag,"name"),r.attr(r.Tag,"role"),r.attr(r.Tag,"slot"),r.attr(r.Tag,"spellcheck"),r.attr(r.Tag,"tabindex"),r.Tag.prototype.title=function(t){return this.getAttribute("title")},r.Tag.prototype.setTitle=function(t){return this.setAttribute("title",t),this},r.attr(r.Tag,"translate"),r.Tag.prototype.dom=function(){return this._dom},r.Tag.prototype.setDom=function(t){return t._tag=this,this._dom=this._slot_=t,this},r.Tag.prototype.ref=function(){return this._ref},r.Tag.prototype.root=function(){return this._owner_?this._owner_.root():this},r.Tag.prototype.ref_=function(t){return this.flag(this._ref=t),this},r.Tag.prototype.setData=function(t){return this._data=t,this},r.Tag.prototype.data=function(){return this._data},r.Tag.prototype.bindData=function(t,e,n){return this.setData(n?t[e].apply(t,n):t[e])},r.Tag.prototype.setHtml=function(t){return this.html()!=t&&(this._dom.innerHTML=t),this},r.Tag.prototype.html=function(){return this._dom.innerHTML},r.Tag.prototype.on$=function(t,e,n){let i=this._on_||(this._on_=[]),o=i[t];return t<0&&(t=null==o?i[t]=i.length:o,o=i[t]),i[t]=e,o?e.state=o.state:(e.state={context:n},r.EventManager.bind(e[0])),this},r.Tag.prototype.setId=function(t){return null!=t&&(this.dom().id=t),this},r.Tag.prototype.id=function(){return this.dom().id},r.Tag.prototype.setAttribute=function(t,e){return this.dom().getAttribute(t)==e||(null!=e&&!1!==e?this.dom().setAttribute(t,e):this.dom().removeAttribute(t)),this},r.Tag.prototype.setNestedAttr=function(t,e,n,i){return this[t+"SetAttribute"]?this[t+"SetAttribute"](e,n,i):this.setAttributeNS(t,e,n),this},r.Tag.prototype.setAttributeNS=function(t,e,n){return this.getAttributeNS(t,e)!=n&&(null!=n&&!1!==n?this.dom().setAttributeNS(t,e,n):this.dom().removeAttributeNS(t,e)),this},r.Tag.prototype.removeAttribute=function(t){return this.dom().removeAttribute(t)},r.Tag.prototype.getAttribute=function(t){return this.dom().getAttribute(t)},r.Tag.prototype.getAttributeNS=function(t,e){return this.dom().getAttributeNS(t,e)},r.Tag.prototype.set=function(t,e,n){let i=r.toSetter(t);return this[i]instanceof Function?this[i](e,n):this._dom.setAttribute(t,e),this},r.Tag.prototype.get=function(t){return this._dom.getAttribute(t)},r.Tag.prototype.setContent=function(t,e){return this.setChildren(t,e),this},r.Tag.prototype.setChildren=function(t,e){return this._tree_=t,this},r.Tag.prototype.setTemplate=function(t){return this._template||this.render==r.Tag.prototype.render&&(this.render=this.renderTemplate),this.template=this._template=t,this},r.Tag.prototype.template=function(){return null},r.Tag.prototype.renderTemplate=function(){var t=this.template();return t!=this&&this.setChildren(t),this},r.Tag.prototype.removeChild=function(t){var e=this.dom(),n=t._slot_||t;return n&&n.parentNode==e&&(r.TagManager.remove(n._tag||n,this),e.removeChild(n)),this},r.Tag.prototype.removeAllChildren=function(){if(this._dom.firstChild)for(var t;t=this._dom.firstChild;)r.TagManager.remove(t._tag||t,this),this._dom.removeChild(t);return this._tree_=this._text_=null,this},r.Tag.prototype.appendChild=function(t){return"string"==typeof t||t instanceof String?this.dom().appendChild(r.document().createTextNode(t)):t&&(this.dom().appendChild(t._slot_||t),r.TagManager.insert(t._tag||t,this)),this},r.Tag.prototype.insertBefore=function(t,e){return("string"==typeof t||t instanceof String)&&(t=r.document().createTextNode(t)),t&&e&&(this.dom().insertBefore(t._slot_||t,e._slot_||e),r.TagManager.insert(t._tag||t,this)),this},r.Tag.prototype.detachFromParent=function(){return this._slot_==this._dom&&(this._slot_=this._dom._placeholder_||(this._dom._placeholder_=r.document().createComment("node")),this._slot_._tag||(this._slot_._tag=this),this._dom.parentNode&&(r.TagManager.remove(this,this._dom.parentNode),this._dom.parentNode.replaceChild(this._slot_,this._dom))),this},r.Tag.prototype.attachToParent=function(){if(this._slot_!=this._dom){let t=this._slot_;this._slot_=this._dom,t&&t.parentNode&&(r.TagManager.insert(this),t.parentNode.replaceChild(this._dom,t))}return this},r.Tag.prototype.orphanize=function(){var t;return(t=this.parent())&&t.removeChild(this),this},r.Tag.prototype.text=function(t){return this._dom.textContent},r.Tag.prototype.setText=function(t){return this._tree_=t,this._dom.textContent=null==t||!1===this.text()?"":t,this},r.Tag.prototype.dataset=function(t,e){if(t instanceof Object){for(let e,n,i=0,r=Object.keys(t),o=r.length;i<o;i++)n=r[i],e=t[n],this.dataset(n,e);return this}if(2==arguments.length)return this.setAttribute("data-"+t,e),this;if(t)return this.getAttribute("data-"+t);var n=this.dom().dataset;if(!n){n={};for(let t,e=0,o=i(this.dom().attributes),s=o.length;e<s;e++)t=o[e],"data-"==t.name.substr(0,5)&&(n[r.toCamelCase(t.name.slice(5))]=t.value)}return n},r.Tag.prototype.render=function(){return this},r.Tag.prototype.build=function(){return this},r.Tag.prototype.setup=function(){return this},r.Tag.prototype.commit=function(){return!1!==this.beforeRender()&&this.render(),this},r.Tag.prototype.beforeRender=function(){return this},r.Tag.prototype.tick=function(){return!1!==this.beforeRender()&&this.render(),this},r.Tag.prototype.end=function(){return this.setup(),this.commit(0),this.end=r.Tag.end,this},r.Tag.prototype.$open=function(t){return t!=this._context_&&(this._tree_=null,this._context_=t),this},r.Tag.prototype.synced=function(){return this},r.Tag.prototype.awaken=function(){return this},r.Tag.prototype.flags=function(){return this._dom.classList},r.Tag.prototype.flag=function(t,e){return 2==arguments.length?this._dom.classList.contains(t)!=!!e&&this._dom.classList.toggle(t):this._dom.classList.contains(t)||this._dom.classList.add(t),this},r.Tag.prototype.unflag=function(t){return this._dom.classList.remove(t),this},r.Tag.prototype.toggleFlag=function(t){return this._dom.classList.toggle(t),this},r.Tag.prototype.hasFlag=function(t){return this._dom.classList.contains(t)},r.Tag.prototype.flagIf=function(t,e){var n=this._flags_||(this._flags_={});let i=n[t];return e&&!i?(this._dom.classList.add(t),n[t]=!0):i&&!e&&(this._dom.classList.remove(t),n[t]=!1),this},r.Tag.prototype.setFlag=function(t,e){let n=this._namedFlags_||(this._namedFlags_={}),i=n[t];return i!=e&&(i&&this.unflag(i),e&&this.flag(e),n[t]=e),this},r.Tag.prototype.scheduler=function(){return null==this._scheduler?this._scheduler=new r.Scheduler(this):this._scheduler},r.Tag.prototype.schedule=function(t){return void 0===t&&(t={events:!0}),this.scheduler().configure(t).activate(),this},r.Tag.prototype.unschedule=function(){return this._scheduler&&this.scheduler().deactivate(),this},r.Tag.prototype.parent=function(){return r.getTagForDom(this.dom().parentNode)},r.Tag.prototype.children=function(t){let e=[];for(let t,n=0,o=i(this._dom.children),s=o.length;n<s;n++)t=o[n],e.push(t._tag||r.getTagForDom(t));return e},r.Tag.prototype.querySelector=function(t){return r.getTagForDom(this._dom.querySelector(t))},r.Tag.prototype.querySelectorAll=function(t){var e=[];for(let n=0,o=i(this._dom.querySelectorAll(t)),s=o.length;n<s;n++)e.push(r.getTagForDom(o[n]));return e},r.Tag.prototype.matches=function(t){var e;return t instanceof Function?t(this):(t.query instanceof Function&&(t=t.query()),(e=this._dom.matches||this._dom.matchesSelector||this._dom.webkitMatchesSelector||this._dom.msMatchesSelector||this._dom.mozMatchesSelector)?e.call(this._dom,t):void 0)},r.Tag.prototype.closest=function(t){return r.getTagForDom(this._dom.closest(t))},r.Tag.prototype.contains=function(t){return this.dom().contains(t._dom||t)},r.Tag.prototype.log=function(){for(var t=arguments,e=t.length,n=new Array(e>0?e:0);e>0;)n[e-1]=t[--e];return n.unshift(console),Function.prototype.call.apply(console.log,n),this},r.Tag.prototype.css=function(t,e,n){if(t instanceof Object){for(let e,n,i=0,r=Object.keys(t),o=r.length;i<o;i++)n=r[i],e=t[n],this.css(n,e);return this}var i=r.CSSKeyMap[t]||t;if(null==e)this.dom().style.removeProperty(i);else{if(null==e&&1==arguments.length)return this.dom().style[i];i.match(/^--/)?this.dom().style.setProperty(i,e):("number"==typeof e||e instanceof Number)&&(i.match(/width|height|left|right|top|bottom/)||n&&n.px)?this.dom().style[i]=e+"px":this.dom().style[i]=e}return this},r.Tag.prototype.setStyle=function(t){return this.setAttribute("style",t)},r.Tag.prototype.style=function(){return this.getAttribute("style")},r.Tag.prototype.trigger=function(t,e){return void 0===e&&(e={}),r.Events.trigger(t,this,{data:e})},r.Tag.prototype.focus=function(){return this.dom().focus(),this},r.Tag.prototype.blur=function(){return this.dom().blur(),this},r.Tag.prototype.toString=function(){return this.dom().outerHTML},r.Tag.prototype.initialize=r.Tag,r.SVGTag=function(){return r.Tag.apply(this,arguments)},r.subclass(r.SVGTag,r.Tag),r.SVGTag.namespaceURI=function(){return"http://www.w3.org/2000/svg"},r.SVGTag.buildNode=function(){var t=r.document().createElementNS(this.namespaceURI(),this._nodeType);if(this._classes){var e=this._classes.join(" ");e&&(t.className.baseVal=e)}return t},r.SVGTag.inherit=function(t){if(t._protoDom=null,this==r.SVGTag)return t._nodeType=t._name,t._classes=[];t._nodeType=this._nodeType;var e=(this._classes||[]).slice(0);return r.TAG_AUTOCLASS_SVG&&t._flagName&&e.push(t._flagName),t._classes=e},r.HTML_TAGS="a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr".split(" "),r.HTML_TAGS_UNSAFE="article aside header section".split(" "),r.HTML_ATTRS={a:"href target hreflang media download rel type ping referrerpolicy",audio:"autoplay controls crossorigin loop muted preload src",area:"alt coords download href hreflang ping referrerpolicy rel shape target",base:"href target",video:"autoplay buffered controls crossorigin height loop muted preload poster src width playsinline",fieldset:"disabled form name",form:"method action enctype autocomplete target",button:"autofocus type form formaction formenctype formmethod formnovalidate formtarget value name",embed:"height src type width",input:"accept disabled form list max maxlength min minlength pattern required size step type",label:"accesskey for form",img:"alt src srcset crossorigin decoding height importance intrinsicsize ismap referrerpolicy sizes width usemap",link:"rel type href media",iframe:"allow allowfullscreen allowpaymentrequest height importance name referrerpolicy sandbox src srcdoc width frameborder align longdesc scrolling",meta:"property content charset desc http-equiv color-scheme name scheme",map:"name",optgroup:"label",option:"label",output:"for form",object:"type data width height",param:"name type value valuetype",progress:"max",script:"src type async defer crossorigin integrity nonce language nomodule",select:"size form multiple",source:"sizes src srcset type media",textarea:"rows cols minlength maxlength form wrap",track:"default kind label src srclang",td:"colspan rowspan headers",th:"colspan rowspan"},r.HTML_PROPS={input:"autofocus autocomplete autocapitalize autocorrect value placeholder required disabled multiple checked readOnly spellcheck",textarea:"autofocus autocomplete autocapitalize autocorrect value placeholder required disabled multiple checked readOnly spellcheck",form:"novalidate",fieldset:"disabled",button:"disabled",select:"autofocus disabled required readOnly multiple",option:"disabled selected value",optgroup:"disabled",progress:"value",fieldset:"disabled",canvas:"width height"};function s(t){this._tag=t}function a(t,e,n){this.cache$=t,this.key$=e,this.par$=n,this.i$=0}function u(t){this._ns=t,this._flags=t?["_"+t]:[]}r.Tags=function(){},r.Tags.prototype.__clone=function(t){var e=Object.create(this);return e._parent=this,e},r.Tags.prototype.ns=function(t){return this["_"+t.toUpperCase()]||this.defineNamespace(t)},r.Tags.prototype.defineNamespace=function(t){var e=Object.create(this);return e._parent=this,e._ns=t,this["_"+t.toUpperCase()]=e,e},r.Tags.prototype.baseType=function(t,e){return r.indexOf(t,r.HTML_TAGS)>=0?"element":"div"},r.Tags.prototype.defineTag=function(t,e,n,i){var o,s;null==i&&"function"==typeof n&&(i=n,n=""),null==n&&(n=""),i&&i._nodeType&&(n=i,i=null),this[e]&&console.log("tag already exists?",e);var a=e;let u=a.indexOf(":");u>=0&&(s=e.substr(0,u),a=e.substr(u+1),"svg"!=s||n||(n="svg:element")),n||(n=this.baseType(e));let p="string"==typeof n||n instanceof String?this.findTagType(n):n,c=function(t,e){return this.initialize(t,e),this};return c._name=a,c._flagName=null,"#"==a[0]?(r.SINGLETONS[a.slice(1)]=c,this[a]=c):a[0]==a[0].toUpperCase()?r.TAG_AUTOCLASS_LOCALS&&(c._flagName=a):(r.TAG_AUTOCLASS_GLOBALS&&(c._flagName="_"+e.replace(/[_\:]/g,"-")),this[e]=c),function(t,e){for(let n,i,r=0,o=Object.keys(e),s=o.length;r<s;r++)i=o[r],n=e[i],null==t[i]?t[i]=n:t[i];t.prototype=Object.create(e.prototype),t.__super__=t.prototype.__super__=e.prototype,t.prototype.constructor=t,e.inherit&&e.inherit(t)}(c,p),t&&t.scope&&t.scope.flags()&&(o=c._classes).push.apply(o,t.scope.flags()),i&&(i.call(c,c,c.TAGS||this),c.defined&&c.defined(),this.optimizeTag(c)),c},r.Tags.prototype.extendTag=function(t,e,n,i){null==i&&"function"==typeof n&&(i=n,n=""),null==n&&(n="");var r="string"==typeof e||e instanceof String?this.findTagType(e):e;return i&&i&&i.call(r,r,r.prototype),r.extended&&r.extended(),this.optimizeTag(r),r},r.Tags.prototype.optimizeTag=function(t){var e;return(e=t.prototype)&&e.optimizeTagStructure&&e.optimizeTagStructure()},r.Tags.prototype.findTagType=function(t){var e,n;if(!t)throw"Expected a valid tag but got falsy type, did you forget to export it?";let o=this[t];if(!o)if("svg:"==t.substr(0,4))o=this.defineTag(null,t,"svg:element");else if(r.HTML_TAGS.indexOf(t)>=0){if(o=this.defineTag(null,t,"element"),e=r.HTML_ATTRS[t])for(let t=0,n=i(e.split(" ")),s=n.length;t<s;t++)r.attr(o,n[t]);if(n=r.HTML_PROPS[t])for(let t=0,e=i(n.split(" ")),s=e.length;t<s;t++)r.attr(o,e[t],{dom:!0})}return o},r.createElement=function(t,e,n,i){var s,u,p=t;return p=t instanceof Function?t:r.TAGS.findTagType(t),s=e instanceof a?e.par$:i instanceof r.Tag?i:e&&null!=i?e[i]:e&&e._tag||e,null==p&&globalThis&&globalThis.imba?(u=globalThis.imba.document.createElement(t),u=o.build(u)):u=p.build(s),e instanceof a&&(e.i$++,u.$key=n),e&&null!=n&&(e[n]=u),u},r.createElementFactory=function(t){return t?function(e,n,i,o){var s=r.createElement(e,n,i,o);return s._dom.classList.add("_"+t),s}:r.createElement},r.createTagScope=function(t){return new u(t)},r.createTagCache=function(t){var e=[];return e._tag=t,e},r.createTagMap=function(t,e,n){var i=new a(t,e,null!=n?n:t._tag);return t[e]=i,i},r.createTagList=function(t,e,n){var i=[];return i._type=4,i._tag=null!=n?n:t._tag,t[e]=i,i},r.createTagLoopResult=function(t,e,n){var i=[];return i._type=5,i.cache={i$:0},i},s.build=function(t){var e=[];return e._tag=t,e},a.prototype.$iter=function(){var t=[];return t._type=5,t.cache=this,t},a.prototype.$prune=function(t){let e=this.cache$,n=this.key$,r=new a(e,n,this.par$);for(let e,n=0,o=i(t),s=o.length;n<s;n++)e=o[n],r[e.key$]=e;return r.i$=t.length,e[n]=r},u.prototype.ns=function(t){return this._ns},u.prototype.setNs=function(t){return this._ns=t,this},u.prototype.flags=function(t){return this._flags},u.prototype.setFlags=function(t){return this._flags=t,this},u.prototype.defineTag=function(t,e,n){return null==n&&"function"==typeof e&&(n=e,e=""),null==e&&(e=""),r.TAGS.defineTag({scope:this},t,e,n)},u.prototype.extendTag=function(t,e){return r.TAGS.extendTag({scope:this},t,e)},r.TagMap=a,r.TagCache=s,r.SINGLETONS={},r.TAGS=new r.Tags,r.TAGS.element=r.TAGS.htmlelement=r.Tag,r.TAGS["svg:element"]=r.SVGTag,r.attr(r.Tag,"is"),r.defineTag=function(t,e,n){return null==n&&"function"==typeof e&&(n=e,e=""),null==e&&(e=""),r.TAGS.defineTag({},t,e,n)},r.extendTag=function(t,e){return r.TAGS.extendTag({},t,e)},r.getTagSingleton=function(t){var e,n,i;return(e=r.SINGLETONS[t])?e&&e.Instance?e.Instance:(n=r.document().getElementById(t))?((i=e.Instance=new e(n)).awaken(n),i):((n=e.createNode()).id=t,(i=e.Instance=new e(n)).end().awaken(n),i):(n=r.document().getElementById(t))?r.getTagForDom(n):void 0};var p="undefined"!=typeof SVGElement;r.getTagForDom=function(t){if(!t)return null;if(t._dom)return t;if(t._tag)return t._tag;if(!t.nodeName)return null;var e=t.nodeName.toLowerCase(),n=r.TAGS;return t.id&&r.SINGLETONS[t.id]?r.getTagSingleton(t.id):new(p&&t instanceof SVGElement?n.findTagType("svg:"+e):r.HTML_TAGS.indexOf(e)>=0?n.findTagType(e):r.Tag)(t,null).awaken(t)},r.Tag},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(6);function o(t,e,n){this._node=t,this._path=e,this._args=n,this._args&&(this._setter=r.toSetter(this._path))}r.createTagScope().defineTag("fragment","element",(function(t){t.createNode=function(){return r.document().createDocumentFragment()}})),r.createTagScope().extendTag("html",(function(t){t.prototype.parent=function(){return null}})),r.createTagScope().extendTag("canvas",(function(t){t.prototype.context=function(t){return void 0===t&&(t="2d"),this.dom().getContext(t)}})),o.bind=function(t,e,n,i){return(t._data||(t._data=new this(t,n,i))).bind(e,n,i),t},o.prototype.bind=function(t,e,n){return t!=this._data&&(this._data=t),this},o.prototype.getFormValue=function(){return this._setter?this._data[this._path]():this._data[this._path]},o.prototype.setFormValue=function(t){return this._setter?this._data[this._setter](t):this._data[this._path]=t};var s=function(t){return t&&t.splice&&t.sort};r.createTagScope().extendTag("input",(function(t){t.prototype.lazy=function(t){return this._lazy},t.prototype.setLazy=function(t){return this._lazy=t,this},t.prototype.number=function(t){return this._number},t.prototype.setNumber=function(t){return this._number=t,this},t.prototype.bindData=function(t,e,n){return o.bind(this,t,e,n),this},t.prototype.checked=function(){return this._dom.checked},t.prototype.setChecked=function(t){return!!t!=this._dom.checked&&(this._dom.checked=!!t),this},t.prototype.setValue=function(t,e){return null!=this._localValue&&null!=e||(this.dom().value=this._value=t,this._localValue=void 0),this},t.prototype.setType=function(t){return this.dom().type=this._type=t,this},t.prototype.value=function(){let t=this._dom.value;return this._number&&t?parseFloat(t):t},t.prototype.oninput=function(t){let e=this._dom.value;this._localValue=e,this._data&&!this.lazy()&&"radio"!=this.type()&&"checkbox"!=this.type()&&this._data.setFormValue(this.value(),this)},t.prototype.onchange=function(t){if(this._modelValue=this._localValue=void 0,this.data()){if("radio"!=this.type()&&"checkbox"!=this.type())return this._data.setFormValue(this.value());{let t=this.checked(),e=this._data.getFormValue(this),n=null!=this._value?this._value:this.value();if("radio"==this.type())return this._data.setFormValue(n,this);if("on"==this.dom().value||null==this.dom().value)return this._data.setFormValue(!!t,this);if(!s(e))return this._data.setFormValue(n,this);{let i=e.indexOf(n);if(t&&-1==i)return e.push(n);if(!t&&i>=0)return e.splice(i,1)}}}},t.prototype.onblur=function(t){return this._localValue=void 0},t.prototype.end=function(){if(void 0!==this._localValue||!this._data)return this;let t=this._data.getFormValue(this);if(t===this._modelValue)return this;if(s(t)||(this._modelValue=t),"radio"==this.type()||"checkbox"==this.type()){let e=this._value,n=s(t)?t.indexOf(e)>=0:"on"==this.dom().value||null==this.dom().value?!!t:t==this._value;this.setChecked(n)}else this._dom.value=t;return this}})),r.createTagScope().extendTag("textarea",(function(t){t.prototype.lazy=function(t){return this._lazy},t.prototype.setLazy=function(t){return this._lazy=t,this},t.prototype.bindData=function(t,e,n){return o.bind(this,t,e,n),this},t.prototype.setValue=function(t,e){return null!=this._localValue&&null!=e||(this.dom().value=t,this._localValue=void 0),this},t.prototype.oninput=function(t){let e=this._dom.value;if(this._localValue=e,this._data&&!this.lazy())return this._data.setFormValue(this.value(),this)},t.prototype.onchange=function(t){if(this._localValue=void 0,this._data)return this._data.setFormValue(this.value(),this)},t.prototype.onblur=function(t){return this._localValue=void 0},t.prototype.render=function(){if(null==this._localValue&&this._data){if(this._data){let t=this._data.getFormValue(this);this._dom.value=null!=t?t:""}return this}}})),r.createTagScope().extendTag("option",(function(t){t.prototype.setValue=function(t){return t!=this._value&&(this.dom().value=this._value=t),this},t.prototype.value=function(){return this._value||this.dom().value}})),r.createTagScope().extendTag("select",(function(t){t.prototype.bindData=function(t,e,n){return o.bind(this,t,e,n),this},t.prototype.setValue=function(t,e){this._value;return this._value=t,e||this.syncValue(t),this},t.prototype.syncValue=function(t){let e=this._syncValue;if(this.multiple()&&t instanceof Array){if(e instanceof Array&&function(t,e){let n=t.length,i=0;if(n!=e.length)return!1;for(;i++<n;)if(t[i]!=e[i])return!1;return!0}(e,t))return this;t=t.slice()}if(this._syncValue=t,"object"==typeof t){let e=this.multiple()&&t instanceof Array;for(let n,r=0,o=i(this.dom().options),s=o.length;r<s;r++){n=o[r];let i=n._tag?n._tag.value():n.value;if(e)n.selected=t.indexOf(i)>=0;else if(t==i){this.dom().selectedIndex=r;break}}}else this.dom().value=t;return this},t.prototype.value=function(){if(this.multiple()){let t=[];for(let e,n=0,r=i(this.dom().selectedOptions),o=r.length;n<o;n++)e=r[n],t.push(e._tag?e._tag.value():e.value);return t}{let t=this.dom().selectedOptions[0];return t?t._tag?t._tag.value():t.value:null}},t.prototype.onchange=function(t){if(this._data)return this._data.setFormValue(this.value(),this)},t.prototype.end=function(){return this._data&&this.setValue(this._data.getFormValue(this),1),this._value!=this._syncValue&&this.syncValue(this._value),this}}))},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(6);r.Touch=function(t,e){return this.setEvent(t),this.setData({}),this.setActive(!0),this._button=t&&t.button||0,this._suppress=!1,this._captured=!1,this.setBubble(!1),e=e,this.setUpdates(0),this},r.Touch.LastTimestamp=0,r.Touch.TapTimeout=50;var o=[],s=0,a={};r.Touch.count=function(){return s},r.Touch.lookup=function(t){return t&&(t.__touch__||a[t.identifier])},r.Touch.release=function(t,e){a[t.identifier],delete a[t.identifier],t.__touch__,delete t.__touch__},r.Touch.ontouchstart=function(t){for(let n,r=0,u=i(t.changedTouches),p=u.length;r<p;r++)if(n=u[r],!this.lookup(n)){var e=a[n.identifier]=new this(t);n.__touch__=e,o.push(e),s++,e.touchstart(t,n)}return this},r.Touch.ontouchmove=function(t){var e;for(let n,r=0,o=i(t.changedTouches),s=o.length;r<s;r++)n=o[r],(e=this.lookup(n))&&e.touchmove(t,n);return this},r.Touch.ontouchend=function(t){var e;for(let n,r=0,o=i(t.changedTouches),a=o.length;r<a;r++)n=o[r],(e=this.lookup(n))&&(e.touchend(t,n),this.release(n,e),s--);return this},r.Touch.ontouchcancel=function(t){var e;for(let n,r=0,o=i(t.changedTouches),a=o.length;r<a;r++)n=o[r],(e=this.lookup(n))&&(e.touchcancel(t,n),this.release(n,e),s--);return this},r.Touch.onmousedown=function(t){return this},r.Touch.onmousemove=function(t){return this},r.Touch.onmouseup=function(t){return this},r.Touch.prototype.phase=function(t){return this._phase},r.Touch.prototype.setPhase=function(t){return this._phase=t,this},r.Touch.prototype.active=function(t){return this._active},r.Touch.prototype.setActive=function(t){return this._active=t,this},r.Touch.prototype.event=function(t){return this._event},r.Touch.prototype.setEvent=function(t){return this._event=t,this},r.Touch.prototype.pointer=function(t){return this._pointer},r.Touch.prototype.setPointer=function(t){return this._pointer=t,this},r.Touch.prototype.target=function(t){return this._target},r.Touch.prototype.setTarget=function(t){return this._target=t,this},r.Touch.prototype.handler=function(t){return this._handler},r.Touch.prototype.setHandler=function(t){return this._handler=t,this},r.Touch.prototype.updates=function(t){return this._updates},r.Touch.prototype.setUpdates=function(t){return this._updates=t,this},r.Touch.prototype.suppress=function(t){return this._suppress},r.Touch.prototype.setSuppress=function(t){return this._suppress=t,this},r.Touch.prototype.data=function(t){return this._data},r.Touch.prototype.setData=function(t){return this._data=t,this},r.Touch.prototype.__bubble={chainable:!0,name:"bubble"},r.Touch.prototype.bubble=function(t){return void 0!==t?(this.setBubble(t),this):this._bubble},r.Touch.prototype.setBubble=function(t){return this._bubble=t,this},r.Touch.prototype.timestamp=function(t){return this._timestamp},r.Touch.prototype.setTimestamp=function(t){return this._timestamp=t,this},r.Touch.prototype.gestures=function(t){return this._gestures},r.Touch.prototype.setGestures=function(t){return this._gestures=t,this},r.Touch.prototype.capture=function(){return this._captured=!0,this._event&&this._event.stopPropagation(),this._selblocker||(this._selblocker=function(t){return t.preventDefault()},r.document().addEventListener("selectstart",this._selblocker,!0)),this},r.Touch.prototype.isCaptured=function(){return!!this._captured},r.Touch.prototype.extend=function(t){return this._gestures||(this._gestures=[]),this._gestures.push(t),this},r.Touch.prototype.redirect=function(t){return this._redirect=t,this},r.Touch.prototype.suppress=function(){return this._active=!1,this},r.Touch.prototype.setSuppress=function(t){return console.warn("Imba.Touch#suppress= is deprecated"),this._supress=t,this},r.Touch.prototype.touchstart=function(t,e){return this._event=t,this._touch=e,this._button=0,this._x=e.clientX,this._y=e.clientY,this.began(),this.update(),t&&this.isCaptured()&&t.preventDefault(),this},r.Touch.prototype.touchmove=function(t,e){return this._event=t,this._x=e.clientX,this._y=e.clientY,this.update(),t&&this.isCaptured()&&t.preventDefault(),this},r.Touch.prototype.touchend=function(t,e){if(this._event=t,this._x=e.clientX,this._y=e.clientY,this.ended(),r.Touch.LastTimestamp=t.timeStamp,this._maxdr<20){var n=new r.Event(t);n.setType("tap"),n.process()}return t&&this.isCaptured()&&t.preventDefault(),this},r.Touch.prototype.touchcancel=function(t,e){return this.cancel()},r.Touch.prototype.mousedown=function(t,e){var n=this;return n._event=t,n._button=t.button,n._x=e.clientX,n._y=e.clientY,n.began(),n.update(),n._mousemove=function(t){return n.mousemove(t,t)},r.document().addEventListener("mousemove",n._mousemove,!0),n},r.Touch.prototype.mousemove=function(t,e){return this._x=e.clientX,this._y=e.clientY,this._event=t,this.isCaptured()&&t.preventDefault(),this.update(),this.move(),this},r.Touch.prototype.mouseup=function(t,e){return this._x=e.clientX,this._y=e.clientY,this.ended(),this},r.Touch.prototype.idle=function(){return this.update()},r.Touch.prototype.began=function(){this._timestamp=Date.now(),this._maxdr=this._dr=0,this._x0=this._x,this._y0=this._y;var t=this.event().target,e=null;for(this._sourceTarget=t&&r.getTagForDom(t);t&&(!(e=r.getTagForDom(t))||!e.ontouchstart||(this._bubble=!1,this.setTarget(e),this.target().ontouchstart(this),this._bubble));)t=t.parentNode;return this._updates++,this},r.Touch.prototype.update=function(){var t;if(!this._active||this._cancelled)return this;var e=Math.sqrt(this.dx()*this.dx()+this.dy()*this.dy());if(e>this._dr&&(this._maxdr=e),this._dr=e,this._redirect&&(this._target&&this._target.ontouchcancel&&this._target.ontouchcancel(this),this.setTarget(this._redirect),this._redirect=null,this.target().ontouchstart&&this.target().ontouchstart(this),this._redirect))return this.update();if(this._updates++,this._gestures)for(let t=0,e=i(this._gestures),n=e.length;t<n;t++)e[t].ontouchupdate(this);return(t=this.target())&&t.ontouchupdate&&t.ontouchupdate(this),this._redirect&&this.update(),this},r.Touch.prototype.move=function(){var t;if(!this._active||this._cancelled)return this;if(this._gestures)for(let t,e=0,n=i(this._gestures),r=n.length;e<r;e++)t=n[e],t.ontouchmove&&t.ontouchmove(this,this._event);return(t=this.target())&&t.ontouchmove&&t.ontouchmove(this,this._event),this},r.Touch.prototype.ended=function(){var t;if(!this._active||this._cancelled)return this;if(this._updates++,this._gestures)for(let t=0,e=i(this._gestures),n=e.length;t<n;t++)e[t].ontouchend(this);return(t=this.target())&&t.ontouchend&&t.ontouchend(this),this.cleanup_(),this},r.Touch.prototype.cancel=function(){return this._cancelled||(this._cancelled=!0,this.cancelled(),this.cleanup_()),this},r.Touch.prototype.cancelled=function(){var t;if(!this._active)return this;if(this._cancelled=!0,this._updates++,this._gestures)for(let t,e=0,n=i(this._gestures),r=n.length;e<r;e++)t=n[e],t.ontouchcancel&&t.ontouchcancel(this);return(t=this.target())&&t.ontouchcancel&&t.ontouchcancel(this),this},r.Touch.prototype.cleanup_=function(){return this._mousemove&&(r.document().removeEventListener("mousemove",this._mousemove,!0),this._mousemove=null),this._selblocker&&(r.document().removeEventListener("selectstart",this._selblocker,!0),this._selblocker=null),this},r.Touch.prototype.dr=function(){return this._dr},r.Touch.prototype.dx=function(){return this._x-this._x0},r.Touch.prototype.dy=function(){return this._y-this._y0},r.Touch.prototype.x0=function(){return this._x0},r.Touch.prototype.y0=function(){return this._y0},r.Touch.prototype.x=function(){return this._x},r.Touch.prototype.y=function(){return this._y},r.Touch.prototype.tx=function(){return this._targetBox||(this._targetBox=this._target.dom().getBoundingClientRect()),this._x-this._targetBox.left},r.Touch.prototype.ty=function(){return this._targetBox||(this._targetBox=this._target.dom().getBoundingClientRect()),this._y-this._targetBox.top},r.Touch.prototype.button=function(){return this._button},r.Touch.prototype.sourceTarget=function(){return this._sourceTarget},r.Touch.prototype.elapsed=function(){return Date.now()-this._timestamp},r.TouchGesture=function(){},r.TouchGesture.prototype.__active={default:!1,name:"active"},r.TouchGesture.prototype.active=function(t){return this._active},r.TouchGesture.prototype.setActive=function(t){return this._active=t,this},r.TouchGesture.prototype._active=!1,r.TouchGesture.prototype.ontouchstart=function(t){return this},r.TouchGesture.prototype.ontouchupdate=function(t){return this},r.TouchGesture.prototype.ontouchend=function(t){return this}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(6),o={esc:27,tab:9,enter:13,space:32,up:38,down:40},s=r.Tag.prototype;s.stopModifier=function(t){return t.stop()||!0},s.preventModifier=function(t){return t.prevent()||!0},s.silenceModifier=function(t){return t.silence()||!0},s.bubbleModifier=function(t){return t.bubble(!0)||!0},s.ctrlModifier=function(t){return 1==t.event().ctrlKey},s.altModifier=function(t){return 1==t.event().altKey},s.shiftModifier=function(t){return 1==t.event().shiftKey},s.metaModifier=function(t){return 1==t.event().metaKey},s.keyModifier=function(t,e){return!e.keyCode()||e.keyCode()==t},s.delModifier=function(t){return!t.keyCode()||(8==t.keyCode()||46==t.keyCode())},s.selfModifier=function(t){return t.event().target==this._dom},s.leftModifier=function(t){return null!=t.button()?0===t.button():s.keyModifier(37,t)},s.rightModifier=function(t){return null!=t.button()?2===t.button():s.keyModifier(39,t)},s.middleModifier=function(t){return null==t.button()||1===t.button()},s.getHandler=function(t,e){return this[t]?this:this._owner_&&this._owner_.getHandler?this._owner_.getHandler(t,e):void 0},r.Event=function(t){this.setEvent(t),this._bubble=!0},r.Event.prototype.event=function(t){return this._event},r.Event.prototype.setEvent=function(t){return this._event=t,this},r.Event.prototype.prefix=function(t){return this._prefix},r.Event.prototype.setPrefix=function(t){return this._prefix=t,this},r.Event.prototype.source=function(t){return this._source},r.Event.prototype.setSource=function(t){return this._source=t,this},r.Event.prototype.data=function(t){return this._data},r.Event.prototype.setData=function(t){return this._data=t,this},r.Event.prototype.responder=function(t){return this._responder},r.Event.prototype.setResponder=function(t){return this._responder=t,this},r.Event.wrap=function(t){return new this(t)},r.Event.prototype.setType=function(t){return this._type=t,this},r.Event.prototype.type=function(){return this._type||this.event().type},r.Event.prototype.native=function(){return this._event},r.Event.prototype.name=function(){return this._name||(this._name=this.type().toLowerCase().replace(/\:/g,""))},r.Event.prototype.bubble=function(t){return null!=t?(this.setBubble(t),this):this._bubble},r.Event.prototype.setBubble=function(t){return this._bubble=t,this},r.Event.prototype.stop=function(){return this.setBubble(!1),this},r.Event.prototype.stopPropagation=function(){return this.stop()},r.Event.prototype.halt=function(){return this.stop()},r.Event.prototype.prevent=function(){return this.event().preventDefault?this.event().preventDefault():this.event().defaultPrevented=!0,this.defaultPrevented=!0,this},r.Event.prototype.preventDefault=function(){return console.warn("Event#preventDefault is deprecated - use Event#prevent"),this.prevent()},r.Event.prototype.isPrevented=function(){return this.event()&&this.event().defaultPrevented},r.Event.prototype.cancel=function(){return console.warn("Event#cancel is deprecated - use Event#prevent"),this.prevent()},r.Event.prototype.silence=function(){return this._silenced=!0,this},r.Event.prototype.isSilenced=function(){return!!this._silenced},r.Event.prototype.target=function(){return r.getTagForDom(this.event()._target||this.event().target)},r.Event.prototype.responder=function(){return this._responder},r.Event.prototype.redirect=function(t){return this._redirect=t,this},r.Event.prototype.processHandlers=function(t,e){let n=1,s=e.length,a=this._bubble,u=e.state||(e.state={});for(a&&(this._bubble=1);n<s;){let s=!1,a=e[n++],p=null,c=t,h=!1;if(a instanceof Array&&(p=a.slice(1),h=!0,a=a[0]),"string"==typeof a){o[a]&&(p=[o[a]],a="key");let e=a+"Modifier";t[e]&&(s=!0,p=(p||[]).concat([this,u]),a=t[e])}if("string"==typeof a){let t=null,e=u.context;e&&(e.getHandler instanceof Function&&(e=e.getHandler(a,this)),e[a]instanceof Function&&(a=t=e[a],c=e)),t||console.warn("event "+this.type()+": could not find '"+a+"' in context",e)}if(a instanceof Function){if(h)for(let e,n=0,r=i(p),o=r.length;n<o;n++)if(e=r[n],"string"==typeof e&&"~"==e[0]&&"$"==e[1]){let i=e.slice(2);"event"==i?p[n]=this:this[i]instanceof Function?p[n]=this[i]():t[i]instanceof Function?p[n]=t[i]():console.warn("Missing special handler $"+i)}let e=a.apply(c,p||[this]);if(s||this._responder||(this._responder=t),0==e)break;e&&!this._silenced&&e.then instanceof Function&&e.then(r.commit)}}return 1===this._bubble&&(this._bubble=a),null},r.Event.prototype.process=function(){for(var t,e,n=this.name(),r="on"+(this._prefix||"")+n,o=this.event()._target||this.event().target,s=o._responder||o;s;){this._redirect=null;let o=s._dom?s:s._tag;if(o){if(e=o._on_){for(let t,r=0,s=i(e),a=s.length;r<a;r++){if(t=s[r],!t)continue;t[0];n==t[0]&&this.bubble()&&this.processHandlers(o,t)}if(!this.bubble())break}this.bubble()&&o[r]instanceof Function&&(this._responder||(this._responder=o),this._silenced=!1,t=o[r](this,this.data())),o.onevent&&o.onevent(this)}if(!this.bubble()||!(s=this._redirect||(o?o.parent():s.parentNode)))break}return this.processed(),t&&t.then instanceof Function&&t.then(this.processed.bind(this)),this},r.Event.prototype.processed=function(){return!this._silenced&&this._responder&&(r.emit(r,"event",[this]),r.commit(this.event())),this},r.Event.prototype.x=function(){return this.native().x},r.Event.prototype.y=function(){return this.native().y},r.Event.prototype.button=function(){return this.native().button},r.Event.prototype.keyCode=function(){return this.native().keyCode},r.Event.prototype.ctrl=function(){return this.native().ctrlKey},r.Event.prototype.alt=function(){return this.native().altKey},r.Event.prototype.shift=function(){return this.native().shiftKey},r.Event.prototype.meta=function(){return this.native().metaKey},r.Event.prototype.key=function(){return this.native().key},r.Event.prototype.which=function(){return this.event().which}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r={},o=n(6),s=function(t,e,n){if(e instanceof Array)for(let r=0,o=i(e),a=o.length;r<a;r++)s(t,o[r],n);else if(e&&e._slot_)t.removeChild(e);else if(null!=e){let i=n?n.nextSibling:t._dom.firstChild;if(!(i instanceof Text&&i.textContent==e))throw"cannot remove string";t.removeChild(i)}return n},a=function(t,e){if(e instanceof Array){let n=0,i=e.taglen,r=null!=i?e.domlen=i:e.length;for(;n<r;)a(t,e[n++])}else e&&e._dom?t.appendChild(e):null!=e&&!1!==e&&t.appendChild(o.createTextNode(e))},u=function(t,e,n){if(e instanceof Array){let i=0,r=e.taglen,o=null!=r?e.domlen=r:e.length;for(;i<o;)u(t,e[i++],n)}else e&&e._dom?t.insertBefore(e,n):null!=e&&!1!==e&&t.insertBefore(o.createTextNode(e),n);return n};r.insertNestedAfter=function(t,e,n){var i=n?n.nextSibling:t._dom.firstChild;return i?(u(t,e,i),i.previousSibling):(a(t,e),t._dom.lastChild)};var p=function(t,e,n,s){var a,u=e[e.length-1],p=[],c=[],h=[],l=0,d=0;for(let r,o=0,s=i(n),u=s.length;o<u;o++)if(r=s[o],r&&3==r.nodeType?((a=e.indexOf(r.textContent))>=0&&(e[a]=r),!0):a=e.indexOf(r),p.push(a),-1!=a){for(var f=p.length-2;f>=0;)if(-1==p[f])f--;else{if(a>p[f])break;f=c[f]}c.push(f);var y=-1==f?0:h[f]+1;y>l&&(l=y,d=o),h.push(y)}else t.removeChild(r),c.push(-1),h.push(-1);for(var m=[],g=p.length-1;g>=0;)g==d&&-1!=p[g]&&(m[p[g]]=!0,d=c[d]),g-=1;for(let n,a=0,u=i(e),p=u.length;a<p;a++){if(n=u[a],!m[a]){n&&n._dom||(n=e[a]=o.createTextNode(n));var _=e[a-1];r.insertNestedAfter(t,n,_&&_._slot_||_||s)}s=n._slot_||s&&s.nextSibling||t._dom.firstChild}return u&&u._slot_||s},c=function(t,e,n,i){for(var r=e.length,o=n.length,s=e.cache.i$,a=0,u=r-o;a<o&&a<r&&e[a]===n[a];)a++;if(s>1e3&&s-r>500&&e.cache.$prune(e),!(u>0&&a==o)){if(u>0){let i=r;for(;i>a&&e[i-1]===n[i-1-u];)i--;if(u==i-a){let r=n[a]._slot_;for(;a<i;)t.insertBefore(e[a++],r);return}}else{if(u<0&&a==r){for(;a<o;)t.removeChild(n[a++]);return}if(u<0){let i=o;for(;i>a&&e[i-1+u]===n[i-1];)i--;if(u==a-i){for(;a<i;)t.removeChild(n[a++]);return}}else if(a==r)return}return p(t,e,n,i)}for(;a<r;)t.appendChild(e[a++])},h=function(t,e,n,i){var r=e.taglen,o=e.domlen||0,s=r?e[r-1]:null;if(o>r)for(;o>r;){var a=e[--o];t.removeChild(a._slot_)}else if(r>o){let n=o?e[o-1]._slot_:i,s=n?n.nextSibling:t._dom.firstChild;for(;o<r;){let n=e[o++];s?t.insertBefore(n._slot_,s):t.appendChild(n._slot_)}}return e.domlen=r,s?s._slot_:i},l=function(t,e,n,o){var a=null==e||!1===e,u=null==n||!1===n;if(e===n)return a?o:e._slot_?e._slot_:e instanceof Array&&null!=e.taglen?h(t,e,0,o):o?o.nextSibling:t._dom.firstChild;if(e instanceof Array){if(n instanceof Array){let r=e.static;if(!r&&!n.static)return function(t,e,n,i){var r=e.length,o=r,s=e[r-1];if(r==n.length&&e[0]===n[0])for(;o--&&e[o]===n[o];);return-1==o?s&&s._slot_||s||i:p(t,e,n,i)}(t,e,n,o);if(r==n.static){for(let r=0,s=i(e),a=s.length;r<a;r++)o=l(t,s[r],n[r],o);return o}s(t,n,o)}else u||(n._slot_?t.removeChild(n):t.removeChild(o?o.nextSibling:t._dom.firstChild));return r.insertNestedAfter(t,e,o)}if(!a&&e._slot_)return u||s(t,n,o),r.insertNestedAfter(t,e,o);if(a)return u||s(t,n,o),o;{let i;if(n instanceof Array)s(t,n,o);else if(n&&n._slot_)t.removeChild(n);else if(!u&&(i=o?o.nextSibling:t._dom.firstChild,i instanceof Text&&i.textContent!=e))return i.textContent=e,i;return r.insertNestedAfter(t,e,o)}};o.createTagScope().extendTag("element",(function(t){t.prototype.setChildren=function(t,e){var n=this._tree_;if(t===n&&(!t||null==t.taglen))return this;if(n||3==e)if(1==e){let e=null;for(let r=0,o=i(t),s=o.length;r<s;r++)e=l(this,o[r],n[r],e)}else{if(2==e)return this;if(3==e){if("object"!=typeof t)return this.setText(t);if(t&&t._dom)this.removeAllChildren(),this.appendChild(t);else{if(!(t instanceof Array))return this.setText(t);5==t._type&&n&&5==n._type?c(this,t,n,null):n instanceof Array?l(this,t,n,null):(this.removeAllChildren(),a(this,t))}}else 4==e?h(this,t,0,null):5==e?c(this,t,n,null):t instanceof Array&&n instanceof Array?l(this,t,n,null):(this.removeAllChildren(),a(this,t))}else this.removeAllChildren(),a(this,t);return this._tree_=t,this},t.prototype.content=function(){return this._content||this.children().toArray()},t.prototype.setText=function(t){if(t!=this._tree_){var e=null===t||!1===t?"":t;(this._text_||this._dom).textContent=e,this._text_||(this._text_=this._dom.firstChild),this._tree_=t}return this}}));var d=o.Tag.prototype;d.setContent=d.setChildren,"undefined"!=typeof navigator&&0==(navigator.vendor||"").indexOf("Apple")&&(d.setText=function(t){return t!=this._tree_&&(this._dom.textContent=null===t||!1===t?"":t,this._tree_=t),this})},function(t,e){},function(t,e,n){var i=n(0).createTagScope();function r(t,e){void 0===e&&(e={}),this._target=t,this._vars={},this._changed={}}e.CSSVariables=r,r.prototype.get=function(t){return this._vars[t]},r.prototype.set=function(t,e){if(t instanceof Object){for(let e,n,i=0,r=Object.keys(t),o=r.length;i<o;i++)n=r[i],e=t[n],this.set(n,e);return this._target}return this._vars[t]==e||(this._vars[t]=e,this._changed[t]=!0,this._target.dom().style.setProperty("--"+t,e)),this._target},i.extendTag("element",(function(t){t.prototype.cssvars=function(){return this._cssvars||(this._cssvars=new r(this))},t.prototype.cssvarsSetAttribute=function(t,e){return this.cssvars().set(t,e),this},t.prototype.domsync=function(t,e,n){var i,r;let o=n.name,s=n.unit;if(n.var){let e="string"==typeof(i=n.var)||i instanceof String?n.var:o;this.cssvars().set(e,s?t+s:t)}return n.flag&&("string"==typeof t||t instanceof String?this.setFlag("$"+o,t):"string"==typeof(r=n.flag)||r instanceof String?this.flag(n.flag,!!t):this.flag(o,!!t)),this}}))},function(t,e,n){var i=n(0).createTagScope(),r=n(99);i.extendTag("element",(function(t){t.prototype.setIcon=function(t,e){if(void 0===e&&(e={}),t!=this._icon){this._icon=t;let i=t.split(".");if(r[i[0]]){this.flag("svg");for(let t=0,e=(n=i)?n.toArray?n.toArray():n:[],r=e.length;t<r;t++)this.setFlag("if"+t,e[t]);let t="<svg class='feather "+i.join(" ")+"' viewBox='0 0 24 24'>"+r[i[0]]+"</svg>";e.double&&(t="<svg class='feather "+i.join(" ")+" backdrop' viewBox='0 0 24 24'>"+r[i[0]]+"</svg>"+t),this.dom().innerHTML=t}else e.svg?(this.setSvg(t),this.flag("svg")):this.dataset({micon:t})}var n;return this}}))},function(t){t.exports=JSON.parse('{"activity":"<polyline points=\\"22 12 18 12 15 21 9 3 6 12 2 12\\"></polyline>","airplay":"<path d=\\"M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1\\"></path><polygon points=\\"12 15 17 21 7 21 12 15\\"></polygon>","alert-circle":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><line x1=\\"12\\" y1=\\"8\\" x2=\\"12\\" y2=\\"12\\"></line><line x1=\\"12\\" y1=\\"16\\" x2=\\"12\\" y2=\\"16\\"></line>","alert-octagon":"<polygon points=\\"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2\\"></polygon><line x1=\\"12\\" y1=\\"8\\" x2=\\"12\\" y2=\\"12\\"></line><line x1=\\"12\\" y1=\\"16\\" x2=\\"12\\" y2=\\"16\\"></line>","alert-triangle":"<path d=\\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\\"></path><line x1=\\"12\\" y1=\\"9\\" x2=\\"12\\" y2=\\"13\\"></line><line x1=\\"12\\" y1=\\"17\\" x2=\\"12\\" y2=\\"17\\"></line>","align-center":"<line x1=\\"18\\" y1=\\"10\\" x2=\\"6\\" y2=\\"10\\"></line><line x1=\\"21\\" y1=\\"6\\" x2=\\"3\\" y2=\\"6\\"></line><line x1=\\"21\\" y1=\\"14\\" x2=\\"3\\" y2=\\"14\\"></line><line x1=\\"18\\" y1=\\"18\\" x2=\\"6\\" y2=\\"18\\"></line>","align-justify":"<line x1=\\"21\\" y1=\\"10\\" x2=\\"3\\" y2=\\"10\\"></line><line x1=\\"21\\" y1=\\"6\\" x2=\\"3\\" y2=\\"6\\"></line><line x1=\\"21\\" y1=\\"14\\" x2=\\"3\\" y2=\\"14\\"></line><line x1=\\"21\\" y1=\\"18\\" x2=\\"3\\" y2=\\"18\\"></line>","align-left":"<line x1=\\"17\\" y1=\\"10\\" x2=\\"3\\" y2=\\"10\\"></line><line x1=\\"21\\" y1=\\"6\\" x2=\\"3\\" y2=\\"6\\"></line><line x1=\\"21\\" y1=\\"14\\" x2=\\"3\\" y2=\\"14\\"></line><line x1=\\"17\\" y1=\\"18\\" x2=\\"3\\" y2=\\"18\\"></line>","align-right":"<line x1=\\"21\\" y1=\\"10\\" x2=\\"7\\" y2=\\"10\\"></line><line x1=\\"21\\" y1=\\"6\\" x2=\\"3\\" y2=\\"6\\"></line><line x1=\\"21\\" y1=\\"14\\" x2=\\"3\\" y2=\\"14\\"></line><line x1=\\"21\\" y1=\\"18\\" x2=\\"7\\" y2=\\"18\\"></line>","anchor":"<circle cx=\\"12\\" cy=\\"5\\" r=\\"3\\"></circle><line x1=\\"12\\" y1=\\"22\\" x2=\\"12\\" y2=\\"8\\"></line><path d=\\"M5 12H2a10 10 0 0 0 20 0h-3\\"></path>","aperture":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><line x1=\\"14.31\\" y1=\\"8\\" x2=\\"20.05\\" y2=\\"17.94\\"></line><line x1=\\"9.69\\" y1=\\"8\\" x2=\\"21.17\\" y2=\\"8\\"></line><line x1=\\"7.38\\" y1=\\"12\\" x2=\\"13.12\\" y2=\\"2.06\\"></line><line x1=\\"9.69\\" y1=\\"16\\" x2=\\"3.95\\" y2=\\"6.06\\"></line><line x1=\\"14.31\\" y1=\\"16\\" x2=\\"2.83\\" y2=\\"16\\"></line><line x1=\\"16.62\\" y1=\\"12\\" x2=\\"10.88\\" y2=\\"21.94\\"></line>","archive":"<polyline points=\\"21 8 21 21 3 21 3 8\\"></polyline><rect x=\\"1\\" y=\\"3\\" width=\\"22\\" height=\\"5\\"></rect><line x1=\\"10\\" y1=\\"12\\" x2=\\"14\\" y2=\\"12\\"></line>","arrow-down-circle":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><polyline points=\\"8 12 12 16 16 12\\"></polyline><line x1=\\"12\\" y1=\\"8\\" x2=\\"12\\" y2=\\"16\\"></line>","arrow-down-left":"<line x1=\\"17\\" y1=\\"7\\" x2=\\"7\\" y2=\\"17\\"></line><polyline points=\\"17 17 7 17 7 7\\"></polyline>","arrow-down-right":"<line x1=\\"7\\" y1=\\"7\\" x2=\\"17\\" y2=\\"17\\"></line><polyline points=\\"17 7 17 17 7 17\\"></polyline>","arrow-down":"<line x1=\\"12\\" y1=\\"5\\" x2=\\"12\\" y2=\\"19\\"></line><polyline points=\\"19 12 12 19 5 12\\"></polyline>","arrow-left-circle":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><polyline points=\\"12 8 8 12 12 16\\"></polyline><line x1=\\"16\\" y1=\\"12\\" x2=\\"8\\" y2=\\"12\\"></line>","arrow-left":"<line x1=\\"19\\" y1=\\"12\\" x2=\\"5\\" y2=\\"12\\"></line><polyline points=\\"12 19 5 12 12 5\\"></polyline>","arrow-right-circle":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><polyline points=\\"12 16 16 12 12 8\\"></polyline><line x1=\\"8\\" y1=\\"12\\" x2=\\"16\\" y2=\\"12\\"></line>","arrow-right":"<line x1=\\"5\\" y1=\\"12\\" x2=\\"19\\" y2=\\"12\\"></line><polyline points=\\"12 5 19 12 12 19\\"></polyline>","arrow-up-circle":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><polyline points=\\"16 12 12 8 8 12\\"></polyline><line x1=\\"12\\" y1=\\"16\\" x2=\\"12\\" y2=\\"8\\"></line>","arrow-up-left":"<line x1=\\"17\\" y1=\\"17\\" x2=\\"7\\" y2=\\"7\\"></line><polyline points=\\"7 17 7 7 17 7\\"></polyline>","arrow-up-right":"<line x1=\\"7\\" y1=\\"17\\" x2=\\"17\\" y2=\\"7\\"></line><polyline points=\\"7 7 17 7 17 17\\"></polyline>","arrow-up":"<line x1=\\"12\\" y1=\\"19\\" x2=\\"12\\" y2=\\"5\\"></line><polyline points=\\"5 12 12 5 19 12\\"></polyline>","at-sign":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"4\\"></circle><path d=\\"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94\\"></path>","award":"<circle cx=\\"12\\" cy=\\"8\\" r=\\"7\\"></circle><polyline points=\\"8.21 13.89 7 23 12 20 17 23 15.79 13.88\\"></polyline>","bar-chart-2":"<line x1=\\"18\\" y1=\\"20\\" x2=\\"18\\" y2=\\"10\\"></line><line x1=\\"12\\" y1=\\"20\\" x2=\\"12\\" y2=\\"4\\"></line><line x1=\\"6\\" y1=\\"20\\" x2=\\"6\\" y2=\\"14\\"></line>","bar-chart":"<line x1=\\"12\\" y1=\\"20\\" x2=\\"12\\" y2=\\"10\\"></line><line x1=\\"18\\" y1=\\"20\\" x2=\\"18\\" y2=\\"4\\"></line><line x1=\\"6\\" y1=\\"20\\" x2=\\"6\\" y2=\\"16\\"></line>","battery-charging":"<path d=\\"M5 18H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3.19M15 6h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3.19\\"></path><line x1=\\"23\\" y1=\\"13\\" x2=\\"23\\" y2=\\"11\\"></line><polyline points=\\"11 6 7 12 13 12 9 18\\"></polyline>","battery":"<rect x=\\"1\\" y=\\"6\\" width=\\"18\\" height=\\"12\\" rx=\\"2\\" ry=\\"2\\"></rect><line x1=\\"23\\" y1=\\"13\\" x2=\\"23\\" y2=\\"11\\"></line>","bell-off":"<path d=\\"M13.73 21a2 2 0 0 1-3.46 0\\"></path><path d=\\"M18.63 13A17.89 17.89 0 0 1 18 8\\"></path><path d=\\"M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14\\"></path><path d=\\"M18 8a6 6 0 0 0-9.33-5\\"></path><line x1=\\"1\\" y1=\\"1\\" x2=\\"23\\" y2=\\"23\\"></line>","bell":"<path d=\\"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\\"></path><path d=\\"M13.73 21a2 2 0 0 1-3.46 0\\"></path>","bluetooth":"<polyline points=\\"6.5 6.5 17.5 17.5 12 23 12 1 17.5 6.5 6.5 17.5\\"></polyline>","bold":"<path d=\\"M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z\\"></path><path d=\\"M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z\\"></path>","book-open":"<path d=\\"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\\"></path><path d=\\"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\\"></path>","book":"<path d=\\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\\"></path><path d=\\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\\"></path>","bookmark":"<path d=\\"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z\\"></path>","box":"<path d=\\"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z\\"></path><polyline points=\\"3.27 6.96 12 12.01 20.73 6.96\\"></polyline><line x1=\\"12\\" y1=\\"22.08\\" x2=\\"12\\" y2=\\"12\\"></line>","briefcase":"<rect x=\\"2\\" y=\\"7\\" width=\\"20\\" height=\\"14\\" rx=\\"2\\" ry=\\"2\\"></rect><path d=\\"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16\\"></path>","calendar":"<rect x=\\"3\\" y=\\"4\\" width=\\"18\\" height=\\"18\\" rx=\\"2\\" ry=\\"2\\"></rect><line x1=\\"16\\" y1=\\"2\\" x2=\\"16\\" y2=\\"6\\"></line><line x1=\\"8\\" y1=\\"2\\" x2=\\"8\\" y2=\\"6\\"></line><line x1=\\"3\\" y1=\\"10\\" x2=\\"21\\" y2=\\"10\\"></line>","camera-off":"<line x1=\\"1\\" y1=\\"1\\" x2=\\"23\\" y2=\\"23\\"></line><path d=\\"M21 21H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3m3-3h6l2 3h4a2 2 0 0 1 2 2v9.34m-7.72-2.06a4 4 0 1 1-5.56-5.56\\"></path>","camera":"<path d=\\"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z\\"></path><circle cx=\\"12\\" cy=\\"13\\" r=\\"4\\"></circle>","cast":"<path d=\\"M2 16.1A5 5 0 0 1 5.9 20M2 12.05A9 9 0 0 1 9.95 20M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6\\"></path><line x1=\\"2\\" y1=\\"20\\" x2=\\"2\\" y2=\\"20\\"></line>","check-circle":"<path d=\\"M22 11.08V12a10 10 0 1 1-5.93-9.14\\"></path><polyline points=\\"22 4 12 14.01 9 11.01\\"></polyline>","check-square":"<polyline points=\\"9 11 12 14 22 4\\"></polyline><path d=\\"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11\\"></path>","check":"<polyline points=\\"20 6 9 17 4 12\\"></polyline>","chevron-down":"<polyline points=\\"6 9 12 15 18 9\\"></polyline>","chevron-left":"<polyline points=\\"15 18 9 12 15 6\\"></polyline>","chevron-right":"<polyline points=\\"9 18 15 12 9 6\\"></polyline>","chevron-up":"<polyline points=\\"18 15 12 9 6 15\\"></polyline>","chevrons-down":"<polyline points=\\"7 13 12 18 17 13\\"></polyline><polyline points=\\"7 6 12 11 17 6\\"></polyline>","chevrons-left":"<polyline points=\\"11 17 6 12 11 7\\"></polyline><polyline points=\\"18 17 13 12 18 7\\"></polyline>","chevrons-right":"<polyline points=\\"13 17 18 12 13 7\\"></polyline><polyline points=\\"6 17 11 12 6 7\\"></polyline>","chevrons-up":"<polyline points=\\"17 11 12 6 7 11\\"></polyline><polyline points=\\"17 18 12 13 7 18\\"></polyline>","chrome":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><circle cx=\\"12\\" cy=\\"12\\" r=\\"4\\"></circle><line x1=\\"21.17\\" y1=\\"8\\" x2=\\"12\\" y2=\\"8\\"></line><line x1=\\"3.95\\" y1=\\"6.06\\" x2=\\"8.54\\" y2=\\"14\\"></line><line x1=\\"10.88\\" y1=\\"21.94\\" x2=\\"15.46\\" y2=\\"14\\"></line>","circle":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle>","clipboard":"<path d=\\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\\"></path><rect x=\\"8\\" y=\\"2\\" width=\\"8\\" height=\\"4\\" rx=\\"1\\" ry=\\"1\\"></rect>","clock":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><polyline points=\\"12 6 12 12 16 14\\"></polyline>","cloud-drizzle":"<line x1=\\"8\\" y1=\\"19\\" x2=\\"8\\" y2=\\"21\\"></line><line x1=\\"8\\" y1=\\"13\\" x2=\\"8\\" y2=\\"15\\"></line><line x1=\\"16\\" y1=\\"19\\" x2=\\"16\\" y2=\\"21\\"></line><line x1=\\"16\\" y1=\\"13\\" x2=\\"16\\" y2=\\"15\\"></line><line x1=\\"12\\" y1=\\"21\\" x2=\\"12\\" y2=\\"23\\"></line><line x1=\\"12\\" y1=\\"15\\" x2=\\"12\\" y2=\\"17\\"></line><path d=\\"M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25\\"></path>","cloud-lightning":"<path d=\\"M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9\\"></path><polyline points=\\"13 11 9 17 15 17 11 23\\"></polyline>","cloud-off":"<path d=\\"M22.61 16.95A5 5 0 0 0 18 10h-1.26a8 8 0 0 0-7.05-6M5 5a8 8 0 0 0 4 15h9a5 5 0 0 0 1.7-.3\\"></path><line x1=\\"1\\" y1=\\"1\\" x2=\\"23\\" y2=\\"23\\"></line>","cloud-rain":"<line x1=\\"16\\" y1=\\"13\\" x2=\\"16\\" y2=\\"21\\"></line><line x1=\\"8\\" y1=\\"13\\" x2=\\"8\\" y2=\\"21\\"></line><line x1=\\"12\\" y1=\\"15\\" x2=\\"12\\" y2=\\"23\\"></line><path d=\\"M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25\\"></path>","cloud-snow":"<path d=\\"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25\\"></path><line x1=\\"8\\" y1=\\"16\\" x2=\\"8\\" y2=\\"16\\"></line><line x1=\\"8\\" y1=\\"20\\" x2=\\"8\\" y2=\\"20\\"></line><line x1=\\"12\\" y1=\\"18\\" x2=\\"12\\" y2=\\"18\\"></line><line x1=\\"12\\" y1=\\"22\\" x2=\\"12\\" y2=\\"22\\"></line><line x1=\\"16\\" y1=\\"16\\" x2=\\"16\\" y2=\\"16\\"></line><line x1=\\"16\\" y1=\\"20\\" x2=\\"16\\" y2=\\"20\\"></line>","cloud":"<path d=\\"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z\\"></path>","code":"<polyline points=\\"16 18 22 12 16 6\\"></polyline><polyline points=\\"8 6 2 12 8 18\\"></polyline>","codepen":"<polygon points=\\"12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2\\"></polygon><line x1=\\"12\\" y1=\\"22\\" x2=\\"12\\" y2=\\"15.5\\"></line><polyline points=\\"22 8.5 12 15.5 2 8.5\\"></polyline><polyline points=\\"2 15.5 12 8.5 22 15.5\\"></polyline><line x1=\\"12\\" y1=\\"2\\" x2=\\"12\\" y2=\\"8.5\\"></line>","codesandbox":"<path d=\\"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z\\"></path><polyline points=\\"7.5 4.21 12 6.81 16.5 4.21\\"></polyline><polyline points=\\"7.5 19.79 7.5 14.6 3 12\\"></polyline><polyline points=\\"21 12 16.5 14.6 16.5 19.79\\"></polyline><polyline points=\\"3.27 6.96 12 12.01 20.73 6.96\\"></polyline><line x1=\\"12\\" y1=\\"22.08\\" x2=\\"12\\" y2=\\"12\\"></line>","coffee":"<path d=\\"M18 8h1a4 4 0 0 1 0 8h-1\\"></path><path d=\\"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z\\"></path><line x1=\\"6\\" y1=\\"1\\" x2=\\"6\\" y2=\\"4\\"></line><line x1=\\"10\\" y1=\\"1\\" x2=\\"10\\" y2=\\"4\\"></line><line x1=\\"14\\" y1=\\"1\\" x2=\\"14\\" y2=\\"4\\"></line>","columns":"<path d=\\"M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18\\"></path>","command":"<path d=\\"M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z\\"></path>","compass":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><polygon points=\\"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76\\"></polygon>","copy":"<rect x=\\"9\\" y=\\"9\\" width=\\"13\\" height=\\"13\\" rx=\\"2\\" ry=\\"2\\"></rect><path d=\\"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\\"></path>","corner-down-left":"<polyline points=\\"9 10 4 15 9 20\\"></polyline><path d=\\"M20 4v7a4 4 0 0 1-4 4H4\\"></path>","corner-down-right":"<polyline points=\\"15 10 20 15 15 20\\"></polyline><path d=\\"M4 4v7a4 4 0 0 0 4 4h12\\"></path>","corner-left-down":"<polyline points=\\"14 15 9 20 4 15\\"></polyline><path d=\\"M20 4h-7a4 4 0 0 0-4 4v12\\"></path>","corner-left-up":"<polyline points=\\"14 9 9 4 4 9\\"></polyline><path d=\\"M20 20h-7a4 4 0 0 1-4-4V4\\"></path>","corner-right-down":"<polyline points=\\"10 15 15 20 20 15\\"></polyline><path d=\\"M4 4h7a4 4 0 0 1 4 4v12\\"></path>","corner-right-up":"<polyline points=\\"10 9 15 4 20 9\\"></polyline><path d=\\"M4 20h7a4 4 0 0 0 4-4V4\\"></path>","corner-up-left":"<polyline points=\\"9 14 4 9 9 4\\"></polyline><path d=\\"M20 20v-7a4 4 0 0 0-4-4H4\\"></path>","corner-up-right":"<polyline points=\\"15 14 20 9 15 4\\"></polyline><path d=\\"M4 20v-7a4 4 0 0 1 4-4h12\\"></path>","cpu":"<rect x=\\"4\\" y=\\"4\\" width=\\"16\\" height=\\"16\\" rx=\\"2\\" ry=\\"2\\"></rect><rect x=\\"9\\" y=\\"9\\" width=\\"6\\" height=\\"6\\"></rect><line x1=\\"9\\" y1=\\"1\\" x2=\\"9\\" y2=\\"4\\"></line><line x1=\\"15\\" y1=\\"1\\" x2=\\"15\\" y2=\\"4\\"></line><line x1=\\"9\\" y1=\\"20\\" x2=\\"9\\" y2=\\"23\\"></line><line x1=\\"15\\" y1=\\"20\\" x2=\\"15\\" y2=\\"23\\"></line><line x1=\\"20\\" y1=\\"9\\" x2=\\"23\\" y2=\\"9\\"></line><line x1=\\"20\\" y1=\\"14\\" x2=\\"23\\" y2=\\"14\\"></line><line x1=\\"1\\" y1=\\"9\\" x2=\\"4\\" y2=\\"9\\"></line><line x1=\\"1\\" y1=\\"14\\" x2=\\"4\\" y2=\\"14\\"></line>","credit-card":"<rect x=\\"1\\" y=\\"4\\" width=\\"22\\" height=\\"16\\" rx=\\"2\\" ry=\\"2\\"></rect><line x1=\\"1\\" y1=\\"10\\" x2=\\"23\\" y2=\\"10\\"></line>","crop":"<path d=\\"M6.13 1L6 16a2 2 0 0 0 2 2h15\\"></path><path d=\\"M1 6.13L16 6a2 2 0 0 1 2 2v15\\"></path>","crosshair":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><line x1=\\"22\\" y1=\\"12\\" x2=\\"18\\" y2=\\"12\\"></line><line x1=\\"6\\" y1=\\"12\\" x2=\\"2\\" y2=\\"12\\"></line><line x1=\\"12\\" y1=\\"6\\" x2=\\"12\\" y2=\\"2\\"></line><line x1=\\"12\\" y1=\\"22\\" x2=\\"12\\" y2=\\"18\\"></line>","database":"<ellipse cx=\\"12\\" cy=\\"5\\" rx=\\"9\\" ry=\\"3\\"></ellipse><path d=\\"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3\\"></path><path d=\\"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5\\"></path>","delete":"<path d=\\"M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z\\"></path><line x1=\\"18\\" y1=\\"9\\" x2=\\"12\\" y2=\\"15\\"></line><line x1=\\"12\\" y1=\\"9\\" x2=\\"18\\" y2=\\"15\\"></line>","disc":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><circle cx=\\"12\\" cy=\\"12\\" r=\\"3\\"></circle>","dollar-sign":"<line x1=\\"12\\" y1=\\"1\\" x2=\\"12\\" y2=\\"23\\"></line><path d=\\"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6\\"></path>","download-cloud":"<polyline points=\\"8 17 12 21 16 17\\"></polyline><line x1=\\"12\\" y1=\\"12\\" x2=\\"12\\" y2=\\"21\\"></line><path d=\\"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29\\"></path>","download":"<path d=\\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\\"></path><polyline points=\\"7 10 12 15 17 10\\"></polyline><line x1=\\"12\\" y1=\\"15\\" x2=\\"12\\" y2=\\"3\\"></line>","droplet":"<path d=\\"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z\\"></path>","edit-2":"<path d=\\"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z\\"></path>","edit-3":"<path d=\\"M12 20h9\\"></path><path d=\\"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z\\"></path>","edit":"<path d=\\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\\"></path><path d=\\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\\"></path>","external-link":"<path d=\\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\\"></path><polyline points=\\"15 3 21 3 21 9\\"></polyline><line x1=\\"10\\" y1=\\"14\\" x2=\\"21\\" y2=\\"3\\"></line>","eye-off":"<path d=\\"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24\\"></path><line x1=\\"1\\" y1=\\"1\\" x2=\\"23\\" y2=\\"23\\"></line>","eye":"<path d=\\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\\"></path><circle cx=\\"12\\" cy=\\"12\\" r=\\"3\\"></circle>","facebook":"<path d=\\"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z\\"></path>","fast-forward":"<polygon points=\\"13 19 22 12 13 5 13 19\\"></polygon><polygon points=\\"2 19 11 12 2 5 2 19\\"></polygon>","feather":"<path d=\\"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z\\"></path><line x1=\\"16\\" y1=\\"8\\" x2=\\"2\\" y2=\\"22\\"></line><line x1=\\"17.5\\" y1=\\"15\\" x2=\\"9\\" y2=\\"15\\"></line>","figma":"<path d=\\"M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z\\"></path><path d=\\"M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z\\"></path><path d=\\"M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z\\"></path><path d=\\"M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z\\"></path><path d=\\"M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z\\"></path>","file-minus":"<path d=\\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\\"></path><polyline points=\\"14 2 14 8 20 8\\"></polyline><line x1=\\"9\\" y1=\\"15\\" x2=\\"15\\" y2=\\"15\\"></line>","file-plus":"<path d=\\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\\"></path><polyline points=\\"14 2 14 8 20 8\\"></polyline><line x1=\\"12\\" y1=\\"18\\" x2=\\"12\\" y2=\\"12\\"></line><line x1=\\"9\\" y1=\\"15\\" x2=\\"15\\" y2=\\"15\\"></line>","file-text":"<path d=\\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\\"></path><polyline points=\\"14 2 14 8 20 8\\"></polyline><line x1=\\"16\\" y1=\\"13\\" x2=\\"8\\" y2=\\"13\\"></line><line x1=\\"16\\" y1=\\"17\\" x2=\\"8\\" y2=\\"17\\"></line><polyline points=\\"10 9 9 9 8 9\\"></polyline>","file":"<path d=\\"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z\\"></path><polyline points=\\"13 2 13 9 20 9\\"></polyline>","film":"<rect x=\\"2\\" y=\\"2\\" width=\\"20\\" height=\\"20\\" rx=\\"2.18\\" ry=\\"2.18\\"></rect><line x1=\\"7\\" y1=\\"2\\" x2=\\"7\\" y2=\\"22\\"></line><line x1=\\"17\\" y1=\\"2\\" x2=\\"17\\" y2=\\"22\\"></line><line x1=\\"2\\" y1=\\"12\\" x2=\\"22\\" y2=\\"12\\"></line><line x1=\\"2\\" y1=\\"7\\" x2=\\"7\\" y2=\\"7\\"></line><line x1=\\"2\\" y1=\\"17\\" x2=\\"7\\" y2=\\"17\\"></line><line x1=\\"17\\" y1=\\"17\\" x2=\\"22\\" y2=\\"17\\"></line><line x1=\\"17\\" y1=\\"7\\" x2=\\"22\\" y2=\\"7\\"></line>","filter":"<polygon points=\\"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\\"></polygon>","flag":"<path d=\\"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z\\"></path><line x1=\\"4\\" y1=\\"22\\" x2=\\"4\\" y2=\\"15\\"></line>","folder-minus":"<path d=\\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\\"></path><line x1=\\"9\\" y1=\\"14\\" x2=\\"15\\" y2=\\"14\\"></line>","folder-plus":"<path d=\\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\\"></path><line x1=\\"12\\" y1=\\"11\\" x2=\\"12\\" y2=\\"17\\"></line><line x1=\\"9\\" y1=\\"14\\" x2=\\"15\\" y2=\\"14\\"></line>","folder":"<path d=\\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\\"></path>","framer":"<path d=\\"M5 16V9h14V2H5l14 14h-7m-7 0l7 7v-7m-7 0h7\\"></path>","frown":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><path d=\\"M16 16s-1.5-2-4-2-4 2-4 2\\"></path><line x1=\\"9\\" y1=\\"9\\" x2=\\"9.01\\" y2=\\"9\\"></line><line x1=\\"15\\" y1=\\"9\\" x2=\\"15.01\\" y2=\\"9\\"></line>","gift":"<polyline points=\\"20 12 20 22 4 22 4 12\\"></polyline><rect x=\\"2\\" y=\\"7\\" width=\\"20\\" height=\\"5\\"></rect><line x1=\\"12\\" y1=\\"22\\" x2=\\"12\\" y2=\\"7\\"></line><path d=\\"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z\\"></path><path d=\\"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z\\"></path>","git-branch":"<line x1=\\"6\\" y1=\\"3\\" x2=\\"6\\" y2=\\"15\\"></line><circle cx=\\"18\\" cy=\\"6\\" r=\\"3\\"></circle><circle cx=\\"6\\" cy=\\"18\\" r=\\"3\\"></circle><path d=\\"M18 9a9 9 0 0 1-9 9\\"></path>","git-commit":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"4\\"></circle><line x1=\\"1.05\\" y1=\\"12\\" x2=\\"7\\" y2=\\"12\\"></line><line x1=\\"17.01\\" y1=\\"12\\" x2=\\"22.96\\" y2=\\"12\\"></line>","git-merge":"<circle cx=\\"18\\" cy=\\"18\\" r=\\"3\\"></circle><circle cx=\\"6\\" cy=\\"6\\" r=\\"3\\"></circle><path d=\\"M6 21V9a9 9 0 0 0 9 9\\"></path>","git-pull-request":"<circle cx=\\"18\\" cy=\\"18\\" r=\\"3\\"></circle><circle cx=\\"6\\" cy=\\"6\\" r=\\"3\\"></circle><path d=\\"M13 6h3a2 2 0 0 1 2 2v7\\"></path><line x1=\\"6\\" y1=\\"9\\" x2=\\"6\\" y2=\\"21\\"></line>","github":"<path d=\\"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22\\"></path>","gitlab":"<path d=\\"M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z\\"></path>","globe":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><line x1=\\"2\\" y1=\\"12\\" x2=\\"22\\" y2=\\"12\\"></line><path d=\\"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z\\"></path>","grid":"<rect x=\\"3\\" y=\\"3\\" width=\\"7\\" height=\\"7\\"></rect><rect x=\\"14\\" y=\\"3\\" width=\\"7\\" height=\\"7\\"></rect><rect x=\\"14\\" y=\\"14\\" width=\\"7\\" height=\\"7\\"></rect><rect x=\\"3\\" y=\\"14\\" width=\\"7\\" height=\\"7\\"></rect>","hard-drive":"<line x1=\\"22\\" y1=\\"12\\" x2=\\"2\\" y2=\\"12\\"></line><path d=\\"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z\\"></path><line x1=\\"6\\" y1=\\"16\\" x2=\\"6\\" y2=\\"16\\"></line><line x1=\\"10\\" y1=\\"16\\" x2=\\"10\\" y2=\\"16\\"></line>","hash":"<line x1=\\"4\\" y1=\\"9\\" x2=\\"20\\" y2=\\"9\\"></line><line x1=\\"4\\" y1=\\"15\\" x2=\\"20\\" y2=\\"15\\"></line><line x1=\\"10\\" y1=\\"3\\" x2=\\"8\\" y2=\\"21\\"></line><line x1=\\"16\\" y1=\\"3\\" x2=\\"14\\" y2=\\"21\\"></line>","headphones":"<path d=\\"M3 18v-6a9 9 0 0 1 18 0v6\\"></path><path d=\\"M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z\\"></path>","heart":"<path d=\\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\\"></path>","help-circle":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><path d=\\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\\"></path><line x1=\\"12\\" y1=\\"17\\" x2=\\"12\\" y2=\\"17\\"></line>","hexagon":"<path d=\\"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z\\"></path>","home":"<path d=\\"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\\"></path><polyline points=\\"9 22 9 12 15 12 15 22\\"></polyline>","image":"<rect x=\\"3\\" y=\\"3\\" width=\\"18\\" height=\\"18\\" rx=\\"2\\" ry=\\"2\\"></rect><circle cx=\\"8.5\\" cy=\\"8.5\\" r=\\"1.5\\"></circle><polyline points=\\"21 15 16 10 5 21\\"></polyline>","inbox":"<polyline points=\\"22 12 16 12 14 15 10 15 8 12 2 12\\"></polyline><path d=\\"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z\\"></path>","info":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><line x1=\\"12\\" y1=\\"16\\" x2=\\"12\\" y2=\\"12\\"></line><line x1=\\"12\\" y1=\\"8\\" x2=\\"12\\" y2=\\"8\\"></line>","instagram":"<rect x=\\"2\\" y=\\"2\\" width=\\"20\\" height=\\"20\\" rx=\\"5\\" ry=\\"5\\"></rect><path d=\\"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z\\"></path><line x1=\\"17.5\\" y1=\\"6.5\\" x2=\\"17.5\\" y2=\\"6.5\\"></line>","italic":"<line x1=\\"19\\" y1=\\"4\\" x2=\\"10\\" y2=\\"4\\"></line><line x1=\\"14\\" y1=\\"20\\" x2=\\"5\\" y2=\\"20\\"></line><line x1=\\"15\\" y1=\\"4\\" x2=\\"9\\" y2=\\"20\\"></line>","key":"<path d=\\"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4\\"></path>","layers":"<polygon points=\\"12 2 2 7 12 12 22 7 12 2\\"></polygon><polyline points=\\"2 17 12 22 22 17\\"></polyline><polyline points=\\"2 12 12 17 22 12\\"></polyline>","layout":"<rect x=\\"3\\" y=\\"3\\" width=\\"18\\" height=\\"18\\" rx=\\"2\\" ry=\\"2\\"></rect><line x1=\\"3\\" y1=\\"9\\" x2=\\"21\\" y2=\\"9\\"></line><line x1=\\"9\\" y1=\\"21\\" x2=\\"9\\" y2=\\"9\\"></line>","life-buoy":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><circle cx=\\"12\\" cy=\\"12\\" r=\\"4\\"></circle><line x1=\\"4.93\\" y1=\\"4.93\\" x2=\\"9.17\\" y2=\\"9.17\\"></line><line x1=\\"14.83\\" y1=\\"14.83\\" x2=\\"19.07\\" y2=\\"19.07\\"></line><line x1=\\"14.83\\" y1=\\"9.17\\" x2=\\"19.07\\" y2=\\"4.93\\"></line><line x1=\\"14.83\\" y1=\\"9.17\\" x2=\\"18.36\\" y2=\\"5.64\\"></line><line x1=\\"4.93\\" y1=\\"19.07\\" x2=\\"9.17\\" y2=\\"14.83\\"></line>","link-2":"<path d=\\"M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3\\"></path><line x1=\\"8\\" y1=\\"12\\" x2=\\"16\\" y2=\\"12\\"></line>","link":"<path d=\\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\\"></path><path d=\\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\\"></path>","linkedin":"<path d=\\"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z\\"></path><rect x=\\"2\\" y=\\"9\\" width=\\"4\\" height=\\"12\\"></rect><circle cx=\\"4\\" cy=\\"4\\" r=\\"2\\"></circle>","list":"<line x1=\\"8\\" y1=\\"6\\" x2=\\"21\\" y2=\\"6\\"></line><line x1=\\"8\\" y1=\\"12\\" x2=\\"21\\" y2=\\"12\\"></line><line x1=\\"8\\" y1=\\"18\\" x2=\\"21\\" y2=\\"18\\"></line><line x1=\\"3\\" y1=\\"6\\" x2=\\"3\\" y2=\\"6\\"></line><line x1=\\"3\\" y1=\\"12\\" x2=\\"3\\" y2=\\"12\\"></line><line x1=\\"3\\" y1=\\"18\\" x2=\\"3\\" y2=\\"18\\"></line>","loader":"<line x1=\\"12\\" y1=\\"2\\" x2=\\"12\\" y2=\\"6\\"></line><line x1=\\"12\\" y1=\\"18\\" x2=\\"12\\" y2=\\"22\\"></line><line x1=\\"4.93\\" y1=\\"4.93\\" x2=\\"7.76\\" y2=\\"7.76\\"></line><line x1=\\"16.24\\" y1=\\"16.24\\" x2=\\"19.07\\" y2=\\"19.07\\"></line><line x1=\\"2\\" y1=\\"12\\" x2=\\"6\\" y2=\\"12\\"></line><line x1=\\"18\\" y1=\\"12\\" x2=\\"22\\" y2=\\"12\\"></line><line x1=\\"4.93\\" y1=\\"19.07\\" x2=\\"7.76\\" y2=\\"16.24\\"></line><line x1=\\"16.24\\" y1=\\"7.76\\" x2=\\"19.07\\" y2=\\"4.93\\"></line>","lock":"<rect x=\\"3\\" y=\\"11\\" width=\\"18\\" height=\\"11\\" rx=\\"2\\" ry=\\"2\\"></rect><path d=\\"M7 11V7a5 5 0 0 1 10 0v4\\"></path>","log-in":"<path d=\\"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4\\"></path><polyline points=\\"10 17 15 12 10 7\\"></polyline><line x1=\\"15\\" y1=\\"12\\" x2=\\"3\\" y2=\\"12\\"></line>","log-out":"<path d=\\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\\"></path><polyline points=\\"16 17 21 12 16 7\\"></polyline><line x1=\\"21\\" y1=\\"12\\" x2=\\"9\\" y2=\\"12\\"></line>","mail":"<path d=\\"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z\\"></path><polyline points=\\"22,6 12,13 2,6\\"></polyline>","map-pin":"<path d=\\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\\"></path><circle cx=\\"12\\" cy=\\"10\\" r=\\"3\\"></circle>","map":"<polygon points=\\"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6\\"></polygon><line x1=\\"8\\" y1=\\"2\\" x2=\\"8\\" y2=\\"18\\"></line><line x1=\\"16\\" y1=\\"6\\" x2=\\"16\\" y2=\\"22\\"></line>","maximize-2":"<polyline points=\\"15 3 21 3 21 9\\"></polyline><polyline points=\\"9 21 3 21 3 15\\"></polyline><line x1=\\"21\\" y1=\\"3\\" x2=\\"14\\" y2=\\"10\\"></line><line x1=\\"3\\" y1=\\"21\\" x2=\\"10\\" y2=\\"14\\"></line>","maximize":"<path d=\\"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3\\"></path>","meh":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><line x1=\\"8\\" y1=\\"15\\" x2=\\"16\\" y2=\\"15\\"></line><line x1=\\"9\\" y1=\\"9\\" x2=\\"9.01\\" y2=\\"9\\"></line><line x1=\\"15\\" y1=\\"9\\" x2=\\"15.01\\" y2=\\"9\\"></line>","menu":"<line x1=\\"3\\" y1=\\"12\\" x2=\\"21\\" y2=\\"12\\"></line><line x1=\\"3\\" y1=\\"6\\" x2=\\"21\\" y2=\\"6\\"></line><line x1=\\"3\\" y1=\\"18\\" x2=\\"21\\" y2=\\"18\\"></line>","message-circle":"<path d=\\"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z\\"></path>","message-square":"<path d=\\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\\"></path>","mic-off":"<line x1=\\"1\\" y1=\\"1\\" x2=\\"23\\" y2=\\"23\\"></line><path d=\\"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6\\"></path><path d=\\"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23\\"></path><line x1=\\"12\\" y1=\\"19\\" x2=\\"12\\" y2=\\"23\\"></line><line x1=\\"8\\" y1=\\"23\\" x2=\\"16\\" y2=\\"23\\"></line>","mic":"<path d=\\"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z\\"></path><path d=\\"M19 10v2a7 7 0 0 1-14 0v-2\\"></path><line x1=\\"12\\" y1=\\"19\\" x2=\\"12\\" y2=\\"23\\"></line><line x1=\\"8\\" y1=\\"23\\" x2=\\"16\\" y2=\\"23\\"></line>","minimize-2":"<polyline points=\\"4 14 10 14 10 20\\"></polyline><polyline points=\\"20 10 14 10 14 4\\"></polyline><line x1=\\"14\\" y1=\\"10\\" x2=\\"21\\" y2=\\"3\\"></line><line x1=\\"3\\" y1=\\"21\\" x2=\\"10\\" y2=\\"14\\"></line>","minimize":"<path d=\\"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3\\"></path>","minus-circle":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><line x1=\\"8\\" y1=\\"12\\" x2=\\"16\\" y2=\\"12\\"></line>","minus-square":"<rect x=\\"3\\" y=\\"3\\" width=\\"18\\" height=\\"18\\" rx=\\"2\\" ry=\\"2\\"></rect><line x1=\\"8\\" y1=\\"12\\" x2=\\"16\\" y2=\\"12\\"></line>","minus":"<line x1=\\"5\\" y1=\\"12\\" x2=\\"19\\" y2=\\"12\\"></line>","monitor":"<rect x=\\"2\\" y=\\"3\\" width=\\"20\\" height=\\"14\\" rx=\\"2\\" ry=\\"2\\"></rect><line x1=\\"8\\" y1=\\"21\\" x2=\\"16\\" y2=\\"21\\"></line><line x1=\\"12\\" y1=\\"17\\" x2=\\"12\\" y2=\\"21\\"></line>","moon":"<path d=\\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\\"></path>","more-horizontal":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"1\\"></circle><circle cx=\\"19\\" cy=\\"12\\" r=\\"1\\"></circle><circle cx=\\"5\\" cy=\\"12\\" r=\\"1\\"></circle>","more-vertical":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"1\\"></circle><circle cx=\\"12\\" cy=\\"5\\" r=\\"1\\"></circle><circle cx=\\"12\\" cy=\\"19\\" r=\\"1\\"></circle>","mouse-pointer":"<path d=\\"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z\\"></path><path d=\\"M13 13l6 6\\"></path>","move":"<polyline points=\\"5 9 2 12 5 15\\"></polyline><polyline points=\\"9 5 12 2 15 5\\"></polyline><polyline points=\\"15 19 12 22 9 19\\"></polyline><polyline points=\\"19 9 22 12 19 15\\"></polyline><line x1=\\"2\\" y1=\\"12\\" x2=\\"22\\" y2=\\"12\\"></line><line x1=\\"12\\" y1=\\"2\\" x2=\\"12\\" y2=\\"22\\"></line>","music":"<path d=\\"M9 18V5l12-2v13\\"></path><circle cx=\\"6\\" cy=\\"18\\" r=\\"3\\"></circle><circle cx=\\"18\\" cy=\\"16\\" r=\\"3\\"></circle>","navigation-2":"<polygon points=\\"12 2 19 21 12 17 5 21 12 2\\"></polygon>","navigation":"<polygon points=\\"3 11 22 2 13 21 11 13 3 11\\"></polygon>","octagon":"<polygon points=\\"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2\\"></polygon>","package":"<line x1=\\"16.5\\" y1=\\"9.4\\" x2=\\"7.5\\" y2=\\"4.21\\"></line><path d=\\"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z\\"></path><polyline points=\\"3.27 6.96 12 12.01 20.73 6.96\\"></polyline><line x1=\\"12\\" y1=\\"22.08\\" x2=\\"12\\" y2=\\"12\\"></line>","paperclip":"<path d=\\"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48\\"></path>","pause-circle":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><line x1=\\"10\\" y1=\\"15\\" x2=\\"10\\" y2=\\"9\\"></line><line x1=\\"14\\" y1=\\"15\\" x2=\\"14\\" y2=\\"9\\"></line>","pause":"<rect x=\\"6\\" y=\\"4\\" width=\\"4\\" height=\\"16\\"></rect><rect x=\\"14\\" y=\\"4\\" width=\\"4\\" height=\\"16\\"></rect>","pen-tool":"<path d=\\"M12 19l7-7 3 3-7 7-3-3z\\"></path><path d=\\"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\\"></path><path d=\\"M2 2l7.586 7.586\\"></path><circle cx=\\"11\\" cy=\\"11\\" r=\\"2\\"></circle>","percent":"<line x1=\\"19\\" y1=\\"5\\" x2=\\"5\\" y2=\\"19\\"></line><circle cx=\\"6.5\\" cy=\\"6.5\\" r=\\"2.5\\"></circle><circle cx=\\"17.5\\" cy=\\"17.5\\" r=\\"2.5\\"></circle>","phone-call":"<path d=\\"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\\"></path>","phone-forwarded":"<polyline points=\\"19 1 23 5 19 9\\"></polyline><line x1=\\"15\\" y1=\\"5\\" x2=\\"23\\" y2=\\"5\\"></line><path d=\\"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\\"></path>","phone-incoming":"<polyline points=\\"16 2 16 8 22 8\\"></polyline><line x1=\\"23\\" y1=\\"1\\" x2=\\"16\\" y2=\\"8\\"></line><path d=\\"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\\"></path>","phone-missed":"<line x1=\\"23\\" y1=\\"1\\" x2=\\"17\\" y2=\\"7\\"></line><line x1=\\"17\\" y1=\\"1\\" x2=\\"23\\" y2=\\"7\\"></line><path d=\\"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\\"></path>","phone-off":"<path d=\\"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91\\"></path><line x1=\\"23\\" y1=\\"1\\" x2=\\"1\\" y2=\\"23\\"></line>","phone-outgoing":"<polyline points=\\"23 7 23 1 17 1\\"></polyline><line x1=\\"16\\" y1=\\"8\\" x2=\\"23\\" y2=\\"1\\"></line><path d=\\"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\\"></path>","phone":"<path d=\\"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\\"></path>","pie-chart":"<path d=\\"M21.21 15.89A10 10 0 1 1 8 2.83\\"></path><path d=\\"M22 12A10 10 0 0 0 12 2v10z\\"></path>","play-circle":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><polygon points=\\"10 8 16 12 10 16 10 8\\"></polygon>","play":"<polygon points=\\"5 3 19 12 5 21 5 3\\"></polygon>","plus-circle":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><line x1=\\"12\\" y1=\\"8\\" x2=\\"12\\" y2=\\"16\\"></line><line x1=\\"8\\" y1=\\"12\\" x2=\\"16\\" y2=\\"12\\"></line>","plus-square":"<rect x=\\"3\\" y=\\"3\\" width=\\"18\\" height=\\"18\\" rx=\\"2\\" ry=\\"2\\"></rect><line x1=\\"12\\" y1=\\"8\\" x2=\\"12\\" y2=\\"16\\"></line><line x1=\\"8\\" y1=\\"12\\" x2=\\"16\\" y2=\\"12\\"></line>","plus":"<line x1=\\"12\\" y1=\\"5\\" x2=\\"12\\" y2=\\"19\\"></line><line x1=\\"5\\" y1=\\"12\\" x2=\\"19\\" y2=\\"12\\"></line>","pocket":"<path d=\\"M4 3h16a2 2 0 0 1 2 2v6a10 10 0 0 1-10 10A10 10 0 0 1 2 11V5a2 2 0 0 1 2-2z\\"></path><polyline points=\\"8 10 12 14 16 10\\"></polyline>","power":"<path d=\\"M18.36 6.64a9 9 0 1 1-12.73 0\\"></path><line x1=\\"12\\" y1=\\"2\\" x2=\\"12\\" y2=\\"12\\"></line>","printer":"<polyline points=\\"6 9 6 2 18 2 18 9\\"></polyline><path d=\\"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2\\"></path><rect x=\\"6\\" y=\\"14\\" width=\\"12\\" height=\\"8\\"></rect>","radio":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"2\\"></circle><path d=\\"M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14\\"></path>","refresh-ccw":"<polyline points=\\"1 4 1 10 7 10\\"></polyline><polyline points=\\"23 20 23 14 17 14\\"></polyline><path d=\\"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15\\"></path>","refresh-cw":"<polyline points=\\"23 4 23 10 17 10\\"></polyline><polyline points=\\"1 20 1 14 7 14\\"></polyline><path d=\\"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15\\"></path>","repeat":"<polyline points=\\"17 1 21 5 17 9\\"></polyline><path d=\\"M3 11V9a4 4 0 0 1 4-4h14\\"></path><polyline points=\\"7 23 3 19 7 15\\"></polyline><path d=\\"M21 13v2a4 4 0 0 1-4 4H3\\"></path>","rewind":"<polygon points=\\"11 19 2 12 11 5 11 19\\"></polygon><polygon points=\\"22 19 13 12 22 5 22 19\\"></polygon>","rotate-ccw":"<polyline points=\\"1 4 1 10 7 10\\"></polyline><path d=\\"M3.51 15a9 9 0 1 0 2.13-9.36L1 10\\"></path>","rotate-cw":"<polyline points=\\"23 4 23 10 17 10\\"></polyline><path d=\\"M20.49 15a9 9 0 1 1-2.12-9.36L23 10\\"></path>","rss":"<path d=\\"M4 11a9 9 0 0 1 9 9\\"></path><path d=\\"M4 4a16 16 0 0 1 16 16\\"></path><circle cx=\\"5\\" cy=\\"19\\" r=\\"1\\"></circle>","save":"<path d=\\"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\\"></path><polyline points=\\"17 21 17 13 7 13 7 21\\"></polyline><polyline points=\\"7 3 7 8 15 8\\"></polyline>","scissors":"<circle cx=\\"6\\" cy=\\"6\\" r=\\"3\\"></circle><circle cx=\\"6\\" cy=\\"18\\" r=\\"3\\"></circle><line x1=\\"20\\" y1=\\"4\\" x2=\\"8.12\\" y2=\\"15.88\\"></line><line x1=\\"14.47\\" y1=\\"14.48\\" x2=\\"20\\" y2=\\"20\\"></line><line x1=\\"8.12\\" y1=\\"8.12\\" x2=\\"12\\" y2=\\"12\\"></line>","search":"<circle cx=\\"11\\" cy=\\"11\\" r=\\"8\\"></circle><line x1=\\"21\\" y1=\\"21\\" x2=\\"16.65\\" y2=\\"16.65\\"></line>","send":"<line x1=\\"22\\" y1=\\"2\\" x2=\\"11\\" y2=\\"13\\"></line><polygon points=\\"22 2 15 22 11 13 2 9 22 2\\"></polygon>","server":"<rect x=\\"2\\" y=\\"2\\" width=\\"20\\" height=\\"8\\" rx=\\"2\\" ry=\\"2\\"></rect><rect x=\\"2\\" y=\\"14\\" width=\\"20\\" height=\\"8\\" rx=\\"2\\" ry=\\"2\\"></rect><line x1=\\"6\\" y1=\\"6\\" x2=\\"6\\" y2=\\"6\\"></line><line x1=\\"6\\" y1=\\"18\\" x2=\\"6\\" y2=\\"18\\"></line>","settings":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"3\\"></circle><path d=\\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\\"></path>","share-2":"<circle cx=\\"18\\" cy=\\"5\\" r=\\"3\\"></circle><circle cx=\\"6\\" cy=\\"12\\" r=\\"3\\"></circle><circle cx=\\"18\\" cy=\\"19\\" r=\\"3\\"></circle><line x1=\\"8.59\\" y1=\\"13.51\\" x2=\\"15.42\\" y2=\\"17.49\\"></line><line x1=\\"15.41\\" y1=\\"6.51\\" x2=\\"8.59\\" y2=\\"10.49\\"></line>","share":"<path d=\\"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8\\"></path><polyline points=\\"16 6 12 2 8 6\\"></polyline><line x1=\\"12\\" y1=\\"2\\" x2=\\"12\\" y2=\\"15\\"></line>","shield-off":"<path d=\\"M19.69 14a6.9 6.9 0 0 0 .31-2V5l-8-3-3.16 1.18\\"></path><path d=\\"M4.73 4.73L4 5v7c0 6 8 10 8 10a20.29 20.29 0 0 0 5.62-4.38\\"></path><line x1=\\"1\\" y1=\\"1\\" x2=\\"23\\" y2=\\"23\\"></line>","shield":"<path d=\\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\\"></path>","shopping-bag":"<path d=\\"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z\\"></path><line x1=\\"3\\" y1=\\"6\\" x2=\\"21\\" y2=\\"6\\"></line><path d=\\"M16 10a4 4 0 0 1-8 0\\"></path>","shopping-cart":"<circle cx=\\"9\\" cy=\\"21\\" r=\\"1\\"></circle><circle cx=\\"20\\" cy=\\"21\\" r=\\"1\\"></circle><path d=\\"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6\\"></path>","shuffle":"<polyline points=\\"16 3 21 3 21 8\\"></polyline><line x1=\\"4\\" y1=\\"20\\" x2=\\"21\\" y2=\\"3\\"></line><polyline points=\\"21 16 21 21 16 21\\"></polyline><line x1=\\"15\\" y1=\\"15\\" x2=\\"21\\" y2=\\"21\\"></line><line x1=\\"4\\" y1=\\"4\\" x2=\\"9\\" y2=\\"9\\"></line>","sidebar":"<rect x=\\"3\\" y=\\"3\\" width=\\"18\\" height=\\"18\\" rx=\\"2\\" ry=\\"2\\"></rect><line x1=\\"9\\" y1=\\"3\\" x2=\\"9\\" y2=\\"21\\"></line>","skip-back":"<polygon points=\\"19 20 9 12 19 4 19 20\\"></polygon><line x1=\\"5\\" y1=\\"19\\" x2=\\"5\\" y2=\\"5\\"></line>","skip-forward":"<polygon points=\\"5 4 15 12 5 20 5 4\\"></polygon><line x1=\\"19\\" y1=\\"5\\" x2=\\"19\\" y2=\\"19\\"></line>","slack":"<path d=\\"M14.5 10c-.83 0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5z\\"></path><path d=\\"M20.5 10H19V8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z\\"></path><path d=\\"M9.5 14c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5S8 21.33 8 20.5v-5c0-.83.67-1.5 1.5-1.5z\\"></path><path d=\\"M3.5 14H5v1.5c0 .83-.67 1.5-1.5 1.5S2 16.33 2 15.5 2.67 14 3.5 14z\\"></path><path d=\\"M14 14.5c0-.83.67-1.5 1.5-1.5h5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-5c-.83 0-1.5-.67-1.5-1.5z\\"></path><path d=\\"M15.5 19H14v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z\\"></path><path d=\\"M10 9.5C10 8.67 9.33 8 8.5 8h-5C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11h5c.83 0 1.5-.67 1.5-1.5z\\"></path><path d=\\"M8.5 5H10V3.5C10 2.67 9.33 2 8.5 2S7 2.67 7 3.5 7.67 5 8.5 5z\\"></path>","slash":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><line x1=\\"4.93\\" y1=\\"4.93\\" x2=\\"19.07\\" y2=\\"19.07\\"></line>","sliders":"<line x1=\\"4\\" y1=\\"21\\" x2=\\"4\\" y2=\\"14\\"></line><line x1=\\"4\\" y1=\\"10\\" x2=\\"4\\" y2=\\"3\\"></line><line x1=\\"12\\" y1=\\"21\\" x2=\\"12\\" y2=\\"12\\"></line><line x1=\\"12\\" y1=\\"8\\" x2=\\"12\\" y2=\\"3\\"></line><line x1=\\"20\\" y1=\\"21\\" x2=\\"20\\" y2=\\"16\\"></line><line x1=\\"20\\" y1=\\"12\\" x2=\\"20\\" y2=\\"3\\"></line><line x1=\\"1\\" y1=\\"14\\" x2=\\"7\\" y2=\\"14\\"></line><line x1=\\"9\\" y1=\\"8\\" x2=\\"15\\" y2=\\"8\\"></line><line x1=\\"17\\" y1=\\"16\\" x2=\\"23\\" y2=\\"16\\"></line>","smartphone":"<rect x=\\"5\\" y=\\"2\\" width=\\"14\\" height=\\"20\\" rx=\\"2\\" ry=\\"2\\"></rect><line x1=\\"12\\" y1=\\"18\\" x2=\\"12\\" y2=\\"18\\"></line>","smile":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><path d=\\"M8 14s1.5 2 4 2 4-2 4-2\\"></path><line x1=\\"9\\" y1=\\"9\\" x2=\\"9.01\\" y2=\\"9\\"></line><line x1=\\"15\\" y1=\\"9\\" x2=\\"15.01\\" y2=\\"9\\"></line>","speaker":"<rect x=\\"4\\" y=\\"2\\" width=\\"16\\" height=\\"20\\" rx=\\"2\\" ry=\\"2\\"></rect><circle cx=\\"12\\" cy=\\"14\\" r=\\"4\\"></circle><line x1=\\"12\\" y1=\\"6\\" x2=\\"12\\" y2=\\"6\\"></line>","square":"<rect x=\\"3\\" y=\\"3\\" width=\\"18\\" height=\\"18\\" rx=\\"2\\" ry=\\"2\\"></rect>","star":"<polygon points=\\"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\\"></polygon>","stop-circle":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><rect x=\\"9\\" y=\\"9\\" width=\\"6\\" height=\\"6\\"></rect>","sun":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"5\\"></circle><line x1=\\"12\\" y1=\\"1\\" x2=\\"12\\" y2=\\"3\\"></line><line x1=\\"12\\" y1=\\"21\\" x2=\\"12\\" y2=\\"23\\"></line><line x1=\\"4.22\\" y1=\\"4.22\\" x2=\\"5.64\\" y2=\\"5.64\\"></line><line x1=\\"18.36\\" y1=\\"18.36\\" x2=\\"19.78\\" y2=\\"19.78\\"></line><line x1=\\"1\\" y1=\\"12\\" x2=\\"3\\" y2=\\"12\\"></line><line x1=\\"21\\" y1=\\"12\\" x2=\\"23\\" y2=\\"12\\"></line><line x1=\\"4.22\\" y1=\\"19.78\\" x2=\\"5.64\\" y2=\\"18.36\\"></line><line x1=\\"18.36\\" y1=\\"5.64\\" x2=\\"19.78\\" y2=\\"4.22\\"></line>","sunrise":"<path d=\\"M17 18a5 5 0 0 0-10 0\\"></path><line x1=\\"12\\" y1=\\"2\\" x2=\\"12\\" y2=\\"9\\"></line><line x1=\\"4.22\\" y1=\\"10.22\\" x2=\\"5.64\\" y2=\\"11.64\\"></line><line x1=\\"1\\" y1=\\"18\\" x2=\\"3\\" y2=\\"18\\"></line><line x1=\\"21\\" y1=\\"18\\" x2=\\"23\\" y2=\\"18\\"></line><line x1=\\"18.36\\" y1=\\"11.64\\" x2=\\"19.78\\" y2=\\"10.22\\"></line><line x1=\\"23\\" y1=\\"22\\" x2=\\"1\\" y2=\\"22\\"></line><polyline points=\\"8 6 12 2 16 6\\"></polyline>","sunset":"<path d=\\"M17 18a5 5 0 0 0-10 0\\"></path><line x1=\\"12\\" y1=\\"9\\" x2=\\"12\\" y2=\\"2\\"></line><line x1=\\"4.22\\" y1=\\"10.22\\" x2=\\"5.64\\" y2=\\"11.64\\"></line><line x1=\\"1\\" y1=\\"18\\" x2=\\"3\\" y2=\\"18\\"></line><line x1=\\"21\\" y1=\\"18\\" x2=\\"23\\" y2=\\"18\\"></line><line x1=\\"18.36\\" y1=\\"11.64\\" x2=\\"19.78\\" y2=\\"10.22\\"></line><line x1=\\"23\\" y1=\\"22\\" x2=\\"1\\" y2=\\"22\\"></line><polyline points=\\"16 5 12 9 8 5\\"></polyline>","tablet":"<rect x=\\"4\\" y=\\"2\\" width=\\"16\\" height=\\"20\\" rx=\\"2\\" ry=\\"2\\" transform=\\"rotate(180 12 12)\\"></rect><line x1=\\"12\\" y1=\\"18\\" x2=\\"12\\" y2=\\"18\\"></line>","tag":"<path d=\\"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z\\"></path><line x1=\\"7\\" y1=\\"7\\" x2=\\"7\\" y2=\\"7\\"></line>","target":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><circle cx=\\"12\\" cy=\\"12\\" r=\\"6\\"></circle><circle cx=\\"12\\" cy=\\"12\\" r=\\"2\\"></circle>","terminal":"<polyline points=\\"4 17 10 11 4 5\\"></polyline><line x1=\\"12\\" y1=\\"19\\" x2=\\"20\\" y2=\\"19\\"></line>","thermometer":"<path d=\\"M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z\\"></path>","thumbs-down":"<path d=\\"M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17\\"></path>","thumbs-up":"<path d=\\"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3\\"></path>","toggle-left":"<rect x=\\"1\\" y=\\"5\\" width=\\"22\\" height=\\"14\\" rx=\\"7\\" ry=\\"7\\"></rect><circle cx=\\"8\\" cy=\\"12\\" r=\\"3\\"></circle>","toggle-right":"<rect x=\\"1\\" y=\\"5\\" width=\\"22\\" height=\\"14\\" rx=\\"7\\" ry=\\"7\\"></rect><circle cx=\\"16\\" cy=\\"12\\" r=\\"3\\"></circle>","trash-2":"<polyline points=\\"3 6 5 6 21 6\\"></polyline><path d=\\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\\"></path><line x1=\\"10\\" y1=\\"11\\" x2=\\"10\\" y2=\\"17\\"></line><line x1=\\"14\\" y1=\\"11\\" x2=\\"14\\" y2=\\"17\\"></line>","trash":"<polyline points=\\"3 6 5 6 21 6\\"></polyline><path d=\\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\\"></path>","trello":"<rect x=\\"3\\" y=\\"3\\" width=\\"18\\" height=\\"18\\" rx=\\"2\\" ry=\\"2\\"></rect><rect x=\\"7\\" y=\\"7\\" width=\\"3\\" height=\\"9\\"></rect><rect x=\\"14\\" y=\\"7\\" width=\\"3\\" height=\\"5\\"></rect>","trending-down":"<polyline points=\\"23 18 13.5 8.5 8.5 13.5 1 6\\"></polyline><polyline points=\\"17 18 23 18 23 12\\"></polyline>","trending-up":"<polyline points=\\"23 6 13.5 15.5 8.5 10.5 1 18\\"></polyline><polyline points=\\"17 6 23 6 23 12\\"></polyline>","triangle":"<path d=\\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\\"></path>","truck":"<rect x=\\"1\\" y=\\"3\\" width=\\"15\\" height=\\"13\\"></rect><polygon points=\\"16 8 20 8 23 11 23 16 16 16 16 8\\"></polygon><circle cx=\\"5.5\\" cy=\\"18.5\\" r=\\"2.5\\"></circle><circle cx=\\"18.5\\" cy=\\"18.5\\" r=\\"2.5\\"></circle>","tv":"<rect x=\\"2\\" y=\\"7\\" width=\\"20\\" height=\\"15\\" rx=\\"2\\" ry=\\"2\\"></rect><polyline points=\\"17 2 12 7 7 2\\"></polyline>","twitter":"<path d=\\"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z\\"></path>","type":"<polyline points=\\"4 7 4 4 20 4 20 7\\"></polyline><line x1=\\"9\\" y1=\\"20\\" x2=\\"15\\" y2=\\"20\\"></line><line x1=\\"12\\" y1=\\"4\\" x2=\\"12\\" y2=\\"20\\"></line>","umbrella":"<path d=\\"M23 12a11.05 11.05 0 0 0-22 0zm-5 7a3 3 0 0 1-6 0v-7\\"></path>","underline":"<path d=\\"M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3\\"></path><line x1=\\"4\\" y1=\\"21\\" x2=\\"20\\" y2=\\"21\\"></line>","unlock":"<rect x=\\"3\\" y=\\"11\\" width=\\"18\\" height=\\"11\\" rx=\\"2\\" ry=\\"2\\"></rect><path d=\\"M7 11V7a5 5 0 0 1 9.9-1\\"></path>","upload-cloud":"<polyline points=\\"16 16 12 12 8 16\\"></polyline><line x1=\\"12\\" y1=\\"12\\" x2=\\"12\\" y2=\\"21\\"></line><path d=\\"M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3\\"></path><polyline points=\\"16 16 12 12 8 16\\"></polyline>","upload":"<path d=\\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\\"></path><polyline points=\\"17 8 12 3 7 8\\"></polyline><line x1=\\"12\\" y1=\\"3\\" x2=\\"12\\" y2=\\"15\\"></line>","user-check":"<path d=\\"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\\"></path><circle cx=\\"8.5\\" cy=\\"7\\" r=\\"4\\"></circle><polyline points=\\"17 11 19 13 23 9\\"></polyline>","user-minus":"<path d=\\"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\\"></path><circle cx=\\"8.5\\" cy=\\"7\\" r=\\"4\\"></circle><line x1=\\"23\\" y1=\\"11\\" x2=\\"17\\" y2=\\"11\\"></line>","user-plus":"<path d=\\"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\\"></path><circle cx=\\"8.5\\" cy=\\"7\\" r=\\"4\\"></circle><line x1=\\"20\\" y1=\\"8\\" x2=\\"20\\" y2=\\"14\\"></line><line x1=\\"23\\" y1=\\"11\\" x2=\\"17\\" y2=\\"11\\"></line>","user-x":"<path d=\\"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\\"></path><circle cx=\\"8.5\\" cy=\\"7\\" r=\\"4\\"></circle><line x1=\\"18\\" y1=\\"8\\" x2=\\"23\\" y2=\\"13\\"></line><line x1=\\"23\\" y1=\\"8\\" x2=\\"18\\" y2=\\"13\\"></line>","user":"<path d=\\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\\"></path><circle cx=\\"12\\" cy=\\"7\\" r=\\"4\\"></circle>","users":"<path d=\\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\\"></path><circle cx=\\"9\\" cy=\\"7\\" r=\\"4\\"></circle><path d=\\"M23 21v-2a4 4 0 0 0-3-3.87\\"></path><path d=\\"M16 3.13a4 4 0 0 1 0 7.75\\"></path>","video-off":"<path d=\\"M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10\\"></path><line x1=\\"1\\" y1=\\"1\\" x2=\\"23\\" y2=\\"23\\"></line>","video":"<polygon points=\\"23 7 16 12 23 17 23 7\\"></polygon><rect x=\\"1\\" y=\\"5\\" width=\\"15\\" height=\\"14\\" rx=\\"2\\" ry=\\"2\\"></rect>","voicemail":"<circle cx=\\"5.5\\" cy=\\"11.5\\" r=\\"4.5\\"></circle><circle cx=\\"18.5\\" cy=\\"11.5\\" r=\\"4.5\\"></circle><line x1=\\"5.5\\" y1=\\"16\\" x2=\\"18.5\\" y2=\\"16\\"></line>","volume-1":"<polygon points=\\"11 5 6 9 2 9 2 15 6 15 11 19 11 5\\"></polygon><path d=\\"M15.54 8.46a5 5 0 0 1 0 7.07\\"></path>","volume-2":"<polygon points=\\"11 5 6 9 2 9 2 15 6 15 11 19 11 5\\"></polygon><path d=\\"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07\\"></path>","volume-x":"<polygon points=\\"11 5 6 9 2 9 2 15 6 15 11 19 11 5\\"></polygon><line x1=\\"23\\" y1=\\"9\\" x2=\\"17\\" y2=\\"15\\"></line><line x1=\\"17\\" y1=\\"9\\" x2=\\"23\\" y2=\\"15\\"></line>","volume":"<polygon points=\\"11 5 6 9 2 9 2 15 6 15 11 19 11 5\\"></polygon>","watch":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"7\\"></circle><polyline points=\\"12 9 12 12 13.5 13.5\\"></polyline><path d=\\"M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83\\"></path>","wifi-off":"<line x1=\\"1\\" y1=\\"1\\" x2=\\"23\\" y2=\\"23\\"></line><path d=\\"M16.72 11.06A10.94 10.94 0 0 1 19 12.55\\"></path><path d=\\"M5 12.55a10.94 10.94 0 0 1 5.17-2.39\\"></path><path d=\\"M10.71 5.05A16 16 0 0 1 22.58 9\\"></path><path d=\\"M1.42 9a15.91 15.91 0 0 1 4.7-2.88\\"></path><path d=\\"M8.53 16.11a6 6 0 0 1 6.95 0\\"></path><line x1=\\"12\\" y1=\\"20\\" x2=\\"12\\" y2=\\"20\\"></line>","wifi":"<path d=\\"M5 12.55a11 11 0 0 1 14.08 0\\"></path><path d=\\"M1.42 9a16 16 0 0 1 21.16 0\\"></path><path d=\\"M8.53 16.11a6 6 0 0 1 6.95 0\\"></path><line x1=\\"12\\" y1=\\"20\\" x2=\\"12\\" y2=\\"20\\"></line>","wind":"<path d=\\"M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2\\"></path>","x-circle":"<circle cx=\\"12\\" cy=\\"12\\" r=\\"10\\"></circle><line x1=\\"15\\" y1=\\"9\\" x2=\\"9\\" y2=\\"15\\"></line><line x1=\\"9\\" y1=\\"9\\" x2=\\"15\\" y2=\\"15\\"></line>","x-octagon":"<polygon points=\\"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2\\"></polygon><line x1=\\"15\\" y1=\\"9\\" x2=\\"9\\" y2=\\"15\\"></line><line x1=\\"9\\" y1=\\"9\\" x2=\\"15\\" y2=\\"15\\"></line>","x-square":"<rect x=\\"3\\" y=\\"3\\" width=\\"18\\" height=\\"18\\" rx=\\"2\\" ry=\\"2\\"></rect><line x1=\\"9\\" y1=\\"9\\" x2=\\"15\\" y2=\\"15\\"></line><line x1=\\"15\\" y1=\\"9\\" x2=\\"9\\" y2=\\"15\\"></line>","x":"<line x1=\\"18\\" y1=\\"6\\" x2=\\"6\\" y2=\\"18\\"></line><line x1=\\"6\\" y1=\\"6\\" x2=\\"18\\" y2=\\"18\\"></line>","youtube":"<path d=\\"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z\\"></path><polygon points=\\"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02\\"></polygon>","zap-off":"<polyline points=\\"12.41 6.75 13 2 10.57 4.92\\"></polyline><polyline points=\\"18.57 12.91 21 10 15.66 10\\"></polyline><polyline points=\\"8 8 3 14 12 14 11 22 16 16\\"></polyline><line x1=\\"1\\" y1=\\"1\\" x2=\\"23\\" y2=\\"23\\"></line>","zap":"<polygon points=\\"13 2 3 14 12 14 11 22 21 10 12 10 13 2\\"></polygon>","zoom-in":"<circle cx=\\"11\\" cy=\\"11\\" r=\\"8\\"></circle><line x1=\\"21\\" y1=\\"21\\" x2=\\"16.65\\" y2=\\"16.65\\"></line><line x1=\\"11\\" y1=\\"8\\" x2=\\"11\\" y2=\\"14\\"></line><line x1=\\"8\\" y1=\\"11\\" x2=\\"14\\" y2=\\"11\\"></line>","zoom-out":"<circle cx=\\"11\\" cy=\\"11\\" r=\\"8\\"></circle><line x1=\\"21\\" y1=\\"21\\" x2=\\"16.65\\" y2=\\"16.65\\"></line><line x1=\\"8\\" y1=\\"11\\" x2=\\"14\\" y2=\\"11\\"></line>"}')},function(t,e,n){var i=n(0).createTagScope(),r=n(101),o=n(43).manager,s={header:{theme:"tool",distance:6},tool:{theme:"tool",distance:8,delay:15,placement:"top"},filter:{theme:"filter",distance:3,delay:0,placement:"bottom",animation:"fade",trigger:"mouseenter",duration:[0,50],popperOptions:{modifiers:{flip:{behavior:["left","bottom","top"],boundariesElement:"viewport"}}}},keys:{theme:"keys",placement:"right",distance:1,delay:0,animation:"shift-away",trigger:"mouseenter",animateFill:!1,boundary:"viewport",popperOptions:{modifiers:{flip:{behavior:["left","bottom","top"],boundariesElement:"viewport"}}}},nav:{theme:"nav",distance:3,delay:0,placement:"top",animation:"fade",trigger:"mouseenter",duration:[100,100]},navBottom:{theme:"nav",distance:3,delay:0,placement:"bottom",animation:"fade",trigger:"mouseenter",duration:[100,100]},hud:{theme:"hud",distance:3,delay:0,placement:"top",animation:"fade",trigger:"mouseenter",duration:[50,10],boundary:"window"},warn:{distance:3,placement:"top-end",duration:[0,200]},br:{placement:"bottom-end"},bl:{placement:"bottom-start"},tr:{placement:"top-end"},conditional:{onShow:function(t){return console.log("Showing tooltip",t,this)}}};i.extendTag("element",(function(t){t.prototype.tip=function(t){return this._tip},t.prototype.setTip=function(t){return this._tip=t,this},t.prototype.setTip=function(t,e){var n;if(t!=this._tip){if(this._tip=t,e)for(let t,n,i=0,r=Object.keys(e),o=r.length;i<o;i++)n=r[i],t=e[n],s[n]&&Object.assign(this.tipOptions(),s[n]);("string"==typeof(n=this.tip())||n instanceof String)&&this.tip().indexOf("KEY")>=0?this._shortcutHTML&&this.setTip(this.tip().replace("KEY",this._shortcutHTML)):e&&e.keys&&this.setTip(o.shortcutHTML(this.tip())),this.tipOptions().content=this.tip(),this._dom._tippy?this._dom._tippy.set({content:this.tip()}):r.default(this.dom(),this.tipOptions())}return this},t.prototype.setTipContent=function(t){return this._dom._tippy?this._dom._tippy.set({content:t}):this.tipOptions().content=t,this},t.prototype.tippy=function(){return this._dom._tippy},t.prototype.flash=function(t,e){void 0===e&&(e={});let n={showOnInit:!0,content:t,trigger:"manual",multiple:!0};e.type&&s[e.type]&&Object.assign(n,s[e.type]);let i=r.default(this.dom(),n);return TT=i,this},t.prototype.tipOptions=function(){return this._tipOptions||(this._tipOptions={})},t.prototype.tipSetAttribute=function(t,e){var n,i;if("preset"==t){if(this._tipPreset==e)return this;if(this._tipPreset=e,n=s[e]){for(let t,e,i=0,r=Object.keys(n),o=r.length;i<o;i++)e=r[i],t=n[e],this.tipOptions()[e]=t;this._dom._tippy&&this._dom._tippy.set(n)}return this}return this.tipOptions()[t]=e,this._dom._tippy&&this._dom._tippy.set(((i={})[""+t]=e,i)),this}}))},function(t,e,n){"use strict";n.r(e);var i=n(84);function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var o="undefined"!=typeof window&&"undefined"!=typeof document,s=o?navigator.userAgent:"",a=/MSIE |Trident\//.test(s),u=/UCBrowser\//.test(s),p=o&&/iPhone|iPad|iPod/.test(navigator.platform)&&!window.MSStream,c={a11y:!0,allowHTML:!0,animateFill:!0,animation:"shift-away",appendTo:function(){return document.body},aria:"describedby",arrow:!1,arrowType:"sharp",boundary:"scrollParent",content:"",delay:0,distance:10,duration:[325,275],flip:!0,flipBehavior:"flip",flipOnUpdate:!1,followCursor:!1,hideOnClick:!0,ignoreAttributes:!1,inertia:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,lazy:!0,maxWidth:350,multiple:!1,offset:0,onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},placement:"top",popperOptions:{},role:"tooltip",showOnInit:!1,size:"regular",sticky:!1,target:"",theme:"dark",touch:!0,touchHold:!1,trigger:"mouseenter focus",updateDuration:0,wait:null,zIndex:9999},h=["arrow","arrowType","boundary","distance","flip","flipBehavior","flipOnUpdate","offset","placement","popperOptions"],l=o?Element.prototype:{},d=l.matches||l.matchesSelector||l.webkitMatchesSelector||l.mozMatchesSelector||l.msMatchesSelector;function f(t){return[].slice.call(t)}function y(t,e){return(l.closest||function(t){for(var e=this;e;){if(d.call(e,t))return e;e=e.parentElement}}).call(t,e)}function m(t,e){for(;t;){if(e(t))return t;t=t.parentElement}}var g={passive:!0},_=Object.keys(c);function v(t,e){return{}.hasOwnProperty.call(t,e)}function b(t,e,n){if(Array.isArray(t)){var i=t[e];return null==i?n:i}return t}function w(t,e){var n;return function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout((function(){return t.apply(i,r)}),e)}}function x(t,e){return t&&t.modifiers&&t.modifiers[e]}function S(t,e){return t.indexOf(e)>-1}function T(t){return!(!t||!v(t,"isVirtual"))||t instanceof Element}function k(t,e){return"function"==typeof t?t.apply(null,e):t}function A(t,e){t.filter((function(t){return"flip"===t.name}))[0].enabled=e}function E(){return document.createElement("div")}function C(t,e){t.forEach((function(t){t&&(t.style.transitionDuration="".concat(e,"ms"))}))}function D(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function O(t,e){var n=r({},e,{content:k(e.content,[t])},e.ignoreAttributes?{}:function(t){return _.reduce((function(e,n){var i=(t.getAttribute("data-tippy-".concat(n))||"").trim();if(!i)return e;if("content"===n)e[n]=i;else try{e[n]=JSON.parse(i)}catch(t){e[n]=i}return e}),{})}(t));return(n.arrow||u)&&(n.animateFill=!1),n}function M(t,e){Object.keys(t).forEach((function(t){if(!v(e,t))throw new Error("[tippy]: `".concat(t,"` is not a valid option"))}))}function L(t,e){t.innerHTML=e instanceof Element?e.innerHTML:e}function P(t,e){if(e.content instanceof Element)L(t,""),t.appendChild(e.content);else if("function"!=typeof e.content){t[e.allowHTML?"innerHTML":"textContent"]=e.content}}function N(t){return{tooltip:t.querySelector(".tippy-tooltip"),backdrop:t.querySelector(".tippy-backdrop"),content:t.querySelector(".tippy-content"),arrow:t.querySelector(".tippy-arrow")||t.querySelector(".tippy-roundarrow")}}function $(t){t.setAttribute("data-inertia","")}function R(t){var e=E();return"round"===t?(e.className="tippy-roundarrow",L(e,'<svg viewBox="0 0 18 7" xmlns="http://www.w3.org/2000/svg"><path d="M0 7s2.021-.015 5.253-4.218C6.584 1.051 7.797.007 9 0c1.203-.007 2.416 1.035 3.761 2.782C16.012 7.005 18 7 18 7H0z"/></svg>')):e.className="tippy-arrow",e}function I(){var t=E();return t.className="tippy-backdrop",t.setAttribute("data-state","hidden"),t}function F(t,e){t.setAttribute("tabindex","-1"),e.setAttribute("data-interactive","")}function z(t,e,n){var i=u&&void 0!==document.body.style.webkitTransition?"webkitTransitionEnd":"transitionend";t[e+"EventListener"](i,n)}function B(t){var e=t.getAttribute("x-placement");return e?e.split("-")[0]:""}function V(t,e,n){n.split(" ").forEach((function(n){t.classList[e](n+"-theme")}))}function U(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.checkHideOnClick,n=t.exclude,i=t.duration;f(document.querySelectorAll(".tippy-popper")).forEach((function(t){var r=t._tippy;!r||e&&!0!==r.props.hideOnClick||n&&t===n.popper||r.hide(i)}))}var H=!1;function W(){H||(H=!0,p&&document.body.classList.add("tippy-iOS"),window.performance&&document.addEventListener("mousemove",q))}var j=0;function q(){var t=performance.now();t-j<20&&(H=!1,document.removeEventListener("mousemove",q),p||document.body.classList.remove("tippy-iOS")),j=t}function G(t){if(!(t.target instanceof Element))return U();var e=y(t.target,".tippy-popper");if(!(e&&e._tippy&&e._tippy.props.interactive)){var n=m(t.target,(function(t){return t._tippy&&t._tippy.reference===t}));if(n){var i=n._tippy;if(i){var r=S(i.props.trigger||"","click");if(H||r)return U({exclude:i,checkHideOnClick:!0});if(!0!==i.props.hideOnClick||r)return;i.clearDelayTimeouts()}}U({checkHideOnClick:!0})}}function Y(){var t=document.activeElement;t&&t.blur&&t._tippy&&t.blur()}var X=1;function K(t,e){var n,o,s,u,p,l=O(t,e);if(!l.multiple&&t._tippy)return null;var _,T,L,U,W=!1,j=!1,q=[],G=l.interactiveDebounce>0?w(lt,l.interactiveDebounce):lt,Y=X++,Z=function(t,e){var n=E();n.className="tippy-popper",n.id="tippy-".concat(t),n.style.zIndex=""+e.zIndex,e.role&&n.setAttribute("role",e.role);var i=E();i.className="tippy-tooltip",i.style.maxWidth=e.maxWidth+("number"==typeof e.maxWidth?"px":""),i.setAttribute("data-size",e.size),i.setAttribute("data-animation",e.animation),i.setAttribute("data-state","hidden"),V(i,"add",e.theme);var r=E();return r.className="tippy-content",r.setAttribute("data-state","hidden"),e.interactive&&F(n,i),e.arrow&&i.appendChild(R(e.arrowType)),e.animateFill&&(i.appendChild(I()),i.setAttribute("data-animatefill","")),e.inertia&&$(i),P(r,e),i.appendChild(r),n.appendChild(i),n}(Y,l),J={id:Y,reference:t,popper:Z,popperChildren:N(Z),popperInstance:null,props:l,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},clearDelayTimeouts:xt,set:St,setContent:function(t){St({content:t})},show:Tt,hide:kt,enable:function(){J.state.isEnabled=!0},disable:function(){J.state.isEnabled=!1},destroy:function(t){if(J.state.isDestroyed)return;J.state.isMounted&&kt(0);pt(),delete J.reference._tippy,J.props.target&&t&&f(J.reference.querySelectorAll(J.props.target)).forEach((function(t){t._tippy&&t._tippy.destroy()}));J.popperInstance&&J.popperInstance.destroy();J.state.isDestroyed=!0}};return t._tippy=J,Z._tippy=J,ut(),l.lazy||(_t(),J.popperInstance.disableEventListeners()),l.showOnInit&&bt(),l.a11y&&!l.target&&((U=t)instanceof Element&&(!d.call(U,"a[href],area[href],button,details,input,textarea,select,iframe,[tabindex]")||U.hasAttribute("disabled")))&&t.setAttribute("tabindex","0"),Z.addEventListener("mouseenter",(function(t){J.props.interactive&&J.state.isVisible&&"mouseenter"===n&&bt(t)})),Z.addEventListener("mouseleave",(function(){J.props.interactive&&"mouseenter"===n&&document.addEventListener("mousemove",G)})),J;function Q(){document.removeEventListener("mousemove",ct)}function tt(){document.body.removeEventListener("mouseleave",wt),document.removeEventListener("mousemove",G)}function et(){return[J.popperChildren.tooltip,J.popperChildren.backdrop,J.popperChildren.content]}function nt(){return J.props.followCursor&&!H&&"focus"!==n}function it(){C([J.popper],a?0:J.props.updateDuration),function t(){J.popperInstance&&J.popperInstance.scheduleUpdate(),J.state.isMounted?requestAnimationFrame(t):C([J.popper],0)}()}function rt(t,e){st(t,(function(){!J.state.isVisible&&_&&_.contains(J.popper)&&e()}))}function ot(t,e){st(t,e)}function st(t,e){var n=J.popperChildren.tooltip;function i(t){t.target===n&&(z(n,"remove",i),e())}if(0===t)return e();z(n,"remove",L),z(n,"add",i),L=i}function at(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];J.reference.addEventListener(t,e,n),q.push({eventType:t,handler:e,options:n})}function ut(){J.props.touchHold&&!J.props.target&&(at("touchstart",ht,g),at("touchend",dt,g)),J.props.trigger.trim().split(" ").forEach((function(t){if("manual"!==t)if(J.props.target)switch(t){case"mouseenter":at("mouseover",yt),at("mouseout",mt);break;case"focus":at("focusin",yt),at("focusout",mt);break;case"click":at(t,yt)}else switch(at(t,ht),t){case"mouseenter":at("mouseleave",dt);break;case"focus":at(a?"focusout":"blur",ft)}}))}function pt(){q.forEach((function(t){var e=t.eventType,n=t.handler,i=t.options;J.reference.removeEventListener(e,n,i)})),q=[]}function ct(t){var e=o=t,n=e.clientX,i=e.clientY;if(J.popperInstance){var s=B(J.popper),a=J.props.arrow?4+("round"===J.props.arrowType?18:16):4,u=S(["top","bottom"],s),p=S(["left","right"],s),c=u?Math.max(a,n):n,h=p?Math.max(a,i):i;u&&c>a&&(c=Math.min(n,window.innerWidth-a)),p&&h>a&&(h=Math.min(i,window.innerHeight-a));var l=J.reference.getBoundingClientRect(),d=J.props.followCursor,f="horizontal"===d,y="vertical"===d;J.popperInstance.reference=r({},J.popperInstance.reference,{getBoundingClientRect:function(){return{width:0,height:0,top:f?l.top:h,bottom:f?l.bottom:h,left:y?l.left:c,right:y?l.right:c}},clientWidth:0,clientHeight:0}),J.popperInstance.scheduleUpdate(),"initial"===d&&J.state.isVisible&&Q()}}function ht(t){J.state.isEnabled&&!gt(t)&&(J.state.isVisible||(n=t.type,t instanceof MouseEvent&&(o=t)),"click"===t.type&&!1!==J.props.hideOnClick&&J.state.isVisible?wt():bt(t))}function lt(t){var e=m(t.target,(function(t){return t._tippy})),n=y(t.target,".tippy-popper")===J.popper,i=e===J.reference;n||i||function(t,e,n,i){if(!t)return!0;var r=n.clientX,o=n.clientY,s=i.interactiveBorder,a=i.distance,u=e.top-o>("top"===t?s+a:s),p=o-e.bottom>("bottom"===t?s+a:s),c=e.left-r>("left"===t?s+a:s),h=r-e.right>("right"===t?s+a:s);return u||p||c||h}(B(J.popper),J.popper.getBoundingClientRect(),t,J.props)&&(tt(),wt())}function dt(t){if(!gt(t))return J.props.interactive?(document.body.addEventListener("mouseleave",wt),void document.addEventListener("mousemove",G)):void wt()}function ft(t){t.target===J.reference&&(J.props.interactive&&t.relatedTarget&&J.popper.contains(t.relatedTarget)||wt())}function yt(t){y(t.target,J.props.target)&&bt(t)}function mt(t){y(t.target,J.props.target)&&wt()}function gt(t){var e="ontouchstart"in window,n=S(t.type,"touch"),i=J.props.touchHold;return e&&H&&i&&!n||H&&!i&&n}function _t(){var t=J.props.popperOptions,e=J.popperChildren,n=e.tooltip,o=e.arrow,s=x(t,"preventOverflow");function a(t){J.props.flip&&!J.props.flipOnUpdate&&(t.flipped&&(J.popperInstance.options.placement=t.placement),A(J.popperInstance.modifiers,!1)),n.setAttribute("x-placement",t.placement),!1!==t.attributes["x-out-of-boundaries"]?n.setAttribute("x-out-of-boundaries",""):n.removeAttribute("x-out-of-boundaries"),T&&T!==t.placement&&j&&(n.style.transition="none",requestAnimationFrame((function(){n.style.transition=""}))),T=t.placement,j=J.state.isVisible;var e=B(J.popper),i=n.style;i.top=i.bottom=i.left=i.right="",i[e]=-(J.props.distance-10)+"px";var o=s&&void 0!==s.padding?s.padding:4,a="number"==typeof o,u=r({top:a?o:o.top,bottom:a?o:o.bottom,left:a?o:o.left,right:a?o:o.right},!a&&o);u[e]=a?o+J.props.distance:(o[e]||0)+J.props.distance,J.popperInstance.modifiers.filter((function(t){return"preventOverflow"===t.name}))[0].padding=u}var u=r({placement:J.props.placement},t,{modifiers:r({},t?t.modifiers:{},{preventOverflow:r({boundariesElement:J.props.boundary,padding:4},s),arrow:r({element:o,enabled:!!o},x(t,"arrow")),flip:r({enabled:J.props.flip,padding:J.props.distance+4,behavior:J.props.flipBehavior},x(t,"flip")),offset:r({offset:J.props.offset},x(t,"offset"))}),onCreate:function(e){a(e),t&&t.onCreate&&t.onCreate(e)},onUpdate:function(e){a(e),t&&t.onUpdate&&t.onUpdate(e)}});J.popperInstance=new i.a(J.reference,J.popper,u)}function vt(t){var e=!(nt()||"initial"===J.props.followCursor&&H);J.popperInstance?(nt()||(J.popperInstance.scheduleUpdate(),e&&J.popperInstance.enableEventListeners()),A(J.popperInstance.modifiers,J.props.flip)):(_t(),e||J.popperInstance.disableEventListeners()),J.popperInstance.reference=J.reference;var n=J.popperChildren.arrow;nt()?(n&&(n.style.margin="0"),o&&ct(o)):n&&(n.style.margin=""),H&&o&&"initial"===J.props.followCursor&&(ct(o),n&&(n.style.margin="0")),function(t,e){var n=t.popper,i=t.options,r=i.onCreate,o=i.onUpdate;i.onCreate=i.onUpdate=function(t){!function(t){t.offsetHeight}(n),e(),o&&o(t),i.onCreate=r,i.onUpdate=o}}(J.popperInstance,t);var i=J.props.appendTo;(_="parent"===i?J.reference.parentNode:k(i,[J.reference])).contains(J.popper)||(_.appendChild(J.popper),J.props.onMount(J),J.state.isMounted=!0)}function bt(t){if(xt(),!J.state.isVisible){if(J.props.target)return function(t){if(t){var n=y(t.target,J.props.target);n&&!n._tippy&&(K(n,r({},J.props,{content:k(e.content,[n]),appendTo:e.appendTo,target:"",showOnInit:!0})),bt(t))}}(t);if(W=!0,J.props.wait)return J.props.wait(J,t);nt()&&!J.state.isMounted&&document.addEventListener("mousemove",ct);var n=b(J.props.delay,0,c.delay);n?s=setTimeout((function(){Tt()}),n):Tt()}}function wt(){if(xt(),!J.state.isVisible)return Q();W=!1;var t=b(J.props.delay,1,c.delay);t?u=setTimeout((function(){J.state.isVisible&&kt()}),t):p=requestAnimationFrame((function(){kt()}))}function xt(){clearTimeout(s),clearTimeout(u),cancelAnimationFrame(p)}function St(t){M(t=t||{},c);var e=J.props,n=O(J.reference,r({},J.props,t,{ignoreAttributes:!0}));n.ignoreAttributes=v(t,"ignoreAttributes")?t.ignoreAttributes||!1:e.ignoreAttributes,J.props=n,(v(t,"trigger")||v(t,"touchHold"))&&(pt(),ut()),v(t,"interactiveDebounce")&&(tt(),G=w(lt,t.interactiveDebounce||0)),function(t,e,n){var i=N(t),r=i.tooltip,o=i.content,s=i.backdrop,a=i.arrow;t.style.zIndex=""+n.zIndex,r.setAttribute("data-size",n.size),r.setAttribute("data-animation",n.animation),r.style.maxWidth=n.maxWidth+("number"==typeof n.maxWidth?"px":""),n.role?t.setAttribute("role",n.role):t.removeAttribute("role"),e.content!==n.content&&P(o,n),!e.animateFill&&n.animateFill?(r.appendChild(I()),r.setAttribute("data-animatefill","")):e.animateFill&&!n.animateFill&&(r.removeChild(s),r.removeAttribute("data-animatefill")),!e.arrow&&n.arrow?r.appendChild(R(n.arrowType)):e.arrow&&!n.arrow&&r.removeChild(a),e.arrow&&n.arrow&&e.arrowType!==n.arrowType&&r.replaceChild(R(n.arrowType),a),!e.interactive&&n.interactive?F(t,r):e.interactive&&!n.interactive&&function(t,e){t.removeAttribute("tabindex"),e.removeAttribute("data-interactive")}(t,r),!e.inertia&&n.inertia?$(r):e.inertia&&!n.inertia&&function(t){t.removeAttribute("data-inertia")}(r),e.theme!==n.theme&&(V(r,"remove",e.theme),V(r,"add",n.theme))}(J.popper,e,n),J.popperChildren=N(J.popper),J.popperInstance&&(J.popperInstance.update(),h.some((function(n){return v(t,n)&&t[n]!==e[n]}))&&(J.popperInstance.destroy(),_t(),J.state.isVisible||J.popperInstance.disableEventListeners(),J.props.followCursor&&o&&ct(o)))}function Tt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b(J.props.duration,0,c.duration[1]);if(!J.state.isDestroyed&&J.state.isEnabled&&(!H||J.props.touch)&&!J.reference.hasAttribute("disabled")&&!1!==J.props.onShow(J)){J.popper.style.visibility="visible",J.state.isVisible=!0,J.props.interactive&&J.reference.classList.add("tippy-active");var e=et();C(e.concat(J.popper),0),vt((function(){J.state.isVisible&&(nt()||J.popperInstance.update(),J.popperChildren.backdrop&&(J.popperChildren.content.style.transitionDelay=Math.round(t/12)+"ms"),J.props.sticky&&it(),C([J.popper],l.updateDuration),C(e,t),D(e,"visible"),ot(t,(function(){J.props.aria&&J.reference.setAttribute("aria-".concat(J.props.aria),J.popper.id),J.props.onShown(J),J.state.isShown=!0})))}))}}function kt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b(J.props.duration,1,c.duration[1]);if(!J.state.isDestroyed&&J.state.isEnabled&&!1!==J.props.onHide(J)){J.popper.style.visibility="hidden",J.state.isVisible=!1,J.state.isShown=!1,j=!1,J.props.interactive&&J.reference.classList.remove("tippy-active");var e=et();C(e,t),D(e,"hidden"),rt(t,(function(){W||Q(),J.props.aria&&J.reference.removeAttribute("aria-".concat(J.props.aria)),J.popperInstance.disableEventListeners(),J.popperInstance.options.placement=J.props.placement,_.removeChild(J.popper),J.props.onHidden(J),J.state.isMounted=!1}))}}}var Z=!1;function J(t,e){M(e||{},c),Z||(document.addEventListener("click",G,!0),document.addEventListener("touchstart",W,g),window.addEventListener("blur",Y),Z=!0);var n,i=r({},c,e);n=t,"[object Object]"!=={}.toString.call(n)||n.addEventListener||function(t){var e={isVirtual:!0,attributes:t.attributes||{},setAttribute:function(e,n){t.attributes[e]=n},getAttribute:function(e){return t.attributes[e]},removeAttribute:function(e){delete t.attributes[e]},hasAttribute:function(e){return e in t.attributes},addEventListener:function(){},removeEventListener:function(){},classList:{classNames:{},add:function(e){t.classList.classNames[e]=!0},remove:function(e){delete t.classList.classNames[e]},contains:function(e){return e in t.classList.classNames}}};for(var n in e)t[n]=e[n]}(t);var o=function(t){if(T(t))return[t];if(t instanceof NodeList)return f(t);if(Array.isArray(t))return t;try{return f(document.querySelectorAll(t))}catch(t){return[]}}(t).reduce((function(t,e){var n=e&&K(e,i);return n&&t.push(n),t}),[]);return T(t)?o[0]:o}J.version="4.2.1",J.defaults=c,J.setDefaults=function(t){Object.keys(t).forEach((function(e){c[e]=t[e]}))},J.hideAll=U,J.group=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.delay,i=void 0===n?t[0].props.delay:n,o=e.duration,s=void 0===o?0:o;if(!t.some((function(t){return v(t,"_originalProps")}))){var a=!1;t.forEach((function(t){t._originalProps=r({},t.props)})),l()}function u(t){a=t,l()}function p(e){e._originalProps.onShow(e),t.forEach((function(t){t.set({duration:s}),t.hide()})),u(!0)}function c(t){t._originalProps.onHide(t),u(!1)}function h(t){t._originalProps.onShown(t),t.set({duration:t._originalProps.duration})}function l(){t.forEach((function(t){t.set({onShow:p,onShown:h,onHide:c,delay:a?[0,Array.isArray(i)?i[1]:i]:i,duration:a?s:t._originalProps.duration})}))}},o&&setTimeout((function(){f(document.querySelectorAll("[data-tippy]")).forEach((function(t){var e=t.getAttribute("data-tippy");e&&J(t,{content:e})}))})),function(t){if(o){var e=document.createElement("style");e.type="text/css",e.textContent=t;var n=document.head,i=n.firstChild;i?n.insertBefore(e,i):n.appendChild(e)}}('.tippy-iOS{cursor:pointer!important;-webkit-tap-highlight-color:transparent}.tippy-popper{transition-timing-function:cubic-bezier(.165,.84,.44,1);max-width:calc(100% - 8px);pointer-events:none;outline:0}.tippy-popper[x-placement^=top] .tippy-backdrop{border-radius:40% 40% 0 0}.tippy-popper[x-placement^=top] .tippy-roundarrow{bottom:-7px;bottom:-6.5px;-webkit-transform-origin:50% 0;transform-origin:50% 0;margin:0 3px}.tippy-popper[x-placement^=top] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.tippy-popper[x-placement^=top] .tippy-arrow{border-top:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;bottom:-7px;margin:0 3px;-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=top] .tippy-backdrop{-webkit-transform-origin:0 25%;transform-origin:0 25%}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-55%);transform:scale(1) translate(-50%,-55%)}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%,-45%);transform:scale(.2) translate(-50%,-45%);opacity:0}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px)}.tippy-popper[x-placement^=top] [data-animation=perspective]{-webkit-transform-origin:bottom;transform-origin:bottom}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateY(-10px) rotateX(0);transform:perspective(700px) translateY(-10px) rotateX(0)}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) translateY(0) rotateX(60deg);transform:perspective(700px) translateY(0) rotateX(60deg)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}.tippy-popper[x-placement^=top] [data-animation=scale]{-webkit-transform-origin:bottom;transform-origin:bottom}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=visible]{-webkit-transform:translateY(-10px) scale(1);transform:translateY(-10px) scale(1)}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(-10px) scale(.5);transform:translateY(-10px) scale(.5)}.tippy-popper[x-placement^=bottom] .tippy-backdrop{border-radius:0 0 30% 30%}.tippy-popper[x-placement^=bottom] .tippy-roundarrow{top:-7px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%;margin:0 3px}.tippy-popper[x-placement^=bottom] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(0);transform:rotate(0)}.tippy-popper[x-placement^=bottom] .tippy-arrow{border-bottom:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;top:-7px;margin:0 3px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%}.tippy-popper[x-placement^=bottom] .tippy-backdrop{-webkit-transform-origin:0 -50%;transform-origin:0 -50%}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-45%);transform:scale(1) translate(-50%,-45%)}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%);transform:scale(.2) translate(-50%);opacity:0}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(20px);transform:translateY(20px)}.tippy-popper[x-placement^=bottom] [data-animation=perspective]{-webkit-transform-origin:top;transform-origin:top}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateY(10px) rotateX(0);transform:perspective(700px) translateY(10px) rotateX(0)}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) translateY(0) rotateX(-60deg);transform:perspective(700px) translateY(0) rotateX(-60deg)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}.tippy-popper[x-placement^=bottom] [data-animation=scale]{-webkit-transform-origin:top;transform-origin:top}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=visible]{-webkit-transform:translateY(10px) scale(1);transform:translateY(10px) scale(1)}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(10px) scale(.5);transform:translateY(10px) scale(.5)}.tippy-popper[x-placement^=left] .tippy-backdrop{border-radius:50% 0 0 50%}.tippy-popper[x-placement^=left] .tippy-roundarrow{right:-12px;-webkit-transform-origin:33.33333333% 50%;transform-origin:33.33333333% 50%;margin:3px 0}.tippy-popper[x-placement^=left] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.tippy-popper[x-placement^=left] .tippy-arrow{border-left:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;right:-7px;margin:3px 0;-webkit-transform-origin:0 50%;transform-origin:0 50%}.tippy-popper[x-placement^=left] .tippy-backdrop{-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%)}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-75%,-50%);transform:scale(.2) translate(-75%,-50%);opacity:0}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(-20px);transform:translateX(-20px)}.tippy-popper[x-placement^=left] [data-animation=perspective]{-webkit-transform-origin:right;transform-origin:right}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateX(-10px) rotateY(0);transform:perspective(700px) translateX(-10px) rotateY(0)}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) translateX(0) rotateY(-60deg);transform:perspective(700px) translateX(0) rotateY(-60deg)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateX(0);transform:translateX(0)}.tippy-popper[x-placement^=left] [data-animation=scale]{-webkit-transform-origin:right;transform-origin:right}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=visible]{-webkit-transform:translateX(-10px) scale(1);transform:translateX(-10px) scale(1)}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(-10px) scale(.5);transform:translateX(-10px) scale(.5)}.tippy-popper[x-placement^=right] .tippy-backdrop{border-radius:0 50% 50% 0}.tippy-popper[x-placement^=right] .tippy-roundarrow{left:-12px;-webkit-transform-origin:66.66666666% 50%;transform-origin:66.66666666% 50%;margin:3px 0}.tippy-popper[x-placement^=right] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.tippy-popper[x-placement^=right] .tippy-arrow{border-right:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;left:-7px;margin:3px 0;-webkit-transform-origin:100% 50%;transform-origin:100% 50%}.tippy-popper[x-placement^=right] .tippy-backdrop{-webkit-transform-origin:-50% 0;transform-origin:-50% 0}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%)}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-25%,-50%);transform:scale(.2) translate(-25%,-50%);opacity:0}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(20px);transform:translateX(20px)}.tippy-popper[x-placement^=right] [data-animation=perspective]{-webkit-transform-origin:left;transform-origin:left}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateX(10px) rotateY(0);transform:perspective(700px) translateX(10px) rotateY(0)}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) translateX(0) rotateY(60deg);transform:perspective(700px) translateX(0) rotateY(60deg)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateX(0);transform:translateX(0)}.tippy-popper[x-placement^=right] [data-animation=scale]{-webkit-transform-origin:left;transform-origin:left}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=visible]{-webkit-transform:translateX(10px) scale(1);transform:translateX(10px) scale(1)}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(10px) scale(.5);transform:translateX(10px) scale(.5)}.tippy-tooltip{position:relative;color:#fff;border-radius:.25rem;font-size:.875rem;padding:.3125rem .5625rem;line-height:1.4;text-align:center;background-color:#333}.tippy-tooltip[data-size=small]{padding:.1875rem .375rem;font-size:.75rem}.tippy-tooltip[data-size=large]{padding:.375rem .75rem;font-size:1rem}.tippy-tooltip[data-animatefill]{overflow:hidden;background-color:transparent}.tippy-tooltip[data-interactive],.tippy-tooltip[data-interactive] path{pointer-events:auto}.tippy-tooltip[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-tooltip[data-inertia][data-state=hidden]{transition-timing-function:ease}.tippy-arrow,.tippy-roundarrow{position:absolute;width:0;height:0}.tippy-roundarrow{width:18px;height:7px;fill:#333;pointer-events:none}.tippy-backdrop{position:absolute;background-color:#333;border-radius:50%;width:calc(110% + 2rem);left:50%;top:50%;z-index:-1;transition:all cubic-bezier(.46,.1,.52,.98);-webkit-backface-visibility:hidden;backface-visibility:hidden}.tippy-backdrop:after{content:"";float:left;padding-top:100%}.tippy-backdrop+.tippy-content{transition-property:opacity;will-change:opacity}.tippy-backdrop+.tippy-content[data-state=visible]{opacity:1}.tippy-backdrop+.tippy-content[data-state=hidden]{opacity:0}'),e.default=J},function(t,e,n){var i=n(0),r=n(8),o=n(4),s=n(1).MSG,a=n(18),u=a.ModelStore,p=a.User,c=n(120).Logger,h=(n(20).LongPromise,n(124).UserAgent),l=n(125),d=l.SessionStore,f=l.LocalStore,y=n(126).Analytics,m=(n(127).AuthenticationDialog,n(135).NotificationDialog,n(9).Delay),g=function(t,e){return"string"==typeof e&&/^\d{4}-\d\d-\d\dT([\d\.\:]+)/.test(e)?new Date(e):e};function _(){var t=this;t._initializedAt=t._lastMoveTime=Date.now(),t._ua=new h(window.navigator&&window.navigator.userAgent),t._cache=window.store,t._user=window.store.user?new p(window.store.user):null,t._logger=new c,t._touches=0,t._manifest=t._cache.manifest||{},t.setNotifications(t._cache.notifications||[]),t._idler=new m((function(){return t._idle=!0,t.emit("idle")}))}e.API=_,_.prototype.cache=function(t){return this._cache},_.prototype.setCache=function(t){return this._cache=t,this},_.prototype.__user={watch:"userDidSet",name:"user"},_.prototype.user=function(t){return this._user},_.prototype.setUser=function(t){var e=this.user();return t!=e&&(this._user=t),t!=e&&this.userDidSet&&this.userDidSet(t,e,this.__user),this},_.prototype.__hasAvailableUpdates={watch:"hasAvailableUpdatesDidSet",name:"hasAvailableUpdates"},_.prototype.hasAvailableUpdates=function(t){return this._hasAvailableUpdates},_.prototype.setHasAvailableUpdates=function(t){var e=this.hasAvailableUpdates();return t!=e&&(this._hasAvailableUpdates=t),t!=e&&this.hasAvailableUpdatesDidSet&&this.hasAvailableUpdatesDidSet(t,e,this.__hasAvailableUpdates),this},_.prototype.__notifications={watch:"notificationsDidSet",name:"notifications"},_.prototype.notifications=function(t){return this._notifications},_.prototype.setNotifications=function(t){var e=this.notifications();return t!=e&&(this._notifications=t),t!=e&&this.notificationsDidSet&&this.notificationsDidSet(t,e,this.__notifications),this},_.prototype.session=function(t){return this._session},_.prototype.setSession=function(t){return this._session=t,this},_.prototype.__pageVisibility={watch:"pageVisibilityDidSet",name:"pageVisibility"},_.prototype.pageVisibility=function(t){return this._pageVisibility},_.prototype.setPageVisibility=function(t){var e=this.pageVisibility();return t!=e&&(this._pageVisibility=t),t!=e&&this.pageVisibilityDidSet&&this.pageVisibilityDidSet(t,e,this.__pageVisibility),this},_.prototype.ua=function(t){return this._ua},_.prototype.setUa=function(t){return this._ua=t,this},_.instance=function(){return this._instance||(this._instance=new this)},_.prototype.emit=function(t){for(var e=arguments,n=e.length,r=new Array(n>1?n-1:0);n>1;)r[--n-1]=e[n];return i.emit(this,t,r)},_.prototype.on=function(t){for(var e=arguments,n=e.length,r=new Array(n>1?n-1:0);n>1;)r[--n-1]=e[n];return i.listen.apply(i,[].concat([this,t],Array.from(r)))},_.prototype.once=function(t){for(var e=arguments,n=e.length,r=new Array(n>1?n-1:0);n>1;)r[--n-1]=e[n];return i.once.apply(i,[].concat([this,t],Array.from(r)))},_.prototype.un=function(t){for(var e=arguments,n=e.length,r=new Array(n>1?n-1:0);n>1;)r[--n-1]=e[n];return i.unlisten.apply(i,[].concat([this,t],Array.from(r)))},_.prototype.db=function(){return this._db||(this._db=new u(this))},_.prototype.analytics=function(){return this._analytics||(this._analytics=new y(this))},_.prototype.manifest=function(){return this._manifest},_.prototype.platform=function(){return window.navigator.platform},_.prototype.get=function(t){return this.db().get(t)},_.prototype.load=function(t){var e=this.db().get(t);return-3==e.v?e.fetch():Promise.resolve(e)},_.prototype.fetch=function(t){return this.rpc("fetch",[t],{models:!0})},_.prototype.preload=function(){return this},_.prototype.log=function(){for(var t=arguments,e=t.length,n=new Array(e>0?e:0);e>0;)n[e-1]=t[--e];return this._logger.log.apply(this._logger,n)},_.prototype.monacoPath=function(){return"/static/cached/scrimba-monaco-976ad19"},_.prototype.notificationsDidSet=function(){return this.getNotifications()},_.prototype.sid=function(){return null==this._sid?this._sid=this.sessionStore().get("sid"):this._sid},_.prototype.setSid=function(t){return this._sid=this.sessionStore().set("sid",t),this},_.prototype.getNotifications=function(){return this.notifications().filter((function(t){return!t.viewed}))},_.prototype.clearNotification=async function(t){if(this.notifications()){var e=this.notifications().findIndex((function(e){return e&&e.id==t}));return e>-1&&(this.notifications()[e].viewed=!0),await this.rpc("clearNotification",[t])}},_.prototype.userDidSet=function(t,e){return!0},_.prototype.msSinceInit=function(){return Date.now()-this._initializedAt},_.prototype.sendTracking=function(){return!0},_.prototype.uid=function(){var t=this._user;return t&&t.id},_.prototype.roles=function(){return this._roles||(this._roles=this._user&&this._user.roles||[])},_.prototype.isMod=function(){return this.roles().indexOf("mod")>=0},_.prototype.isMobile=function(){return null==this._isMobile?this._isMobile=this.ua().isMobile():this._isMobile},_.prototype.isSubscriber=function(){return this._user&&this._user.subscription&&this._user.subscription()},_.prototype.isEmbed=function(){return window.top!=window},_.prototype.isOffline=function(){return!window.navigator.onLine},_.prototype.isHidden=function(){return document.hidden},_.prototype.sync=function(){return this.db().sync()},_.baseUrl=function(){return window.location.origin},_.prototype.assetsPath=function(t){return"/assets/"+(this._manifest[t]||t)},_.prototype.stamp=function(t){return this},_.prototype.localStore=function(){return this._localStore||(this._localStore=new f)},_.prototype.sessionStore=function(){return this._sessionStore||(this._sessionStore=new d)},_.prototype.tryLogin=function(){return Promise.resolve(window.store.user)},_.prototype.localToken=function(){return(this._localToken=this.localStore().get("localToken"))||this.localStore().set("localToken",this._localToken=o.uuid()),this._localToken},_.prototype.getStyleVar=function(t){return window.getComputedStyle(document.body).getPropertyValue("--"+t)},_.prototype.setStyleVar=function(t,e){return document.body.style.setProperty("--"+t,e),e},_.prototype.fontSize=function(){return this._fontSize||parseInt(this.getStyleVar("fontSize")||13)},_.prototype.vw=function(){return window.innerWidth},_.prototype.vh=function(){return window.innerHeight},_.prototype.setFontSize=function(t){this._fontSize!=t&&(this._fontSize=t,this.setStyleVar("fontSize",t+"px"),this.setStyleVar("lineHeight",Math.ceil(1.5*t)+"px"),this.sessionStore().set("fontSize",t),this.emit("reflow"))},_.prototype.onmessage=function(t,e){return console.log("api.onmessage",t,e)},_.prototype.receive=function(t){var e;if(!window.DEBUG_CHAOS){if(t.CODE>=100&&t.CODE<200){(e=this.db().get(t[1]))&&e.onpacket&&e.onpacket(t)}else if(t.CODE==s.SYNC){this.log("sync",t.params()[1]);for(let e=0,i=(n=t.params()[1])?n.toArray?n.toArray():n:[],r=i.length;e<r;e++)this.db().read(i[e]);this.db().touch()}else t.CODE==s.SID?this.setSid(t.params()[1]):t.CODE==s.UPDATES_AVAILABLE?this.setHasAvailableUpdates(!0):t.CODE==s.NOTIFICATIONS_AVAILABLE&&this.setNotifications(t.params()[1]);var n;return i.Scheduler.event({type:"packet",data:t}),this}},_.prototype.touch=function(){return this._touches++,i.Scheduler.event({type:"api"})},_.prototype.uploadBlob=async function(t,e){var n=await window.fetch("/blobs",{credentials:"include",method:"POST",body:t,headers:{"Content-Type":"application/octet-stream"}}),i=await n.json();return e&&(i.locals=e),i},_.prototype.createFromSnapshot=async function(t,e){let n=Object.assign({type:"lab",title:"Something"},t);e.seed,delete e.seed;var i=await this.rpc("castCreate",[n,e],{models:!0});if(i)return App.router().go(i.url())},_.prototype.fetchBlob=async function(t,e){return void 0===e&&(e=null),await window.fetch("/blobs/"+t,{credentials:"include",method:"GET"})},_.prototype.rpc=function(t,e,n){var i,o=this;void 0===n&&(n={});var s=JSON.stringify([t,e]);if(i=o._cache[s])return o._cache[s],delete o._cache[s],n.models&&(i=o.db().deserialize(i)),Promise.resolve(i);var a=o.analytics().time("app","rpc_"+t,e[0]);return new Promise((function(i,s){var u=new XMLHttpRequest;return n.type&&(u.responseType=n.type),u.open("POST","/rpc/"+t),u.setRequestHeader("Content-Type","application/json"),console.log("rpc call",t,e),u.onload=function(){var t,e=u.response;if(!(u.status>=200&&u.status<300))return s(u.statusText);if(a.end(),n.raw)i(e);else if("arraybuffer"==n.type){var p=new Uint8Array(e);t=r.decode(p),i(t)}else e=JSON.parse(e,g).response,n.models&&(e=o.db().deserialize(e)),i(e);try{return o.touch(),App.touch()}catch(t){}},u.send(JSON.stringify({name:t,args:e,options:n}))}))}},function(t,e,n){(function(e){function n(t){return t&&t.isBuffer&&t}t.exports=n(void 0!==e&&e)||n(this.Buffer)||n("undefined"!=typeof window&&window.Buffer)||this.Buffer}).call(this,n(29).Buffer)},function(t,e,n){"use strict";e.byteLength=function(t){var e=p(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){var e,n,i=p(t),s=i[0],a=i[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),c=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;2===a&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,u[c++]=255&e);1===a&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o=[],s=0,a=n-r;s<a;s+=16383)o.push(c(t,s,s+16383>a?a:s+16383));1===r?(e=t[n-1],o.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return o.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function p(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var r,o,s=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,u=(1<<a)-1,p=u>>1,c=-7,h=n?r-1:0,l=n?-1:1,d=t[e+h];for(h+=l,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=l,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+t[e+h],h+=l,c-=8);if(0===o)o=1-p;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,i),o-=p}return(d?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,u,p=8*o-r-1,c=(1<<p)-1,h=c>>1,l=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,f=i?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?l/u:l*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[n+d]=255&a,d+=f,a/=256,r-=8);for(s=s<<r|a,p+=r;p>0;t[n+d]=255&s,d+=f,s/=256,p-=8);t[n+d-f]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var i=n(5);function r(t){return new Array(t)}(e=t.exports=r(0)).alloc=r,e.concat=i.concat,e.from=function(t){if(!i.isBuffer(t)&&i.isView(t))t=i.Uint8Array.from(t);else if(i.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return i.from.call(e,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(t)}},function(t,e,n){var i=n(5),r=i.global;function o(t){return new r(t)}(e=t.exports=i.hasBuffer?o(0):[]).alloc=i.hasBuffer&&r.alloc||o,e.concat=i.concat,e.from=function(t){if(!i.isBuffer(t)&&i.isView(t))t=i.Uint8Array.from(t);else if(i.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return i.from.call(e,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return r.from&&1!==r.from.length?r.from(t):new r(t)}},function(t,e,n){var i=n(5);function r(t){return new Uint8Array(t)}(e=t.exports=i.hasArrayBuffer?r(0):[]).alloc=r,e.concat=i.concat,e.from=function(t){if(i.isView(t)){var n=t.byteOffset,r=t.byteLength;(t=t.buffer).byteLength!==r&&(t.slice?t=t.slice(n,n+r):(t=new Uint8Array(t)).byteLength!==r&&(t=Array.prototype.slice.call(t,n,n+r)))}else{if("string"==typeof t)return i.from.call(e,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(t)}},function(t,e){e.copy=function(t,e,n,i){var r;n||(n=0);i||0===i||(i=this.length);e||(e=0);var o=i-n;if(t===this&&n<e&&e<i)for(r=o-1;r>=0;r--)t[r+e]=this[r+n];else for(r=0;r<o;r++)t[r+e]=this[r+n];return o},e.toString=function(t,e,n){var i=0|e;n||(n=this.length);var r="",o=0;for(;i<n;)(o=this[i++])<128?r+=String.fromCharCode(o):(192==(224&o)?o=(31&o)<<6|63&this[i++]:224==(240&o)?o=(15&o)<<12|(63&this[i++])<<6|63&this[i++]:240==(248&o)&&(o=(7&o)<<18|(63&this[i++])<<12|(63&this[i++])<<6|63&this[i++]),o>=65536?(o-=65536,r+=String.fromCharCode(55296+(o>>>10),56320+(1023&o))):r+=String.fromCharCode(o));return r},e.write=function(t,e){var n=e||(e|=0),i=t.length,r=0,o=0;for(;o<i;)(r=t.charCodeAt(o++))<128?this[n++]=r:r<2048?(this[n++]=192|r>>>6,this[n++]=128|63&r):r<55296||r>57343?(this[n++]=224|r>>>12,this[n++]=128|r>>>6&63,this[n++]=128|63&r):(r=65536+(r-55296<<10|t.charCodeAt(o++)-56320),this[n++]=240|r>>>18,this[n++]=128|r>>>12&63,this[n++]=128|r>>>6&63,this[n++]=128|63&r);return n-e}},function(t,e,n){e.setExtPackers=function(t){t.addExtPacker(14,Error,[h,u]),t.addExtPacker(1,EvalError,[h,u]),t.addExtPacker(2,RangeError,[h,u]),t.addExtPacker(3,ReferenceError,[h,u]),t.addExtPacker(4,SyntaxError,[h,u]),t.addExtPacker(5,TypeError,[h,u]),t.addExtPacker(6,URIError,[h,u]),t.addExtPacker(10,RegExp,[c,u]),t.addExtPacker(11,Boolean,[p,u]),t.addExtPacker(12,String,[p,u]),t.addExtPacker(13,Date,[Number,u]),t.addExtPacker(15,Number,[p,u]),"undefined"!=typeof Uint8Array&&(t.addExtPacker(17,Int8Array,s),t.addExtPacker(18,Uint8Array,s),t.addExtPacker(19,Int16Array,s),t.addExtPacker(20,Uint16Array,s),t.addExtPacker(21,Int32Array,s),t.addExtPacker(22,Uint32Array,s),t.addExtPacker(23,Float32Array,s),"undefined"!=typeof Float64Array&&t.addExtPacker(24,Float64Array,s),"undefined"!=typeof Uint8ClampedArray&&t.addExtPacker(25,Uint8ClampedArray,s),t.addExtPacker(26,ArrayBuffer,s),t.addExtPacker(29,DataView,s));r.hasBuffer&&t.addExtPacker(27,o,r.from)};var i,r=n(5),o=r.global,s=r.Uint8Array.from,a={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function u(t){return i||(i=n(44).encode),i(t)}function p(t){return t.valueOf()}function c(t){(t=RegExp.prototype.toString.call(t).split("/")).shift();var e=[t.pop()];return e.unshift(t.join("/")),e}function h(t){var e={};for(var n in a)e[n]=t[n];return e}},function(t,e,n){var i=n(30),r=n(32),o=r.Uint64BE,s=r.Int64BE,a=n(5),u=n(31),p=n(113),c=n(47).uint8,h=n(28).ExtBuffer,l="undefined"!=typeof Uint8Array,d="undefined"!=typeof Map,f=[];f[1]=212,f[2]=213,f[4]=214,f[8]=215,f[16]=216,e.getWriteType=function(t){var e=p.getWriteToken(t),n=t&&t.useraw,r=l&&t&&t.binarraybuffer,y=r?a.isArrayBuffer:a.isBuffer,m=r?function(t,e){w(t,new Uint8Array(e))}:w,g=d&&t&&t.usemap?function(t,n){if(!(n instanceof Map))return x(t,n);var i=n.size;e[i<16?128+i:i<=65535?222:223](t,i);var r=t.codec.encode;n.forEach((function(e,n,i){r(t,n),r(t,e)}))}:x;return{boolean:function(t,n){e[n?195:194](t,n)},function:b,number:function(t,n){var i,r=0|n;if(n!==r)return void e[i=203](t,n);i=-32<=r&&r<=127?255&r:0<=r?r<=255?204:r<=65535?205:206:-128<=r?208:-32768<=r?209:210;e[i](t,r)},object:n?function(t,n){if(y(n))return function(t,n){var i=n.length;e[i<32?160+i:i<=65535?218:219](t,i),t.send(n)}(t,n);v(t,n)}:v,string:(_=n?function(t){return t<32?1:t<=65535?3:5}:function(t){return t<32?1:t<=255?2:t<=65535?3:5},function(t,n){var i=n.length,r=5+3*i;t.offset=t.reserve(r);var o=t.buffer,s=_(i),a=t.offset+s;i=u.write.call(o,n,a);var p=_(i);if(s!==p){var c=a+p-s,h=a+i;u.copy.call(o,o,c,a,h)}e[1===p?160+i:p<=3?215+p:219](t,i),t.offset+=i}),symbol:b,undefined:b};var _;function v(t,n){if(null===n)return b(t,n);if(y(n))return m(t,n);if(i(n))return function(t,n){var i=n.length;e[i<16?144+i:i<=65535?220:221](t,i);for(var r=t.codec.encode,o=0;o<i;o++)r(t,n[o])}(t,n);if(o.isUint64BE(n))return function(t,n){e[207](t,n.toArray())}(t,n);if(s.isInt64BE(n))return function(t,n){e[211](t,n.toArray())}(t,n);var r=t.codec.getExtPacker(n);if(r&&(n=r(n)),n instanceof h)return function(t,n){var i=n.buffer,r=i.length,o=f[r]||(r<255?199:r<=65535?200:201);e[o](t,r),c[n.type](t),t.send(i)}(t,n);g(t,n)}function b(t,n){e[192](t,n)}function w(t,n){var i=n.length;e[i<255?196:i<=65535?197:198](t,i),t.send(n)}function x(t,n){var i=Object.keys(n),r=i.length;e[r<16?128+r:r<=65535?222:223](t,r);var o=t.codec.encode;i.forEach((function(e){o(t,e),o(t,n[e])}))}}},function(t,e,n){var i=n(46),r=n(32),o=r.Uint64BE,s=r.Int64BE,a=n(47).uint8,u=n(5),p=u.global,c=u.hasBuffer&&"TYPED_ARRAY_SUPPORT"in p&&!p.TYPED_ARRAY_SUPPORT,h=u.hasBuffer&&p.prototype||{};function l(){var t=a.slice();return t[196]=d(196),t[197]=f(197),t[198]=y(198),t[199]=d(199),t[200]=f(200),t[201]=y(201),t[202]=m(202,4,h.writeFloatBE||v,!0),t[203]=m(203,8,h.writeDoubleBE||b,!0),t[204]=d(204),t[205]=f(205),t[206]=y(206),t[207]=m(207,8,g),t[208]=d(208),t[209]=f(209),t[210]=y(210),t[211]=m(211,8,_),t[217]=d(217),t[218]=f(218),t[219]=y(219),t[220]=f(220),t[221]=y(221),t[222]=f(222),t[223]=y(223),t}function d(t){return function(e,n){var i=e.reserve(2),r=e.buffer;r[i++]=t,r[i]=n}}function f(t){return function(e,n){var i=e.reserve(3),r=e.buffer;r[i++]=t,r[i++]=n>>>8,r[i]=n}}function y(t){return function(e,n){var i=e.reserve(5),r=e.buffer;r[i++]=t,r[i++]=n>>>24,r[i++]=n>>>16,r[i++]=n>>>8,r[i]=n}}function m(t,e,n,i){return function(r,o){var s=r.reserve(e+1);r.buffer[s++]=t,n.call(r.buffer,o,s,i)}}function g(t,e){new o(this,e,t)}function _(t,e){new s(this,e,t)}function v(t,e){i.write(this,t,e,!1,23,4)}function b(t,e){i.write(this,t,e,!1,52,8)}e.getWriteToken=function(t){return t&&t.uint8array?((e=l())[202]=m(202,4,v),e[203]=m(203,8,b),e):c||u.hasBuffer&&t&&t.safe?function(){var t=a.slice();return t[196]=m(196,1,p.prototype.writeUInt8),t[197]=m(197,2,p.prototype.writeUInt16BE),t[198]=m(198,4,p.prototype.writeUInt32BE),t[199]=m(199,1,p.prototype.writeUInt8),t[200]=m(200,2,p.prototype.writeUInt16BE),t[201]=m(201,4,p.prototype.writeUInt32BE),t[202]=m(202,4,p.prototype.writeFloatBE),t[203]=m(203,8,p.prototype.writeDoubleBE),t[204]=m(204,1,p.prototype.writeUInt8),t[205]=m(205,2,p.prototype.writeUInt16BE),t[206]=m(206,4,p.prototype.writeUInt32BE),t[207]=m(207,8,g),t[208]=m(208,1,p.prototype.writeInt8),t[209]=m(209,2,p.prototype.writeInt16BE),t[210]=m(210,4,p.prototype.writeInt32BE),t[211]=m(211,8,_),t[217]=m(217,1,p.prototype.writeUInt8),t[218]=m(218,2,p.prototype.writeUInt16BE),t[219]=m(219,4,p.prototype.writeUInt32BE),t[220]=m(220,2,p.prototype.writeUInt16BE),t[221]=m(221,4,p.prototype.writeUInt32BE),t[222]=m(222,2,p.prototype.writeUInt16BE),t[223]=m(223,4,p.prototype.writeUInt32BE),t}():l();var e}},function(t,e,n){e.setExtUnpackers=function(t){t.addExtUnpacker(14,[a,p(Error)]),t.addExtUnpacker(1,[a,p(EvalError)]),t.addExtUnpacker(2,[a,p(RangeError)]),t.addExtUnpacker(3,[a,p(ReferenceError)]),t.addExtUnpacker(4,[a,p(SyntaxError)]),t.addExtUnpacker(5,[a,p(TypeError)]),t.addExtUnpacker(6,[a,p(URIError)]),t.addExtUnpacker(10,[a,u]),t.addExtUnpacker(11,[a,c(Boolean)]),t.addExtUnpacker(12,[a,c(String)]),t.addExtUnpacker(13,[a,c(Date)]),t.addExtUnpacker(15,[a,c(Number)]),"undefined"!=typeof Uint8Array&&(t.addExtUnpacker(17,c(Int8Array)),t.addExtUnpacker(18,c(Uint8Array)),t.addExtUnpacker(19,[h,c(Int16Array)]),t.addExtUnpacker(20,[h,c(Uint16Array)]),t.addExtUnpacker(21,[h,c(Int32Array)]),t.addExtUnpacker(22,[h,c(Uint32Array)]),t.addExtUnpacker(23,[h,c(Float32Array)]),"undefined"!=typeof Float64Array&&t.addExtUnpacker(24,[h,c(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&t.addExtUnpacker(25,c(Uint8ClampedArray)),t.addExtUnpacker(26,h),t.addExtUnpacker(29,[h,c(DataView)]));r.hasBuffer&&t.addExtUnpacker(27,c(o))};var i,r=n(5),o=r.global,s={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function a(t){return i||(i=n(49).decode),i(t)}function u(t){return RegExp.apply(null,t)}function p(t){return function(e){var n=new t;for(var i in s)n[i]=e[i];return n}}function c(t){return function(e){return new t(e)}}function h(t){return new Uint8Array(t).buffer}},function(t,e,n){var i=n(51);function r(t){var e,n=new Array(256);for(e=0;e<=127;e++)n[e]=o(e);for(e=128;e<=143;e++)n[e]=a(e-128,t.map);for(e=144;e<=159;e++)n[e]=a(e-144,t.array);for(e=160;e<=191;e++)n[e]=a(e-160,t.str);for(n[192]=o(null),n[193]=null,n[194]=o(!1),n[195]=o(!0),n[196]=s(t.uint8,t.bin),n[197]=s(t.uint16,t.bin),n[198]=s(t.uint32,t.bin),n[199]=s(t.uint8,t.ext),n[200]=s(t.uint16,t.ext),n[201]=s(t.uint32,t.ext),n[202]=t.float32,n[203]=t.float64,n[204]=t.uint8,n[205]=t.uint16,n[206]=t.uint32,n[207]=t.uint64,n[208]=t.int8,n[209]=t.int16,n[210]=t.int32,n[211]=t.int64,n[212]=a(1,t.ext),n[213]=a(2,t.ext),n[214]=a(4,t.ext),n[215]=a(8,t.ext),n[216]=a(16,t.ext),n[217]=s(t.uint8,t.str),n[218]=s(t.uint16,t.str),n[219]=s(t.uint32,t.str),n[220]=s(t.uint16,t.array),n[221]=s(t.uint32,t.array),n[222]=s(t.uint16,t.map),n[223]=s(t.uint32,t.map),e=224;e<=255;e++)n[e]=o(e-256);return n}function o(t){return function(){return t}}function s(t,e){return function(n){var i=t(n);return e(n,i)}}function a(t,e){return function(n){return e(n,t)}}e.getReadToken=function(t){var e=i.getReadFormat(t);return t&&t.useraw?function(t){var e,n=r(t).slice();for(n[217]=n[196],n[218]=n[197],n[219]=n[198],e=160;e<=191;e++)n[e]=a(e-160,t.bin);return n}(e):r(e)}},function(t,e,n){e.Encoder=o;var i=n(52),r=n(45).EncodeBuffer;function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}o.prototype=new r,i.mixin(o.prototype),o.prototype.encode=function(t){this.write(t),this.emit("data",this.read())},o.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")}},function(t,e,n){e.Decoder=o;var i=n(52),r=n(50).DecodeBuffer;function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}o.prototype=new r,i.mixin(o.prototype),o.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()},o.prototype.push=function(t){this.emit("data",t)},o.prototype.end=function(t){this.decode(t),this.emit("end")}},function(t,e,n){n(33),n(27),e.createCodec=n(17).createCodec},function(t,e,n){n(33),n(27),e.codec={preset:n(17).preset}},function(t,e,n){var i=n(121);function r(){this._contexts={},this._enabled=!!localStorage.debug}e.Logger=r,r.prototype.enabled=function(t){return this._enabled},r.prototype.setEnabled=function(t){return this._enabled=t,this},r.prototype.log=function(t){for(var e=arguments,n=e.length,r=new Array(n>1?n-1:0);n>1;)r[--n-1]=e[n];if(this._enabled){var o=this._contexts[t]||(this._contexts[t]=i("scrimba:"+t));return o.apply(this,r)}}},function(t,e,n){(function(i){function r(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG),t}(e=t.exports=n(122)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(o=r))})),t.splice(o,0,i)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=r,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(r())}).call(this,n(53))},function(t,e,n){var i;function r(t){function n(){if(n.enabled){var t=n,r=+new Date,o=r-(i||r);t.diff=o,t.prev=i,t.curr=r,i=r;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;u++;var r=e.formatters[i];if("function"==typeof r){var o=s[u];n=r.call(t,o),s.splice(u,1),u--}return n})),e.formatArgs.call(t,s);var p=n.log||e.log||console.log.bind(console);p.apply(t,s)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var n,i=0;for(n in t)i=(i<<5)-i+t.charCodeAt(n),i|=0;return e.colors[Math.abs(i)%e.colors.length]}(t),"function"==typeof e.init&&e.init(n),n}(e=t.exports=r.debug=r.default=r).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){e.save(t),e.names=[],e.skips=[];for(var n=("string"==typeof t?t:"").split(/[\s,]+/),i=n.length,r=0;r<i;r++)n[r]&&("-"===(t=n[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){var n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(123),e.names=[],e.skips=[],e.formatters={}},function(t,e){var n=1e3,i=6e4,r=60*i,o=24*r;function s(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var a,u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*i;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(t);if("number"===u&&!1===isNaN(t))return e.long?s(a=t,o,"day")||s(a,r,"hour")||s(a,i,"minute")||s(a,n,"second")||a+" ms":function(t){if(t>=o)return Math.round(t/o)+"d";if(t>=r)return Math.round(t/r)+"h";if(t>=i)return Math.round(t/i)+"m";if(t>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){function i(t){this._ua=t}e.UserAgent=i,i.prototype.detect=function(t){return t.test(this._ua)},i.prototype.platform=function(){return window.navigator.platform},i.prototype.isIE=function(){return this.detect(/\bTrident\b/)},i.prototype.isChrome=function(){return this.detect(/webkit\W.*(chrome|chromium)\W/i)},i.prototype.isFirefox=function(){return this.detect(/mozilla.*\Wfirefox\W/i)},i.prototype.isGecko=function(){return this.detect(/mozilla(?!.*webkit).*\Wgecko\W/i)},i.prototype.isKindle=function(){return this.detect(/\W(kindle|silk)\W/i)},i.prototype.isMobile=function(){return this.detect(/(iphone|ipod|((?:android)?.*?mobile)|blackberry|nokia)/i)},i.prototype.isOpera=function(){return this.detect(/opera.*\Wpresto\W|OPR/i)},i.prototype.isSafari=function(){return this.detect(/webkit\W(?!.*chrome).*safari\W/i)},i.prototype.isTablet=function(){return this.detect(/(ipad|android(?!.*mobile)|tablet)/i)},i.prototype.isTV=function(){return this.detect(/googletv|sonydtv/i)},i.prototype.isWebKit=function(){return this.detect(/webkit\W/i)},i.prototype.isAndroid=function(){return this.detect(/android/i)},i.prototype.isIOS=function(){return this.detect(/(ipad|iphone|ipod)/i)},i.prototype.isIPad=function(){return this.detect(/ipad/i)},i.prototype.isIPhone=function(){return this.detect(/iphone/i)},i.prototype.isIPod=function(){return this.detect(/ipod/i)},i.prototype.isPhone=function(){return this.isMobile()&&!this.isTablet()},i.prototype.isMac=function(){return this.platform().indexOf("Mac")>=0},i.prototype.isWindows=function(){return-1==this.platform().indexOf("Mac")},i.prototype.whoami=function(){return this._ua}},function(t,e,n){var i=n(0);function r(){}function o(t,e){this._prefix=t||"","temporary"==e?e=new r:e||(e=localStorage),this._store=e}function s(){return o.apply(this,arguments)}function a(t,e){this._prefix=t||"";try{this._store=e||sessionStorage}catch(t){}}r.prototype.setItem=function(t,e){return this[t]=e},r.prototype.getItem=function(t){return this[t]},r.prototype.removeItem=function(t){var e;return e=this[t],delete this[t],e},e.StoreWrapper=o,o.prototype.clear=function(){if(!this._prefix)return this._store.clear();for(let e,n=0,i=(t=Object.keys(this._store))?t.toArray?t.toArray():t:[],r=i.length;n<r;n++)e=i[n],e.startsWith(this._prefix)&&this._store.removeItem(e);var t;return this},o.prototype.set=function(t,e){if(this._store){var n=this._prefix+this.serializeKey(t),i=this.serialize(e);try{this._store.setItem(n,i)}catch(t){}}return e},o.prototype.get=function(t){return this._store?this._store.getItem(this._prefix+this.serializeKey(t)):null},o.prototype.setnx=function(t,e){var n=this.get(t);return n||this.set(t,e),n||e},o.prototype.getnum=function(t){return parseFloat(this.get(t)||0)},o.prototype.getobj=function(t,e){void 0===e&&(e=null);let n=JSON.parse(this.get(t)||"null");return null==n?e:n},o.prototype.setobj=function(t,e){return this.set(t,JSON.stringify(e))},o.prototype.del=function(t){return this._store?this._store.removeItem(this._prefix+this.serializeKey(t)):null},o.prototype.inc=function(t,e){void 0===e&&(e=1);let n=this.getnum(t)+e;return this.set(t,n),n},o.prototype.serializeKey=function(t){return"object"==typeof t?JSON.stringify(t):t},o.prototype.serialize=function(t){return"object"==typeof t?JSON.stringify(t):t},o.prototype.deserialize=function(t){return t},i.subclass(s,o),e.LocalStore=s,i.subclass(a,o),e.SessionStore=a},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}function r(){}function o(t){this._api=t,this._perf=window.performance||new r,this._flushTimings=null,this.sendMeasures=this.sendMeasures.bind(this)}r.prototype.now=function(){return Date.now()},r.prototype.mark=function(){return this},r.prototype.measure=function(){return this},r.prototype.getEntriesByType=function(){return[]},r.prototype.clearMeasures=function(){return this},r.prototype.clearMarks=function(){return this},e.Analytics=o,o.prototype.api=function(t){return this._api},o.prototype.setApi=function(t){return this._api=t,this},o.prototype.sendEvent=function(t,e,n,i){if("string"==typeof n||n instanceof String){let r=n;this.api().log("analytics:event",t,e,r,i),window.gtag&&window.gtag("event",e,{event_category:t,event_label:r,value:i})}if(!/.embed/.test(document.location.href))return/uxa/.test(t)?this.handleUXAEventForMixpanel(t,e,n,i):"string"==typeof n||n instanceof String?{label:n,value:i}:n},o.prototype.handleUXAEventForMixpanel=function(t,e,n,i){switch(e){case"notesave":return"Note Saved";case"notediscard":return"Note Discarded";case"notedel":return"Note Deleted";case"labsidebaropen":return"Playground Open Sidebar";case"labsidebarclose":return"Playground Close Sidebar";case"tutorialsidebaropen":return"Cast Open Sidebar";case"tutorialsidebarclose":return"Cast Close Sidebar";case"templatesidebaropen":return"Template Open Sidebar";case"templatesidebarclose":return"Template Close Sidebar";case"font-fize-changed":return"Font Size Changed";case"speed-change":return"Speed Changed";case"question-reply":return"Question Replied";case"question-asked":return"Question Asked";default:return void this.api().log("ignoring",t,e,n,i)}},o.prototype.sendTiming=function(t,e,n,i){if(this.api().log("analytics:timing",t,e,n,i),window.ga)return ga("send","timing",t,e,n,i)},o.prototype.cast=function(t,e,n){return void 0===n&&(n="Cast"),this.sendEvent(n,e,t)},o.prototype.castPlay=function(t,e){return this.cast(t,"Played",this.castType(e))},o.prototype.castBranch=function(t,e){return this.cast(t,"Branched",this.castType(e))},o.prototype.castType=function(t){let e;switch(t.toLowerCase()){case"lab":e="Playground";break;case"template":e="Template";break;default:e="Cast"}return e},o.prototype.castCreated=function(t,e){return this.cast(t,"Created",this.castType(e))},o.prototype.forkCreated=function(t,e){return this.cast(t,"Forked",this.castType(e))},o.prototype.castRecStart=function(t){return this.cast(t,"Recording Started")},o.prototype.castRecDiscard=function(t){return this.cast(t,"Recording Discarded")},o.prototype.castRecSave=function(t){return this.cast(t,"Recording Saved")},o.prototype.streamRecovering=function(t){return this.cast(t,"Stream Recovering")},o.prototype.streamUnauthorized=function(t){return this.cast(t,"Stream Unauthorized")},o.prototype.courseEnrolled=function(t){return this.sendEvent("Course","Enrolled",t,0)},o.prototype.twitterShare=function(t){return this.sendEvent("Share","Twitter Click",t)},o.prototype.callToAction=function(t,e){return this.sendEvent("CTA",t,e)},o.prototype.getClientId=function(){var t;return ga((function(e){return t=e.get("clientId")})),t},o.prototype.now=function(){return this._perf.now()},o.prototype.timing=function(){return this},o.prototype.time=function(t,e,n){var i=this;let r=[t,e||"time",n||""].join("::");return i._perf&&i._perf.mark&&i._perf.mark(r+"Start"),{end:function(){return i._perf&&i._perf.mark&&i._perf.mark(r+"End"),i._perf&&i._perf.measure&&i._perf.measure(r,r+"Start",r+"End"),clearTimeout(i._flushTimings),i._flushTimings=setTimeout(i.sendMeasures,500)}}},o.prototype.mark=function(t){return this._perf&&this._perf.mark&&this._perf.mark(t)},o.prototype.measure=function(){for(var t=arguments,e=t.length,n=new Array(e>0?e:0);e>0;)n[e-1]=t[--e];return this._perf&&this._perf.measure&&this._perf.measure.apply(this._perf,n)},o.prototype.sendMeasures=function(){if(this._perf.getEntriesByType){var t=this._perf.getEntriesByType("measure");this._perf.clearMeasures();for(let s,a=0,u=i(t),p=u.length;a<p;a++)if(s=u[a],!s.SENT_GA){s.SENT_GA=!0;var e,n=(e=i(s.name.split("::")))[0],r=e[1],o=e[2];r&&this.sendTiming(n,r,Math.round(s.duration),o)}return this}},o.prototype.userLoginSuccessful=function(t){return this.sendEvent("Login","Successful",t)},o.prototype.userLoginFailed=function(t){return this.sendEvent("Login","Failed",t)},o.prototype.signUpSuccessful=function(t){this.sendEvent("Sign Up","Successful",t)},o.prototype.signUpFailed=function(t){return this.sendEvent("Sign Up","Failed",t)},o.prototype.dependencyAdded=function(t,e){return this.sendEvent("Dependency","Added",t)},o.prototype.packageJSONImport=function(t){return this.sendEvent(this.castType(t)+" Import","Dependencies")},o.prototype.search=function(t){return this.sendEvent("Search","Button",{query:t})},o.prototype.filter=function(t,e){return this.sendEvent("Filter","Courses",e)},o.prototype.resumeWatching=function(t){return this.sendEvent("Resume","Watching from "+t)},o.prototype.trackAdClicked=function(t,e){return this.sendEvent(t,"Ad Clicked",{id:e,action:"Ad Clicked"})}},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(2),a=s.Dialog,u=(s.TextArea,s.TextField),p=(s.Button,n(20).LongPromise),c=o.defineTag("AuthenticationDialog",a,(function(t){t.prototype.promise=function(t){return this._promise},t.prototype.setPromise=function(t){return this._promise=t,this},t.prototype.openGithubSeamless=function(){var t="/login?from=/auth/github/seamless";if(!/11\.\d Safari/.test(window.navigator.userAgent)){var e="left="+(Math.round(window.screenLeft+.5*window.outerWidth)-300)+",width=600,top="+(Math.round(window.screenTop+.5*window.outerHeight)-300)+",height=600";return window.open(t,"ghlogin",e)}window.open(t,"_blank")},t.prototype.github=function(){var t=this;return t.openGithubSeamless(),t.uxa().queue().add(1e4,(async function(){return await t.api().githubLoginPromise(),t.hide()}))},t.prototype.signup=function(){return App.uxa().open(r(h).setPromise(this._promise).end()),this._promise=null,this.hide()},t.prototype.forgot=function(){return App.uxa().open(r(l).setPromise(this._promise).end()),this._promise=null,this.hide()},t.prototype.setup=function(){return this._promise||(this._promise=new p),this.setSubmitLabel("Log in"),t.prototype.__super__.setup.apply(this,arguments)},t.prototype.onuxahide=function(){if(this._promise)return this._promise.resolve(!0)},t.prototype.body=function(){let t;this.$$||(this.$$={});return(t=this._body=this._body||(t=r("div",this)).flag("body").setContent([r("a",t.$,"A",t).flag("githubButton").flag("lg-mb").on$(0,["tap","prevent","github"],this).setContent([t.$.B||r("i",t.$,"B","A").dataset("icon","github"),"Log in with GitHub"],2),r("h3",t.$,"C",t).setText("… or log in with email and password"),r(u,t.$,"D",t).setType("text").setName("email").setLabel("Email"),r(u,t.$,"E",t).setType("password").setName("password").setLabel("Password"),r("div",t.$,"F",t).flag("extra").setContent([r("p",t.$,"G","F").setContent(["Don't have an account yet? ",t.$.H||r("a",t.$,"H","G").on$(0,["tap","prevent","signup"],this).setText("Sign up")],2),r("p",t.$,"I","F").setContent(["Forgot your password? ",t.$.J||r("a",t.$,"J","I").on$(0,["tap","prevent","forgot"],this).setText("Reset password")],2)],2)],2)).end((t.$.B.end(),t.$.D.end(),t.$.E.end(),!0))},t.prototype.onuxasubmit=function(t,e){var n=this;return t.halt(),n.uxa().queue().add(200,(async function(){if(!await n.api().userAuthenticate(e.email,e.password,{models:!0}))throw new Error("Incorrect email/password")}))}}));e.AuthenticationDialog=c;var h=o.defineTag("SignupDialog",a,(function(t){t.prototype.promise=function(t){return this._promise},t.prototype.setPromise=function(t){return this._promise=t,this},t.prototype.onuxahide=function(){if(this._promise)return this._promise.resolve(!0)},t.prototype.body=function(){let t;this.$$||(this.$$={});return(t=this._body=this._body||(t=r("div",this)).flag("body").setContent([r("h2",t.$,"A",t).setText("Sign up with email and password"),r(u,t.$,"B",t).setType("email").setName("email").setLabel("Email").setRequired(!0),r(u,t.$,"C",t).setType("text").setName("name").setLabel("Name").setRequired(!0),r(u,t.$,"D",t).setType("password").setName("password").setLabel("Password").setRequired(!0).setMinlength(5)],2)).end((t.$.B.end(),t.$.C.end(),t.$.D.end(),!0))},t.prototype.onuxasubmit=function(t,e){var n=this;return n.uxa().queue().add(200,(async function(){var t=await n.api().userCreate(e);if(t&&t.message)throw new Error(t.message)}))}})),l=o.defineTag("ForgotDialog",a,(function(t){t.prototype.promise=function(t){return this._promise},t.prototype.setPromise=function(t){return this._promise=t,this},t.prototype.onuxahide=function(){if(this._promise)return this._promise.resolve(!0)},t.prototype.body=function(){let t;this.$$||(this.$$={});return(t=this._body=this._body||(t=r("div",this)).flag("body").setContent([r("h2",t.$,"A",t).setText("Reset password"),r(u,t.$,"B",t).setType("email").setName("email").setLabel("Email")],2)).end((t.$.B.end(),!0))},t.prototype.onuxasubmit=function(t,e){var n=this;return n.uxa().queue().add(200,(async function(){if(await n.api().rpc("userForgotPassword",[e.email]))return n.uxa().flash("Instructions for resetting your password been sent to "+e.email);throw new Error("There is no user with the given email address")}))}})),d=o.defineTag("ResetPasswordDialog",a,(function(t){t.prototype.token=function(t){return this._token},t.prototype.setToken=function(t){return this._token=t,this},t.prototype.aid=function(t){return this._aid},t.prototype.setAid=function(t){return this._aid=t,this},t.prototype.setup=function(){var t=this;return t._status="loading",t.setSubmitLabel("Reset"),t.uxa().queue().add((async function(){return t._status=await t.api().rpc("userResetPassword",[t.aid(),t.token()])}))},t.prototype.body=function(){let t;this.$$||(this.$$={});return(t=this._body=this._body||(t=r("div",this)).flag("body")).setContent([t.$.A||r("h2",t.$,"A",t).setText("Reset password"),"loading"==this._status?t.$.B||r("p",t.$,"B",t).setText("Loading..."):"invalid"==this._status?t.$.C||r("p",t.$,"C",t).setText("Invalid reset link. Please try again."):"valid"==this._status?(t.$.D||r(u,t.$,"D",t).setType("password").setName("password").setLabel("New password").setRequired(!0).setMinlength(5)).end():void 0],1)},t.prototype.onuxasubmit=function(t,e){var n=this;return n.uxa().queue().add(200,(async function(){if("updated"==await n.api().rpc("userResetPassword",[n.aid(),n.token(),e.password]))return n.uxa().flash("Your password has been updated"),App.router().url().setHash(""),"";throw new Error("Something went wrong")}))}}));e.ResetPasswordDialog=d},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(54).Menu,a=n(55).Popover,u=(n(56).Snackbar,o.defineTag("Overlay",(function(t){t.prototype.component=function(t){return this._component},t.prototype.setComponent=function(t){return this._component=t,this},t.prototype.target=function(t){return this._target},t.prototype.setTarget=function(t){return this._target=t,this},t.prototype.options=function(t){return this._options},t.prototype.setOptions=function(t){return this._options=t,this},t.prototype.isModal=function(t){return this._isModal},t.prototype.setIsModal=function(t){return this._isModal=t,this},t.prototype.isMenu=function(t){return this._isMenu},t.prototype.setIsMenu=function(t){return this._isMenu=t,this},t.prototype.render=function(){var t=this.$;return this.$open(0).setChildren([this.component().flag("floating").flag("paper").end(),t[0]||r("div",t,0,this).flag("backdrop").on$(0,["tap","autohide"],this)],1).synced()},t.prototype.show=function(){var t;return document.body.appendChild(this.dom()),this.component().trigger("uxashow"),this._isMenu&&this.reflow(),this.dom().offsetWidth,i.TagManager.insert(this,this.dom().parentNode),this.flag("uxa-show"),this.component().flag("uxa-show"),i.TagManager.refresh(),this.target()&&(t=this.target())&&t.flag&&t.flag("uxa-overlay-active"),this},t.prototype.hide=function(){var t,e=this;if(!e.hasFlag("uxa-hide"))return e.flag("uxa-hide"),e.component().flag("uxa-hide"),e.unflag("uxa-show"),e.component().unflag("uxa-show"),e.target()&&(t=e.target())&&t.unflag&&t.unflag("uxa-overlay-active"),setTimeout((function(){var t=e.dom().parentNode;return t.removeChild(e.dom()),i.TagManager.remove(e,t),e.component().unflag("uxa-hide"),i.TagManager.refresh()}),200),e},t.prototype.onevent=function(t){return!this._eventResponder||!t.bubble()||this.contains(this._eventResponder)||t.event()instanceof Event||t.redirect(this._eventResponder),this},t.prototype.autohide=function(){if(!this._isModal)return this.component().trigger("uxa:hide")},t.prototype.onuxahide=function(t){return t.stop(),this.hide()},t.prototype.onuxashow=function(t){return t.stop()},t.prototype.setup=function(){return this._isMenu=this.component()instanceof s||this.component()instanceof a,this._isModal=this.component().hasFlag("modal"),this._eventResponder=this._options&&this._options.responder||this.target()},t.prototype.reflow=function(){if(!this.target().dom().offsetParent)return this.hasFlag("hide")||this.hide(),this;var t=this.target().dom().getBoundingClientRect(),e=(this.component().dom().offsetWidth,this.component().dom().offsetHeight,window.innerWidth),n=window.innerHeight,i=Math.round(t.left+0+.5*t.width),r=Math.round(t.top+0+.5*t.height),o=i>.5*e?1:0,s=r>.5*n?1:0;this.setFlag("ay",s?"below":"above"),this.setFlag("ax",i>.5*e?null:"lft");var a={maxWidth:400};return this.component().flag("abs"),s<.5?(a.top=t.bottom,a.maxHeight=n-a.top):(a.bottom=n-t.top,a.maxHeight=n-a.bottom),o<.5?a.left=Math.max(t.left,10):a.right=Math.max(e-t.right,10),console.log(i,e,r,n,o,s),this.component().css(a)}})));function p(){}e.Overlay=u,e.Stack=p,p.show=function(t,e,n){return void 0===n&&(n={}),r(u).setComponent(t).setTarget(e).setOptions(n).end().show()}},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(21).Icon,a=o.defineTag("MenuItem","a",(function(t){t.prototype.action=function(t){return this._action},t.prototype.setAction=function(t){return this._action=t,this},t.prototype.icon=function(t){return this._icon},t.prototype.setIcon=function(t){return this._icon=t,this},t.prototype.rightIcon=function(t){return this._rightIcon},t.prototype.setRightIcon=function(t){return this._rightIcon=t,this},t.prototype.label=function(t){return this._label},t.prototype.setLabel=function(t){return this._label=t,this},t.prototype.subtext=function(t){return this._subtext},t.prototype.setSubtext=function(t){return this._subtext=t,this},t.prototype.disabled=function(t){return this.getAttribute("disabled")},t.prototype.setDisabled=function(t){return this.setAttribute("disabled",t),this},t.prototype.contextData=function(){for(var t=null,e=this;e;){if(t=e.data())return t;e=e.parent()}return null},t.prototype.ontap=function(e){if(this.href())return this.trigger("uxa:hide"),t.prototype.__super__.ontap.call(this,e);e.cancel().halt().silence();var n=this.action();return"string"==typeof n||n instanceof String?this.trigger(n,this.contextData()):n instanceof Array?this.trigger(n[0],n.slice(1)):this.trigger("activate"),this.trigger("uxa:hide")},t.prototype.render=function(){var t=this.$;return this.$open(0).setChildren([this.icon()?(t[0]||r(s,t,0,this).flag("left")).bindData(this,"icon",[]).end():void 0,this.label()?(t[1]||r("div",t,1,this).flag("text")).setNestedAttr("uxa","md",this.label()).end():void 0,this.subtext()?(t[2]||r("div",t,2,this).flag("subtext").flag("muted")).setNestedAttr("uxa","md",this.subtext()).end():void 0,this.rightIcon()?(t[3]||r(s,t,3,this).flag("right")).bindData(this,"rightIcon",[]).end():void 0],1).synced()}}));e.MenuItem=a},function(t,e,n){var i=n(0),r=i.createTagList,o=i.createElementFactory(),s=i.createTagScope(),a=s.defineTag("TextField",(function(t){t.prototype.label=function(t){return this._label},t.prototype.setLabel=function(t){return this._label=t,this},t.prototype.desc=function(t){return this._desc},t.prototype.setDesc=function(t){return this._desc=t,this},t.prototype.multiline=function(t){return this._multiline},t.prototype.setMultiline=function(t){return this._multiline=t,this},["disabled","placeholder","type","name","value","required","pattern","minlength","maxlength","autocomplete"].map((function(e){var n=i.toCamelCase("set-"+e);return t.prototype[e]=function(t){return this.input()[e]()},t.prototype[n]=function(t){return this.input()[n](t),this}})),t.prototype.input=function(){this.$$||(this.$$={});return(this._input=this._input||o("input",this).flag("input").setPlaceholder(" ").setType("text")).end()},t.prototype.render=function(){var t=this.$;return this.$open(0).flag("uxa").setChildren([this.input(),t[0]||o("span",t,0,this).flag("after"),t[1]||o("hr",t,1,this).flag("static"),t[2]||o("hr",t,2,this).flag("anim"),t[3]||o("label",t,3,this),t[4]||o("span",t,4,this).flag("helper").flag("desc")],1).synced((t[3].setContent(this.label(),3),t[4].dataset("desc",this.desc()).setContent(this.desc(),3).end(),!0))}}));e.TextField=a;var u=s.defineTag("TextAreaProxy","textarea",(function(t){t.prototype.owner=function(t){return this._owner},t.prototype.setOwner=function(t){return this._owner=t,this},t.prototype.onfocus=function(t){return this.owner().dom().focus()},t.prototype.oninput=function(t){return this.owner().dom().innerText=this.dom().value,this.owner().dom().focus()}})),p=s.defineTag("Editable",(function(t){t.prototype.placeholder=function(t){return this.getAttribute("placeholder")},t.prototype.setPlaceholder=function(t){return this.setAttribute("placeholder",t),this},t.prototype.minlength=function(t){return this.getAttribute("minlength")},t.prototype.setMinlength=function(t){return this.setAttribute("minlength",t),this},t.prototype.maxlength=function(t){return this.getAttribute("maxlength")},t.prototype.setMaxlength=function(t){return this.setAttribute("maxlength",t),this},t.prototype.required=function(t){return this.getAttribute("required")},t.prototype.setRequired=function(t){return this.setAttribute("required",t),this},t.prototype.name=function(t){return this.getAttribute("name")},t.prototype.setName=function(t){return this.setAttribute("name",t),this},t.prototype.build=function(){var t=this;t.setTabindex(0);try{t.dom().contentEditable="plaintext-only"}catch(e){t.dom().contentEditable=!0}return t._raw=o(u).flag("input").setTabindex("-1").setOwner(t).end(),t._raw.setValue=function(e){return t.setValue(e)},t},t.prototype.raw=function(){return this._raw},t.prototype.setAttribute=function(e,n){return this._raw&&this.raw().setAttribute(e,n),t.prototype.__super__.setAttribute.apply(this,arguments),this},t.prototype.setValue=function(t){return this.dom().innerText=t,this.raw().dom().value=t,this},t.prototype.value=function(){return this.dom().innerText},t.prototype.oninput=function(){return this.raw().dom().value=this.value(),this}})),c=s.defineTag("TextArea",a,(function(t){t.prototype.input=function(){this.$$||(this.$$={});return(this._input=this._input||o(p,this).flag("input")).end()},t.prototype.render=function(){var t=this.$;return this.$open(0).flag("uxa").setChildren([this.input().raw(),this.input(),t[0]||o("span",t,0,this).flag("after"),t[1]||o("hr",t,1,this).flag("static"),t[2]||o("hr",t,2,this).flag("anim"),t[3]||o("label",t,3,this),t[4]||o("span",t,4,this).flag("helper").flag("desc")],1).synced((t[3].setContent(this.label(),3),t[4].dataset("desc",this.desc()).setContent(this.desc(),3).end(),!0))}}));e.TextArea=c;var h=s.defineTag("SelectField",a,(function(t){t.prototype.setOptions=function(t){let e;this.$$||(this.$$={});this.input();return(e=this._input=this._input||(e=o("select",this)).flag("input")).setContent(function(e){var n;for(let i,r=0,s=(n=t)?n.toArray?n.toArray():n:[],a=e.taglen=s.length;r<a;r++)i=s[r],(e[r]||o("option",e,r)).setValue(i[0],1).setContent(i[1]||i[0],3).end();return e}(e.$.A||r(e.$,"A",this._input)),4).end(),this},t.prototype.input=function(){this.$$||(this.$$={});return(this._input=this._input||o("select",this).flag("input")).end()}}));e.SelectField=h},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(21).Icon,a=o.defineTag("ListItem",(function(t){t.prototype.icon=function(t){return this._icon},t.prototype.setIcon=function(t){return this._icon=t,this},t.prototype.rightIcon=function(t){return this._rightIcon},t.prototype.setRightIcon=function(t){return this._rightIcon=t,this},t.prototype.label=function(t){return this._label},t.prototype.setLabel=function(t){return this._label=t,this},t.prototype.subtext=function(t){return this._subtext},t.prototype.setSubtext=function(t){return this._subtext=t,this},t.prototype.render=function(){var t=this.$;return this.$open(0).setChildren([(t[0]||r("div",t,0,this).flag("gutter")).setContent(this.icon()?(t[1]||r(s,t,1,0).flag("left")).bindData(this,"icon",[]).end():void 0,3),(t[2]||r("div",t,2,this).flag("main")).setContent([this.label()?(t[3]||r("div",t,3,2).flag("h3").flag("text")).setNestedAttr("uxa","md",this.label()).end():void 0,this.subtext()?(t[4]||r("div",t,4,2).flag("p1").flag("muted")).setNestedAttr("uxa","md",this.subtext()).end():void 0],1),this.rightIcon()?(t[5]||r(s,t,5,this).flag("right")).bindData(this,"rightIcon",[]).end():void 0],1).synced()}}));e.ListItem=a},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(57).Form,a=n(34).Button,u=n(58).Indicator,p=o.defineTag("Dialog",s,(function(t){t.prototype.type=function(t){return this._type},t.prototype.setType=function(t){return this._type=t,this},t.prototype.__submitLabel={default:"confirm",name:"submitLabel"},t.prototype.submitLabel=function(t){return this._submitLabel},t.prototype.setSubmitLabel=function(t){return this._submitLabel=t,this},t.prototype._submitLabel="confirm",t.prototype.__cancelLabel={default:"dismiss",name:"cancelLabel"},t.prototype.cancelLabel=function(t){return this._cancelLabel},t.prototype.setCancelLabel=function(t){return this._cancelLabel=t,this},t.prototype._cancelLabel="dismiss",t.prototype.setContent=function(t,e){return this.log("setting content for dialog"),this._content=i.static(t,e),this},t.prototype.onsubmit=async function(t){var e=this;if(t.cancel().halt(),!e.uxa().queue().busy()){var n=e.trigger("uxa:submit",e.formData());return await e.uxa().queue(),e.uxa().queue().failed()?(e.log("failed?!?!",e.uxa().queue().error()),e.uxa().flash(e.uxa().queue().error()),e.uxa().queue().reset()):n.isPrevented()?void 0:setTimeout((function(){return e.hide()}),200)}},t.prototype.show=function(){return this.uxa().open(this)},t.prototype.hide=function(){return this.trigger("uxa:hide")},t.prototype.submit=function(){return this},t.prototype.tapDismiss=async function(t){var e=this;return t.prevent().stop(),e.trigger("uxa:dismiss"),e.uxa().queue().idle()?e.hide():(await e.uxa().queue(),setTimeout((function(){return e.hide()}),200))},t.prototype.header=function(){this.$$||(this.$$={});return this._header=this._header||r("header",this).flag("header")},t.prototype.indicator=function(){this.$$||(this.$$={});return(this._indicator=this._indicator||r(u,this).flag("indicator").setType("forward")).bindData(this.uxa(),"queue",[]).end()},t.prototype.body=function(){this.$$||(this.$$={});return(this._body=this._body||r("section",this).flag("body")).setContent(this._content?this._content:this._template?this.renderTemplate():void 0,3)},t.prototype.footer=function(){let t;this.$$||(this.$$={});return(t=this._footer=this._footer||(t=r("footer",this)).flag("footer").flag("flat").setContent([r(a,t.$,"A",t).setType("button").on$(0,["tap","tapDismiss"],this),r(a,t.$,"B",t).flag("primary").setType("submit")],2)).end((t.$.A.setLabel(this.cancelLabel()).end(),t.$.B.setLabel(this.submitLabel()).end(),!0))},t.prototype.render=function(){return this.$open(0).flag("uxa").setChildren([this.header(),this.body(),this.footer(),this.indicator()],1).synced()}}));e.Dialog=p},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(34).IconButton,a=o.defineTag("Tile",(function(t){t.prototype.actions=function(t){return this._actions},t.prototype.setActions=function(t){return this._actions=t,this},t.prototype.__md={default:"# Hello\n## Subtitle\nSome random text right here",name:"md"},t.prototype.md=function(t){return this._md},t.prototype.setMd=function(t){return this._md=t,this},t.prototype._md="# Hello\n## Subtitle\nSome random text right here",t.prototype.main=function(){let t;this.$$||(this.$$={});return(t=this._main=this._main||(t=r("div",this)).flag("main").setContent([r("div",t.$,"A",t).flag("actions").setContent(t.$.B||r(s,t.$,"B","A").setIcon("*"),2),r("span",t.$,"C",t).flag("p1")],2)).end((t.$.B.end(),t.$.C.setNestedAttr("uxa","md",this.md()).end(),!0))},t.prototype.footer=function(){let t;this.$$||(this.$$={});return this._footer=this._footer||(t=r("div",this)).flag("footer").setContent([r("div",t.$,"A",t).flag("p1").setText("By Some author"),r("div",t.$,"B",t).flag("c1").setText("This is the footer")],2)},t.prototype.render=function(){return this.$open(0).setChildren([this.main(),this.footer()],1).synced()}}));e.Tile=a},function(t,e,n){var i=n(0).createTagScope().defineTag("Actionable",(function(t){t._flagName=null,t.prototype.action=function(t){return this._action},t.prototype.setAction=function(t){return this._action=t,this},t.prototype.contextData=function(){for(var t=null,e=this;e;){if(t=e.data())return t;e=e.parent()}return null},t.prototype.ontap=function(t){var e=this.action();return e&&this.trigger("uxa:action",e),"string"==typeof e||e instanceof String?(t.halt().silence(),this.trigger(e,this.contextData())):e instanceof Array?(t.halt().silence(),this.trigger(e[0],e.slice(1))):t._responder=null,this}}));e.Actionable=i},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(2),a=s.Button,u=s.Dialog,p=o.defineTag("NotificationDialog",u,(function(t){t.prototype.__notifications={default:[],name:"notifications"},t.prototype.notifications=function(t){return this._notifications},t.prototype.setNotifications=function(t){return this._notifications=t,this},t.prototype._notifications=[],t.prototype.notification=function(t){return this._notification},t.prototype.setNotification=function(t){return this._notification=t,this},t.prototype.index=function(t){return this._index},t.prototype.setIndex=function(t){return this._index=t,this},t.prototype.__dismissable={default:!1,name:"dismissable"},t.prototype.dismissable=function(t){return this._dismissable},t.prototype.setDismissable=function(t){return this._dismissable=t,this},t.prototype._dismissable=!1,t.prototype.__emoji={default:"👋",name:"emoji"},t.prototype.emoji=function(t){return this._emoji},t.prototype.setEmoji=function(t){return this._emoji=t,this},t.prototype._emoji="👋",t.prototype.setup=function(){var t;return this.setIndex(0),this.setNotification(this.notifications()[t=this.index()]),this.notifications()[t]},t.prototype.onuxasubmit=function(t){var e=this;return e.uxa().queue().add(200,(function(){return e.api().clearNotification(e.notification().id),e.index()+1<e.notifications().length?(e.setIndex(e.index()+1),e.setNotification(e.notifications()[e.index()]),t.halt().prevent()):e.hide()}))},t.prototype.header=function(){if(this.notification())return r("header").flag("emojiHeadline").setContent(this.notification().emoji||this.emoji(),3)},t.prototype.footer=function(){let t;this.$$||(this.$$={});return(t=this._footer=this._footer||(t=r("footer",this)).flag("footer").flag("flat")).setContent([this.dismissable()?(t.$.A||r(a,t.$,"A",t).setType("button").on$(0,["tap","tapDismiss"],this)).setLabel(this.cancelLabel()).end():void 0,(t.$.B||r(a,t.$,"B",t).flag("primary").setType("submit").setLabel("ok!")).end()],1)},t.prototype.body=function(){let t;this.$$||(this.$$={});if(this.notification()){var e=this.notification();return(t=this._body=this._body||(t=r("div",this)).flag("body").flag("NotificationDialog").setContent(t.$.A||r("span",t.$,"A",t),2)).end((t.$.A.setContent("purchaseCompleted"==e.type?i.static([t.$.B||r("h2",t.$,"B","A").setText("Purchase completed!"),Number(e.quantity)>1?(t.$.C||r("span",t.$,"C","A")).setText("Your "+e.processor+" purchase of "+e.quantity+" licenses was successful. You should receive an e-mail from us with details on how your users can sign up."):(t.$.D||r("span",t.$,"D","A")).setText("Your "+e.processor+" purchase of the course was successful. May your learning be swift and boundless! 🙇🏼‍♂️")],1,1):i.static([e.title?(t.$.E||r("h2",t.$,"E","A")).setContent(e.title,3):void 0,(t.$.F||r("span",t.$,"F","A")).setContent(e.message,3)],1,2),3),!0))}}}));e.NotificationDialog=p},function(t,e,n){"use strict";n.r(e);var i=n(41);var r,o,s,a=Symbol();class u extends(imba.tags.get("component","ImbaElement")){}imba.tags.define("ide-sidebar",u,{}),r=i.SpaceView,o={sidebar2(){var t,e,n,i=imba.ctx||{};return this.$sidebar||(this.$sidebar=(e=n=1,(t=i[a])||(e=n=0,i[a]=t=imba.createComponent("ide-sidebar",null,null,"Hello there!")),e||(t.up$=i._),t.slot$("__",t),e||!t.setup||t.setup(n),t.end$(n),t))}},s=Object.getOwnPropertyDescriptors(o),Object.defineProperties(r.prototype,s)},function(t,e){var n=e.Theme={base:"vs-dark",inherit:!1,named:{background:"282f33",foreground:"D4D4D4",keyword:"ea9b80",operator:"ea9b80",string:"B7DE95",number:"598DA6",bool:"598DA6",symbol:"B7DE95",regex:"FD9231",regexgroup:"FFB26D",comment:"5D6E7A",constant:"BD9AC2",identifier:"d4d4d4",xml:"D9BB72",xmlref:"d2845f",decl:"75AAFF",key:"a7c9de",lineNumber:"3b4750",agentCursor:"89b0fc",localCursor:"ffe796",lvar:"dcdbc7",limport:"91b7ea",string:"7da4b7",tagbase:"D9BB73",tagname:"D9BB73",tagstr:"a0c6ca",tagop:"d17e53",tagbracket:"8e7f54",tagattr:"D9BB73",tagmodifier:"f6d18d",taglistener:"f6d18d",special:"ffdb59",imbasel:"e0ade3",imbaselbracket:"e9e19b"},toMonaco:function(){var t=JSON.stringify(this),e=this.named;return t=t.replace(/@(\w+)/g,(function(t,n){return e[n]||t})),JSON.parse(t)},toTheme:function(){var t,e=this.toMonaco(),n=e.tokenColors=[];for(let i,r=0,o=(t=e.rules)?t.toArray?t.toArray():t:[],s=o.length;r<s;r++){if(i=o[r],!i.foreground)continue;let t={name:i.token,scope:i.token,settings:{foreground:"#"+i.foreground}};n.push(t)}return e.rules,delete e.rules,e.colors,delete e.colors,e.type="dark",e.name="Imba Dark",e},rules:[{token:"",foreground:"@foreground",background:"@background"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"@keyword"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"identifier",foreground:"@identifier"},{token:"identifier.const",foreground:"@constant"},{token:"identifier.const.class",foreground:"@decl"},{token:"identifier.class",foreground:"@decl"},{token:"identifier.const.tag",foreground:"@decl"},{token:"identifier.decl",foreground:"@decl"},{token:"identifier.tag",foreground:"@decl"},{token:"identifier.def",foreground:"@decl"},{token:"identifier.key",foreground:"@key"},{token:"identifier.env",foreground:"@keyword"},{token:"identifier.special",foreground:"@special"},{token:"identifier.import",foreground:"@limport"},{token:"entity",foreground:"@decl"},{token:"entity.name.type",foreground:"@decl"},{token:"entity.name.function",foreground:"@decl"},{token:"entity.name.tag",foreground:"@xml"},{token:"storage.type.function",foreground:"@keyword"},{token:"storage.type.class",foreground:"@keyword"},{token:"unit",foreground:"ff9191"},{token:"comment",foreground:"@comment"},{token:"operator",foreground:"@operator"},{token:"number",foreground:"@number"},{token:"number.hex",foreground:"@number"},{token:"numeric.css",foreground:"@number"},{token:"regexp",foreground:"@regex"},{token:"regexp.escape",foreground:"@regexgroup"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"boolean",foreground:"@bool"},{token:"constant.numeric",foreground:"@number"},{token:"constant.language.boolean",foreground:"@bool"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.access.imba",foreground:"DCDCDB"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"delimiter.eq.tag",foreground:"ea9b7c"},{token:"tag",foreground:"@tagbase"},{token:"tag.name",foreground:"@tagname"},{token:"tag.open",foreground:"@tagbracket"},{token:"tag.close",foreground:"@tagbracket"},{token:"tag.attribute",foreground:"@tagattr"},{token:"tag.attribute.listener",foreground:"@taglistener"},{token:"tag.attribute.modifier",foreground:"@tagmodifier"},{token:"paren.open.tag",foreground:"@taglistener"},{token:"paren.close.tag",foreground:"@taglistener"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"@xml"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"@key"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"@key"},{token:"attribute.value",foreground:"@number"},{token:"attribute.value.number.css",foreground:"@number"},{token:"attribute.value.unit.css",foreground:"@number"},{token:"attribute.value.hex.css",foreground:"@number"},{token:"string",foreground:"@string"},{token:"string.sql",foreground:"@string"},{token:"keyword",foreground:"@keyword"},{token:"keyword.flow",foreground:"@keyword"},{token:"keyword.json",foreground:"@keyword"},{token:"keyword.flow.scss",foreground:"@keyword"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"},{token:"entity.name.selector.css",foreground:"@xml"},{token:"support.type.property-name.css",foreground:"@decl"},{token:"meta.object-literal.key",foreground:"@key"},{token:"style.selector",foreground:"e9e19b"},{token:"style.selector.context",foreground:"eec49d"},{token:"style.property",foreground:"e0ade3"},{token:"style.property.var",foreground:"ff93d0"},{token:"style.value",foreground:"a49feb"},{token:"style.value.unit",foreground:"ff9191"},{token:"style.value.var",foreground:"ff93d0"},{token:"style.start-operator",foreground:"6d829b"},{token:"style.open",foreground:"@xml"},{token:"style.close",foreground:"@xml"}],colors:{foreground:"#@foreground","editor.background":"#282f33","editorGutter.background":"#282f33","editor.selectionBackground":"#30455f","editorLineNumber.foreground":"#5D6E7A","editorWidget.background":"#20262a","editorWidget.border":"#20262a","list.focusBackground":"#33393f","list.hoverBackground":"#282f33","list.highlightForeground":"#ffffff","input.foreground":"#ffffff","editorSuggestWidget.foreground":"#@foreground","editorHoverWidget.background":"#20262a","editorCursor.foreground":"#@agentCursor"}};window.TTH=n},function(t,e,n){var i={},r=n(139).setupMode,o="delimiter.access",s="variable.instance",a="identifier.const";e.setup=i.setup=function(t){return t.IMBA_WORKER=r({}),i};e.conf={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#%\^\&\*\(\)\=\$\-\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{blockComment:["###","###"],lineComment:"#"},brackets:[["{","}","delimiter.curly"],["[","]","delimiter.square"],["(",")","delimiter.parenthesis"],["<",">","delimiter.angle"]],autoClosingPairs:[{open:'"',close:'"',notIn:["string","comment"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"{",close:"}",notIn:["comment"]},{open:"[",close:"]",notIn:["string","comment"]},{open:"(",close:")",notIn:["string","comment"]},{open:"<",close:">",notIn:["string","comment","operators"]}],onEnterRules:[{beforeText:/^\s*(?:css |def|get \w|set \w|class|for|if|elif|else|while|try|with|finally|except|async).*?$/,action:{indentAction:1}},{beforeText:/\s*(?:do)\s*(\|.*\|\s*)?$/,action:{indentAction:1}}]},e.language={defaultToken:"invalid",ignoreCase:!1,tokenPostfix:".imba",brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["def","and","or","is","isnt","not","on","yes","@","no","off","true","false","null","this","self","new","delete","typeof","in","instanceof","return","throw","break","continue","debugger","if","elif","else","switch","for","while","do","try","catch","finally","class","extends","super","undefined","then","unless","until","loop","of","by","when","tag","prop","export","import","extend","var","let","const","require","isa","await","static"],boolean:["true","false","yes","no","undefined"],contextual_keywords:["from","global","attr"],operators:["=","!","~","?",":","!!","&","|","^","%","<<",">>",">>>","+=","-=","*=","/=","&=","|=","?=","^=","%=","<<=",">>=",">>>=","..","..."],logic:[">","<","==","<=",">=","!=","&&","||","===","!=="],ranges:["..","..."],dot:["."],math:["+","-","*","/","++","--"],symbols:/[=><!~?&%|+\-*\/\^\.,\:]+/,escapes:/\\(?:[abfnrtv\\"'$]|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,postaccess:/(:(?=\w))?/,ivar:/\@[a-zA-Z_]\w*/,constant:/[A-Z][A-Za-z\d\-\_]*/,className:/[A-Z][A-Za-z\d\-\_]*|[A-Za-z\d\-\_]+/,methodName:/[A-Za-z\_\$][A-Za-z\d\$\_]*(\-+[\w\$]+)*[\?\!\=]?/,identifier:/[a-z_][A-Za-z\d\_\$]*(\-+[\w\$]+)*[\?\!]?/,anyIdentifier:/[A-Za-z_\$][A-Za-z\d\-\_\$]*/,newline:/\n/,regEx:/\/(?!\/\/)(?:[^\/\\]|\\.)*\/[igm]*/,regexpctl:/[(){}\[\]\$\^|\-*+?\.]/,regexpesc:/\\(?:[bBdDfnrstvwWn0\\\/]|@regexpctl|c[A-Z]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})/,tokenizer:{root:[{include:"@body"}],body:[[/([a-z]\w*)(\:)(?=\w)/,{cases:{"this:":["variable.predefined.this","delimiter.access"],"self:":["variable.predefined.self","delimiter.access"],"@default":["identifier","delimiter.access"]}}],[/(@ivar)(\:)(?=\w)/,[s,o]],[/(@constant)(\:)(?=\w)/,[a,o]],[/(class|tag|module)(?=\s)/,{token:"keyword.$1",next:"@declstart.$1"}],{include:"@css_statement"},[/(def|get|set)(?=\s)/,{token:"keyword.$1",next:"@defstart.$1"}],[/(prop|attr)(?=\s)/,{token:"keyword.$1",next:"@propstart.$1"}],[/(import)(?=\s)/,{token:"keyword.$1",next:"@importstart.$1"}],[/([a-z]\w*)(:?(?!\w))/,{cases:{$2:["key.identifier","delimiter"],this:"variable.predefined.this",self:"variable.predefined.self","$1@boolean":{token:"boolean.$0"},"$1@keywords":{token:"keyword.$0"},"$1@contextual_keywords":{token:"identifier.$0"},"@default":["identifier","delimiter"]}}],[/\@[a-zA-Z_\$]\w*(\-\w+)*[\?\!]?/,"variable.instance"],[/\$\w+\$/,"identifier.env"],[/\$\d+/,"identifier.special"],[/\$[a-zA-Z_\$]\w*(\-\w+)*/,"identifier.sys"],[/[A-Z][A-Za-z\d\-\_]*/,{token:"identifier.const"}],[/[a-z_][A-Za-z\d\_]*(\-\w+)*[\?\!]?/,{token:"identifier"}],[/\$/,{token:"identifier.special"}],[/\(/,{token:"paren.open",next:"@parens"}],{include:"@whitespace"},{include:"@tag"},{include:"@tag_singleton_ref"},[/### (javascript|compiles to)\:/,{token:"comment",next:"@js_comment",nextEmbedded:"text/javascript"}],[/### (css\b.*)/,{token:"comment",next:"@style_comment",nextEmbedded:"text/css"}],[/### (less\b.*)/,{token:"comment",next:"@style_comment",nextEmbedded:"text/less"}],[/### (sass\b.*)/,{token:"comment",next:"@style_comment",nextEmbedded:"text/css"}],[/### (scss\b.*)/,{token:"comment",next:"@style_comment",nextEmbedded:"text/css"}],{include:"@comments"},[/(\:)([\@\w\-\_]+)/,["symbol.start","symbol"]],[/\$\d+/,"entity.special.arg"],[/\&/,"operator"],[/\/(?!\ )(?=([^\\\/]|\\.)+\/)/,{token:"regexp.slash",bracket:"@open",next:"@regexp"}],[/}/,{cases:{"$S2==interpolatedstring":{token:"string",next:"@pop"},"@default":"@brackets"}}],[/[\{\}\(\)\[\]]/,"@brackets"],{include:"@operators"},{include:"@number"},[/[,]/,"delimiter.comma"],[/[.]/,"delimiter.dot"],[/"""/,"string",'@herestring."""'],[/'''/,"string","@herestring.'''"],[/"/,{cases:{"@eos":"string","@default":{token:"string",next:'@string."'}}}],[/'/,{cases:{"@eos":"string","@default":{token:"string",next:"@string.'"}}}],[/`/,{cases:{"@eos":"string","@default":{token:"string",next:"@string.`"}}}]],js_comment:[[/###/,{token:"comment",next:"@pop",nextEmbedded:"@pop"}]],style_comment:[[/###/,{token:"comment",next:"@pop",nextEmbedded:"@pop"}]],string_start:[[/"""/,"string",'@herestring."""'],[/'''/,"string","@herestring.'''"],[/"/,{cases:{"@eos":"string","@default":{token:"string",next:'@string."'}}}],[/'/,{cases:{"@eos":"string","@default":{token:"string",next:"@string.'"}}}],[/`/,{cases:{"@eos":"string","@default":{token:"string",next:"@string.`"}}}]],value:[{include:"string_start"},{include:"@number"}],unspaced_expr:[[/([a-z]\w*)(\:)(?=\w)/,{cases:{"this:":["variable.predefined.this","delimiter.access"],"self:":["variable.predefined.self","delimiter.access"],"@default":["identifier","delimiter.access"]}}],[/(@ivar)(\:)(?=\w)/,[s,o]],[/(@constant)(\:)(?=\w)/,[a,o]]],number:[[/\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d+\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/0[0-7]+(?!\d)/,"number.octal"],[/\d+/,"number"]],operators:[[/@symbols/,{cases:{"@operators":"operator","@math":"operator.math","@logic":"operator.logic","@dot":"operator.dot","@default":"delimiter"}}],[/\&\b/,"operator"]],whitespace:[[/[ \t\r\n]+/,"white"]],comments:[[/###/,"comment","@comment"],[/#(\s.*)?$/,"comment"]],tag:[[/\<\>/,{token:"tag.empty"}],[/(<)([a-z][a-z\-\d]*(?:\:[A-Za-z\-\d]+)?)/,["tag.open",{token:"tag.name.tag-$2",next:"@tag_start"}]],[/(<)([A-Z][A-Za-z\-\d]*)/,["tag.open",{token:"tag.name.local",next:"@tag_start"}]],[/(<)(?=[a-z\d\#\.\{\@])/,{token:"tag.open",next:"@tag_start"}]],tag_singleton_ref:[[/\#(-*[a-zA-Z][\w\-]*)+/,"tag.singleton.ref"]],tag_parts:[[/\.\(/,{token:"style.open",next:"@style_properties.)"}],[/\#(-*[a-zA-Z][\w\-]*)/,"tag.id"],[/\.(-*[a-zA-Z][\w\-]*)/,"tag.class"],[/\@(-*[a-zA-Z][\w\-]*)/,"tag.iref"],[/[\#\.\@]\{/,{token:"tag.interpolated.open",next:"@tag_inter"}]],tag_start:[[/[ \t\r\n]+/,{token:"white",switchTo:"@tag_content"}],{include:"tag_parts"},[/\[/,{token:"tag.data.open",next:"@tag_data"}],[/[\=\-]?\>/,{token:"tag.close",next:"@pop"}]],tag_inter:[["}",{token:"tag.interpolated.close",next:"@pop"}],{include:"body"}],tag_data:[["]",{token:"tag.data.close",next:"@pop"}],{include:"body"}],tag_content:[[/(\:[a-zA-Z][\w\-]*)((?:\.[a-zA-Z][\w\-]*)+)/,["tag.attribute.listener","tag.attribute.modifier"]],[/(\:[a-zA-Z][\w\-]*)/,{token:"tag.attribute.listener"}],[/([a-zA-Z\-][\w\-]*(\:[a-zA-Z][\w\-]*)?)/,{token:"tag.attribute.name"}],{include:"tag_parts"},{include:"@whitespace"},[/[\=\-]?\>/,{token:"tag.close",next:"@pop"}],[/(\=)\s*/,{token:"delimiter.eq.tag",next:"@tag_attr_value"}],[/\(/,{token:"paren.open.tag",next:"@tag_parens"}]],tag_attr_value:[[/(?=(\:?[\w]+\=))/,{token:"",next:"@pop"}],[/(?=(\>|\s))/,{token:"",next:"@pop"}],[/\(/,{token:"paren.open",next:"@parens"}],[/\{/,{token:"brace.open",next:"@braces"}],[/\[/,{token:"bracket.open",next:"@brackets"}],{include:"body"}],tag_parens:[[/\)/,{token:"paren.close.tag",next:"@pop"}],[/(\))(\:?)/,["paren.close.tag","delimiter.colon"],"@pop"],{include:"body"}],css_statement:[[/^(\t*)(css)(\s)/,["white",{token:"keyword.$2"},{token:"white",next:"@indented_style_selector.$1\t"}]]],indented_style_selector:[[/\=/,{token:"style.start-operator",switchTo:"indented_style_body.$S2"}],[/\{/,{token:"style.open",switchTo:"style_properties.}"}],[/^/,{token:"@rematch",switchTo:"@indented_style_body.$S2"}],[/\:([\w\-]+)/,"style.selector.pseudostate"],[/\.([\w\-]+)/,"style.selector.class-name"],[/([\w\-]+)/,"style.selector.element"],[/(>|~|\+)/,"style.selector.operator"],[/\&/,"style.selector.context"],[/[^\{\=]+/,"style.selector.name"]],indented_style_body:[[/^(\t*)(?=[^\{\t]*&)/,{cases:{"$1==$S2":{token:"white",next:"indented_style_selector.$1\t"},"@default":{token:"@rematch",next:"@pop"}}}],[/^(\t*)(?=[^\t\n])/,{cases:{"$1==$S2":"still-here","@default":{token:"@rematch",next:"@pop"}}}],{include:"style_properties"}],style_properties:[[/(\}|\)|\])/,{cases:{"$1==$S2":{token:"style.close",next:"@pop"},"@default":"invalid"}}],{include:"comments"},{include:"style_property"},[/([\:]\s*)/,"style.property.operator","@style_value"],[/\s+/,"style.whitespace"],[/[\;]/,"style.delimiter"]],style_property:[[/(@anyIdentifier)\|/,"style.property.scope"],[/(--@anyIdentifier)/,"style.property.var"],[/(-*@anyIdentifier)/,"style.property.name"],[/\@(@anyIdentifier)/,"style.property.mixin"],[/\.(@anyIdentifier)/,"style.property.scope"]],style_value:[[/^/,{token:"@rematch",next:"@pop"}],[/\s([\$\w\-]+(\.[\w\-]+)*[\:\=])/,{token:"@rematch",next:"@pop"}],[/[;\)\}\]]/,{token:"@rematch",next:"@pop"}],[/(xs|sm|md|lg|xl|\dxl)\b/,"style.value.size"],[/(--@anyIdentifier)/,"style.value.var"],{include:"number_with_unit"},{include:"operators"},{include:"number"},{include:"string_start"},{include:"comments"},[/\(/,{token:"delimiter.style.parens.open",next:"@style_expressions.)"}],[/(@anyIdentifier)/,"style.value"]],style_expressions:[[/\)/,{token:"delimiter.style.parens.close",next:"@pop"}],[/\(/,{token:"delimiter.style.parens.open",next:"@style_expressions.)"}],{include:"@style_value"}],number_with_unit:[[/(\d+)([a-z]+|\%)/,["number","unit"]],[/(\d*\.\d+(?:[eE][\-+]?\d+)?)([a-z]+|\%)/,["number.float","unit"]]],importstart:[[/^./,{token:"@rematch",next:"@pop"}],[/(from|as)/,{token:"keyword.$1"}],[/[\{\}\,]/,{token:"keyword"}],[/"""/,"string",'@herestring."""'],[/'''/,"string","@herestring.'''"],[/"/,{cases:{"@eos":"string","@default":{token:"string",next:'@string."'}}}],[/'/,{cases:{"@eos":"string","@default":{token:"string",next:"@string.'"}}}],[/[a-z_A-Z][A-Za-z\d\-\_]*/,{token:"identifier.import"}]],parens:[[/\)/,{token:"paren.close",next:"@pop"}],[/(\))(\:?)/,["paren.close","delimiter.colon"],"@pop"],{include:"body"}],braces:[["}",{token:"brace.close",next:"@pop"}],{include:"body"}],brackets:[["]",{token:"bracket.close",next:"@pop"}],{include:"body"}],declstart:[[/^./,{token:"@rematch",next:"@pop"}],[/[A-Z][A-Za-z\d\-\_]*/,{token:"identifier.decl.$S2"}],[/\./,{token:"delimiter.dot"}],[/[a-z_][A-Za-z\d\-\_]*/,{token:"identifier.decl.$S2"}],[/[ \t\<\>]+/,"operator.inherits string"]],defstart:[[/(self)\./,{token:"identifier.decl.def.self"}],[/@methodName/,{token:"identifier.decl.def",next:"@pop"}],[/^./,{token:"@rematch",next:"@pop"}]],propstart:[[/@identifier/,{token:"identifier.decl.$S2",next:"@pop"}],[/^./,{token:"@rematch",next:"@pop"}]],string:[[/[^"'`\{\\]+/,"string"],[/@escapes/,"string.escape"],[/\./,"string.escape.invalid"],[/\./,"string.escape.invalid"],[/\{/,{cases:{'$S2=="':{token:"string",next:"root.interpolatedstring"},"$S2==`":{token:"string",next:"root.interpolatedstring"},"@default":"string"}}],[/["'\`]/,{cases:{"$#==$S2":{token:"string",next:"@pop"},"@default":"string"}}],[/#/,"string"]],herestring:[[/("""|''')/,{cases:{"$1==$S2":{token:"string",next:"@pop"},"@default":"string"}}],[/[^#\\'"\{]+/,"string"],[/['"]+/,"string"],[/@escapes/,"string.escape"],[/\./,"string.escape.invalid"],[/\{/,{cases:{'$S2=="""':{token:"string",next:"root.interpolatedstring"},"@default":"string"}}],[/#/,"string"]],comment:[[/[^#]+/,"comment"],[/###/,"comment","@pop"],[/#/,"comment"]],hereregexp:[[/[^\\\/#]/,"regexp"],[/\\./,"regexp"],[/#.*$/,"comment"],["///[igm]*",{token:"regexp",next:"@pop"}],[/\//,"regexp"]],regexp:[[/(\{)(\d+(?:,\d*)?)(\})/,["regexp.escape.control","regexp.escape.control","regexp.escape.control"]],[/(\[)(\^?)(?=(?:[^\]\\\/]|\\.)+)/,["regexp.escape.control",{token:"regexp.escape.control",next:"@regexrange"}]],[/(\()(\?:|\?=|\?!)/,["regexp.escape.control","regexp.escape.control"]],[/[()]/,"regexp.escape.control"],[/@regexpctl/,"regexp.escape.control"],[/[^\\\/]/,"regexp"],[/@regexpesc/,"regexp.escape"],[/\\\./,"regexp.invalid"],["/",{token:"regexp.slash",bracket:"@close"},"@pop"]],regexrange:[[/-/,"regexp.escape.control"],[/\^/,"regexp.invalid"],[/@regexpesc/,"regexp.escape"],[/[^\]]/,"regexp"],[/\]/,"regexp.escape.control","@pop"]]}}},function(t,e,n){var i=n(140).DiagnosticsAdapter,r=n(141).WorkerManager;e.setupMode={}.setupMode=function(t){var e=window.MonacoEnvironment.imba,n=new r("imba",t),o=function(){for(var t=arguments,e=t.length,i=new Array(e>0?e:0);e>0;)i[e-1]=t[--e];return n.getLanguageServiceWorker.apply(n,i)},s=[n];return s.push(new i(t,"imba",o)),e&&s.push(monaco.languages.setMonarchTokensProvider("imba",e.language)),e&&s.push(monaco.languages.setLanguageConfiguration("imba",e.conf)),o}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(0);function o(t,e,n){this._defaults=t,this._selector=e,this._worker=n,this._disposables=[],this._listener=Object.create(null)}e.Adapter=o,o.prototype.worker=function(t){return this._worker},o.prototype.setWorker=function(t){return this._worker=t,this},o.prototype.selector=function(t){return this._selector},o.prototype.setSelector=function(t){return this._selector=t,this},o.prototype.dispose=function(){for(let t=0,e=i(this._disposables),n=e.length;t<n;t++)e[t].dispose();for(let t,e,n=this._listener,i=0,r=Object.keys(n),o=r.length;i<o;i++)e=r[i],t=n[e],t.dispose();return this._disposables=[],this._listener=Object.create(null),this};function s(t,e,n){var i=this;s.prototype.__super__.constructor.apply(i,arguments);var r=function(t){if(t.getModeId()==i._selector)return i.addModel(t)},o=function(t){return i.removeModel(t)};i._disposables.push(monaco.editor.onDidCreateModel(r)),i._disposables.push(monaco.editor.onWillDisposeModel(o)),i._disposables.push(monaco.editor.onDidChangeModelLanguage((function(t){return o(t.model),r(t.model)}))),monaco.editor.getModels().forEach(r)}r.subclass(s,o),e.DiagnosticsAdapter=s,s.prototype.addModel=function(t){var e=this,n=t.uri.toString();if(!e._listener[n]){var i;t.IMBA_ADAPTER=e;var r=t.onDidChangeContent((function(t){return e.prevalidate(n),clearTimeout(i),i=setTimeout((function(){return e.validate(n)}),500)}));return e._listener[n]={dispose:function(){return clearTimeout(i),r.dispose()}},e.validate(n)}},s.prototype.removeModel=function(t){var e,n=t.uri.toString();if(this._listener[n])return this._listener[n].dispose(),e=this._listener[n],delete this._listener[n],e},s.prototype.locToRange=function(t,e){var n=t.getPositionAt(e[0]),i=t.getPositionAt(e[1]);return new monaco.Range(n.lineNumber,n.column,i.lineNumber,i.column)},s.prototype.varToDecoration=function(t,e,n){var i=this.locToRange(t,n);i.name=e.name;e.type;return{range:i,renderOptions:{dark:{color:"#f3f1d5"},light:{color:"#509DB5"}},hoverMessage:"Variable",stickiness:1,options:{stickiness:1,inlineClassName:"l"+e.type,hoverMessage:"Variable",name:e.name||"itemname"}}},s.prototype.warningToMarker=function(t,e){var n=this.locToRange(t,e.loc);return n.severity=3,n.message=e.message,n},s.prototype.warningToDecoration=function(t,e){return{range:this.locToRange(t,e.loc),options:{name:"error",linesDecorationsClassName:"error"}}},s.prototype.prevalidate=function(t){var e=monaco.editor.getModel(t);return(e._imbaEntities||{}).warnings&&monaco.editor.setModelMarkers(e,this._selector,[]),this},s.prototype.validate=async function(t){var e,n=await this._worker(t),r=await n.getDiagnostics(t),o=monaco.editor.getModel(t),s=[],a=[];o._imbaEntities=r;for(let t,e=0,n=i(r.scopes),a=n.length;e<a;e++){t=n[e];for(let e,n=0,r=i(t.vars),a=r.length;n<a;n++){e=r[n];for(let t=0,n=i(e.refs),r=n.length;t<r;t++)s.push(this.varToDecoration(o,e,n[t].loc))}}for(let t,e=0,n=i(r.warnings),u=n.length;e<u;e++)t=n[e],s.push(this.warningToDecoration(o,t)),a.push(this.warningToMarker(o,t));return monaco.editor.setModelMarkers(o,this._selector,a),(e=a)&&(e.len instanceof Function?e.len():e.length)||(o._varDecorations=o.deltaDecorations(o._varDecorations||(o._varDecorations=[]),s)),[]}},function(t,e){function n(t){var e=this;e._defaults=t,e._worker=null,e._idleCheckInterval=setInterval((function(){return e.checkIfIdle()}),3e4),e._lastUsedTime=0}e.WorkerManager=n,n.prototype.stopWorker=function(){return this._worker&&(this._worker.dispose(),this._worker=null),this._client=null},n.prototype.dispose=function(){return clearInterval(this._idleCheckInterval),this.stopWorker()},n.prototype.checkIfIdle=function(){if(this._worker)return Date.now()-this._lastUsedTime>12e4?this.stopWorker():void 0},n.prototype.getClient=function(){return this._lastUsedTime=Date.now(),this._client||(this._worker=monaco.editor.createWebWorker({moduleId:SCRIMBA_API.assetsPath("imba-worker.js"),label:"imba",createData:{defaults:this._defaults}}),this._client=this._worker.getProxy()),this._client},n.prototype.getLanguageServiceWorker=function(){for(var t=this,e=arguments,n=e.length,i=new Array(n>0?n:0);n>0;)i[n-1]=e[--n];return t.getClient().then((function(e){return t._worker.withSyncedResources(i).then((function(){return e}))}))}},function(t,e){function n(t){return t?t.toIterable?t.toIterable():t:[]}Object.defineProperty(e,"__esModule",{value:!0});const i=[/^/,{token:"@rematch",next:"@pop"}],r={token:"@rematch",next:"@pop"},o={token:"white.indent",next:"@>illegal_indent"};function s(t,e,n,i={}){var s;null==t?t=o:1==t?t={next:"@>"}:2==t?t={next:"@>_indent&-_indent"}:"string"==typeof t&&(t={next:t}),-1==e&&(e=r),-1==n?n=r:0==n&&(null==i.comment?i.comment=!0:i.comment,n={});let a={"$1==$S2\t":t=Object.assign({token:"white.tabs"},t||{}),"$1==$S2":{cases:{"$1==$S6":n=Object.assign({token:"white.tabs"},n||{}),"@default":{token:"@rematch",switchTo:"@*$1"}}},"@default":e=Object.assign({token:"@rematch",next:"@pop"},e||{})};s=0;for(let e of["next","switchTo"]){s++;t[e]&&-1==t[e].indexOf("*")&&(t[e]+="*$1")}let u=[/^(\t*)(?=[^\t\n])/,{cases:a}];if(i.comment){let t={};for(let e,n,i=0,r=Object.keys(a),o=r.length;i<o;i++){e=r[i],n=a[e];let o=Object.assign({},n);o.next||o.switchTo||(o.next="@>_comment"),t[e]=o}return[[/^(\t*)(?=#\s|#$)/,{cases:t}],u]}return u}e.EOF="§EOF§";const a={root:[[/^@comment/,"comment","@>_comment"],[/^(\t+)(?=[^\t\n])/,{cases:{"$1==$S2\t":{token:"white.indent",next:"@>_indent*$1"},"@default":"white.indent"}}],"block_"],_comment:[[/^([\t\s\n]*)$/,"comment"],[/^(\t*)([\S\s]*)/,{cases:{"$1~$S2\t*":{token:"comment"},"@default":{token:"@rematch",next:"@pop"}}}],[/[\S\s]+/,"comment"]],illegal_indent:[s()],identifier_:[[/\$\w+\$/,"identifier.env"],[/\$\d+/,"identifier.special"],[/\¶@id/,"ivar"],[/@id\!?/,{cases:{this:"this",self:"self","@keywords":"keyword.$#","$0~[A-Z].*":"identifier.uppercase.$F","@default":"identifier.$F"}}]],block_:[[/^(\t+)(?=[\r\n]|$)/,"white.tabs"],"class_","tagclass_","var_","func_","import_","export_","flow_","for_","try_","catch_","while_","css_","tag_","do_","block_comment_","expr_","common_"],_indent:[s(2,-1,0),"block_"],block:[s("@>",-1,0),"block_"],bool_:[[/(true|false|yes|no|undefined|null)(?![\:\-\w\.\_])/,"boolean"]],op_:[[/\s+\:\s+/,"operator.ternary"],[/(@unspaced_ops)/,{cases:{"@access":"operator.access","@default":"operator"}}],[/\&(?=[,\)])/,"operator.special.blockparam"],[/(\s*)(@symbols)(\s*)/,{cases:{"$2@operators":"operator","$2@math":"operator.math","$2@logic":"operator.logic","$2@access":"operator.access","@default":"delimiter"}}],[/\&\b/,"operator"]],keyword_:[[/new@B/,"keyword.new"],[/isa@B/,"keyword.isa"],[/(switch|when|throw|continue|break|then|await)@B/,"keyword.$1"],[/delete@B/,"keyword.delete"],[/and@B|or@B/,"operator.flow"]],return_:[[/return@B/,"keyword.new"]],primitive_:["string_","number_","regexp_","bool_"],value_:["primitive_","keyword_","implicit_call_","parens_","key_","access_","identifier_","array_","object_"],expr_:["comment_","inline_var_","return_","value_","tag_","op_","type_","spread_"],attr_expr_:["primitive_","parens_","access_","identifier_","array_","object_","tag_","op_"],access_:[[/(\.\.?)(@id\!?)/,{cases:{"$2~[A-Z].*":["operator.access","accessor.uppercase"],"@default":["operator.access","accessor"]}}]],call_:[[/\(/,"(","@call_body"]],key_:[[/(@id)(\:\s*)/,{cases:{"@default":["key","operator.assign.key-value"]}}]],implicit_call_:[[/(\.\.?)(@id)@implicitCall/,{cases:{"$2~[A-Z].*":["operator.access","accessor.uppercase","@implicit_call_body"],"@default":["operator.access","accessor","@implicit_call_body"]}}],[/(@id)@implicitCall/,{cases:{"$2~[A-Z].*":["identifier.uppercase","@implicit_call_body"],"@default":["identifier","@implicit_call_body"]}}]],implicit_call_body:[i,[/\)|\}|\]|\>/,"@rematch","@pop"],"arglist_"],arglist_:["do_","expr_",[/\s*\,\s*/,"delimiter.comma"]],params_:[[/\[/,"[","@array_body=decl-param"],[/\{/,"{","@object_body=decl-param"],[/(@variable)/,"identifier.decl-param"],"spread_","type_",[/\s*\=\s*/,"operator","@var_value="],[/\s*\,\s*/,"separator"]],object_:[[/\{/,"{","@object_body"]],parens_:[[/\(/,"(","@parens_body"]],parens_body:[[/\)/,")","@pop"],"arglist_"],array_:[[/\[/,"[","@array_body"]],array_body:[[/\]@implicitCall/,{token:"]",switchTo:"@implicit_call_body="}],[/\]/,"]","@pop"],"expr_",[",","delimiter"]],object_body:[[/\}/,"}","@pop"],[/(@id)(\s*:\s*)/,["key","operator.assign.key-value","@object_value"]],[/(@id)/,"identifier.$F"],[/\[/,"[","@object_dynamic_key="],[/\s*=\s*/,"operator.assign","@object_value="],[/:/,"operator.assign.key-value","@object_value="],[/\,/,"delimiter.comma"],"expr_"],object_value:[i,[/,|\}|\]|\)/,"@rematch","@pop"],"expr_"],object_dynamic_key:[["]","]","@pop"],"expr_"],comment_:[[/#(\s.+)?(\n|$)/,"comment"]],block_comment_:[[/###/,"comment.start","@_block_comment"]],_block_comment:[[/###/,"comment.end","@pop"],[/[^#]+/,"comment"],[/#(?!##)/,"comment"]],try_:[[/try@B/,"keyword.try","@>_try&try"]],catch_:[[/(catch\s+)(?=@id(\s|$))/,"keyword.catch","@catch_start&catch"],[/catch@B/,"keyword.catch","@catch_start&catch"]],catch_start:[[/@id/,"identifier.decl-const","@>_catch"],[/.?/,"@rematch",{switchTo:"@>_catch"}]],_catch:[s("@>block",-1,0),"block_"],_try:[s("@>block",-1,0),"block_"],do_:[[/do(?=\()/,"keyword.do","@>do_start&do"],[/do@B/,"keyword.do","@>_do&do"]],do_start:[s(null,-1,-1),[/\(/,"(",{switchTo:"@_do_params"}],[/./,"@rematch",{switchTo:"@_do"}]],_do_params:[[/\)/,")",{switchTo:"@_do"}],"params_"],_do:[s(2,-1,0),[/(\}|\)|\])/,"@rematch","@pop"],"block_"],class_:[[/(export|extend)(?=\s+class )/,"keyword.$1"],[/(class)(\s)(@id)/,["keyword.$1","white.$1name","entity.name.class.decl-const","@class_start="]]],class_start:[[/(\s+\<\s+)(@id)/,["keyword.extends","identifier.superclass"]],[/@comment/,"comment"],[/^/,"@rematch",{switchTo:"@>_class&class="}]],tagclass_:[[/(export|extend)(?=\s+tag )/,"keyword.$#"],[/(tag)(\s)(@constant)/,["keyword.tag","white.tagname","entity.$1.local","@tagclass_start="]],[/(tag)(\s)(@id)/,["keyword.tag","white.tagname","entity.tag","@tagclass_start="]]],tagclass_start:[[/(\s+\<\s+)(@id)/,["keyword.extends","identifier.superclass"]],[/@comment/,"comment"],[/^/,"@rematch",{switchTo:"@>_tagclass&tag="}]],import_:[[/(import)(?=\s+['"])/,"keyword.import","@>import_source"],[/(import)@B/,"keyword.import","@>import_body=decl-import/part"]],export_:[[/(export)( +)(default)@B/,["keyword.export","white","keyword.default"]],[/(export)(?= +(let|const|var|class|tag)@B)/,"keyword.export"],[/(export)(\s+\*\s+)(from)@B/,["keyword.export","operator.star","keyword.from","@>import_source"]],[/(export)@B/,"keyword.export","@>export_body"]],export_body:[s(null,-1,0),[/(\*)(\s+as\s+)(@esmIdentifier)/,["keyword.star","keyword.as","identifier.const.export"]],[/(@esmIdentifier)(\s+as\s+)(default)/,["alias","keyword.as","alias.default"]],[/(@esmIdentifier)(\s+as\s+)(@esmIdentifier)/,["alias","keyword.as","identifier.const.export"]],[/from/,"keyword.from",{switchTo:"@import_source"}],[/\{/,"{","@esm_specifiers=export/part"],[/(@esmIdentifier)/,"identifier.const.export"],[/\*/,"operator.star"],"comma_","common_"],import_body:[s(null,-1,0),[/(@esmIdentifier)( +from)/,["identifier.$F","keyword.from",{switchTo:"@import_source"}]],[/(\*)(\s+as\s+)(@esmIdentifier)(\s+from)/,["keyword.star","keyword.as","identifier.$F","keyword.from",{switchTo:"@import_source"}]],[/(@esmIdentifier)(\s*,\s*)(\*)(\s+as\s+)(@esmIdentifier)(from)/,["identifier.const.import","delimiter","keyword.star","keyword.as","identifier.$F","keyword.from",{switchTo:"@import_source"}]],[/from/,"keyword.from",{switchTo:"@import_source"}],[/\{/,"{","@esm_specifiers/part"],[/(@esmIdentifier)/,"identifier.$F",{switchTo:"@/delim"}],[/\s*\,\s*/,"delimiter.comma",{switchTo:"@/part"}],"comma_","common_"],import_part:[[/\{/,"{","@esm_specifiers/part"],[/(\*)(\s+as\s+)(@esmIdentifier)/,["keyword.star","keyword.as","identifier.$F",{switchTo:"@import_delim"}]],[/(@esmIdentifier)(\s+as\s+)(@esmIdentifier)/,["alias","keyword.as","identifier.$F",{switchTo:"@import_delim"}]],[/(@esmIdentifier)/,"identifier.$F",{switchTo:"@import_delim"}]],import_delim:[[/\}/,"}","@pop"],[/\s*\,\s*/,"delimiter.comma",{switchTo:"@import_part"}],"common_",[/from/,"keyword.from",{switchTo:"@import_source"}]],esm_specifiers:[[/\}/,"}","@pop"],[/(@esmIdentifier)(\s+as\s+)(@esmIdentifier)/,["alias","keyword.as","identifier.const.$F",{switchTo:"@/delim"}]],[/@esmIdentifier/,{cases:{"$/==part":{token:"identifier.const.$S4",switchTo:"@/delim"},"@default":{token:"invalid"}}}],[/\s*\,\s*/,"delimiter.comma",{switchTo:"@/part"}],"whitespace"],import_source:[s(null,-1,0),[/["']/,"path.open","@_path=$#"]],_path:[[/[^"'\`\{\\]+/,"path"],[/@escapes/,"path.escape"],[/\./,"path.escape.invalid"],[/\{/,"invalid"],[/["'`]/,{cases:{"$#==$F":{token:"path.close",next:"@pop"},"@default":"path"}}]],member_:[[/(constructor)@B/,"entity.name.constructor","@>def_params&$1/$1"],[/(def|get|set)(\s)(@id)/,["keyword.$1","white.entity","entity.name.$1","@>def_params&$1/$1"]],[/(def|get|set)(\s)(\[)/,["keyword.$1","white.entity","$$","@>def_dynamic_name/$1"]]],func_:[[/export(?=\s+(get|set|def) )/,"keyword.export"],[/(def)(\s)(@id)(\.)(@id)/,["keyword.$1","white.entity","identifier.target","operator","entity.name.member","@>def_params&$1/$1"]],[/(def)(\s)(@id)/,["keyword.$1","white.entity","entity.name.function.decl-const-func","@>def_params&$1/$1"]]],flow_:[[/(if|else|elif|unless)(?=\s|$)/,["keyword.$1","@flow_start&$1"]]],flow_start:[s({switchTo:"@>_flow"},-1,-1),"expr_"],for_:[[/for(?: own)?@B/,"keyword.$#","@for_start&flow=decl-let"]],while_:[[/(while|until)@B/,"keyword.$#","@>while_body"]],while_body:[s(2,-1,0),"block_"],for_start:[s({switchTo:"@>for_body"},-1,-1),[/\[/,"[","@array_body"],[/\{/,"{","@object_body"],[/(@variable)/,"identifier.$F"],[/(\s*\,\s*)/,"separator"],[/\s(in|of)@B/,"keyword",{switchTo:"@>for_source="}],[/[ \t]+/,"white"]],for_source:[s({switchTo:"@>for_body"},-1,{switchTo:"@for_body"}),"expr_",[/[ \t]+/,"white"]],for_body:[s(2,-1,0),"block_"],decorator_:[[/(\@@id)(\()/,["decorator","$2","@_decorator_params"]],[/(\@@id)/,"decorator"]],_decorator_params:[[/\)/,")","@pop"],"params_"],field_:[[/static(?=\s+@id)/,"keyword.static"],[/(@id)(?=$)/,"field"],[/(@id)/,["field","@_field_1"]]],_field_1:[s(null,-1,-1),"type_",[/(\s*=\s*)/,["operator","@>_field_value"]]],_field_value:[s(2,-1,0),"block_"],var_:[[/((?:export )?)(const|let|var)(?=\s|$)/,["keyword.export","keyword.$1","@_varblock=decl-$2"]]],inline_var_:[[/(const|let|var)(?=\s|$)/,["keyword.$1","@inline_var_body=decl-$1"]]],string_:[[/"""/,"string",'@_herestring="""'],[/'''/,"string","@_herestring='''"],[/["'`]/,"string.open","@_string=$#"]],number_:[[/0[xX][0-9a-fA-F_]+/,"number.hex"],[/0[b][01_]+/,"number.binary"],[/0[o][0-9_]+/,"number.octal"],[/(\d+)([a-z]+|\%)/,["number","unit"]],[/(\d*\.\d+(?:[eE][\-+]?\d+)?)([a-z]+|\%)/,["number.float","unit"]],[/\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d[\d_]*\.\d[\d_]*([eE][\-+]?\d+)?/,"number.float"],[/\d[\d_]*/,"number.integer"],[/0[0-7]+(?!\d)/,"number.octal"],[/\d+/,"number"]],_string:[[/[^"'\`\{\\]+/,"string"],[/@escapes/,"string.escape"],[/\./,"string.escape.invalid"],[/\{/,{cases:{"$F=='":"string","@default":{token:"string.bracket.open",next:"@interpolation_body"}}}],[/["'`]/,{cases:{"$#==$F":{token:"string.close",next:"@pop"},"@default":"string"}}],[/#/,"string"]],_herestring:[[/("""|''')/,{cases:{"$1==$F":{token:"string",next:"@pop"},"@default":"string"}}],[/[^#\\'"\{]+/,"string"],[/['"]+/,"string"],[/@escapes/,"string.escape"],[/\./,"string.escape.invalid"],[/\{/,{cases:{'$F=="""':{token:"string",next:"@interpolation_body"},"@default":"string"}}],[/#/,"string"]],interpolation_body:[[/\}/,"string.bracket.close","@pop"],"expr_"],_class:[s(o,-1,0),"css_","member_","comment_","decorator_",[/(get|set|def|static|prop|attr)@B/,"keyword.$0.invalid"],"field_","common_"],_tagclass:["_class",[/(?=\<self)/,"entity.name.def.render","@_render&def"]],def_params:[[/\(/,"(","@def_parens"],[/^/,"@rematch",{switchTo:"@_def"}],[/do@B/,"keyword.do",{switchTo:"@_def"}],"params_",[/@comment/,"comment"]],def_parens:[[/\)/,")","@pop"],"params_"],def_dynamic_name:[["]",{token:"square.close",switchTo:"@def_params&$/"}],"expr_"],_render:[s(2,-1,-1),"block_"],_def:[s(2,-1,0),"block_"],_flow:[s(2,-1,0),"block_"],_varblock:[s(1,-1,-1),[/\[/,"[","@array_body"],[/\{/,"{","@object_body"],[/(@variable)/,"identifier.$F"],[/\s*\,\s*/,"separator"],[/(\s*\=\s*)(?=(for|while|until|if|unless)\s)/,"operator","@pop"],[/(\s*\=\s*)/,"operator","@var_value="],"type_"],inline_var_body:[[/\[/,"[","@array_body"],[/\{/,"{","@object_body"],[/(@variable)/,"identifier.$F"],[/(\s*\=\s*)/,"operator",{switchTo:"@var_value="}]],var_value:[[/(?=,|\))/,"delimiter","@pop"],s({switchTo:"@>block"},-1,-1),"do_","expr_","common_"],common_:[[/^(\t+)(?=\n|$)/,"white.tabs"],"@whitespace"],comma_:[[/\s*,\s*/,"delimiter.comma"]],spread_:[[/\.\.\./,"operator.spread"]],type_:[[/\\/,"@rematch","@_type&-_type/0"]],_type:[s(-1,-1,-1),[/\\/,"type.delim"],[/\[/,"type","@/]"],[/\(/,"type","@/)"],[/\{/,"type","@/}"],[/\</,"type","@/>"],[/\,|\s/,{cases:{"$/==0":{token:"@rematch",next:"@pop"},"@default":"type"}}],[/[\]\}\)\>]/,{cases:{"$#==$/":{token:"type",next:"@pop"},"@default":{token:"@rematch",next:"@pop"}}}],[/[\w\-\$]+/,"type"]],css_:[[/global(?=\s+css@B)/,"keyword.$#"],[/css(?:\s+)?/,"keyword.css","@>css_selector&rule-_sel"]],sel_:[[/(\%)((?:@id)?)/,["style.selector.mixin.prefix","style.selector.mixin"]],[/(\@)(\.{0,2}[\w\-]*)/,["style.selector.modifier.prefix","style.selector.modifier"]],[/\.([\w\-]+)/,"style.selector.class-name"],[/\#([\w\-]+)/,"style.selector.id"],[/([\w\-]+)/,"style.selector.element"],[/(>+|~|\+)/,"style.selector.operator"],[/(\*+)/,"style.selector.element.any"],[/(\$)((?:@id)?)/,["style.selector.reference.prefix","style.selector.reference"]],[/\&/,"style.selector.context"],[/\(/,"delimiter.selector.parens.open","@css_selector_parens"],[/\[/,"delimiter.selector.attr.open","@css_selector_attr"],[/\s+/,"white"],[/,/,"style.selector.delimiter"],[/#(\s.+)?\n?$/,"comment"]],css_props:[s(null,-1,0),[/(?=@cssPropertyKey)/,"","@css_property&-_styleprop-_stylepropkey"],[/#(\s.+)?\n?$/,"comment"],[/(?=[\%\*\w\&\$\>\.\[\@\!]|\#[\w\-])/,"","@>css_selector&rule-_sel"],[/\s+/,"white"]],css_selector:[s({switchTo:"@css_props"},-1,{token:"@rematch",switchTo:"@css_props&_props"}),[/(\}|\)|\])/,"@rematch","@pop"],[/(?=\s*@cssPropertyKey)/,"",{switchTo:"@css_props&_props"}],[/\s*#\s/,"@rematch",{switchTo:"@css_props&_props"}],"sel_"],css_inline:[[/\]/,"style.close","@pop"],[/(?=@cssPropertyKey)/,"","@css_property&-_styleprop-_stylepropkey"],[/(?=@cssPropertyPath\])/,"","@css_property&-_styleprop-_stylepropkey"]],css_selector_parens:[[/\)/,"delimiter.selector.parens.close","@pop"],"sel_"],css_selector_attr:[[/\]/,"delimiter.selector.parens.close","@pop"],"sel_"],css_property:[s(null,-1,-1),[/\]/,"@rematch","@pop"],[/(\d+)(@id)/,["style.property.unit.number","style.property.unit.name"]],[/((--|\$)@id)/,"style.property.var"],[/(-*@id)/,"style.property.name"],[/(\@+|\.+)(@id\-?)/,["style.property.modifier.start","style.property.modifier"]],[/\+(@id)/,"style.property.scope"],[/\s*([\:]\s*)(?=@br|$)/,"style.property.operator",{switchTo:"@>css_multiline_value&_stylevalue"}],[/\s*([\:]\s*)/,"style.property.operator",{switchTo:"@>css_value&_stylevalue"}]],css_value_:[[/(x?xs|sm\-?|md\-?|lg|xl|\dxl)\b/,"style.value.size"],[/\#[0-9a-fA-F]+/,"style.value.color.hex"],[/((--|\$)@id)/,"style.value.var"],[/(@optid)(\@+|\.+)(@optid)/,["style.property.name","style.property.modifier.prefix","style.property.modifier"]],"op_","string_","number_","comment_",[/\s+/,"style.value.white"],[/\(/,"delimiter.style.parens.open","@css_expressions"],[/\{/,"delimiter.style.curly.open","@css_interpolation"],[/(@id)/,"style.value"]],css_value:[s({switchTo:"@>css_multiline_value"},-1,-1),[/@cssPropertyKey/,"@rematch","@pop"],[/;/,"style.delimiter","@pop"],[/(\}|\)|\])/,"@rematch","@pop"],"css_value_"],css_multiline_value:[s(null,-1,0),[/@cssPropertyKey/,"invalid"],"css_value_"],css_expressions:[[/\)/,"delimiter.style.parens.close","@pop"],[/\(/,"delimiter.style.parens.open","@css_expressions"],"css_value"],css_interpolation:[[/\}/,"delimiter.style.curly.close","@pop"],"expr_"],expressions:[[/\,/,"delimiter.comma"]],whitespace:[[/[\r\n]+/,"br"],[/[ \t\r\n]+/,"white"]],tag_:[[/(\s*)(<)(?=\.)/,["white","tag.open","@_tag/flag"]],[/(\s*)(<)(?=\w|\{|\[|\%|\#|>)/,["white","tag.open","@_tag/name"]]],tag_content:[s(2,-1,0),[/\)|\}\]/,"@rematch","@pop"],"common_","flow_","var_","for_","expr_"],tag_children:[],_tag:[[/\/>/,"tag.close","@pop"],[/>/,"tag.close","@pop"],[/(\-?@tagIdentifier)(\:@id)?/,"tag.$/"],[/(\-?\d+)/,"tag.$S3"],[/(\%)(@id)/,["tag.mixin.prefix","tag.mixin"]],[/(\#)(@id)/,["tag.id.prefix","tag.id"]],[/\./,{cases:{"$/==event":{token:"tag.event-modifier.start",switchTo:"@/event-modifier"},"$/==event-modifier":{token:"tag.event-modifier.start",switchTo:"@/event-modifier"},"$/==modifier":{token:"tag.modifier.start",switchTo:"@/modifier"},"$/==rule":{token:"tag.rule-modifier.start",switchTo:"@/rule-modifier"},"$/==rule-modifier":{token:"tag.rule-modifier.start",switchTo:"@/rule-modifier"},"@default":{token:"tag.flag.start",switchTo:"@/flag"}}}],[/(\$?@id)/,{cases:{"$S3==name":"tag.reference","@default":"tag.$/"}}],[/\{/,"tag.$/.braces.open","@_tag_interpolation"],[/\[/,"style.open","@css_inline"],[/(\s*\=\s*)/,"operator.equals.tag-$/","@_tag_value&-value"],[/\:/,{token:"tag.event.start",switchTo:"@/event"}],"tag_event_",[/\{/,{token:"tag.$/.braces.open",next:"@_tag_interpolation/0"}],[/\(/,{token:"tag.parens.open.$/",next:"@_tag_parens/0"}],[/\s+/,{token:"tag.white",switchTo:"@/attr"}],"comment_"],tag_event_:[[/(\@)(@optid)/,["tag.event.start","tag.event.name","@_tag_event/$2"]]],_tag_part:[[/\)|\}|\]|\>/,"@rematch","@pop"]],_tag_event:["_tag_part",[/\.(@optid)/,"tag.event.modifier"],[/\(/,{token:"tag.parens.open.$/",next:"@_tag_parens/0"}],[/(\s*\=\s*)/,"operator.equals.tag-$/","@_tag_value&handler"],[/\s+/,"@rematch","@pop"]],_tag_interpolation:[[/\}/,"tag.$/.braces.close","@pop"],"expr_",[/\)|\]/,"invalid"]],_tag_parens:[[/\)/,"tag.parens.close.$/","@pop"],"arglist_",[/\]|\}/,"invalid"]],_tag_value:[[/(?=(\/?\>|\s))/,"","@pop"],"attr_expr_"],regexp_:[[/\/(?!\ )(?=([^\\\/]|\\.)+\/)/,{token:"regexp.slash.open",bracket:"@open",next:"@_regexp"}],[/\/\/\//,{token:"regexp.slash.open",bracket:"@open",next:"@_hereregexp"}]],_regexp:[[/(\{)(\d+(?:,\d*)?)(\})/,["regexp.escape.control","regexp.escape.control","regexp.escape.control"]],[/(\[)(\^?)(?=(?:[^\]\\\/]|\\.)+)/,["regexp.escape.control",{token:"regexp.escape.control",next:"@_regexrange"}]],[/(\()(\?:|\?=|\?!)/,["regexp.escape.control","regexp.escape.control"]],[/[()]/,"regexp.escape.control"],[/@regexpctl/,"regexp.escape.control"],[/[^\\\/]/,"regexp"],[/@regexpesc/,"regexp.escape"],[/\\:/,"regexp.escape"],[/\\\./,"regexp.invalid"],[/(\/)(\w+)/,[{token:"regexp.slash.close"},{token:"regexp.flags",next:"@pop"}]],["/",{token:"regexp.slash.close",next:"@pop"}],[/./,"regexp.invalid"]],_regexrange:[[/-/,"regexp.escape.control"],[/\^/,"regexp.invalid"],[/@regexpesc/,"regexp.escape"],[/[^\]]/,"regexp"],[/\]/,"regexp.escape.control","@pop"]],_hereregexp:[[/[^\\\/#]/,"regexp"],[/\\./,"regexp"],[/#.*$/,"comment"],["///[igm]*","regexp","@pop"],[/\//,"regexp"]]};function u(t){let e=["$S1","$S2","$S3","$S4","$S5","$S6"];if(t.match(/\@(pop|push|popall)/))return t;if("@"==t[0]&&(t=t.slice(1)),t.indexOf(".")>=0)return t;">"==(t=p(t))[0]&&(e[1]="$S6\t",t=t.slice(1));for(let i=0,r=n(t.split(/(?=[\/\&\=\*])/)),o=r.length;i<o;i++){let t=r[i];"&"==t[0]?"-"==t[1]||"_"==t[1]?e[2]="$S3"+t.slice(1):e[2]="$S3-"+t.slice(1):"+"==t[0]?e[3]="$S4-"+t.slice(1):"="==t[0]?e[3]=t.slice(1):"/"==t[0]?e[4]=t.slice(1):"*"==t[0]?e[5]=t.slice(1):e[0]=t}return e.join(".")}function p(t){return t=(t=(t=(t=(t=t.replace("$/","$S5")).replace("$F","$S4")).replace("$&","$S3")).replace("$I","$S2")).replace("$T","$S2")}function c(t,e){if("string"==typeof t&&(t={token:t}),t&&null!=t.token)t.token=p(t.token),"string"==typeof e?t.next=e:e&&Object.assign(t,e),t.next&&(t.next=u(t.next)),t.switchTo&&(t.switchTo=u(t.switchTo));else if(t&&t.cases){let e={};for(let n,i,r=t.cases,o=0,s=Object.keys(r),a=s.length;o<a;o++){n=s[o],i=r[n],e[p(n)]=c(i)}t.cases=e}else if(t instanceof Array){let e=[],i=null;for(let r=0,o=n(t),s=o.length;r<s;r++){let n=o[r];"@"==n[0]&&r==t.length-1&&i&&(n={next:n}),"object"==typeof n?null!=n.token||n.cases?e.push(i=Object.assign({},n)):Object.assign(i,n):"string"==typeof n&&e.push(i={token:p(n)})}t=e}if(t instanceof Array)for(let e=0,i=n(t),r=i.length;e<r;e++){let t=i[e];t.token&&t.token.indexOf("$$")>=0&&(t.token=t.token.replace("$$","$"+(e+1))),t.next&&(t.next=u(t.next)),t.switchTo&&(t.switchTo=u(t.switchTo))}return t}e.states=a;for(let t,e,n=0,i=Object.keys(a),r=i.length;n<r;n++){t=i[n],e=a[t];let r=0;for(;r<e.length;){let t=e[r];t[0]instanceof Array?e.splice(r,1,...t):("string"==typeof t?e[r]={include:t}:t[1]instanceof Array?t[1]=c(t[1]):t instanceof Array&&t.splice(1,2,c(t[1],t[2])),r++)}}const h={defaultToken:"invalid",ignoreCase:!1,tokenPostfix:"",brackets:[{open:"{",close:"}",token:"bracket.curly"},{open:"[",close:"]",token:"bracket.square"},{open:"(",close:")",token:"bracket.parenthesis"}],keywords:["def","and","or","is","isnt","not","on","yes","@","no","off","true","false","null","this","self","as","new","delete","typeof","in","instanceof","return","throw","break","continue","debugger","if","elif","else","switch","for","while","do","try","catch","finally","class","extends","super","undefined","then","unless","until","loop","of","by","when","tag","prop","attr","export","import","extend","var","let","const","require","isa","await"],boolean:["true","false","yes","no","undefined","null"],operators:["=","!","~","?",":","!!","??","&","|","^","%","<<","!&",">>",">>>","+=","-=","*=","/=","&=","|=","?=","^=","%=","~=","<<=",">>=",">>>=","..","...","||=","&&=","**=","**","|=?","~=?","^=?","=?","and","or"],logic:[">","<","==","<=",">=","!=","&&","||","===","!=="],ranges:["..","..."],dot:["."],access:[".",".."],math:["+","-","*","/","++","--"],unspaced_ops:function(t,e="#"){"string"==typeof t&&(t=t.split(" "));let n=t.slice().sort((function(t,e){return e.length-t.length}));return n=n.map((function(t){let n=t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&");return e.replace("#",n)})),new RegExp("(?:"+n.join("|")+")")}(". .. + * / ++ --"),comment:/#(\s.*)?(\n|$)/,symbols:/[=><!~?&%|+\-*\/\^,]+/,escapes:/\\(?:[abfnrtv\\"'$]|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,postaccess:/(:(?=\w))?/,ivar:/\@[a-zA-Z_]\w*/,B:/(?=\s|$)/,br:/[\r\n]+/,constant:/[A-Z][\w\$]*@subIdentifer/,className:/[A-Z][A-Za-z\d\-\_]*|[A-Za-z\d\-\_]+/,methodName:/[A-Za-z\_][A-Za-z\d\-\_]*\=?/,subIdentifer:/(?:\-*[\w\$]+)*/,identifier:/[a-z_]@subIdentifer/,mixinIdentifier:/\%[a-z_]@subIdentifer/,id:/[A-Za-z_\$][\w\$]*(?:\-+[\w\$]+)*\??/,optid:/(?:@id)?/,esmIdentifier:/[\@\%]?[A-Za-z_\$]@subIdentifer/,propertyPath:/(?:[A-Za-z_\$][A-Za-z\d\-\_\$]*\.)?(?:[A-Za-z_\$][A-Za-z\d\-\_\$]*)/,tagNameIdentifier:/(?:[\w\-]+\:)?\w+(?:\-\w+)*/,variable:/[\w\$]+(?:-[\w\$]*)*\??/,varKeyword:/var|let|const/,tagIdentifier:/-*[a-zA-Z][\w\-]*/,implicitCall:/(?!\s(?:and|or)\s)(?=\s[\w\'\"\/\[\{])/,cssPropertyPath:/[\@\.]*[\w\-\$]+(?:[\@\.]+[\w\-\$]+)*/,cssPropertyKey:/[\@\.]*[\w\-\$]+(?:[\@\.]+[\w\-\$]+)*(?:\s*\:)/,cssVariable:/(?:--|\$)[\w\-\$]+/,cssPropertyName:/[\w\-\$]+/,cssModifier:/\@[\w\-\$]+/,cssUpModifier:/\.\.[\w\-\$]+/,cssIsModifier:/\.[\w\-\$]+/,regEx:/\/(?!\/\/)(?:[^\/\\]|\\.)*\/[igm]*/,regexpctl:/[(){}\[\]\$\^|\-*+?\.]/,regexpesc:/\\(?:[bBdDfnrstvwWn0\\\/]|@regexpctl|c[A-Z]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})/,tokenizer:a};e.language=h,e.conf={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#%\^\&\*\(\)\=\$\-\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{blockComment:["###","###"],lineComment:"#"},brackets:[["{","}","delimiter.curly"],["[","]","delimiter.square"],["(",")","delimiter.parenthesis"],["<",">","delimiter.angle"]],autoClosingPairs:[{open:'"',close:'"',notIn:["string","comment"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"{",close:"}",notIn:["comment"]},{open:"[",close:"]",notIn:["string","comment"]},{open:"(",close:")",notIn:["string","comment"]},{open:"<",close:">",notIn:["string","comment","operators"]}],onEnterRules:[{beforeText:/^\s*(?:css |def|get \w|set \w|class|for|if|elif|else|while|try|with|finally|except|async).*?$/,action:{indentAction:1}},{beforeText:/\s*(?:do)\s*(\|.*\|\s*)?$/,action:{indentAction:1}}]}},function(t,e){e.conf={comments:{lineComment:"#",blockComment:["=begin","=end"]},brackets:[["(",")"],["{","}"],["[","]"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},e.language={tokenPostfix:".ruby",keywords:["__LINE__","__ENCODING__","__FILE__","BEGIN","END","alias","and","begin","break","case","class","def","defined?","do","else","elsif","end","ensure","for","false","if","in","module","next","nil","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield"],keywordops:["::","..","...","?",":","=>"],builtins:["require","public","private","include","extend","attr_reader","protected","private_class_method","protected_class_method","new"],declarations:["module","class","def","case","do","begin","for","if","while","until","unless"],linedecls:["def","case","do","begin","for","if","while","until","unless"],operators:["^","&","|","<=>","==","===","!~","=~",">",">=","<","<=","<<",">>","+","-","*","/","%","**","~","+@","-@","[]","[]=","`","+=","-=","*=","**=","/=","^=","%=","<<=",">>=","&=","&&=","||=","|="],brackets:[{open:"(",close:")",token:"delimiter.parenthesis"},{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"}],symbols:/[=><!~?:&|+\-*\/\^%\.]+/,escape:/(?:[abefnrstv\\"'\n\r]|[0-7]{1,3}|x[0-9A-Fa-f]{1,2}|u[0-9A-Fa-f]{4})/,escapes:/\\(?:C\-(@escape|.)|c(@escape|.)|@escape)/,decpart:/\d(_?\d)*/,decimal:/0|@decpart/,delim:/[^a-zA-Z0-9\s\n\r]/,heredelim:/(?:\w+|'[^']*'|"[^"]*"|`[^`]*`)/,regexpctl:/[(){}\[\]\$\^|\-*+?\.]/,regexpesc:/\\(?:[AzZbBdDfnrstvwWn0\\\/]|@regexpctl|c[A-Z]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})?/,tokenizer:{root:[[/^(\s*)([a-z_]\w*[!?=]?)/,["white",{cases:{"for|until|while":{token:"keyword.$2",next:"@dodecl.$2"},"@declarations":{token:"keyword.$2",next:"@root.$2"},end:{token:"keyword.$S2",next:"@pop"},"@keywords":"keyword","@builtins":"predefined","@default":"identifier"}}]],[/[a-z_]\w*[!?=]?/,{cases:{"if|unless|while|until":{token:"keyword.$0x",next:"@modifier.$0x"},for:{token:"keyword.$2",next:"@dodecl.$2"},"@linedecls":{token:"keyword.$0",next:"@root.$0"},end:{token:"keyword.$S2",next:"@pop"},"@keywords":"keyword","@builtins":"predefined","@default":"identifier"}}],[/[A-Z][\w]*[!?=]?/,"constructor.identifier"],[/\$[\w]*/,"global.constant"],[/@[\w]*/,"namespace.instance.identifier"],[/@@[\w]*/,"namespace.class.identifier"],[/<<-(@heredelim).*/,{token:"string.heredoc.delimiter",next:"@heredoc.$1"}],[/[ \t\r\n]+<<(@heredelim).*/,{token:"string.heredoc.delimiter",next:"@heredoc.$1"}],[/^<<(@heredelim).*/,{token:"string.heredoc.delimiter",next:"@heredoc.$1"}],{include:"@whitespace"},[/"/,{token:"string.d.delim",next:'@dstring.d."'}],[/'/,{token:"string.sq.delim",next:"@sstring.sq"}],[/%([rsqxwW]|Q?)/,{token:"@rematch",next:"pstring"}],[/`/,{token:"string.x.delim",next:"@dstring.x.`"}],[/:(\w|[$@])\w*[!?=]?/,"string.s"],[/:"/,{token:"string.s.delim",next:'@dstring.s."'}],[/:'/,{token:"string.s.delim",next:"@sstring.s"}],[/\/(?=(\\\/|[^\/\n])+\/)/,{token:"regexp.delim",next:"@regexp"}],[/[{}()\[\]]/,"@brackets"],[/@symbols/,{cases:{"@keywordops":"keyword","@operators":"operator","@default":""}}],[/[;,]/,"delimiter"],[/0[xX][0-9a-fA-F](_?[0-9a-fA-F])*/,"number.hex"],[/0[_oO][0-7](_?[0-7])*/,"number.octal"],[/0[bB][01](_?[01])*/,"number.binary"],[/0[dD]@decpart/,"number"],[/@decimal((\.@decpart)?([eE][\-+]?@decpart)?)/,{cases:{$1:"number.float","@default":"number"}}]],dodecl:[[/^/,{token:"",switchTo:"@root.$S2"}],[/[a-z_]\w*[!?=]?/,{cases:{end:{token:"keyword.$S2",next:"@pop"},do:{token:"keyword",switchTo:"@root.$S2"},"@linedecls":{token:"@rematch",switchTo:"@root.$S2"},"@keywords":"keyword","@builtins":"predefined","@default":"identifier"}}],{include:"@root"}],modifier:[[/^/,"","@pop"],[/[a-z_]\w*[!?=]?/,{cases:{end:{token:"keyword.$S2",next:"@pop"},"then|else|elsif|do":{token:"keyword",switchTo:"@root.$S2"},"@linedecls":{token:"@rematch",switchTo:"@root.$S2"},"@keywords":"keyword","@builtins":"predefined","@default":"identifier"}}],{include:"@root"}],sstring:[[/[^\\']+/,"string.$S2"],[/\\\\|\\'|\\$/,"string.$S2.escape"],[/\\./,"string.$S2.invalid"],[/'/,{token:"string.$S2.delim",next:"@pop"}]],dstring:[[/[^\\`"#]+/,"string.$S2"],[/#/,"string.$S2.escape","@interpolated"],[/\\$/,"string.$S2.escape"],[/@escapes/,"string.$S2.escape"],[/\\./,"string.$S2.escape.invalid"],[/[`"]/,{cases:{"$#==$S3":{token:"string.$S2.delim",next:"@pop"},"@default":"string.$S2"}}]],heredoc:[[/^(\s*)(@heredelim)$/,{cases:{"$2==$S2":["string.heredoc",{token:"string.heredoc.delimiter",next:"@pop"}],"@default":["string.heredoc","string.heredoc"]}}],[/.*/,"string.heredoc"]],interpolated:[[/\$\w*/,"global.constant","@pop"],[/@\w*/,"namespace.class.identifier","@pop"],[/@@\w*/,"namespace.instance.identifier","@pop"],[/[{]/,{token:"string.escape.curly",switchTo:"@interpolated_compound"}],["","","@pop"]],interpolated_compound:[[/[}]/,{token:"string.escape.curly",next:"@pop"}],{include:"@root"}],pregexp:[{include:"@whitespace"},[/[^\(\{\[\\]/,{cases:{"$#==$S3":{token:"regexp.delim",next:"@pop"},"$#==$S2":{token:"regexp.delim",next:"@push"},"~[)}\\]]":"@brackets.regexp.escape.control","~@regexpctl":"regexp.escape.control","@default":"regexp"}}],{include:"@regexcontrol"}],regexp:[{include:"@regexcontrol"},[/[^\\\/]/,"regexp"],["/[ixmp]*",{token:"regexp.delim"},"@pop"]],regexcontrol:[[/(\{)(\d+(?:,\d*)?)(\})/,["@brackets.regexp.escape.control","regexp.escape.control","@brackets.regexp.escape.control"]],[/(\[)(\^?)/,["@brackets.regexp.escape.control",{token:"regexp.escape.control",next:"@regexrange"}]],[/(\()(\?[:=!])/,["@brackets.regexp.escape.control","regexp.escape.control"]],[/\(\?#/,{token:"regexp.escape.control",next:"@regexpcomment"}],[/[()]/,"@brackets.regexp.escape.control"],[/@regexpctl/,"regexp.escape.control"],[/\\$/,"regexp.escape"],[/@regexpesc/,"regexp.escape"],[/\\\./,"regexp.invalid"],[/#/,"regexp.escape","@interpolated"]],regexrange:[[/-/,"regexp.escape.control"],[/\^/,"regexp.invalid"],[/\\$/,"regexp.escape"],[/@regexpesc/,"regexp.escape"],[/[^\]]/,"regexp"],[/\]/,"@brackets.regexp.escape.control","@pop"]],regexpcomment:[[/[^)]+/,"comment"],[/\)/,{token:"regexp.escape.control",next:"@pop"}]],pstring:[[/%([qws])\(/,{token:"string.$1.delim",switchTo:"@qstring.$1.(.)"}],[/%([qws])\[/,{token:"string.$1.delim",switchTo:"@qstring.$1.[.]"}],[/%([qws])\{/,{token:"string.$1.delim",switchTo:"@qstring.$1.{.}"}],[/%([qws])</,{token:"string.$1.delim",switchTo:"@qstring.$1.<.>"}],[/%([qws])(@delim)/,{token:"string.$1.delim",switchTo:"@qstring.$1.$2.$2"}],[/%r\(/,{token:"regexp.delim",switchTo:"@pregexp.(.)"}],[/%r\[/,{token:"regexp.delim",switchTo:"@pregexp.[.]"}],[/%r\{/,{token:"regexp.delim",switchTo:"@pregexp.{.}"}],[/%r</,{token:"regexp.delim",switchTo:"@pregexp.<.>"}],[/%r(@delim)/,{token:"regexp.delim",switchTo:"@pregexp.$1.$1"}],[/%(x|W|Q?)\(/,{token:"string.$1.delim",switchTo:"@qqstring.$1.(.)"}],[/%(x|W|Q?)\[/,{token:"string.$1.delim",switchTo:"@qqstring.$1.[.]"}],[/%(x|W|Q?)\{/,{token:"string.$1.delim",switchTo:"@qqstring.$1.{.}"}],[/%(x|W|Q?)</,{token:"string.$1.delim",switchTo:"@qqstring.$1.<.>"}],[/%(x|W|Q?)(@delim)/,{token:"string.$1.delim",switchTo:"@qqstring.$1.$2.$2"}],[/%([rqwsxW]|Q?)./,{token:"invalid",next:"@pop"}],[/./,{token:"invalid",next:"@pop"}]],qstring:[[/\\$/,"string.$S2.escape"],[/\\./,"string.$S2.escape"],[/./,{cases:{"$#==$S4":{token:"string.$S2.delim",next:"@pop"},"$#==$S3":{token:"string.$S2.delim",next:"@push"},"@default":"string.$S2"}}]],qqstring:[[/#/,"string.$S2.escape","@interpolated"],{include:"@qstring"}],whitespace:[[/[ \t\r\n]+/,""],[/^\s*=begin\b/,"comment","@comment"],[/#.*$/,"comment"]],comment:[[/[^=]+/,"comment"],[/^\s*=begin\b/,"comment.invalid"],[/^\s*=end\b.*/,"comment","@pop"],[/[=]/,"comment"]]}}},function(t,e){e.conf={wordPattern:/(#?-?\d*\.\d\w*%?)|((::|[@#.!:])?[\w-?]+%?)|::|[@#.!:]/g,comments:{blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}",notIn:["string","comment"]},{open:"[",close:"]",notIn:["string","comment"]},{open:"(",close:")",notIn:["string","comment"]},{open:'"',close:'"',notIn:["string","comment"]},{open:"'",close:"'",notIn:["string","comment"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},e.language={defaultToken:"",tokenPostfix:".css",ws:"[ \t\n\r\f]*",identifier:"-?-?([a-zA-Z]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))([\\w\\-]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))*",brackets:[{open:"{",close:"}",token:"delimiter.bracket"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}],tokenizer:{root:[{include:"@selector"}],selector:[{include:"@comments"},{include:"@import"},{include:"@strings"},["[@](keyframes|-webkit-keyframes|-moz-keyframes|-o-keyframes)",{token:"keyword",next:"@keyframedeclaration"}],["[@](page|content|font-face|-moz-document)",{token:"keyword"}],["[@](charset|namespace)",{token:"keyword",next:"@declarationbody"}],["(url-prefix)(\\()",["attribute.value",{token:"delimiter.parenthesis",next:"@urldeclaration"}]],["(url)(\\()",["attribute.value",{token:"delimiter.parenthesis",next:"@urldeclaration"}]],{include:"@selectorname"},["[\\*]","tag"],["[>\\+,]","delimiter"],["\\[",{token:"delimiter.bracket",next:"@selectorattribute"}],["{",{token:"delimiter.bracket",next:"@selectorbody"}]],selectorbody:[{include:"@comments"},["[*_]?@identifier@ws:(?=(\\s|\\d|[^{;}]*[;}]))","attribute.name","@rulevalue"],["}",{token:"delimiter.bracket",next:"@pop"}]],selectorname:[["(\\.|#(?=[^{])|%|(@identifier)|:)+","tag"]],selectorattribute:[{include:"@term"},["]",{token:"delimiter.bracket",next:"@pop"}]],term:[{include:"@comments"},["(url-prefix)(\\()",["attribute.value",{token:"delimiter.parenthesis",next:"@urldeclaration"}]],["(url)(\\()",["attribute.value",{token:"delimiter.parenthesis",next:"@urldeclaration"}]],{include:"@functioninvocation"},{include:"@numbers"},{include:"@name"},["([<>=\\+\\-\\*\\/\\^\\|\\~,])","delimiter"],[",","delimiter"]],rulevalue:[{include:"@comments"},{include:"@strings"},{include:"@term"},["!important","keyword"],[";","delimiter","@pop"],["(?=})",{token:"",next:"@pop"}]],warndebug:[["[@](warn|debug)",{token:"keyword",next:"@declarationbody"}]],import:[["[@](import)",{token:"keyword",next:"@declarationbody"}]],urldeclaration:[{include:"@strings"},["[^)\r\n]+","string"],["\\)",{token:"delimiter.parenthesis",next:"@pop"}]],parenthizedterm:[{include:"@term"},["\\)",{token:"delimiter.parenthesis",next:"@pop"}]],declarationbody:[{include:"@term"},[";","delimiter","@pop"],["(?=})",{token:"",next:"@pop"}]],comments:[["\\/\\*","comment","@comment"],["\\/\\/+.*","comment"]],comment:[["\\*\\/","comment","@pop"],[/[^*/]+/,"comment"],[/./,"comment"]],name:[["@identifier","attribute.value"]],numbers:[["-?(\\d*\\.)?\\d+([eE][\\-+]?\\d+)?",{token:"attribute.value.number",next:"@units"}],["#[0-9a-fA-F_]+(?!\\w)","attribute.value.hex"]],units:[["(em|ex|ch|rem|vmin|vmax|vw|vh|vm|cm|mm|in|px|pt|pc|deg|grad|rad|turn|s|ms|Hz|kHz|%)?","attribute.value.unit","@pop"]],keyframedeclaration:[["@identifier","attribute.value"],["{",{token:"delimiter.bracket",switchTo:"@keyframebody"}]],keyframebody:[{include:"@term"},["{",{token:"delimiter.bracket",next:"@selectorbody"}],["}",{token:"delimiter.bracket",next:"@pop"}]],functioninvocation:[["@identifier\\(",{token:"attribute.value",next:"@functionarguments"}]],functionarguments:[["\\$@identifier@ws:","attribute.name"],["[,]","delimiter"],{include:"@term"},["\\)",{token:"attribute.value",next:"@pop"}]],strings:[['~?"',{token:"string",next:"@stringenddoublequote"}],["~?'",{token:"string",next:"@stringendquote"}]],stringenddoublequote:[["\\\\.","string"],['"',{token:"string",next:"@pop"}],[/[^\\"]+/,"string"],[".","string"]],stringendquote:[["\\\\.","string"],["'",{token:"string",next:"@pop"}],[/[^\\']+/,"string"],[".","string"]]}}},function(t,e){e.conf={comments:{lineComment:"#",blockComment:["'''","'''"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},e.language={defaultToken:"",tokenPostfix:".python",keywords:["and","as","assert","break","class","continue","def","del","elif","else","except","exec","finally","for","from","global","if","import","in","is","lambda","None","not","or","pass","print","raise","return","self","try","while","with","yield","int","float","long","complex","hex","abs","all","any","apply","basestring","bin","bool","buffer","bytearray","callable","chr","classmethod","cmp","coerce","compile","complex","delattr","dict","dir","divmod","enumerate","eval","execfile","file","filter","format","frozenset","getattr","globals","hasattr","hash","help","id","input","intern","isinstance","issubclass","iter","len","locals","list","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","reversed","range","raw_input","reduce","reload","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","unichr","unicode","vars","xrange","zip","True","False","__dict__","__methods__","__members__","__class__","__bases__","__name__","__mro__","__subclasses__","__init__","__import__"],brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"}],tokenizer:{root:[{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},[/[,:;]/,"delimiter"],[/[{}\[\]()]/,"@brackets"],[/@[a-zA-Z]\w*/,"tag"],[/[a-zA-Z]\w*/,{cases:{"@keywords":"keyword","@default":"identifier"}}]],whitespace:[[/\s+/,"white"],[/(^#.*$)/,"comment"],[/('''.*''')|(""".*""")/,"string"],[/'''.*$/,"string","@endDocString"],[/""".*$/,"string","@endDblDocString"]],endDocString:[[/\\'/,"string"],[/.*'''/,"string","@popall"],[/.*$/,"string"]],endDblDocString:[[/\\"/,"string"],[/.*"""/,"string","@popall"],[/.*$/,"string"]],numbers:[[/-?0x([abcdef]|[ABCDEF]|\d)+[lL]?/,"number.hex"],[/-?(\d*\.)?\d+([eE][+\-]?\d+)?[jJ]?[lL]?/,"number"]],strings:[[/'$/,"string.escape","@popall"],[/'/,"string.escape","@stringBody"],[/"$/,"string.escape","@popall"],[/"/,"string.escape","@dblStringBody"]],stringBody:[[/\\./,"string"],[/'/,"string.escape","@popall"],[/.(?=.*')/,"string"],[/.*\\$/,"string"],[/.*$/,"string","@popall"]],dblStringBody:[[/\\./,"string"],[/"/,"string.escape","@popall"],[/.(?=.*")/,"string"],[/.*\\$/,"string"],[/.*$/,"string","@popall"]]}}},function(t,e){e.conf={wordPattern:/(#?-?\d*\.\d\w*%?)|([@#!.:]?[\w-?]+%?)|[@#!.]/g,comments:{blockComment:["/*","*/"],lineComment:"//"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}",notIn:["string","comment"]},{open:"[",close:"]",notIn:["string","comment"]},{open:"(",close:")",notIn:["string","comment"]},{open:'"',close:'"',notIn:["string","comment"]},{open:"'",close:"'",notIn:["string","comment"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},e.language={defaultToken:"",tokenPostfix:".less",identifier:"-?-?([a-zA-Z]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))([\\w\\-]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))*",identifierPlus:"-?-?([a-zA-Z:.]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))([\\w\\-:.]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))*",brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}],tokenizer:{root:[{include:"@nestedJSBegin"},["[ \\t\\r\\n]+",""],{include:"@comments"},{include:"@keyword"},{include:"@strings"},{include:"@numbers"},["[*_]?[a-zA-Z\\-\\s]+(?=:.*(;|(\\\\$)))","attribute.name","@attribute"],["url(\\-prefix)?\\(",{token:"tag",next:"@urldeclaration"}],["[{}()\\[\\]]","@brackets"],["[,:;]","delimiter"],["#@identifierPlus","tag.id"],["&","tag"],["\\.@identifierPlus(?=\\()","tag.class","@attribute"],["\\.@identifierPlus","tag.class"],["@identifierPlus","tag"],{include:"@operators"},["@(@identifier(?=[:,\\)]))","variable","@attribute"],["@(@identifier)","variable"],["@","key","@atRules"]],nestedJSBegin:[["``","delimiter.backtick"],["`",{token:"delimiter.backtick",next:"@nestedJSEnd",nextEmbedded:"text/javascript"}]],nestedJSEnd:[["`",{token:"delimiter.backtick",next:"@pop",nextEmbedded:"@pop"}]],operators:[["[<>=\\+\\-\\*\\/\\^\\|\\~]","operator"]],keyword:[["(@[\\s]*import|![\\s]*important|true|false|when|iscolor|isnumber|isstring|iskeyword|isurl|ispixel|ispercentage|isem|hue|saturation|lightness|alpha|lighten|darken|saturate|desaturate|fadein|fadeout|fade|spin|mix|round|ceil|floor|percentage)\\b","keyword"]],urldeclaration:[{include:"@strings"},["[^)\r\n]+","string"],["\\)",{token:"tag",next:"@pop"}]],attribute:[{include:"@nestedJSBegin"},{include:"@comments"},{include:"@strings"},{include:"@numbers"},{include:"@keyword"},["[a-zA-Z\\-]+(?=\\()","attribute.value","@attribute"],[">","operator","@pop"],["@identifier","attribute.value"],{include:"@operators"},["@(@identifier)","variable"],["[)\\}]","@brackets","@pop"],["[{}()\\[\\]>]","@brackets"],["[;]","delimiter","@pop"],["[,=:]","delimiter"],["\\s",""],[".","attribute.value"]],comments:[["\\/\\*","comment","@comment"],["\\/\\/+.*","comment"]],comment:[["\\*\\/","comment","@pop"],[".","comment"]],numbers:[["(\\d*\\.)?\\d+([eE][\\-+]?\\d+)?",{token:"attribute.value.number",next:"@units"}],["#[0-9a-fA-F_]+(?!\\w)","attribute.value.hex"]],units:[["(em|ex|ch|rem|vmin|vmax|vw|vh|vm|cm|mm|in|px|pt|pc|deg|grad|rad|turn|s|ms|Hz|kHz|%)?","attribute.value.unit","@pop"]],strings:[['~?"',{token:"string.delimiter",next:"@stringsEndDoubleQuote"}],["~?'",{token:"string.delimiter",next:"@stringsEndQuote"}]],stringsEndDoubleQuote:[['\\\\"',"string"],['"',{token:"string.delimiter",next:"@popall"}],[".","string"]],stringsEndQuote:[["\\\\'","string"],["'",{token:"string.delimiter",next:"@popall"}],[".","string"]],atRules:[{include:"@comments"},{include:"@strings"},["[()]","delimiter"],["[\\{;]","delimiter","@pop"],[".","key"]]}}},function(t,e){exportsconf={comments:{blockComment:["\x3c!--","--\x3e"]},brackets:[["<",">"]],autoClosingPairs:[{open:"<",close:">"},{open:"'",close:"'"},{open:'"',close:'"'}],surroundingPairs:[{open:"<",close:">"},{open:"'",close:"'"},{open:'"',close:'"'}]},e.language={defaultToken:"",tokenPostfix:".xml",ignoreCase:!0,qualifiedName:/(?:[\w\.\-]+:)?[\w\.\-]+/,tokenizer:{root:[[/[^<&]+/,""],{include:"@whitespace"},[/(<)(@qualifiedName)/,[{token:"delimiter"},{token:"tag",next:"@tag"}]],[/(<\/)(@qualifiedName)(\s*)(>)/,[{token:"delimiter"},{token:"tag"},"",{token:"delimiter"}]],[/(<\?)(@qualifiedName)/,[{token:"delimiter"},{token:"metatag",next:"@tag"}]],[/(<\!)(@qualifiedName)/,[{token:"delimiter"},{token:"metatag",next:"@tag"}]],[/<\!\[CDATA\[/,{token:"delimiter.cdata",next:"@cdata"}],[/&\w+;/,"string.escape"]],cdata:[[/[^\]]+/,""],[/\]\]>/,{token:"delimiter.cdata",next:"@pop"}],[/\]/,""]],tag:[[/[ \t\r\n]+/,""],[/(@qualifiedName)(\s*=\s*)("[^"]*"|'[^']*')/,["attribute.name","","attribute.value"]],[/(@qualifiedName)(\s*=\s*)("[^">?\/]*|'[^'>?\/]*)(?=[\?\/]\>)/,["attribute.name","","attribute.value"]],[/(@qualifiedName)(\s*=\s*)("[^">]*|'[^'>]*)/,["attribute.name","","attribute.value"]],[/@qualifiedName/,"attribute.name"],[/\?>/,{token:"delimiter",next:"@pop"}],[/(\/)(>)/,[{token:"tag"},{token:"delimiter",next:"@pop"}]],[/>/,{token:"delimiter",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,""],[/<!--/,{token:"comment",next:"@comment"}]],comment:[[/[^<\-]+/,"comment.content"],[/-->/,{token:"comment",next:"@pop"}],[/<!--/,"comment.content.invalid"],[/[<\-]/,"comment.content"]]}}},function(t,e){e.conf={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"<",close:">"}]},e.language={defaultToken:"",tokenPostfix:".java",keywords:["abstract","continue","for","new","switch","assert","default","goto","package","synchronized","boolean","do","if","private","this","break","double","implements","protected","throw","byte","else","import","public","throws","case","enum","instanceof","return","transient","catch","extends","int","short","try","char","final","interface","static","void","class","finally","long","strictfp","volatile","const","float","native","super","while","true","false"],operators:["=",">","<","!","~","?",":","==","<=",">=","!=","&&","||","++","--","+","-","*","/","&","|","^","%","<<",">>",">>>","+=","-=","*=","/=","&=","|=","^=","%=","<<=",">>=",">>>="],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,tokenizer:{root:[[/[a-zA-Z_$][\w$]*/,{cases:{"@keywords":{token:"keyword.$0"},"@default":"identifier"}}],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"delimiter","@default":""}}],[/@\s*[a-zA-Z_\$][\w\$]*/,"annotation"],[/(@digits)[eE]([\-+]?(@digits))?[fFdD]?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?[fFdD]?/,"number.float"],[/0[xX](@hexdigits)[Ll]?/,"number.hex"],[/0(@octaldigits)[Ll]?/,"number.octal"],[/0[bB](@binarydigits)[Ll]?/,"number.binary"],[/(@digits)[fFdD]/,"number.float"],[/(@digits)[lL]?/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string"],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],whitespace:[[/[ \t\r\n]+/,""],[/\/\*\*(?!\/)/,"comment.doc","@javadoc"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[\/*]/,"comment"]],javadoc:[[/[^\/*]+/,"comment.doc"],[/\/\*/,"comment.doc.invalid"],[/\*\//,"comment.doc","@pop"],[/[\/*]/,"comment.doc"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]]}}},function(t,e,n){var i=n(36);t.exports=i},function(t,e){e.conf={wordPattern:/(#?-?\d*\.\d\w*%?)|([@$#!.:]?[\w-?]+%?)|[@#!.]/g,comments:{blockComment:["/*","*/"],lineComment:"//"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}",notIn:["string","comment"]},{open:"[",close:"]",notIn:["string","comment"]},{open:"(",close:")",notIn:["string","comment"]},{open:'"',close:'"',notIn:["string","comment"]},{open:"'",close:"'",notIn:["string","comment"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],folding:{markers:{start:new RegExp("^\\s*\\/\\*\\s*#region\\b\\s*(.*?)\\s*\\*\\/"),end:new RegExp("^\\s*\\/\\*\\s*#endregion\\b.*\\*\\/")}}},e.language={defaultToken:"",tokenPostfix:".scss",ws:"[ \t\n\r\f]*",identifier:"-?-?([a-zA-Z]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))([\\w\\-]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))*",brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}],tokenizer:{root:[{include:"@selector"}],selector:[{include:"@comments"},{include:"@import"},{include:"@variabledeclaration"},{include:"@warndebug"},["[@](include)",{token:"keyword",next:"@includedeclaration"}],["[@](keyframes|-webkit-keyframes|-moz-keyframes|-o-keyframes)",{token:"keyword",next:"@keyframedeclaration"}],["[@](page|content|font-face|-moz-document)",{token:"keyword"}],["[@](charset|namespace)",{token:"keyword",next:"@declarationbody"}],["[@](function)",{token:"keyword",next:"@functiondeclaration"}],["[@](mixin)",{token:"keyword",next:"@mixindeclaration"}],["url(\\-prefix)?\\(",{token:"meta",next:"@urldeclaration"}],{include:"@controlstatement"},{include:"@selectorname"},["[&\\*]","tag"],["[>\\+,]","delimiter"],["\\[",{token:"delimiter.bracket",next:"@selectorattribute"}],["{",{token:"delimiter.curly",next:"@selectorbody"}]],selectorbody:[["[*_]?@identifier@ws:(?=(\\s|\\d|[^{;}]*[;}]))","attribute.name","@rulevalue"],{include:"@selector"},["[@](extend)",{token:"keyword",next:"@extendbody"}],["[@](return)",{token:"keyword",next:"@declarationbody"}],["}",{token:"delimiter.curly",next:"@pop"}]],selectorname:[["#{",{token:"meta",next:"@variableinterpolation"}],["(\\.|#(?=[^{])|%|(@identifier)|:)+","tag"]],selectorattribute:[{include:"@term"},["]",{token:"delimiter.bracket",next:"@pop"}]],term:[{include:"@comments"},["url(\\-prefix)?\\(",{token:"meta",next:"@urldeclaration"}],{include:"@functioninvocation"},{include:"@numbers"},{include:"@strings"},{include:"@variablereference"},["(and\\b|or\\b|not\\b)","operator"],{include:"@name"},["([<>=\\+\\-\\*\\/\\^\\|\\~,])","operator"],[",","delimiter"],["!default","literal"],["\\(",{token:"delimiter.parenthesis",next:"@parenthizedterm"}]],rulevalue:[{include:"@term"},["!important","literal"],[";","delimiter","@pop"],["{",{token:"delimiter.curly",switchTo:"@nestedproperty"}],["(?=})",{token:"",next:"@pop"}]],nestedproperty:[["[*_]?@identifier@ws:","attribute.name","@rulevalue"],{include:"@comments"},["}",{token:"delimiter.curly",next:"@pop"}]],warndebug:[["[@](warn|debug)",{token:"keyword",next:"@declarationbody"}]],import:[["[@](import)",{token:"keyword",next:"@declarationbody"}]],variabledeclaration:[["\\$@identifier@ws:","variable.decl","@declarationbody"]],urldeclaration:[{include:"@strings"},["[^)\r\n]+","string"],["\\)",{token:"meta",next:"@pop"}]],parenthizedterm:[{include:"@term"},["\\)",{token:"delimiter.parenthesis",next:"@pop"}]],declarationbody:[{include:"@term"},[";","delimiter","@pop"],["(?=})",{token:"",next:"@pop"}]],extendbody:[{include:"@selectorname"},["!optional","literal"],[";","delimiter","@pop"],["(?=})",{token:"",next:"@pop"}]],variablereference:[["\\$@identifier","variable.ref"],["\\.\\.\\.","operator"],["#{",{token:"meta",next:"@variableinterpolation"}]],variableinterpolation:[{include:"@variablereference"},["}",{token:"meta",next:"@pop"}]],comments:[["\\/\\*","comment","@comment"],["\\/\\/+.*","comment"]],comment:[["\\*\\/","comment","@pop"],[".","comment"]],name:[["@identifier","attribute.value"]],numbers:[["(\\d*\\.)?\\d+([eE][\\-+]?\\d+)?",{token:"number",next:"@units"}],["#[0-9a-fA-F_]+(?!\\w)","number.hex"]],units:[["(em|ex|ch|rem|vmin|vmax|vw|vh|vm|cm|mm|in|px|pt|pc|deg|grad|rad|turn|s|ms|Hz|kHz|%)?","number","@pop"]],functiondeclaration:[["@identifier@ws\\(",{token:"meta",next:"@parameterdeclaration"}],["{",{token:"delimiter.curly",switchTo:"@functionbody"}]],mixindeclaration:[["@identifier@ws\\(",{token:"meta",next:"@parameterdeclaration"}],["@identifier","meta"],["{",{token:"delimiter.curly",switchTo:"@selectorbody"}]],parameterdeclaration:[["\\$@identifier@ws:","variable.decl"],["\\.\\.\\.","operator"],[",","delimiter"],{include:"@term"},["\\)",{token:"meta",next:"@pop"}]],includedeclaration:[{include:"@functioninvocation"},["@identifier","meta"],[";","delimiter","@pop"],["(?=})",{token:"",next:"@pop"}],["{",{token:"delimiter.curly",switchTo:"@selectorbody"}]],keyframedeclaration:[["@identifier","meta"],["{",{token:"delimiter.curly",switchTo:"@keyframebody"}]],keyframebody:[{include:"@term"},["{",{token:"delimiter.curly",next:"@selectorbody"}],["}",{token:"delimiter.curly",next:"@pop"}]],controlstatement:[["[@](if|else|for|while|each|media)",{token:"keyword.flow",next:"@controlstatementdeclaration"}]],controlstatementdeclaration:[["(in|from|through|if|to)\\b",{token:"keyword.flow"}],{include:"@term"},["{",{token:"delimiter.curly",switchTo:"@selectorbody"}]],functionbody:[["[@](return)",{token:"keyword"}],{include:"@variabledeclaration"},{include:"@term"},{include:"@controlstatement"},[";","delimiter"],["}",{token:"delimiter.curly",next:"@pop"}]],functioninvocation:[["@identifier\\(",{token:"meta",next:"@functionarguments"}]],functionarguments:[["\\$@identifier@ws:","attribute.name"],["[,]","delimiter"],{include:"@term"},["\\)",{token:"meta",next:"@pop"}]],strings:[['~?"',{token:"string.delimiter",next:"@stringenddoublequote"}],["~?'",{token:"string.delimiter",next:"@stringendquote"}]],stringenddoublequote:[["\\\\.","string"],['"',{token:"string.delimiter",next:"@pop"}],[".","string"]],stringendquote:[["\\\\.","string"],["'",{token:"string.delimiter",next:"@pop"}],[".","string"]]}}},function(t,e){e.language={tokenPostfix:".js",keywords:["break","case","catch","class","continue","const","constructor","debugger","default","delete","do","else","export","extends","false","finally","for","from","function","get","if","import","in","instanceof","let","new","null","return","set","super","switch","symbol","this","throw","true","try","typeof","undefined","var","void","while","with","yield","async","await","of"],builtins:["define","require","window","document","undefined"],operators:["=",">","<","!","~","?",":","==","<=",">=","!=","&&","||","++","--","+","-","*","/","&","|","^","%","<<",">>",">>>","+=","-=","*=","/=","&=","|=","^=","%=","<<=",">>=",">>>="],brackets:[{open:"(",close:")",token:"bracket.parenthesis"},{open:"{",close:"}",token:"bracket.curly"},{open:"[",close:"]",token:"bracket.square"}],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,exponent:/[eE][\-+]?[0-9]+/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,regexpctl:/[(){}\[\]\$\^|\-*+?\.]/,regexpesc:/\\(?:[bBdDfnrstvwWn0\\\/]|@regexpctl|c[A-Z]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})/,tokenizer:{root:[[/([a-zA-Z_\$][\w\$]*)(\s*)(:?)/,{cases:{"$1==import":{token:"keyword",next:"@import"},"$1@keywords":["keyword","white","delimiter"],$3:["key.identifier","white","delimiter"],"$1@builtins":["predefined.identifier","white","delimiter"],"@default":["identifier","white","delimiter"]}}],{include:"@whitespace"},[/\/(?=([^\\\/]|\\.)+\/(?!\/))/,{token:"regexp.slash",bracket:"@open",next:"@regexp"}],[/(<)([\:\w\.]+)/,["start.delimiter.tag",{token:"tag",next:"@tagContent"}]],[/(<)(>)/,["start.delimiter.tag",{token:"end.delimiter.tag",next:"@tagBody"}]],[/[{}()\[\]]/,"@brackets"],[/[;,.]/,"delimiter"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/\d+\.\d*(@exponent)?/,"number.float"],[/\.\d+(@exponent)?/,"number.float"],[/\d+@exponent/,"number.float"],[/0[xX][\da-fA-F]+/,"number.hex"],[/0[0-7]+/,"number.octal"],[/\d+/,"number"],{include:"@strings"}],strings:[[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string",'@string."'],[/'/,"string","@string.'"],[/`/,"string","@string_backtick"]],rootInBrace:[[/\}/,"delimiter","@pop"],{include:"@root"}],tagContent:[[/\/\s*>/,"end.delimiter.tag","@pop"],[/>/,{token:"end.delimiter.tag",switchTo:"@tagBody"}],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w\-]+/,"attribute.name"],[/\=/,"delimiter"],[/\{/,"delimiter","@rootInBrace"],{include:"@whitespace"}],tagBody:[[/\{/,"delimiter","@rootInBrace"],[/(<\/)([:\w\.]*)(>)/,["start.delimiter.tag","tag",{token:"end.delimiter.tag",next:"@pop"}]],[/(<)([:\w\.]+)/,["start.delimiter.tag",{token:"tag",next:"@tagContent"}]]],import:[[/;/,"delimiter","@pop"],[/^/,"white","@pop"],[/\b(from|as)\b/,"keyword"],{include:"@whitespace"},{include:"@strings"}],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\/\*/,"comment.invalid"],["\\*/","comment","@pop"],[/[\/*]/,"comment"]],string:[[/[^\\"']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/["']/,{cases:{"$#==$S2":{token:"string",next:"@pop"},"@default":"string"}}]],string_backtick:[[/\$\{/,{token:"delimiter.bracket",next:"@bracketCounting"}],[/[^\\`$]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/`/,"string","@pop"]],bracketCounting:[[/\{/,"delimiter.bracket","@bracketCounting"],[/(@digits)[eE]([\-+]?(@digits))?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?/,"number.float"],[/0[xX](@hexdigits)n?/,"number.hex"],[/0[oO]?(@octaldigits)n?/,"number.octal"],[/0[bB](@binarydigits)n?/,"number.binary"],[/(@digits)n?/,"number"],[/[;,.]/,"delimiter"],[/\}/,"delimiter.bracket","@pop"]],regexp:[[/(\{)(\d+(?:,\d*)?)(\})/,["@brackets.regexp.escape.control","regexp.escape.control","@brackets.regexp.escape.control"]],[/(\[)(\^?)(?=(?:[^\]\\\/]|\\.)+)/,["@brackets.regexp.escape.control",{token:"regexp.escape.control",next:"@regexrange"}]],[/(\()(\?:|\?=|\?!)/,["@brackets.regexp.escape.control","regexp.escape.control"]],[/[()]/,"@brackets.regexp.escape.control"],[/@regexpctl/,"regexp.escape.control"],[/[^\\\/]/,"regexp"],[/@regexpesc/,"regexp.escape"],[/\\\./,"regexp.invalid"],["/",{token:"regexp.slash",bracket:"@close"},"@pop"]],regexrange:[[/-/,"regexp.escape.control"],[/\^/,"regexp.invalid"],[/@regexpesc/,"regexp.escape"],[/[^\]]/,"regexp"],[/\]/,"@brackets.regexp.escape.control","@pop"]]}}},function(t,e){var n;e.inlineCompiledCode={}.inlineCompiledCode=function(t,e,i){return void 0===i&&(i={}),new monaco.Promise((async function(i,r){let o="compiles to:",s=String(t.uri),a=monaco.IMBA_WORKER,u=t.getValue(),p=t.FILE_MODEL.file(),c=t.getValueInRange(e.getSelection());if(u=u.split("\n### "+o)[0],c.length>0){let e=t.getModeId();n||(n=monaco.editor.createModel("",null,"tempSelFile."+e)),c+="\n",n.setValue(c),s=String(n.uri)}a=await a(s);var h=await a.getCompiledCode(s);return(h=h.split("\n/* "+o)[0]).slice(0,20).indexOf("var Imba =")>=0&&(h=h.slice(h.indexOf("\n")+1)),u=u+"\n### "+o+"\n\n"+h,p&&p.replaceBody(u),i(!0)}))}},function(t,e,n){var i=n(0),r=i.createTagCache,o=i.createElementFactory(),s=i.createTagScope(),a=n(1),u=a.POINTERMASK,p=a.LAYOUTMASK,c=a.ACTION,h=s.defineTag("PointerView",(function(t){t.prototype.keyframe=function(t){return this._keyframe},t.prototype.setKeyframe=function(t){return this._keyframe=t,this},t.prototype.__mask={watch:"maskDidSet",name:"mask"},t.prototype.mask=function(t){return this._mask},t.prototype.setMask=function(t){var e=this.mask();return t!=e&&(this._mask=t),t!=e&&this.maskDidSet&&this.maskDidSet(t,e,this.__mask),this},t.prototype.__hidden={watch:"hiddenDidSet",name:"hidden"},t.prototype.hidden=function(t){return this._hidden},t.prototype.setHidden=function(t){var e=this.hidden();return t!=e&&(this._hidden=t),t!=e&&this.hiddenDidSet&&this.hiddenDidSet(t,e,this.__hidden),this},t.prototype.__hover={watch:"hoverDidSet",name:"hover"},t.prototype.hover=function(t){return this._hover},t.prototype.setHover=function(t){var e=this.hover();return t!=e&&(this._hover=t),t!=e&&this.hoverDidSet&&this.hoverDidSet(t,e,this.__hover),this},t.prototype.__target={watch:"targetDidSet",name:"target"},t.prototype.target=function(t){return this._target},t.prototype.setTarget=function(t){var e=this.target();return t!=e&&(this._target=t),t!=e&&this.targetDidSet&&this.targetDidSet(t,e,this.__target),this},t.prototype.space=function(){return this.data()},t.prototype.build=function(){var t,e=($_=this.$).$build$||($_.$build$=r(this));return this.$open("build0").setChildren(t=e[0]||(t=o("div",e,0,this)).flag("pointer-body").setContent(this._svg=this._svg||o("div",t).flag("svg").flag("Vector").flag("pointer-shape"),2),2).synced(),this._svg.dom().innerHTML='<svg width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">\n<polygon points="35 35 29.2102052 35.6469727 24.9999029 39 24.9987284 25" fill="#8BB2FF" fill-rule="evenodd"/>\n</svg>',this._sx=this._sy=1,this},t.prototype.mount=function(){var t=this;return t.space().on("resized",(function(){return t._frame=null,t.render()})),t.space().on("ticked",(function(e){return t.render(e)})),t},t.prototype.render=function(){var t,e=this.keyframe(),n=this._frame;if(!e||this.space().recording()||e._branch!=this.space().branch()||this.space().isEditing())return void this.setHidden(!0);this.setHidden(!1),this.space().counter("locals")!=this._v&&(this._v=this.space().counter("locals"),n=null);var i=e.x(),r=e.y();let o=this.space().timeline().currentOffset();if(e==n){let t=e.nextFrame();if(!t||o==this._currOffset)return this.draw();{this._currOffset=o;let n=t.offset()-e.offset(),s=Math.max(Math.min((o-e.offset())/n,1),0);if(!(n<140))return this.draw();i+=(t.x()-i)*s,r+=(t.y()-r)*s,this.drawTarget(i,r)}}var s,a;this._frame=e,n&&n.sref()&&n.sref()==e.sref()&&(a=this._target),a||(a=this.space().view().lookup(e.sref())),!a&&("number"==typeof(t=e.hover())||t instanceof Number)&&(a=this.space().__lookup(e.hover())),this.flag("local",!!e.LOCAL);var u=a||this._target,c=e?e.targetLayout():null,h=a?this.space().view().layoutForNode(a):null;if(u&&u.posToScreen&&(s=u.posToScreen(i,r)),!s&&a&&c&&h){let t=h[0],e=h[1],n=h[2],o=h[3],a=c[0],u=c[1],l=c[2],d=c[3],f=t-a,y=e-u,m=n-l,g=o-d,_=c[4];if(null==_&&(f+=54,_=0),0==m&&0==g)s=[i+y,r+f];else if(_&p.SCALED){s=[i=e+.5*n+(i-(u+.5*l))/l*n,r=t+.5*o+(r-(a+.5*d))/d*o]}}return s&&this.drawTarget(s[0],s[1],a),this.flag("out-of-bounds",!a||!s),this.setMask(e.flags()),a&&this._target!=a&&(this.setTarget(a),this._sx=.2,this._sy=.2),this.draw(),this},t.prototype.draw=function(){var t=this._x1-this._x,e=this._y1-this._y;0==t&&0==e||(Math.abs(t)<5&&Math.abs(e)<5?(this._x=this._x1,this._y=this._y1,this._sx=1,this._sy=1):(this._x=this._x+t*this._sx,this._y=this._y+e*this._sy,this._sx<.6&&(this._sx+=.03),this._sy<.6&&(this._sy+=.03)),this._dom.style.transform="translate3d("+this._x+"px,"+this._y+"px,0px)")},t.prototype.drawTarget=function(t,e){this._x1=t,this._y1=e,this._x||(this._x=t),this._y||(this._y=e)},t.prototype.drawAt=function(t,e){return this._dom.style.transform="translate3d("+(this._x=t)+"px,"+(this._y=e)+"px,0px)"},t.prototype.targetDidSet=function(t,e){var n,i,r,o;return e&&((n=e)&&n.unflag&&n.unflag("agent-over"),(i=e)&&i.setHasPointerFocus&&i.setHasPointerFocus(!1)),t&&((r=t)&&r.flag&&r.flag("agent-over"),(o=t)&&o.setHasPointerFocus&&o.setHasPointerFocus(!0)),this},t.prototype.hiddenDidSet=function(t){var e;if(this.flag("hidden",!!t),this.target())return(e=this.target())&&e.flag&&e.flag("agent-over",!t)},t.prototype.maskDidSet=function(t){return this.flag("left-button-pressed",t&u.LEFT_BUTTON)},t.prototype.retargetStream=function(){let t=this.space().trunk().stream().actionsOfType(c.POINTER_UPDATE),e=function(e){var n;let i,r=e,o=t[e],s=t[e+1];for(;e+1<t.length;){let n=t[e+1];if(n.sref()!=s.sref()){i=n;break}e++,s=n}let a=10*(s.timeOffset()-o.timeOffset());if((n=i)&&n.target&&n.target()!=o.target()&&(a+=8e3),a<16e3){let n=r+1;for(;n<=e;)t[n].setSref(o.sref()),n++}return e},n=0;for(;n+1<t.length&&t[n].sref()==t[n+1].sref();)n++;for(var i=[];n+1<t.length;)i.push(n=e(n));return i}}));e.PointerView=h},function(t,e,n){function i(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=n(0),s=(o.createTagList,o.createTagMap),a=o.createTagScope(),u=o.createElementFactory(),p=n(24).AudioManager,c=n(14).ScrimbaGesture,h=n(37).Segment,l=n(1).ACTION,d=n(2),f=d.Menu,y=d.MenuItem,m=(d.Button,d.IconButton,n(4).msToStr),g="",_="",v="",b=function(t,e){return void 0===e&&(e=.5),Math.round(t/e)*e},w=a.defineTag("RangeView",(function(t){t.prototype.timeline=function(t){return this._timeline},t.prototype.setTimeline=function(t){return this._timeline=t,this},t.prototype.data=function(t){return this._data},t.prototype.setData=function(t){return this._data=t,this},t.prototype.left=function(){return b(this.timeline().offset2px(this.data().start()))},t.prototype.right=function(){return b(this.timeline().offset2px(this.data().end()))},t.prototype.width=function(){return b(this.data().span()*this.timeline().ppms())},t.prototype.render=function(){return this.$open(0).css("left",this.left()).css("width",this.width()).synced()}})),x=a.defineTag("SegmentView",w,(function(t){let e=["cue","audio","loop"];t.prototype.render=function(){var t=this.$;let n=this.data().data()[3],i=(n&&this.data().span(),this.left()),r=this.right()-i+1,o=this.data().options();return this.$open(0).setFlag(-1,e[this.data().data()[0]]).flagIf("selected",this.data()._selected).css("left",i).css("width",r).setChildren([(t[0]||u("div",t,0,this).flag("handle").flag("left").dataset("gesture","segmove,start")).bindData(this,"data",[]).end(),(t[1]||u("div",t,1,this).flag("handle").flag("right").dataset("gesture","segmove,end")).bindData(this,"data",[]).end(),(t[2]||u("div",t,2,this).flag("middle").dataset("gesture","move")).end(),(t[3]||u("div",t,3,this).flag("label")).setContent([n>0?(t[4]||u("span",t,4,3).flag("dur")).setContent(n+"ms",3):0==n?t[5]||u("span",t,5,3).flag("dur").setText("∞"):n<0?(t[6]||u("span",t,6,3).flag("dur")).setContent(this.data().span()+"ms",3):void 0,void 0],1),o&&this.timeline().isOffsetBased()?(t[7]||u("div",t,7,this).flag("subrange")).css("left",b(this.timeline().offset2px(o[0])-i)).css("width",b(o[1]*this.timeline().ppms())).end():void 0],1).synced()},t.prototype.ontap=function(t){return t.halt(),this.trigger("segsel",this.data())}})),S=a.defineTag("OffsetView",(function(t){t.prototype.__left={watch:"draw",name:"left"},t.prototype.left=function(t){return this._left},t.prototype.setLeft=function(t){var e=this.left();return t!=e&&(this._left=t),t!=e&&this.draw&&this.draw(t,e,this.__left),this},t.prototype.draw=function(){return this.css({transform:"translateX("+this.left()+"px)"})}})),T=a.defineTag("TimelineCanvas",(function(t){t.prototype.cues=function(t){return this._cues},t.prototype.setCues=function(t){return this._cues=t,this},t.prototype.pxps=function(t){return this._pxps},t.prototype.setPxps=function(t){return this._pxps=t,this},t.prototype.startOffset=function(t){return this._startOffset},t.prototype.setStartOffset=function(t){return this._startOffset=t,this},t.prototype.startTime=function(t){return this._startTime},t.prototype.setStartTime=function(t){return this._startTime=t,this},t.prototype.endTime=function(t){return this._endTime},t.prototype.setEndTime=function(t){return this._endTime=t,this},t.prototype.options=function(t){return this._options},t.prototype.setOptions=function(t){return this._options=t,this},t.prototype.__currentOffset={watch:"currentOffsetDidSet",name:"currentOffset"},t.prototype.currentOffset=function(t){return this._currentOffset},t.prototype.setCurrentOffset=function(t){var e=this.currentOffset();return t!=e&&(this._currentOffset=t),t!=e&&this.currentOffsetDidSet&&this.currentOffsetDidSet(t,e,this.__currentOffset),this},t.prototype.markedRange=function(t){return this._markedRange},t.prototype.setMarkedRange=function(t){return this._markedRange=t,this},t.prototype.markers=function(t){return this._markers},t.prototype.setMarkers=function(t){return this._markers=t,this},t.prototype.timeline=function(){return this.data()},t.prototype.cues=function(){return this.timeline().cues()},t.prototype.viewRange=function(){return this._viewRange||this.data()._viewRange},t.prototype.scrollLeft=function(){return this.startTime()*this.ppms()},t.prototype.canvas=function(){this.$$||(this.$$={});return this._canvas=this._canvas||u("canvas",this).flag("canvas")},t.prototype.build=function(){return this._version=0,this._currentOffset=0,this._defaults={clipColors:["#977f9e"],cutColor:"#c3c3c3",tickMinSpacing:10,tockMinSpacing:30,tickFontSize:10,actionsHeight:2}},t.prototype.option=function(t,e){void 0===e&&(e=null);let n=this._options&&this._options[t]||this._defaults[t];return null!=n?n:e},t.prototype.setup=function(){return this._draws=0},t.prototype.ppms=function(){return this.pxps()/1e3},t.prototype.startTime=function(){return this.cues().offsetToTime(this.startOffset())},t.prototype.startValue=function(){return this.isOffsetBased()?this.startOffset():this.startTime()},t.prototype.isOffsetBased=function(){return!!this.options().renderCollapsed},t.prototype.isTimeBased=function(){return!this.isOffsetBased()},t.prototype.xToTimeOffset=function(t,e){void 0===e&&(e=0);let n=this.dom().getBoundingClientRect(),i=this.startValue()+(t-n.left)/this.ppms();return this.isTimeBased()&&(i=this.cues().timeToOffset(i)),e?Math.round(i*e)/e:i},t.prototype.screenx2val=function(t){let e=this.dom().getBoundingClientRect();return this.startValue()+(t-e.left)/this.ppms()},t.prototype.absTimeToX=function(t,e){void 0===e&&(e=0);let n=(t-this.startTime())*this.ppms();return e?Math.round(n*e)/e:n},t.prototype.round=function(t,e){return void 0===e&&(e=0),e?Math.round(t*e)/e:t},t.prototype.px2val=function(t){return this.startValue()+t/this.ppms()},t.prototype.time2px=function(t){return this.isOffsetBased()?this.offset2px(this.cues().timeToOffset(t)):(t-this.startTime())*this.ppms()},t.prototype.offset2px=function(t){return this.isTimeBased()?this.time2px(this.cues().offsetToTime(t)):(t-this.startOffset())*this.ppms()},t.prototype.offset2val=function(t){return this.isOffsetBased()?t:this.cues().offsetToTime(t)},t.prototype.time2val=function(t){return this.isTimeBased()?t:this.cues().timeToOffset(t)},t.prototype.val2offset=function(t){return this.isOffsetBased()?t:this.cues().timeToOffset(t)},t.prototype.val2time=function(t){return this.isTimeBased()?t:this.cues().offsetToTime(t)},t.prototype.yScale=function(){return.6},t.prototype.showCues=function(){return!0},t.prototype.dpr=function(){return this._dpr||(this._dpr=window.devicePixelRatio)},t.prototype.vh=function(){return this._vh},t.prototype.vw=function(){return this._vw},t.prototype.invalidated=function(){for(var t=arguments,e=t.length,n=new Array(e>0?e:0);e>0;)n[e-1]=t[--e];let i=this._guard||[];this._guard=n;for(let t=0,e=r(n).length;t<e;t++)if(n[t]!=i[t])return this._version++,!0;return!1},t.prototype.drawClips=function(t,e){var n;e=this.canvas().dom().getContext("2d");let i=this.ppms();var o=this.option("clipColors").slice(),s=0;let a=this.startOffset(),u=this.val2offset(this.startValue()+this._vw/i),p=this.startTime(),c=p+this._vw/i,h=this.isOffsetBased()?a:p,l=this.isOffsetBased()?u:c,d=Math.round(this._vh*this.option("waveAnchorY",.5)*this.dpr()),f=.5*this.vh()/128*this.dpr()*-1*this.yScale(),y=[];e.save();for(let i,a=0,u=r(t),p=u.length;a<p;a++){i=u[a];let t=this.isOffsetBased()?i.o0:i.t0,r=this.isOffsetBased()?i.o1:i.t1,p=this.time2px(i.t0),c=this.time2px(i.t1),m=this.offset2px(i.o0),b=this.offset2px(i.o1),w=this.isOffsetBased()?m:p,x=this.isOffsetBased()?b:c,S=(n=i.source).COLOR||(n.COLOR=o[s++%o.length]),T=i.source._wave,k=i.cue;if(x-w==0)continue;if(w>this._vw||x<0)continue;let A=i.skip||0,E=A,C=r-t;if(this.isOffsetBased()&&i.realSkip&&(A=E=i.realSkip),this.pxps()<10){let t=Math.ceil(44100/(this.pxps()*this.dpr()));T=T._lowres||(T._lowres=T.resample({scale:t}))}if(h>t){let e=h-t;A+=e,C-=e}r>l&&(C-=r-l);let D=Math.max(T.at_time(A/1e3),0),O=Math.min(T.at_time((A+C)/1e3),T.offset_end),M=T.seconds_per_pixel;e.save(),e.fillStyle=i.cue?this.option("cutColor"):S,e.beginPath(),this.isOffsetBased()?e.translate(this.offset2px(t-E)*this.dpr(),d):e.translate(this.time2px(t-E)*this.dpr(),d),e.scale(this.dpr()*M*this.pxps(),f);let L=D;for(;L<O;)e.lineTo(L,T.at(2*L)),L++;for(;L>D;)e.lineTo(--L,T.at(2*L+1));if(e.closePath(),e.fill(),e.restore(),k&&-1==y.indexOf(k)){y.push(k),e.save();let t=w,n=this.isOffsetBased()?this.offset2px(k.o1):this.time2px(k.t1),i=this.option("minimap")?10:.3*this._vh;e.strokeStyle=this.option("cutColor"),e.lineWidth=this.option("minimap")?1/this.dpr():1,e.translate(0,d),e.scale(this.dpr(),this.dpr()),e.beginPath();let r=g,o=7;0==k.duration?(e.moveTo(t,-i),e.lineTo(n,i),e.moveTo(t,i),e.lineTo(n,-i),r=_):k.duration<k.o1-k.o0&&(r=v),e.strokeRect(t,-i,n-t,2*i),this.drawIcon(e,t+.5*(n-t),-i,o*this.dpr(),r),e.stroke(),e.restore()}}return this},t.prototype.drawIcon=function(t,e,n,i,r,o){if(!this.option("minimap"))return t.save(),t.font="normal "+i+"px 'scrimbacon'",t.textAlign="center",t.textBaseline="middle",t.fillText(r,e,n),t.restore()},t.prototype.ctx=function(){return this._ctx||(this._ctx=this.canvas().dom().getContext("2d"))},t.prototype.draw=async function(){var t=this.pxps();let e=this._vw=this.dom().offsetWidth,n=this._vh=this.dom().offsetHeight,i=!this.options().renderCollapsed;if(null==t&&this.endTime()&&(t=e/(this.endTime()/1e3),this._pxps=t),!this.invalidated(this.startOffset(),this.startTime(),t,this.cues().version(),e,n,i)||!e)return this;let o=Date.now();this._t=o;var s=++this._draws;for(let t,e=0,n=r(this.cues().audio()),i=n.length;e<i;e++)t=n[e],t._wave=await p.instance().waveformForId(t[3]);if(s!=this._draws)return;var a=this.ctx();this.canvas().dom().width=e*this.dpr(),this.canvas().dom().height=n*this.dpr();let u=this.cues().audioclips(0,0,!0);return this.drawTickLines(a),this.drawClips(u),this.drawActions(a),this._wheelStartTime=null,this},t.prototype.drawTickLines=function(t){let e=this.pxps(),n=0,i=0,r=0,o=this.option("tickMinSpacing"),s=this.option("tockMinSpacing"),a=this.option("tickFontSize");for(let t,n=0,a=[.05,.1,.25,.5,1,5,10,15,30,60,120,300,600,1200],u=a.length;n<u;n++)if(t=a[n],e*t>o&&(i||(i=t)),e*t>s&&t>=1){r||(r=t);break}t.strokeStyle="#DDDDDD",t.fillStyle="#CCCCCC",t.beginPath(),t.font=a*this.dpr()+"px sans-serif",t.textAlign="center",t.textBaseline="bottom";t.measureText("0:00").width;let u=0,p=(this.ppms(),this.dpr()),c=[];this.startOffset();if(this.option("renderTimeTicks"))for(;u<this._vw;)u=this.time2px(n),u>=0&&c.push([u,0,m(n),n]),n+=1e3*i;let h=Math.round(.5*a)*p,l=this._vw*p;for(let e,n=0,i=c.length;n<i;n++){e=c[n];let i=e[0]*p,o=e[1]*this._vh*p,s=e[2],a=e[3]%(1e3*r)==0,u=a?2*h:5*h;i>=l||(t.beginPath(),t.strokeStyle=a?"#D2D2D2":"#e0e0e0",t.lineWidth=1,t.moveTo(i,u),t.lineTo(i,this._vh*p-u),t.stroke(),a&&(t.textBaseline=o?"bottom":"top",t.textAlign="left",t.fillText(s,i+4*p,o?o-h:u-2*p)))}return this},t.prototype.getActions=function(){let t=this.timeline().branch().stream(),e=t.actionAtOffset(this.startOffset()),n=this.option("minimap")?t.duration():this.val2offset(this.startValue()+this._vw/this.ppms()),i=this._lines={},r=(this.option("minimap")?3:2)/this.ppms();for(;e&&e.timeOffset()<n;){let t=e.timeOffset(),n=e._type,o=i[n]||(i[n]=[]),s=o[o.length-1];s instanceof Array&&t-s[1]<r?s[1]=t:("number"==typeof s||s instanceof Number)&&t-s<r?o[o.length-1]=[s,t]:o.push(t),e=e._next}return i},t.prototype.drawActionLayer=function(t,e,n,i,o){if(n instanceof Array){for(let s=0,a=r(n),u=a.length;s<u;s++)this.drawActionLayer(t,e,a[s],i,o);return}let s=this.option("actionsHeight")||2,a=e[n];if(!a)return;let u=Math.max(10*this.ppms(),s/2)*this.dpr(),p=(this._vh-2*this.option("tickFontSize")-o*(1.5*s))*this.dpr();t.strokeStyle=i,t.lineWidth=s*this.dpr(),t.lineCap="round",t.beginPath();let c=0,h=0;for(let e,n=0,i=r(a),o=i.length;n<o;n++){e=i[n];a[n+1];e instanceof Array?(c=this.offset2px(e[0])*this.dpr(),h=this.offset2px(e[1])*this.dpr()):(c=this.offset2px(e)*this.dpr(),h=c+u),t.moveTo(c,p),t.lineTo(h,p)}t.stroke()},t.prototype.drawLines=function(t,e,n){void 0===n&&(n="#ff2c42"),t.strokeStyle=n,t.lineWidth=1*this.dpr(),t.lineCap="butt",t.setLineDash([4*this.dpr(),2*this.dpr()]),t.beginPath();for(let n=0,i=r(e),o=i.length;n<o;n++){let e=this.absTimeToX(i[n])*this.dpr();t.moveTo(e,0),t.lineTo(e,this._vh*this.dpr())}return t.stroke(),this},t.prototype.drawActions=function(t){var e=this.getActions();return t.save(),this.drawActionLayer(t,e,l.LCSELECTION,"#e0929e",0),this.drawActionLayer(t,e,[l.LCINSERT,l.LCDELETE,l.LCEDIT],"#91bba0",0),this.drawActionLayer(t,e,l.POINTER_UPDATE,"#C3C3C3",1),this.drawActionLayer(t,e,l.LAYOUT,"#FEC2BF",1),this.drawActionLayer(t,e,[l.PAGE_LOAD,l.DOM_MUTATE,l.PAGE_LOG],"#66CCFF",2),t.restore(),this},t.prototype.ontouchstart=function(t){let e=c.options(t,{data:this.data(),startValue:this.startValue(),startTime:this.startTime(),startOffset:this.startOffset()}),n=t.button(),i=t.event().altKey,r=t.event().metaKey,o=t.event().shiftKey,s=e.type;return s||(o&&i?s="mark":2==n||i?s="move":o?(s="mark",e.seek=!0):s="seek"),this.log("ontouchstart",n,i,r,o,s),e.type=s,c.wrap(t,e)},t.prototype.ontouchend=function(t){return t.dr()<10&&this.trigger("segsel",null),this.trigger("autosave")},t.prototype.oncontextmenu=function(t){return t.prevent().stop()},t.prototype.onmoveupdate=function(t){let e=t.options().startValue-t.dx()/this.ppms()*2;return this.trigger("showrange",{start:this.val2offset(e)}),this},t.prototype.onmoveend=function(t){return this},t.prototype.onseekstart=function(t){return this.timeline().setState("seeking"),this.render()},t.prototype.onseekupdate=function(t){return this.trigger("seek",{offset:this.val2offset(this.screenx2val(t.x()),1)})},t.prototype.onseekend=function(t){var e;return this.timeline().setState(e=this.timeline().playState()),e},t.prototype.onsegmoveinit=function(t){t.touch().capture();let e=t.handler().data();return this.trigger("segsel",e)},t.prototype.onsegmovestart=function(t){let e=t.handler().data(),n=t.options().start?e.start():e.end();return t._adjustOffset=this.xToTimeOffset(t.x(),1)-n},t.prototype.onsegmoveupdate=function(t){var e;return(e=t.handler().data())&&(t.options().start?e.setStart(this.xToTimeOffset(t.x(),1)-t._adjustOffset):e.setEnd(this.xToTimeOffset(t.x(),1)-t._adjustOffset),this.render()),this},t.prototype.onsegmoveend=function(t){let e=t.handler().data();return 0==e.span()&&(this.cues().removeCue(e),this.render()),this},t.prototype.onmarkstart=function(t){let e=this.xToTimeOffset(t.x(),1),n=e;return t.options().seek&&(n=this.timeline().currentOffset()),this.setMarkedRange(t._seg=new h([0,n,e-n])),t._seg._pin=n,this.trigger("segsel",t._seg),this.render()},t.prototype.onmarkupdate=function(t){let e=this.xToTimeOffset(t.x(),1),n=t._seg._pin;return e>n?(t._seg.setStart(n),t._seg.setEnd(e)):(t._seg.setStart(e),t._seg.setEnd(n)),t.options().seek&&this.trigger("seek",{offset:e}),this.render()},t.prototype.onmarkend=function(t){var e,n=this;n.log("onmarkend");let i=t._seg,s=i.start(),a=i.span();if(!n._markedView)return;let p=null;for(let t,e=0,o=r(n.cues().cues()),a=o.length;e<a;e++)if(t=o[e],s>=t.start()&&t.end()>=i.end()){p=t;break}return n._markedView.uxa().open((e=e=u(f)).on$(0,["uxahide",function(t){return n.setMarkedRange(null),null}],n).setContent(p?(e.$.A||u(y,e.$,"A",e).setLabel("Set speedup audio")).on$(0,["activate",["setCueAudio",p,s,a]],n).end():o.static([(e.$.B||u(y,e.$,"B",e).setLabel("Cut")).setAction(["segcreate",0,s,a,0]).end(),(e.$.C||u(y,e.$,"C",e).setLabel("Silence")).setAction(["segcreate",0,s,a,-1]).end(),(e.$.D||u(y,e.$,"D",e).setLabel("Speedup")).setAction(["segcreate",0,s,a,500]).end(),(e.$.E||u(y,e.$,"E",e).setLabel("Loop playback")).setAction(["loopcreate",2,s,a]).end()],2,1),3).end())},t.prototype.setCueAudio=function(t,e,n){return this.log("setCueAudio",t,e,n),t.duration()>0&&(t.setDuration(n),t.setOptions([e,n])),this},t.prototype.onsegcreate=function(t,e){t.halt(),this.log("segcreate",e);let n=this.cues().addCue(e);return this.trigger("segsel",n),this.setMarkedRange(null),this.render()},t.prototype.onloopcreate=function(t,e){return this.timeline().setLoopSegment(new h(e,this.timeline().cues())),this.setMarkedRange(null),this.render()},t.prototype.tick=function(){return this.draw()},t.prototype.mount=function(){return this._mounted=!0,TC=this,this.render(),this},t.prototype.render=function(){var t=this,e=this.$;if(!t._mounted)return;t.draw();let n=t.startOffset(),i=(t.startTime(),t._vw,t.ppms(),t.val2offset(t.startValue()+t._vw/t.ppms()));return t.$open(0).flagIf("collapsed",!t.isOffsetBased()).setChildren([t.canvas(),function(e){var o=e.$iter();for(let s,a=0,p=r(t.timeline().cues().cues()),c=p.length;a<c;a++)s=p[a],s.end()<n||s.start()>i||o.push((e[a]||u(x,e,a)).setData(s).setTimeline(t).end());return o}(e[0]||s(e,0)),t.timeline().loopSegment()?(e[1]||u(x,e,1,t).flag("loop")).bindData(t.timeline(),"loopSegment",[]).setTimeline(t).end():void 0,t.markedRange()?(t._markedView=t._markedView||u(x,t).flag("markedView").flag("sel")).bindData(t,"markedRange",[]).setTimeline(t).end():void 0,(t._playhead=t._playhead||u(S,t).flag("playhead")).setLeft(b(t.offset2px(t.currentOffset()),2)).end()],1).synced(),t}}));e.TimelineCanvas=T;var k=a.defineTag("TimelineRegionCanvas",T,(function(t){t.prototype.onwheel=function(t){let e=t.event().shiftKey,n=(t.event().altKey,t.event().deltaX);t.event().deltaY;if(null==this._wheelStartTime&&(this._wheelStartTime=this.startValue()),t.prevent(),t.silence(),e){let e=t.event().clientX,i=Math.max(10,this.pxps()+n),r=this.dom().getBoundingClientRect(),o=e-r.left,s=(r.width,this.val2offset(this.screenx2val(e)));this.xToTimeOffset(e);this.trigger("zoom",{scale:i}),this.setPxps(this.parent().pxps()),this.setCurrentOffset(this.parent().viewRange().start());let a=this.offset2px(s)-o,u=this.px2val(a);return this.parent().viewRange().moveTo(this.val2offset(u),0)}return this._wheelStartTime+=t.event().deltaX/this.ppms(),this._wheelStartTime=Math.max(this._wheelStartTime,-100/this.ppms()),this.trigger("showrange",{start:this.val2offset(Math.round(this._wheelStartTime))})}}));e.TimelineRegionCanvas=k;var A=a.defineTag("TimelineOverview",T,(function(t){t.prototype.viewRange=function(t){return this._viewRange},t.prototype.setViewRange=function(t){return this._viewRange=t,this},t.prototype.draw=function(){if(i(c.Active)>0)return;this.setStartOffset(0);let e=this.offset2val(this.timeline().endOffset()),n=4;return this.setPxps((this.dom().offsetWidth-2*n)/(e/1e3)),this.setStartOffset(n/this.ppms()*-1),t.prototype.__super__.draw.apply(this,arguments)},t.prototype.onwheel=function(){return this},t.prototype.getActions=function(){return this._lines?this._lines:t.prototype.__super__.getActions.apply(this,arguments)},t.prototype.canvas=function(){this.$$||(this.$$={});return(this._canvas=this._canvas||u("canvas",this).flag("canvas").dataset("gesture","seek")).end()},t.prototype.render=function(){var t=this.$;if(this._mounted)return this.draw(),this.$open(0).setChildren([t[0]||u(w,t,0,this).flag("zoomed").flag("bg"),this.canvas(),t[1]||u(w,t,1,this).flag("zoomed").flag("front"),this._playhead=this._playhead||u(S,this).flag("playhead")],1).synced((t[0].bindData(this,"viewRange",[]).setTimeline(this).end(),t[1].bindData(this,"viewRange",[]).setTimeline(this).end(),this._playhead.setLeft(b(this.offset2px(this.currentOffset()),2)).end(),!0))},t.prototype.showCues=function(){return!1},t.prototype.yScale=function(){return.6}}));e.TimelineOverview=A},function(t,e,n){"use strict";var i=n(156),r=n(157);function o(t,e){this.adapter=e.fromResponseData(t),this.segments={},this.points={},this.offset(0,this.adapter.length)}o.create=function(t){var e=null,n=null;if(t&&"object"==typeof t&&("responseText"in t||"response"in t)&&(n="responseType"in t?t.response:t.responseText||t.response),Object.keys(o.adapters).some((function(i){if(o.adapters[i].isCompatible(n||t))return e=o.adapters[i],!0})),null===e)throw new TypeError("Could not detect a WaveformData adapter from the input.");return new o(n||t,e)},o.prototype={offset:function(t,e){var n=this.adapter.length;if(e<0)throw new RangeError("End point must be non-negative ["+Number(e)+" < 0]");if(e<t)throw new RangeError("End point must not be before the start point ["+Number(e)+" < "+Number(t)+"]");if(t<0)throw new RangeError("Start point must be non-negative ["+Number(t)+" < 0]");if(t>=n)throw new RangeError("Start point must be within range ["+Number(t)+" >= "+n+"]");e>n&&(e=n),this.offset_start=t,this.offset_end=e,this.offset_length=e-t},set_segment:function(t,e,n){return null!=n&&0!==n.length||(n="default"),this.segments[n]=new i(this,t,e),this.segments[n]},set_point:function(t,e){return null!=e&&0!==e.length||(e="default"),this.points[e]=new r(this,t),this.points[e]},remove_point:function(t){this.points[t]&&delete this.points[t]},resample:function(t){"number"==typeof t&&(t={width:t}),t.input_index="number"==typeof t.input_index?t.input_index:null,t.output_index="number"==typeof t.output_index?t.output_index:null,t.scale="number"==typeof t.scale?t.scale:null,t.width="number"==typeof t.width?t.width:null;var e=Boolean(t.input_index)||Boolean(t.output_index);if(null!=t.input_index&&t.input_index<0)throw new RangeError("options.input_index should be a positive integer value. ["+t.input_index+"]");if(null!=t.output_index&&t.output_index<0)throw new RangeError("options.output_index should be a positive integer value. ["+t.output_index+"]");if(null!=t.width&&t.width<=0)throw new RangeError("options.width should be a strictly positive integer value. ["+t.width+"]");if(null!=t.scale&&t.scale<=0)throw new RangeError("options.scale should be a strictly positive integer value. ["+t.scale+"]");if(!t.scale&&!t.width)throw new RangeError("You should provide either a resampling scale or a width in pixel the data should fit in.");var n=["width","scale","output_index","input_index"].reduce((function(e,n){return e+(null===t[n]?0:1)}),0);if(e&&4!==n)throw new Error("Some partial resampling options are missing. You provided "+n+" of them over 4.");var i,r,s,a,u=[],p=t.scale||Math.floor(this.duration*this.adapter.sample_rate/t.width),c=this.adapter.scale,h=this.adapter.length,l=t.input_index||0,d=t.output_index||0,f=h?this.min_sample(l):0,y=h?this.max_sample(l):0;if(p<c)throw new Error("Zoom level "+p+" too low, minimum: "+c);function m(t){return Math.floor(t*p)}function g(t,e){u.push(t,e)}for(;l<h;){for(;Math.floor(m(d)/c)<=l;)d&&g(f,y),a=l,(i=m(++d))!==m(d-1)&&(f=127,y=-128);for(i=m(d),(r=Math.floor(i/c))>h&&(r=h);l<r;)(s=this.min_sample(l))<f&&(f=s),(s=this.max_sample(l))>y&&(y=s),l++;if(e&&u.length/2>=t.width)break}return e?u.length/2>t.width&&l!==a&&g(f,y):l!==a&&g(f,y),new o({version:this.adapter.version,samples_per_pixel:p,length:u.length/2,data:u,sample_rate:this.adapter.sample_rate},o.adapters.object)},get min(){return this.offsetValues(this.offset_start,this.offset_length,0)},get max(){return this.offsetValues(this.offset_start,this.offset_length,1)},offsetValues:function(t,e,n){var i=this.adapter,r=[];n+=2*t;for(var o=0;o<e;o++)r.push(i.at(2*o+n));return r},get duration(){return this.adapter.length*this.adapter.scale/this.adapter.sample_rate},get offset_duration(){return this.offset_length*this.adapter.scale/this.adapter.sample_rate},get pixels_per_second(){return this.adapter.sample_rate/this.adapter.scale},get seconds_per_pixel(){return this.adapter.scale/this.adapter.sample_rate},at:function(t){return this.adapter.at(t)},at_time:function(t){return Math.floor(t*this.adapter.sample_rate/this.adapter.scale)},time:function(t){return t*this.adapter.scale/this.adapter.sample_rate},in_offset:function(t){return t>=this.offset_start&&t<this.offset_end},min_sample:function(t){return this.adapter.at(2*t)},max_sample:function(t){return this.adapter.at(2*t+1)}},o.adapters={},o.adapter=function(t){this.data=t},t.exports=o},function(t,e,n){"use strict";function i(t,e,n){this.context=t,this.start=e,this.end=n}i.prototype={get offset_start(){return this.start<this.context.offset_start&&this.end>this.context.offset_start?this.context.offset_start:this.start>=this.context.offset_start&&this.start<this.context.offset_end?this.start:null},get offset_end(){return this.end>this.context.offset_start&&this.end<=this.context.offset_end?this.end:this.end>this.context.offset_end&&this.start<this.context.offset_end?this.context.offset_end:null},get offset_length(){return this.offset_end-this.offset_start},get length(){return this.end-this.start},get visible(){return this.context.in_offset(this.start)||this.context.in_offset(this.end)||this.context.offset_start>this.start&&this.context.offset_start<this.end},get min(){return this.visible?this.context.offsetValues(this.offset_start,this.offset_length,0):[]},get max(){return this.visible?this.context.offsetValues(this.offset_start,this.offset_length,1):[]}},t.exports=i},function(t,e,n){"use strict";function i(t,e){this.context=t,this.timeStamp=e}i.prototype={get visible(){return this.context.in_offset(this.timeStamp)}},t.exports=i},function(t,e,n){"use strict";t.exports={arraybuffer:n(159),object:n(160)}},function(t,e,n){"use strict";function i(t){this.data=t}i.isCompatible=function(t){return t&&"object"==typeof t&&"byteLength"in t},i.fromResponseData=function(t){return new i(new DataView(t))},i.prototype={get version(){return this.data.getInt32(0,!0)},get is_8_bit(){return Boolean(this.data.getUint32(4,!0))},get is_16_bit(){return!this.is_8_bit},get sample_rate(){return this.data.getInt32(8,!0)},get scale(){return this.data.getInt32(12,!0)},get length(){return this.data.getUint32(16,!0)},at:function(t){return this.data.getInt8(20+t)}},t.exports=i},function(t,e,n){"use strict";function i(t){this.data=t}i.isCompatible=function(t){return t&&("object"==typeof t&&"sample_rate"in t||"string"==typeof t&&"sample_rate"in JSON.parse(t))},i.fromResponseData=function(t){return new i("string"==typeof t?JSON.parse(t):t)},i.prototype={get version(){return this.data.version||1},get is_8_bit(){return 8===this.data.bits},get is_16_bit(){return!this.is_8_bit},get sample_rate(){return this.data.sample_rate},get scale(){return this.data.samples_per_pixel},get length(){return this.data.length},at:function(t){return this.data.data[t]}},t.exports=i},function(t,e,n){"use strict";var i=n(162);t.exports=i},function(t,e,n){"use strict";var i=n(66);t.exports=function(t,e,n,r){var o=512,s=1;if(!(t instanceof(window.AudioContext||window.webkitAudioContext)))throw new TypeError("First argument should be an AudioContext instance");if("function"==typeof n?(r=n,n={}):n=n||{},n.scale=n.scale||o,n.amplitude_scale=n.amplitude_scale||s,n.hasOwnProperty("scale_adjuster"))throw new Error("Please rename the 'scale_adjuster' option to 'amplitude_scale'");return t.decodeAudioData(e,i(n,r),(function(t){t||(t=new DOMException("EncodingError")),r(t)}))}},function(t,e,n){(function(e){var n=!!(e===e.window&&e.URL&&e.Blob&&e.Worker);function i(t,i){var r,o=this;if(i=i||{},n)return r=t.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],new e.Worker(e.URL.createObjectURL(new e.Blob([r],{type:"text/javascript"})));this.self=i,this.self.postMessage=function(t){setTimeout((function(){o.onmessage({data:t})}),0)},setTimeout(t.bind(i,i),0)}i.prototype.postMessage=function(t){var e=this;setTimeout((function(){e.self.onmessage({data:t})}),0)},t.exports=i}).call(this,n(12))},function(t,e,n){var i=n(0),r=(i.createTagList,i.createTagMap),o=i.createElementFactory(),s=i.createTagScope(),a=n(2),u=a.Dialog,p=a.SelectField,c=a.Button,h=n(70).MediaRecording,l=n(165).MediaRecordingStats,d=n(4),f=[["noiseSuppression","Noise Suppression"],["echoCancellation","Echo Cancellation"],["autoGainControl","Auto-Gain"],["typingNoiseDetection","Typing Noise Detection"]],y=null,m=s.defineTag("RecDialog",u,(function(t){t.prototype.sample=function(t){return this._sample},t.prototype.setSample=function(t){return this._sample=t,this},t.prototype.branch=function(){return this.data()},t.prototype.space=function(){return this.branch().space()},t.prototype.togglePrev=function(t){return t.target().prev().setChecked(!t.target().prev().checked()),t.halt()},t.prototype.isSupported=function(){return this.space().audio().canRecordAudio()},t.prototype.devices=function(){var t;return(t=this.space().audio().devices()).OPTIONS||(t.OPTIONS=this.space().audio().devices().map((function(t,e){return[t.deviceId,t.label||"Mic #"+(e+1)]})))},t.prototype.supportedConstraints=function(){return this._supportedConstraints||(this._supportedConstraints=window.navigator.mediaDevices.getSupportedConstraints())},t.prototype.constraints=function(){var t=this.supportedConstraints(),e=this.formData(),n={};n.deviceId=e.audioDeviceId,n.channelCount=1;for(let i=0,r=f.length;i<r;i++){let r=f[i][0];t[r]&&(n[r]=!!e[r])}return t.sampleRate&&(n.sampleRate=48e3),this.api().ua().isChrome()&&(n.googAutoGainControl=!1),n},t.prototype.startSample=function(){var t=this;return t.setSample(new h({constraints:t.constraints(),debug:t.formData().debug})),t.sample().start().then((function(){return!0})).catch((function(e){return t.log("sample could not start!!",e),t.uxa().flash(e.message),t.setSample(null),null})),t.schedule({raf:!0}),t},t.prototype.stopSample=function(){return this.sample().stop()},t.prototype.body=function(){this.$$||(this.$$={});var t,e,n,s=this;return(t=s._body=s._body||(t=o("div",s)).flag("body")).setContent([t.$.A||o("h2",t.$,"A",t).flag("red").setText("Record"),t.$.B||o("p",t.$,"B",t).flag("dim").setText('Choose a microphone and click "CONFIRM" to start the recording.'),t.$.C||o("p",t.$,"C",t).flag("info").setText("If you make a mistake during your recording, don't worry. You can cut away, silence or speed up parts of your recording afterward. You can also redo the entire recording if you want."),s.isSupported()?(e=t.$.D||(e=o("div",t.$,"D",t)).flag("mic")).setContent([(s._deviceSelect=s._deviceSelect||o(p,e).flag("deviceSelect").flag("device").setLabel("Select microphone").setName("audioDeviceId")).setOptions(s.devices()).end(),(t.$.E||o("div",t.$,"E",e).flag("testing")).setContent([function(t){var e,n=t.$iter();for(let i,r=0,a=f.length;r<a;r++)i=f[r],s.supportedConstraints()[i[0]]&&n.push((e=t[r]||(e=o("label",t,r)).setContent([o("input",e.$,"A",e).setType("checkbox").setChecked(!0),o("span",e.$,"B",e)],2)).end((e.$.A.setName(i[0]).end(),e.$.B.setContent(i[1],3),!0)));return n}(t.$.F||r(t.$,"F",t.$.E)),(t.$.G||o("label",t.$,"G","E").setContent([o("input",t.$,"H","G").setType("checkbox").setName("debug").setChecked(!1),o("span",t.$,"I","G").setText("debug")],2)).end((t.$.H.end(),!0)),!s.sample()||s.sample().audio()?(t.$.J||o(c,t.$,"J","E").flag("sm").flag("primary").flag("testButton").on$(0,["click","startSample"],s).setLabel("Test")).end():(t.$.K||o(c,t.$,"K","E").flag("sm").flag("primary").flag("testButton").on$(0,["click","stopSample"],s).setLabel("Stop")).end()],1),s.sample()?i.static([(t.$.L||o(l,t.$,"L",e).flag("sample")).bindData(s,"sample",[]).end(),s.sample().error()?(t.$.M||o("div",t.$,"M",e).flag("sample").flag("error")).setContent(s.sample().error().message||s.sample().error(),3):void 0,s.sample().audio()?i.getTagForDom(s.sample().audio()):void 0],1,1):void 0,s._endOffset!=s._currOffset?(t.$.N||o("div",t.$,"N",e).flag("Alert").flag("danger").flag("large").flag("rerecord").setContent(n=t.$.O||(n=o("label",t.$,"O","N")).setContent([s._recFromOffset=s._recFromOffset||o("input",n).flag("recFromOffset").setType("checkbox"),o("span",t.$,"P",n)],2),2)).end((s._recFromOffset.end(),t.$.P.setNestedAttr("uxa","md","Re-record from current time *("+d.msToStr(s._currTime,3)+")*").end(),!0)):void 0],1):t.$.Q||o("div",t.$,"Q",t).flag("Alert").flag("danger").flag("large").setText("Recording / streaming is currently only available from Chrome and Firefox.")],1)},t.prototype.onchange=function(t){return this.log("onchange"),this._recFromOffset&&this._recFromOffset.checked()?this.space().timeline().seek(this._currOffset):this.space().timeline().seekToEnd()},t.prototype.setup=function(){return this._currOffset=this.space().timeline().currentOffset(),this._currTime=this.space().timeline().offsetToTime(this._currOffset),this._endOffset=this.space().timeline().endOffset(),this.log("initial offset",this._currOffset),t.prototype.__super__.setup.apply(this,arguments)},t.prototype.mount=function(){return this._recFromOffset&&(this._recFromOffset.dom().checked=!0),this.schedule({events:!0,interval:1e3}),y&&this._deviceSelect.setValue(y),this},t.prototype.unmount=function(){return this.unschedule()},t.prototype.onuxasubmit=function(t){var e=this;e.log("onsubmit",e.formData()),e.sample()&&e.sample().stop();var n=e.formData(),i={mic:e.constraints(),pointer:!0,live:!1};return y=n.audioDeviceId,e._recFromOffset&&e._recFromOffset.checked()&&(i.offset=e._currOffset,!window.confirm("Are you sure you want to restart recording from "+d.msToStr(e._currTime)+"? This cannot be undone"))?t.prevent().stop():e.uxa().queue().add(300,(function(){return e.branch().record(i)}))}}));e.RecDialog=m},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(4),a=o.defineTag("MediaRecordingStats",(function(t){t.prototype.s=function(t){return s.msToStr(t,3)+"s"},t.prototype.render=function(){var t=this.$;return this.$open(0).setChildren([(t[0]||r("span",t,0,this).flag("state")).setContent(this.data().state(),3),(t[1]||r("span",t,1,this).flag("mime")).setContent(this.data().mimeType(),3),(t[2]||r("span",t,2,this).flag("size")).setContent(Math.round(this.data().size()/1e3)+"kb",3),this.data()._bufferDuration?(t[3]||r("span",t,3,this).flag("dur").flag("timecode")).setContent([this.s(this.data()._duration),t[4]||r("b",t,4,3).flag("diff")],1).end((t[4].setContent(Math.round(this.data()._duration-this.data()._calcDuration)+"ms",3),!0)):(t[5]||r("span",t,5,this).flag("dur")).setContent(this.s(this.data().duration()),3)],1).synced()}}));e.MediaRecordingStats=a},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(2),a=s.Dialog,u=s.TextField,p=s.TextArea,c=(s.Button,o.defineTag("SaveDialog",a,(function(t){t.prototype.branch=function(){return this.data()},t.prototype.model=function(){return this.branch().model()},t.prototype.toggleBusy=function(){return this.toggleFlag("busy")},t.prototype.loadFormData=function(){return this.applyFormData(this.model())},t.prototype.submitLabel=function(){return this.model().isLocal()?"Save note":"Save"},t.prototype.body=function(){let t;this.$$||(this.$$={});return(t=this._body=this._body||(t=r("div",this)).flag("body")).setContent(this.model().isLocal()?i.static([(this._typefield=this._typefield||r("input",t).flag("typefield").setType("hidden").setName("type").setValue("note",1)).end(),(t.$.A||r(u,t.$,"A",t).flag("mb-md").setType("text").setName("title").setLabel("Title").setRequired(!0).setPlaceholder("Untitled note")).end()],2,1):i.static([(t.$.B||r(u,t.$,"B",t).setType("text").setName("title").setLabel("Title").setRequired(!0).setPlaceholder("Untitled fork")).end(),(t.$.C||r(p,t.$,"C",t).flag("mb-md").setName("description").setLabel("Description").setDesc("Short description (markdown supported)")).end()],2,2),3)},t.prototype.onuxasubmit=function(t,e){var n=this;return n.uxa().queue().add((async function(){n.branch().isLocal();return await n.branch().save(e)}))}})));e.SaveDialog=c},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(2),a=s.Dialog,u=s.TextField,p={html:"<html>\n    <head></head>\n    <body>\n        \n    </body>\n</html>",css:"body { }",imba:"# FILENAME"},c=o.defineTag("NewFileDialog",a,(function(t){t.prototype.space=function(){return this.data()},t.prototype.onuxasubmit=function(t){var e=this;return e.uxa().queue().add(200,(function(){return new Promise((function(t,n){var i=e.formData().name;if(!i||e.space().files().any((function(t){return t.name()==i})))return n("File already exists");var r=i.split(".").pop(),o=(p[r]||"").replace("FILENAME",i),s={type:"file",name:i,body:o},a=e.space().createWidget(s).widget();return console.log("returned file",a),e.space().agent().setFile(a),e.space().agent().setFocus(a),t(a)}))}))},t.prototype.body=function(){let t;this.$$||(this.$$={});return(t=this._body=this._body||(t=r("div",this)).flag("body").setContent([r("h2",t.$,"A",t).setText("New file"),r(u,t.$,"B",t).flag("autofocus").setName("name").setLabel("Name your new file").setType("text").setPlaceholder("index.js")],2)).end((t.$.B.end(),!0))}}));e.NewFileDialog=c},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(2),a=s.Dialog,u=(s.TextField,s.TextArea,s.Button),p=o.defineTag("CourseJoinDialog",a,(function(t){t.prototype.cast=function(t){return this._cast},t.prototype.setCast=function(t){return this._cast=t,this},t.prototype.__dismissable={default:!0,name:"dismissable"},t.prototype.dismissable=function(t){return this._dismissable},t.prototype.setDismissable=function(t){return this._dismissable=t,this},t.prototype._dismissable=!0,t.prototype.submitLabel=function(){return this.isBootcamp()?"Visit course page to buy":"Enroll for free"},t.prototype.isBootcamp=function(){return"bootcamp"==this.data().type},t.prototype.body=function(){let t;this.$$||(this.$$={});return(t=this._body=this._body||(t=r("div",this)).flag("body")).setContent(this.cast()?this.isBootcamp()?(t.$.A||r("p",t.$,"A",t)).setText('To watch this course you need to purchase the "'+this.data().title+'" from the course page.'):(t.$.B||r("p",t.$,"B",t)).setText('To watch this tutorial you need to enroll in the "'+this.data().title+'" course.'):(t.$.C||r("p",t.$,"C",t)).setText('Are you sure you want to enroll in the "'+this.data().title+'" course?'),3)},t.prototype.footer=function(){let t;this.$$||(this.$$={});return(t=this._footer=this._footer||(t=r("footer",this)).flag("footer").flag("flat")).setContent([this.dismissable()?(t.$.A||r(u,t.$,"A",t).setType("button").on$(0,["tap","tapDismiss"],this)).setLabel(this.cancelLabel()).end():void 0,(t.$.B||r(u,t.$,"B",t).flag("primary").setType("submit")).setLabel(this.submitLabel()).end()],1)},t.prototype.onuxahide=function(t){if(!this.dismissable()&&this.data()&&!this.data().membership(this.api().uid()))return t.halt().cancel()},t.prototype.onuxasubmit=function(t){var e=this;return t.stopPropagation(),e.isBootcamp()?e.uxa().queue().add(200,(function(){return window.location.href="/course/"+e.data().id})):e.uxa().queue().add(200,(function(){return new Promise((async function(t,n){var i=await e.api().tryLogin();return e.api().user()?e.api().rpc("groupJoin",[e.data().id,e.formData()],{models:!0}).then((function(r){return r&&e.api().analytics().courseEnrolled(e.data().id),r?t(i):n("Could not enroll")})):n("Not logged in")}))}))}}));e.CourseJoinDialog=p},function(t,e,n){var i=n(0),r=i.createTagList,o=i.createElementFactory(),s=i.createTagScope(),a=n(2),u=a.Dialog,p=a.TextField,c=s.defineTag("CastCreateDialog",u,(function(t){t.prototype.presets=function(t){return this._presets},t.prototype.setPresets=function(t){return this._presets=t,this},t.prototype.__preset={watch:"presetDidSet",name:"preset"},t.prototype.preset=function(t){return this._preset},t.prototype.setPreset=function(t){var e=this.preset();return t!=e&&(this._preset=t),t!=e&&this.presetDidSet&&this.presetDidSet(t,e,this.__preset),this},t.prototype.setup=function(){return t.prototype.__super__.setup.apply(this,arguments),this.fetch()},t.prototype.fetch=function(){var t=this;return console.log("received templates"),t.setPresets(t.api().db().spaces().sel({sort:["-featured_at","-created_at"]},(function(e){return"template"==e.type&&(e.featured_at||e.uid==t.api().uid())&&!e.archived_at}))),t.render(),t.api().isMod()||t.data().parent_id||t._parentId.dom().setCustomValidity("Please select template"),t.setFormData(t.data()),t.setPreset(t.presets().at(0)),t},t.prototype.onselectpreset=function(t,e){return this.setPreset(e),this.render()},t.prototype.presetDidSet=function(t,e){this._parentId.setValue(t?t.id:null),this._parentId.dom().setCustomValidity("");var n=this.formData().title;return t&&(!n||e&&e.title==n)&&this.setFormData({title:t.title}),this.render()},t.prototype.body=function(){this.$$||(this.$$={});var t,e=this;return(t=e._body=e._body||(t=o("div",e)).flag("body")).setContent([e.data().parent_id?t.$.A||o("h2",t.$,"A",t).setText("Create cast from current workspace"):void 0,(t.$.B||o("input",t.$,"B",t).flag("hidden").setType("text").setName("uid").setRequired(!0)).end(),e.data().parent_id?void 0:i.static([t.$.C||o("label",t.$,"C",t).flag("caption").setText("Select template"),(t.$.D||o("div",t.$,"D",t).flag("ss-select").setContent(t.$.E||o("select",t.$,"E","D").setName("parent_id"),2)).end((t.$.E.bindData(e,"preset",[]).setContent(function(t){var n;for(let i,r=0,s=(n=e.presets())?n.toArray?n.toArray():n:[],a=t.taglen=s.length;r<a;r++)i=s[r],(t[r]||o("option",t,r)).setValue(i,1).setContent(i.title,3).end();return t}(t.$.F||r(t.$,"F",t.$.E)),4).end(),!0))],2,1),(e._parentId=e._parentId||o("input",t).flag("parentId").flag("invisible").setType("text").setName("parent_id")).setRequired(!e.api().isMod()).end(),(t.$.G||o(p,t.$,"G",t).setType("text").setName("title").setRequired(!0).setLabel("Title").setPlaceholder("Untitled").setDesc("Please name your project").setAutocomplete("off")).end()],1)},t.prototype.onuxasubmit=function(t){var e=this,n=e.formData();return n.parent_id||(n.parent_id,delete n.parent_id,e.api().isMod())?(t.halt(),e.uxa().queue().add(300,(async function(){var t=await e.api().rpc("castCreate",[n,e.data().snapshot,e.data().stream],{models:!0});if(t)return e.data().parent_id?e.api().analytics().forkCreated(t.id,t.type):e.api().analytics().castCreated(t.id,t.type),App.router().go(t.url())}))):(t.prevent(),e.uxa().flash(new Error("Please select a template")))}}));e.CastCreateDialog=c},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(2),a=s.Dialog,u=(s.TextField,s.TextArea),p=o.defineTag("AskDialog",a,(function(t){t.prototype.offset=function(t){return this._offset},t.prototype.setOffset=function(t){return this._offset=t,this},t.prototype.anchor=function(t){return this._anchor},t.prototype.setAnchor=function(t){return this._anchor=t,this},t.prototype.space=function(){return this.data()},t.prototype.onuxasubmit=function(t){var e=this;return e.uxa().queue().add(200,(async function(){var t;await e.api().tryLogin();var n=e.formData();return("number"==typeof(t=e.offset())||t instanceof Number)&&(n.offset=e.offset()),e.anchor()&&(n.anchor=e.anchor()),n.uid=e.api().uid(),console.log("commenting",n),await e.api().rpc("castComment",[e.space().id(),n])}))},t.prototype.body=function(){let t;this.$$||(this.$$={});return(t=this._body=this._body||(t=r("div",this)).flag("body")).setContent([t.$.A||r("h2",t.$,"A",t).setText("Ask question"),(t.$.B||r(u,t.$,"B",t).flag("autofocus").setName("body").setLabel("Your question")).end(),this.offset()?(t.$.C||r("h3",t.$,"C",t)).setText("Question is linked to offset "+this.offset()):void 0,this.anchor()?(t.$.D||r("h3",t.$,"D",t)).setText("Question is linked to anchor "+JSON.stringify(this.anchor())):void 0],1)}}));e.AskDialog=p},function(t,e,n){var i=n(0),r=i.createTagScope(),o=i.createElementFactory(),s=n(72).ExplorerView,a=n(172).DependenciesPanel,u=(n(15).SidebarPanel,n(73).WidgetPanel,n(173).SlidesPanel,n(174)),p=(u.BranchesPanel,u.BranchEntry,n(38).SpaceMenu),c=n(2),h=(c.IconButton,c.Dialog,c.TextField,c.Button,n(25).LogEntry,n(14).ScrimbaGesture),l=n(69).CastDialog,d=r.defineTag("Resizer",(function(t){t.prototype.ontouchstart=function(t){return h.wrap(t)},t.prototype.onresizestart=function(t){return t._width=this.data().width()},t.prototype.onresizeupdate=function(t){var e;return this.data().setWidth(e=t.clamp(100,t._width+t.dx(),320,10)),e}})),f=r.defineTag("SidebarView",(function(t){t.prototype.setup=function(){var t;return this.setSref(t=this.data().id()),t},t.prototype.space=function(){return this.data().space()},t.prototype.showMenu=function(t){return t.uxa().open(o(p).flag("sm").bindData(this,"space",[]).end())},t.prototype.editMetadata=function(){return this.uxa().open(o(l).flag("modal").bindData(this.space(),"model",[]).setFormData(this.space().model()).end())},t.prototype.render=function(){var t=this.$;return this.$open(0).setChildren(t.$=t.$||[o(d,t,0,this).flag("resizer").flag("right").dataset("gesture","resize"),o("section",t,1,this).flag("main").setContent([o(s,t,2,1),o(a,t,3,1)],2)],2).synced((t[0].bindData(this,"data",[]).end(),t[2].bindData(this.space(),"explorerPanel",[]).setSpace(this.space()).end(),t[3].bindData(this.space(),"dependenciesPanel",[]).setSpace(this.space()).end(),!0))}}));e.SidebarView=f},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(0),o=r.createTagList,s=r.createElementFactory(),a=r.createTagScope(),u=n(2),p=(u.IconButton,u.Menu),c=u.MenuItem,h=n(15),l=h.SidebarPanel,d=h.SidebarEntry,f=n(39).readTextFile,y=a.defineTag("PackageEntry",d,(function(t){t.prototype.space=function(t){return this._space},t.prototype.setSpace=function(t){return this._space=t,this},t.prototype.prefix=function(t){return this._prefix},t.prototype.setPrefix=function(t){return this._prefix=t,this},t.prototype.name=function(){return this.data().match(/.[^@]*/)[0]},t.prototype.version=function(){return this.data().substr((t=this.name())&&(t.len instanceof Function?t.len():t.length)||0);var t},t.prototype.ondel=async function(t){if(t.halt(),await t.uxa().confirm("Are you sure you want to remove "+this.name()+"?"))return this.space().browser().removePackage(this.name())},t.prototype.onupgrade=async function(t){if(t.halt(),await t.uxa().confirm("Are you sure you want to upgrade "+this.name()+"?"))return this.space().browser().upgradePackage(this.name())},t.prototype.oncontextmenu=function(t){var e;return t.prevent().halt(),this._head.uxa().open((e=(e=s(p)).flag("dark").flag("narrow").setContent([s(c,e.$,"A",e).setIcon(">").setAction("upgrade").setLabel("Upgrade..."),s(c,e.$,"B",e).flag("neg").setIcon("x").setAction("del").setLabel("Remove module")],2)).end((e.$.A.end(),e.$.B.end(),!0)))},t.prototype.render=function(){var t,e=this.$;return this.$open(0).flag("Entry").setChildren(t=this._head=this._head||(t=s("div",this)).flag("head").setContent([this._icon=this._icon||s("i",t).flag("icon").flag("module"),s("div",e,0,t).flag("name").setContent([s("span",e,1,0).flag("name"),s("span",e,2,0).flag("semver").flag("muted")],2)],2),2).synced((e[1].setContent(this.name(),3),e[2].setContent(this.version(),3),!0))}})),m=a.defineTag("PackageEntries",(function(t){t.prototype.__data={watch:"dataDidSet",name:"data"},t.prototype.data=function(t){return this._data},t.prototype.setData=function(t){var e=this.data();return t!=e&&(this._data=t),t!=e&&this.dataDidSet&&this.dataDidSet(t,e,this.__data),this},t.prototype.space=function(t){return this._space},t.prototype.setSpace=function(t){return this._space=t,this},t.prototype.path=function(t){return this._path},t.prototype.setPath=function(t){return this._path=t,this},t.prototype.dataDidSet=function(){return this.render()},t.prototype.sortedQueries=function(){return this.data().resolved.slice().sort((function(t,e){return t.localeCompare(e)}))},t.prototype.render=function(){var t=this,e=this.$;return t.$open(0).setChildren(function(e){for(let n=0,r=i(t.sortedQueries()),o=e.taglen=r.length;n<o;n++)(e[n]||s(y,e,n)).setData(r[n]).setSpace(t.space()).setSref(t.path()+n).end();return e}(e[0]||o(e,0)),4).synced()}})),g=a.defineTag("DependenciesPanel",l,(function(t){t.prototype.bundle=function(){return this.space().browser().npmPackages()||{resolved:[]}},t.prototype.oncontextmenu=function(t){return t.prevent().stop(),this.showMenu()},t.prototype.onimportpackagejson=function(t){var e=this;t.stop();var n=s("input").setType("file").end();return n.dom().onchange=async function(){for(let r,s=0,a=i(n.dom().files),u=a.length;s<u;s++)if(r=a[s],"package.json"==r.name){var t=await f(r),o=JSON.parse(t);e.space().browser().overwritePackages(o.dependencies)}return r.commit()},n.dom().click()},t.prototype.showMenu=function(){var t;return this._header.uxa().open((t=(t=s(p)).flag("dark").flag("narrow").setContent([s(c,t.$,"A",t).setIcon("+").setAction("dependencyadd").setLabel("Add module"),s(c,t.$,"B",t).setIcon("+").setAction("importpackagejson").setLabel("Import package.json")],2)).end((t.$.A.end(),t.$.B.end(),!0)))},t.prototype.render=function(){var t=this.$;let e=this.data().id()+"$";return this.$open(0).setSref(this.data().id()).setChildren(t.$=t.$||[this._header=this._header||s("header",this).flag("header").setContent([s("div",t,0,this._header).flag("title").setText("Dependencies"),s("div",t,1,this._header).flag("tools").setContent(t[2]||s("div",t,2,1).flag("tool").setIcon("more-horizontal").on$(0,["tap","showMenu"],this),2)],2),this._main=this._main||s(m,this).flag("main")],2).synced((t[2].end(),this._main.setSpace(this.space()).setPath(e).setData(this.bundle()).end(),!0))}}));e.DependenciesPanel=g},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(73).WidgetPanel,a=n(2),u=a.Menu,p=a.MenuItem,c=a.IconButton,h=o.defineTag("SlidesPanel",s,(function(t){t.prototype.toggle=function(){return this.data().currentSlide()&&this.data().setVisible(!this.data().visible()),this},t.prototype.onshowmenu=function(t){var e;return this._header.uxa().open((e=(e=r(u)).flag("dark")).setContent([(e.$.A||r(p,e.$,"A",e).setIcon("+").setAction("importslides").setLabel("Import Google Slides")).end(),this.data().url()?(e.$.B||r(p,e.$,"B",e).setIcon("+").setAction("reimportslides").setLabel("Resync with Google Slides")).end():void 0],1).end())},t.prototype.header=function(){let t;this.$$||(this.$$={});return(t=this._header=this._header||(t=r("header",this)).flag("header").setContent([r("div",t.$,"A",t).flag("title").setText("Slides"),r("div",t.$,"B",t).flag("tools").setContent(t.$.C||r(c,t.$,"C","B").setIcon("*").setAction("showmenu"),2)],2)).end((t.$.C.end(),!0))}}));e.SlidesPanel=h},function(t,e,n){var i=n(0),r=i.createTagList,o=i.createElementFactory(),s=i.createTagScope(),a=n(2).IconButton,u=n(15),p=u.SidebarPanel,c=u.SidebarEntry,h=s.defineTag("BranchEntry",c,(function(t){t.prototype.space=function(t){return this._space},t.prototype.setSpace=function(t){return this._space=t,this},t.prototype.ondel=async function(t){t.halt();await t.uxa().confirm("Are you sure you want to remove "+this.data()+"?");return this},t.prototype.name=function(){return this.data()==this.space().trunk()?"screencast":(this.data().isLocal(),this.data().model().title)},t.prototype.ontap=function(t){return t.halt(),this.trigger("branchenter",this.data())},t.prototype.render=function(){var t,e=this.$;return this.$open(0).flag("Entry").setFlag(-1,this.data().model().type).flagIf("active",this.space().branch()==this.data()).setChildren(t=this._head=this._head||(t=o("div",this)).flag("head").setContent([this._icon=this._icon||o("i",t).flag("icon"),o("div",e,0,t).flag("name"),o(a,e,1,t).setIcon("x").setAction("del")],2),2).synced((this._icon.flagIf("local",this.data().isLocal()).setFlag(0,this.data().model().type),e[0].setContent(this.name(),3),e[1].end(),!0))}}));e.BranchEntry=h;var l=s.defineTag("BranchesPanel",p,(function(t){t.prototype.branches=function(){return[]},t.prototype.render=function(){var t=this.$,e=this;return e.$open(0).setChildren(t.$=t.$||[o("header",t,0,e).setContent([o("div",t,1,0).flag("title"),o("div",t,2,0).flag("tools").setContent(t[3]||o(a,t,3,2).flag("toggle").setIcon(">").setAction("toggle"),2)],2),e._main=e._main||o("div",e).flag("main")],2).synced((t[1].setContent(e.name()||"Branches",3),t[3].end(),e._main.setContent([t[4]||o(h,t,4,e._main).flag("trunk"),function(t){var n;for(let i=0,r=(n=e.space().trunk().branches())?n.toArray?n.toArray():n:[],s=t.taglen=r.length;i<s;i++)(t[i]||o(h,t,i)).setData(r[i]).setSpace(e.space()).end();return t}(t[5]||r(t,5,e._main))],1).end((t[4].bindData(e.space(),"trunk",[]).setSpace(e.space()).end(),!0)),!0))}}));e.BranchesPanel=l},function(t,e,n){var i={},r=n(1),o=r.SCON;r.KEYS,r.ACTION;e.serializeReferences=i.serializeReferences=function(t){return t.replace(/\/\*§SR§(\w+)§START\*\/([^]*?)\/\*§SR§END\*\//gm,(function(t,e,n){return"/*§SR§"+e+"§*/"}))},e.deserializeReferences=i.deserializeReferences=function(t,e){return t.replace(/\/\*§SR§(\w+)§\*\//gm,(function(n,i){return"/*§SR§"+i+"§START*/"+(e instanceof Function?e(t,i):e[i])+"/*§SR§END*/"}))},e.wrapReferencedValue=i.wrapReferencedValue=function(t,e,n){return void 0===n&&(n="html"),"css"==n?"/*§SR§"+t+"§START*/"+e+"/*§SR§END*/":"html"==n?"\x3c!--§SR§"+t+"§START--\x3e"+e+"\x3c!--§SR§END--\x3e":""},e.serializeAttributes=i.serializeAttributes=function(t){var e=[];return Array.from(t.attributes).forEach((function(t){let n=o.keyToRef(t.name);return e.push(n),e.push(t.value||null)})),e.RAW=!0,e},e.serializeNode=i.serializeNode=function(t,e,n,r){for(var o,s,a=t.createNodeIterator(e,NodeFilter.SHOW_TEXT,null);o=a.nextNode();){var u=s&&o.previousSibling==s,p=""==o.textContent;if(u||p){if(!n)return i.serializeNode(t,e.cloneNode(!0),!0,r);p?o.parentNode.insertBefore(t.createComment("§S§B"),o):u&&o.parentNode.insertBefore(t.createComment("§S§"),o)}s=o}var c=r?e.innerHTML:e.outerHTML;return c=c.replace(/\/\*SCRIMBA:IGNORE:START\*\/([^]*?)\/\*SCRIMBA:IGNORE:END\*\//gm," "),c=i.serializeReferences(c)}},function(t,e,n){"use strict";n.r(e),e.default='/* http://meyerweb.com/eric/tools/css/reset/\n   v2.0 | 20110126\n   License: none (public domain)\n*/\nbody {\n  background-color: white;\n  cursor: default;\n  box-sizing: border-box;\n}\n/*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */\n\n\nhtml {\n  font-family: sans-serif;\n\n  line-height: 1.15;\n\n  -ms-text-size-adjust: 100%;\n\n  -webkit-text-size-adjust: 100%;\n\n}\n\narticle,\naside,\nfooter,\nheader,\nnav,\nsection {\n  display: block;\n}\n\nh1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n\nfigcaption,\nfigure,\nmain {\n\n  display: block;\n}\n\nfigure {\n  margin: 1em 40px;\n}\n\nhr {\n  box-sizing: content-box;\n\n  height: 0;\n\n  overflow: visible;\n\n}\n\npre {\n  font-family: monospace, monospace;\n\n  font-size: 1em;\n\n}\n\n\na {\n  background-color: transparent;\n\n  -webkit-text-decoration-skip: objects;\n\n}\n\na:active,\na:hover {\n  outline-width: 0;\n}\n\nabbr[title] {\n  border-bottom: none;\n\n  text-decoration: underline;\n\n  text-decoration: underline dotted;\n\n}\n\nb,\nstrong {\n  font-weight: inherit;\n}\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\ncode,\nkbd,\nsamp {\n  font-family: monospace, monospace;\n\n  font-size: 1em;\n\n}\n\ndfn {\n  font-style: italic;\n}\n\nmark {\n  background-color: #ff0;\n  color: #000;\n}\n\nsmall {\n  font-size: 80%;\n}\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\nsub {\n  bottom: -0.25em;\n}\nsup {\n  top: -0.5em;\n}\n\n\naudio,\nvideo {\n  display: inline-block;\n}\n\naudio:not([controls]) {\n  display: none;\n  height: 0;\n}\n\nimg {\n  border-style: none;\n}\n\nsvg:not(:root) {\n  overflow: hidden;\n}\n\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: sans-serif;\n\n  font-size: 100%;\n\n  line-height: 1.15;\n\n  margin: 0;\n\n}\n\nbutton,\ninput {\n\n  overflow: visible;\n}\n\nbutton,\nselect {\n\n  text-transform: none;\n}\n\nbutton,\nhtml [type="button"],\n[type="reset"],\n[type="submit"] {\n  -webkit-appearance: button;\n\n}\n\nbutton::-moz-focus-inner,\n[type="button"]::-moz-focus-inner,\n[type="reset"]::-moz-focus-inner,\n[type="submit"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\nbutton:-moz-focusring,\n[type="button"]:-moz-focusring,\n[type="reset"]:-moz-focusring,\n[type="submit"]:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\nfieldset {\n  border: 1px solid #c0c0c0;\n  margin: 0 2px;\n  padding: 0.35em 0.625em 0.75em;\n}\n\nlegend {\n  box-sizing: border-box;\n\n  color: inherit;\n\n  display: table;\n\n  max-width: 100%;\n\n  padding: 0;\n\n  white-space: normal;\n\n}\n\nprogress {\n  display: inline-block;\n\n  vertical-align: baseline;\n\n}\n\ntextarea {\n  overflow: auto;\n}\n\n[type="checkbox"],\n[type="radio"] {\n  box-sizing: border-box;\n\n  padding: 0;\n\n}\n\n[type="number"]::-webkit-inner-spin-button,\n[type="number"]::-webkit-outer-spin-button {\n  height: auto;\n}\n\n[type="search"] {\n  -webkit-appearance: textfield;\n\n  outline-offset: -2px;\n\n}\n\n[type="search"]::-webkit-search-cancel-button,\n[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button;\n\n  font: inherit;\n\n}\n\n\ndetails,\nmenu {\n  display: block;\n}\n\nsummary {\n  display: list-item;\n}\n\n\ncanvas {\n  display: inline-block;\n}\n\ntemplate {\n  display: none;\n}\n\n\n[hidden] {\n  display: none;\n}\ninput:focus,\ninput.__focus {\n  outline: 4px solid rgba(117, 170, 255, 0.5);\n}\nbutton:focus,\nbutton.__focus {\n  outline: 4px solid rgba(117, 170, 255, 0.5);\n}\nbutton:active,\nbutton.__active {\n  -ms-transform: scale(0.97);\n      transform: scale(0.97);\n}\n::-moz-selection {\n  background-color: #75aaff;\n}\n::selection {\n  background-color: #75aaff;\n}\n\nnoscript {\n  display: none !important;\n}'},function(t,e,n){var i=n(0),r=i.createTagList,o=i.createElementFactory(),s=i.createTagScope(),a=n(13).InterfaceView,u=s.defineTag("FilePath",(function(t){t.prototype.__data={watch:"dataDidSet",name:"data"},t.prototype.data=function(t){return this._data},t.prototype.setData=function(t){var e=this.data();return t!=e&&(this._data=t),t!=e&&this.dataDidSet&&this.dataDidSet(t,e,this.__data),this},t.prototype.path=function(t){return this._path},t.prototype.setPath=function(t){return this._path=t,this},t.prototype.dataDidSet=function(t){var e;return this.setPath(e=t?t.path().split("/"):[]),e},t.prototype.render=function(){var t=this.$,e=this.path();return this.$open(0).flag("path").setChildren(function(t){var n;for(let i=0,r=(n=e)?n.toArray?n.toArray():n:[],s=t.taglen=r.length;i<s;i++)(t[i]||o("div",t,i).flag("part")).setContent(r[i],3);return t}(t[0]||r(t,0)),4).synced()}})),p=s.defineTag("TitlebarView",a,(function(t){t.prototype.file=function(){return this.space().primaryEditor().currentFile()},t.prototype.toggleBrowser=function(){var t;return this.space().browser().setVisible(t=!this.space().browser().visible()),t},t.prototype.toggleConsole=function(){return this.space().console().setEnabled(!this.space().console().enabled())},t.prototype.run=function(){return this.file()&&"html"==this.file().ext()?this.openInBrowser():this.reload()},t.prototype.reload=function(){return this.space().browser().refresh()},t.prototype.openInBrowser=function(){let t=this.file().path().replace(/^\//,"");return this.space().browser().node().go(t,!0)},t.prototype.onbeforeshortcut=function(t){if(!SP.isEditing()&&t.data().combo.indexOf("+r")>0)return t.prevent()},t.prototype.hasLocalNotes=function(){const t=this.space().model().usernotes(this.api().uid()).slice(-1)[0];return!(!t||!t.isLocal())&&(this._lastUnsavedNote=t)},t.prototype.saveCurrentFile=function(){if(this.file())return this.file().quicksave()},t.prototype.render=function(){var t=this.$;let e=this.file(),n="Run code / Refresh";return"css"==(e&&e.ext())&&(n="css is updated live"),this.$open(0).setChildren(t.$=t.$||[o(u,t,0,this),o("div",t,1,this).flag("tools").setContent([o("shortcut",t,2,1).on$(0,["exec","saveCurrentFile"],this).setShortcut("command+s"),o("div",t,3,1).flag("tool-button").flag("run").on$(0,["tap","run"],this).dataset("icon","play").setShortcut("command+r").setContent(t[4]||o("b",t,4,3).setText("run"),2),o("div",t,5,1).flag("tool-button").flag("toggleable").set("tip","Show/hide mini browser",{tool:1}).set("shortcut","mod+shift+u",{global:1}).dataset("icon","browsertool").on$(0,["tap","toggleBrowser"],this).setContent(t[6]||o("b",t,6,5).setText("preview"),2),o("div",t,7,1).flag("tool-button").flag("toggleable").set("tip","Show/hide console",{tool:1,tr:1}).set("shortcut","mod+shift+y",{global:1}).dataset("icon","xsh").on$(0,["tap","toggleConsole"],this).setContent(t[8]||o("b",t,8,7).setText("console"),2)],2)],2).synced((t[0].setData(e).end(),t[2].end(),t[3].set("tip",n,{tool:1}).end(),t[5].flagIf("off",!this.space().browser().visible()).end(),t[7].flagIf("off",!this.space().console().enabled()).end(),!0))}}));e.TitlebarView=p},function(t,e,n){var i=n(0),r=i.createTagScope(),o=i.createElementFactory(),s=n(13).InterfaceView;n(179);r.defineTag("Tool");var a=r.defineTag("SpaceControls",s,(function(t){t.prototype.trunk=function(){return this.space().trunk()},t.prototype.skipInTimeline=function(t){return void 0===t&&(t=0),this.timeline().skip(t)},t.prototype.increasePlaybackRate=function(){var t;return this.timeline().setPlaybackRate(t=Math.min(this.timeline().playbackRate()+.1,2)),t},t.prototype.decreasePlaybackRate=function(){var t;return this.timeline().setPlaybackRate(t=Math.max(this.timeline().playbackRate()-.1,.5)),t},t.prototype.leaveBranch=function(){return this.branch().parent()&&this.branch().parent().enter(),this},t.prototype.discardBranch=function(){let t=this.branch().parent();return this.branch().discard(),t&&t.enter(),this},t.prototype.saveBranch=async function(){return await this.branch().persist(),this},t.prototype.togglePlay=function(t){return void 0===t&&(t=this.timeline()),this.space().isRecording()?this.trigger("recstop",this.space().branch()):t.isPaused()?t.play():t.pause()},t.prototype.toggleRecording=function(){return this.space().isRecording()?this.trigger("recstop",this.space().branch()):this.trigger("recstart",this.space().branch())},t.prototype.stopRecording=function(){return this.trigger("recstop",this.space().branch())},t.prototype.toggleBrushup=function(){return this.space().branch().isAnnotating()?this.trigger("brushupstop"):this.trigger("annotate",this.space().branch()),this},t.prototype.openInNewTab=function(){return this.space().branch().parent()&&(document.location.href=this.space().branch().model().url),this},t.prototype.pressedBackspace=function(){return!0},t.prototype.render=function(){var t=this.$;let e=this.space().trunk(),n=e.timeline(),r=n.isPlaying()||n.isLive()?"pause":"play";0==n.duration()||n.branch().hasRecordings();return 0!=n.duration()&&n.branch().hasRecordings()||(r="activity"),this.space().isRecording()&&(r="square"),e.isNote()&&e.parent()&&(r="bookmark"),this.$open(0).setChildren(t.$=t.$||[o("div",t,0,this).flag("shortcuts"),o("div",t,7,this).flag("tools").flag("left"),o("div",t,8,this).flag("track-placeholder"),o("graph:root",t,9,this),o("div",t,10,this).flag("tools").flag("right").setContent(t[11]||o("scrim-player-controls",t,11,10),2)],2).synced((t[0].setContent([(t[1]||o("shortcut",t,1,0).set("shortcut","backspace",{prevent:1}).on$(0,["exec","pressedBackspace"],this)).end(),this.timeline().isLive()?void 0:i.static([(t[2]||o("shortcut",t,2,0).setShortcut("left")).on$(0,["exec",["skipInTimeline",-1e4]],this).end(),(t[3]||o("shortcut",t,3,0).setShortcut("right").on$(0,["exec",["skipInTimeline",1e4]],this)).end(),(t[4]||o("shortcut",t,4,0).setShortcut("shift+left").on$(0,["exec","decreasePlaybackRate"],this)).end(),(t[5]||o("shortcut",t,5,0).setShortcut("shift+right").on$(0,["exec","increasePlaybackRate"],this)).end(),(t[6]||o("shortcut",t,6,0).setShortcut("space")).on$(0,["exec",["togglePlay",n]],this).end()],2,1)],1),t[7].setFlag(0,this.timeline().color()).setFlag(1,"tl-"+n.state()).setFlag(2,"branch-"+e.state()),t[9].bindData(this.trunk(),"timeline",[]).end(),t[11].end(),!0))}}));e.SpaceControls=a},function(t,e,n){var i=n(0),r=i.createTagScope(),o=i.createElementFactory(),s=n(180).TimelineMenu;r.defineTag("graph:line"),r.defineTag("graph:track","graph:line"),r.defineTag("graph:progress-track","graph:track"),r.defineTag("graph:connector","graph:line"),r.defineTag("graph:point"),r.defineTag("graph:anchor","graph:point"),r.defineTag("graph:base"),r.defineTag("graph:timeline",(function(t){t.prototype.__width={default:-1,watch:"widthDidSet",name:"width"},t.prototype.width=function(t){return this._width},t.prototype.setWidth=function(t){var e=this.width();return t!=e&&(this._width=t),t!=e&&this.widthDidSet&&this.widthDidSet(t,e,this.__width),this},t.prototype._width=-1,t.prototype.branch=function(){return this.data().branch()},t.prototype.space=function(){return this.branch().space()},t.prototype.currentDepth=function(){return this.data().branch().currentNestingLevel()},t.prototype.calcTrackWidth=function(){this.data().duration();let t=this.currentDepth(),e=this.dom().previousElementSibling,n=-1==t?0:this.branch().parent()?180:-1;return 0!=n&&this.data().isLive()&&(n=0),-1==n&&(n=e&&e.offsetWidth||window.innerWidth-194),n},t.prototype.togglePlay=function(t){return void 0===t&&(t=this.data()),this.space().isRecording()?this.trigger("recstop",this.space().branch()):t.isPaused()?t.play():t.pause()},t.prototype.toggleRecording=function(){return this.space().isRecording()?this.trigger("recstop",this.space().branch()):this.trigger("recstart",this.space().branch())},t.prototype.discardBranch=function(){return this.branch().discard(),this},t.prototype.saveBranch=async function(){return window.store.user?(await this.branch().persist(),this):(document.location.hash="#sign-in",this)},t.prototype.ontouchstart=function(t){let e=t.sourceTarget().closest("._graph-timeline");if(e&&e==this&&!t.sourceTarget().closest(".marker-desc,.pb-controls,.tool")&&!this.data().isRecording()&&!this.branch().isEditing())return this._box=this._bounds.dom().getBoundingClientRect(),this.flag("seeking"),t.capture()},t.prototype.ontouchupdate=function(t){if(!this._box)return;let e=(t.x()-this._box.left)/this._box.width;return this.data().setState("seeking"),this.seek(Math.max(Math.min(e,1),0)),this},t.prototype.ontouchend=function(t){if(!this._box)return;let e=(t.x()-this._box.left)/this._box.width;return Math.max(Math.min(e,1),0)>=.99&&!this.branch().isEnded()?(this.data().seek(this.data().endOffset()),this.data().pause()):this.data().setState(this.data().playState()),this.unflag("seeking"),this._box=null,this},t.prototype.widthDidSet=function(t,e){var n=this;return Math.abs(t-e)>18&&(clearTimeout(n._animTimeout),n.flag("animated"),n._animTimeout=setTimeout((function(){return n.unflag("animated")}),1e3)),n.cssvars().set({trackwidth:t}),n},t.prototype.seek=function(t){var e=t*this.data().duration();return this.data().seek(this.data().timeToOffset(e)),this},t.prototype.color=function(){return this.data().color()},t.prototype.render=function(){var t=this.$,e=this;let n=e.data(),i=n.branch(),r=i.level(),s=e.data().duration()||0,a=Math.min(s,e.data().currentTime()||0),u=e.calcTrackWidth(),p=e.currentDepth(),c=0==s||e.data().isLive()?1:Math.min(a/s,1),h=n.isPlaying()||n.isLive()?"pause":"play",l=i.hasRecordings()&&!n.isRecording(),d=(n.isRecording(),n.isRecording()?"Stop recording":"Start recording");return e.setWidth(u),e.cssvars().set({progress:c,nesting:p}),e.flag("is-current",e.data().branch().isCurrentBranch()),e.flag("in-chain",p>=0),e.flag("not-in-chain",!(p>=0)),e.setFlag("state",e.data().state()),e.flag("recording",e.data().isRecording()),e.$open(0).setFlag(-1,e.color()).setFlag(-2,"level"+r).setChildren(t.$=t.$||[o("div",t,0,e).flag("pb-controls").on$(0,["tap","stop","prevent"],e).setContent([o("div",t,1,0).flag("toolgroup").flag("save").setContent([o("div",t,2,1).flag("tool").flag("red").on$(0,["tap","stop","prevent","discardBranch"],e).setIcon("x").set("tip","Discard note/branch",{tool:1}),o("div",t,3,1).flag("tool").flag("green").on$(0,["tap","saveBranch"],e).setIcon("check").set("tip","Save note/branch",{tool:1})],2),o("div",t,4,0).flag("tool").flag("rec").on$(0,["tap","toggleRecording"],e),o("div",t,5,0).flag("tool").flag("pb").flag("blue")],2),e._bounds=e._bounds||o("graph:track",e).flag("bounds").flag("duration"),o("graph:progress-track",t,6,e).flag("progress"),o("graph:progress-marker",t,7,e).flag("progress"),o("graph:head-marker",t,8,e),o("div",t,9,e).flag("branches").flag("contents")],2).synced((t[0].setFlag(0,"level"+r).end((t[1].flagIf("hide",!i.isLocal()||0==r).end((t[2].flagIf("hide",!i.isLocal()||0==r).end(),t[3].flagIf("hide",!i.isLocal()||0==r).end(),!0)),t[4].flagIf("tiny",!i.hasRecordings()&&0!=r).flagIf("active",n.isRecording()).flagIf("hide",!i.canRecord()).set("tip",d,{tool:1}).end(),t[5].flagIf("hide",!l).on$(0,["tap",["togglePlay",e.data()]],e).setIcon(h).end(),!0)),e._bounds.end(),t[6].end(),t[7].bindData(e,"data",[]).setFlag(0,e.data().state()).end(),t[8].bindData(e,"data",[]).setFlag(0,"level"+r).set("depth",p).end(),t[9].setContent(function(t){for(let i=0,r=(n=e.data().branch().branches())?n.toArray?n.toArray():n:[],o=r.length;i<o;i++)t.push(r[i].markerView().end());var n;return t}([]),3),!0))}})),r.defineTag("graph:root","graph:timeline",(function(t){t.prototype.__pivot={watch:"pivotDidSet",name:"pivot"},t.prototype.pivot=function(t){return this._pivot},t.prototype.setPivot=function(t){var e=this.pivot();return t!=e&&(this._pivot=t),t!=e&&this.pivotDidSet&&this.pivotDidSet(t,e,this.__pivot),this},t.prototype.color=function(){return this.data().color()},t.prototype.commit=function(){return t.prototype.__super__.commit.apply(this,arguments),this.setPivot(this.data().space().branch()),this},t.prototype.onfocusmarker=function(t,e){let n=e.dom().getBoundingClientRect(),i=this.dom().getBoundingClientRect();Math.round(n.left-i.left);return this},t.prototype.pivotDidSet=function(t,e){return this.dom().offsetWidth,t&&t!=this.data().space().trunk()?t.markerView().focus():this.cssvars().set({scrollx:0}),this}})),r.defineTag("graph:marker",(function(t){t.prototype.__expanded={watch:"expandedDidSet",name:"expanded"},t.prototype.expanded=function(t){return this._expanded},t.prototype.setExpanded=function(t){var e=this.expanded();return t!=e&&(this._expanded=t),t!=e&&this.expandedDidSet&&this.expandedDidSet(t,e,this.__expanded),this},t.prototype.timeline=function(t){return this._timeline},t.prototype.setTimeline=function(t){return this._timeline=t,this},t.prototype.color=function(t){return this._color},t.prototype.setColor=function(t){return this._color=t,this},t.prototype.render=function(){var t,e=this.$;return this.$open(0).setFlag(-1,this.color()).setChildren(e.$=e.$||[o("graph:anchor",e,0,this).flag("anchor"),o("graph:connector",e,1,this).flag("line"),t=t=o("graph:base",e,2,this)],2).synced((e[0].end(),e[1].end(),e[2].setContent([(e[3]||o("graph:point",e,3,2).flag("base")).end(),e[4]||o("div",e,4,2).flag("marker-desc").setContent(e[5]||o("div",e,5,4).flag("state"),2),this.timeline()?(this._tl=this._tl||o("graph:timeline",t).flag("tl")).bindData(this,"timeline",[]).end():void 0],1).end(),!0))},t.prototype.focus=function(){return this.trigger("focusmarker",this)},t.prototype.expandedDidSet=function(t){return this.flag("expanded",!!t)}})),r.defineTag("graph:progress-marker","graph:marker",(function(t){t.prototype.color=function(){return this.data().color()},t.prototype.render=function(){var t=this.$;return this.$open(0).setFlag(-1,this.color()).setChildren(t[0]||o("graph:anchor",t,0,this),2).synced((t[0].end(),!0))}})),r.defineTag("graph:head-marker","graph:marker",(function(t){t.prototype.depth=function(t){return this._depth},t.prototype.setDepth=function(t){return this._depth=t,this},t.prototype.color=function(){return this.data().color()},t.prototype.goLive=function(){return this.data().goLive()},t.prototype.branch=function(){return this.data().branch()},t.prototype.space=function(){return this.branch().space()},Object.defineProperty(t.prototype,"remaining",{get:function(){return Math.max(0,this.data().duration()-this.data().currentTime())},configurable:!0}),t.prototype.discardBranch=function(){return this.branch().discard(),this},t.prototype.saveBranch=async function(){return console.log("saving branch!"),await this.branch().persist(),this},t.prototype.showMenu=function(t){return t.uxa().open(o(s).flag("sm").bindData(this,"data",[]).end()),this},t.prototype.render=function(){var t=this.$;let e=this.data().branch();e.isNote()&&e.parent()&&e.isLocal();return this.$open(0).setFlag(-1,this.color()).setFlag(-2,this.data().state()).flagIf("recording",this.data().branch().isRecording()).setChildren(t.$=t.$||[o("graph:anchor",t,0,this).flag("anchor"),o("graph:connector",t,1,this).flag("line"),o("graph:base",t,2,this).setContent([o("graph:point",t,3,2).flag("pulse"),o("graph:point",t,4,2).flag("base"),o("div",t,5,2).flag("marker-desc")],2)],2).synced((t[0].end(),t[1].end(),t[2].end((t[3].end(),t[4].end(),t[5].setContent([this.data().isRecording()?(t[6]||o("div",t,6,5).flag("time").flag("red")).setContent(this.util().msToStr(this.space().recording().duration()),3):e.isNote()&&e.parent()&&!e.hasRecordings()?t[7]||o("div",t,7,5).flag("state").flag("title-state").setText("Note"):e.isLive()&&e.isMine()?t[8]||o("div",t,8,5).flag("state").setText("EDITING"):e.isLive()?t[9]||o("div",t,9,5).flag("state").on$(0,["tap","goLive"],this).setText("LIVE"):(t[10]||o("div",t,10,5).flag("time")).setText("-"+this.util().msToStr(this.remaining)),(t[11]||o("div",t,11,5).flag("marker-controls").setContent(t[12]||o("div",t,12,11).flag("tool").flag("neutral").flag("sm").setIcon("more-horizontal").on$(0,["tap","stop","showMenu"],this),2)).end((t[12].flagIf("hide",this.space().isRecording()||e.isLocal()).end(),!0))],1),!0)),!0))}})),r.defineTag("graph:branch-marker","graph:marker",(function(t){t.prototype.ontouchstart=function(t){return this},t.prototype.timeline=function(){return this.data().timeline()},t.prototype.color=function(){return this.timeline().color()},t.prototype.ontap=function(t){return this.data().enter(),t.stop()},t.prototype.render=function(){var e;if(this.data().parent())return this.cssvars().set("offset",this.data().parent().timeline().offsetToProgress(this.data().seedOffset())),t.prototype.__super__.render.apply(this,arguments),this.dom().parentNode?(this._inserted||(this._inserted=!0,this._tl.setFlag("state","init"),this.dom().offsetHeight,this._tl.setFlag("state",this.timeline().state())),this.flag("is-current",this.data().isCurrentBranch()),this.setExpanded(e=this.data().currentNestingLevel()>=0),e):void 0}}))},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=(n(71).PublishDialog,n(2)),a=s.Menu,u=(s.MenuItem,o.defineTag("TimelineMenu",a,(function(t){t.prototype.timeline=function(){return this.data()},t.prototype.branch=function(){return this.data().branch()},t.prototype.model=function(){return this.branch().model()},t.prototype.space=function(){return this.branch().space()},t.prototype.hide=function(){return this.trigger("uxa:hide")},t.prototype.ontap=function(t){return this.hide()},t.prototype.forkScrim=async function(){let t=this.space().clone(),e=this.branch().model();t.title="Fork of "+e.title.replace("Fork of","");let n=window.Player.Scrim.build(t);return await n.persist(),document.location.href="/scrim/"+n.id},t.prototype.cloneScrim=async function(){let t=this.branch().model(),e=this.branch()._stream._buffer.slice(0),n=await window.$api.post("/scrims/"+t.id+"/clone",e);return console.log("returned",n,e),n&&n.id&&(document.location.href="/scrim/"+n.id),this},t.prototype.editTimeline=function(){return this.branch().startAnnotating()},t.prototype.editMetadata=function(){return this.space().view().dispatch("editscrim",this.branch().model()._raw)},t.prototype.startPublish=async function(){return await this.branch().publish({}),console.log("published!!")},t.prototype.render=function(){var t=this.$,e=this.branch().model().can(this.api().user(),"edit");return this.$open(0).flag("space-menu").setChildren([this.branch().parent()?(t[0]||r("a",t,0,this).flag("action").setTarget("blank").setText("Open in new page")).setHref("/scrim/"+this.model().id).end():void 0,e?i.static([this.branch().canPublish()?i.static([t[1]||r("div",t,1,this).flag("action").on$(0,["tap","startPublish"],this).setText("Publish scrim"),t[2]||r("hr",t,2,this)],2,1):void 0,t[3]||r("div",t,3,this).flag("action").on$(0,["tap","editMetadata"],this).setText("Edit metadata"),this.branch().hasRecordings()?t[4]||r("div",t,4,this).flag("action").on$(0,["tap","editTimeline"],this).setText("Edit timeline"):void 0,t[5]||r("hr",t,5,this),t[6]||r("div",t,6,this).flag("action").on$(0,["tap","cloneScrim"],this).setText("Create clone of Scrim")],1,2):void 0,t[7]||r("div",t,7,this).flag("action").on$(0,["tap","forkScrim"],this).setText("Fork to new Scrim")],1).synced()}})));e.TimelineMenu=u},function(t,e,n){var i;/*! Player.js - v0.1.0 - 2017-10-24
* http://github.com/embedly/player.js
* Copyright (c) 2017 Embedly; Licensed BSD */!function(r,o){var s={};function a(t){return function(){var e={method:t},n=Array.prototype.slice.call(arguments);/^get/.test(t)?(s.assert(n.length>0,"Get methods require a callback."),n.unshift(e)):(/^set/.test(t)&&(s.assert(0!==n.length,"Set methods require a value."),e.value=n[0]),n=[e]),this.send.apply(this,n)}}s.DEBUG=!1,s.VERSION="0.0.11",s.CONTEXT="player.js",s.POST_MESSAGE=!!r.postMessage,s.origin=function(t){return"//"===t.substr(0,2)&&(t=r.location.protocol+t),t.split("/").slice(0,3).join("/")},s.addEvent=function(t,e,n){t&&(t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n)},s.log=function(){s.log.history=s.log.history||[],s.log.history.push(arguments),r.console&&s.DEBUG&&r.console.log(Array.prototype.slice.call(arguments))},s.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},s.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},s.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},s.isNone=function(t){return null==t},s.has=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.indexOf=function(t,e){if(null==t)return-1;var n=0,i=t.length;if(Array.prototype.IndexOf&&t.indexOf===Array.prototype.IndexOf)return t.indexOf(e);for(;n<i;n++)if(t[n]===e)return n;return-1},s.assert=function(t,e){if(!t)throw e||"Player.js Assert Failed"},s.Keeper=function(){this.init()},s.Keeper.prototype.init=function(){this.data={}},s.Keeper.prototype.getUUID=function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},s.Keeper.prototype.has=function(t,e){if(!this.data.hasOwnProperty(t))return!1;if(s.isNone(e))return!0;for(var n=this.data[t],i=0;i<n.length;i++)if(n[i].id===e)return!0;return!1},s.Keeper.prototype.add=function(t,e,n,i,r){var o={id:t,event:e,cb:n,ctx:i,one:r};this.has(e)?this.data[e].push(o):this.data[e]=[o]},s.Keeper.prototype.execute=function(t,e,n,i){if(!this.has(t,e))return!1;for(var r=[],o=[],a=0;a<this.data[t].length;a++){var u=this.data[t][a];s.isNone(e)||!s.isNone(e)&&u.id===e?(o.push({cb:u.cb,ctx:u.ctx?u.ctx:i,data:n}),!1===u.one&&r.push(u)):r.push(u)}0===r.length?delete this.data[t]:this.data[t]=r;for(var p=0;p<o.length;p++){var c=o[p];c.cb.call(c.ctx,c.data)}},s.Keeper.prototype.on=function(t,e,n,i){this.add(t,e,n,i,!1)},s.Keeper.prototype.one=function(t,e,n,i){this.add(t,e,n,i,!0)},s.Keeper.prototype.off=function(t,e){var n=[];if(!this.data.hasOwnProperty(t))return n;for(var i=[],r=0;r<this.data[t].length;r++){var o=this.data[t][r];s.isNone(e)||o.cb===e?s.isNone(o.id)||n.push(o.id):i.push(o)}return 0===i.length?delete this.data[t]:this.data[t]=i,n},s.Player=function(t,e){if(!(this instanceof s.Player))return new s.Player(t,e);this.init(t,e)},s.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"},s.EVENTS.all=function(){var t=[];for(var e in s.EVENTS)s.has(s.EVENTS,e)&&s.isString(s.EVENTS[e])&&t.push(s.EVENTS[e]);return t},s.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"},s.METHODS.all=function(){var t=[];for(var e in s.METHODS)s.has(s.METHODS,e)&&s.isString(s.METHODS[e])&&t.push(s.METHODS[e]);return t},s.READIED=[],s.Player.prototype.init=function(t,e){var n=this;s.isString(t)&&(t=o.getElementById(t)),this.elem=t,s.assert("IFRAME"===t.nodeName,'playerjs.Player constructor requires an Iframe, got "'+t.nodeName+'"'),s.assert(t.src,"playerjs.Player constructor requires a Iframe with a 'src' attribute."),this.origin=s.origin(t.src),this.keeper=new s.Keeper,this.isReady=!1,this.queue=[],this.events=s.EVENTS.all(),this.methods=s.METHODS.all(),s.POST_MESSAGE?s.addEvent(r,"message",(function(t){n.receive(t)})):s.log("Post Message is not Available."),s.indexOf(s.READIED,t.src)>-1?n.loaded=!0:this.elem.onload=function(){n.loaded=!0}},s.Player.prototype.send=function(t,e,n){if(t.context=s.CONTEXT,t.version=s.VERSION,e){var i=this.keeper.getUUID();t.listener=i,this.keeper.one(i,t.method,e,n)}return this.isReady||"ready"===t.value?(s.log("Player.send",t,this.origin),!0===this.loaded&&this.elem.contentWindow.postMessage(JSON.stringify(t),this.origin),!0):(s.log("Player.queue",t),this.queue.push(t),!1)},s.Player.prototype.receive=function(t){if(s.log("Player.receive",t),t.origin!==this.origin)return!1;var e;try{e=JSON.parse(t.data)}catch(t){return!1}if(e.context!==s.CONTEXT)return!1;"ready"===e.event&&e.value&&e.value.src===this.elem.src&&this.ready(e),this.keeper.has(e.event,e.listener)&&this.keeper.execute(e.event,e.listener,e.value,this)},s.Player.prototype.ready=function(t){if(!0===this.isReady)return!1;t.value.events&&(this.events=t.value.events),t.value.methods&&(this.methods=t.value.methods),this.isReady=!0,this.loaded=!0;for(var e=0;e<this.queue.length;e++){var n=this.queue[e];s.log("Player.dequeue",n),"ready"===t.event&&this.keeper.execute(n.event,n.listener,!0,this),this.send(n)}this.queue=[]},s.Player.prototype.on=function(t,e,n){var i=this.keeper.getUUID();return"ready"===t?this.keeper.one(i,t,e,n):this.keeper.on(i,t,e,n),this.send({method:"addEventListener",value:t,listener:i}),!0},s.Player.prototype.off=function(t,e){var n=this.keeper.off(t,e);if(s.log("Player.off",n),n.length>0)for(var i in n)return this.send({method:"removeEventListener",value:t,listener:n[i]}),!0;return!1},s.Player.prototype.supports=function(t,e){s.assert(s.indexOf(["method","event"],t)>-1,'evtOrMethod needs to be either "event" or "method" got '+t),e=s.isArray(e)?e:[e];for(var n="event"===t?this.events:this.methods,i=0;i<e.length;i++)if(-1===s.indexOf(n,e[i]))return!1;return!0};for(var u=0,p=s.METHODS.all().length;u<p;u++){var c=s.METHODS.all()[u];s.Player.prototype.hasOwnProperty(c)||(s.Player.prototype[c]=a(c))}s.addEvent(r,"message",(function(t){var e;try{e=JSON.parse(t.data)}catch(t){return!1}if(e.context!==s.CONTEXT)return!1;"ready"===e.event&&e.value&&e.value.src&&s.READIED.push(e.value.src)})),s.Receiver=function(t,e){this.init(t,e)},s.Receiver.prototype.init=function(t,e){var n=this;this.isReady=!1,this.origin=s.origin(o.referrer),this.methods={},this.supported={events:t||s.EVENTS.all(),methods:e||s.METHODS.all()},this.eventListeners={},this.reject=!(r.self!==r.top&&s.POST_MESSAGE),this.reject||s.addEvent(r,"message",(function(t){n.receive(t)}))},s.Receiver.prototype.receive=function(t){if(t.origin!==this.origin)return!1;var e={};if(s.isObject(t.data))e=t.data;else try{e=r.JSON.parse(t.data)}catch(t){s.log("JSON Parse Error",t)}if(s.log("Receiver.receive",t,e),!e.method)return!1;if(e.context!==s.CONTEXT)return!1;if(-1===s.indexOf(s.METHODS.all(),e.method))return this.emit("error",{code:2,msg:'Invalid Method "'+e.method+'"'}),!1;var n=s.isNone(e.listener)?null:e.listener;if("addEventListener"===e.method)this.eventListeners.hasOwnProperty(e.value)?-1===s.indexOf(this.eventListeners[e.value],n)&&this.eventListeners[e.value].push(n):this.eventListeners[e.value]=[n],"ready"===e.value&&this.isReady&&this.ready();else if("removeEventListener"===e.method){if(this.eventListeners.hasOwnProperty(e.value)){var i=s.indexOf(this.eventListeners[e.value],n);i>-1&&this.eventListeners[e.value].splice(i,1),0===this.eventListeners[e.value].length&&delete this.eventListeners[e.value]}}else this.get(e.method,e.value,n)},s.Receiver.prototype.get=function(t,e,n){var i=this;if(!this.methods.hasOwnProperty(t))return this.emit("error",{code:3,msg:'Method Not Supported"'+t+'"'}),!1;var r=this.methods[t];if("get"===t.substr(0,3)){r.call(this,(function(e){i.send(t,e,n)}))}else r.call(this,e)},s.Receiver.prototype.on=function(t,e){this.methods[t]=e},s.Receiver.prototype.send=function(t,e,n){if(s.log("Receiver.send",t,e,n),this.reject)return s.log("Receiver.send.reject",t,e,n),!1;var i={context:s.CONTEXT,version:s.VERSION,event:t};s.isNone(e)||(i.value=e),s.isNone(n)||(i.listener=n);var o=JSON.stringify(i);r.parent.postMessage(o,""===this.origin?"*":this.origin)},s.Receiver.prototype.emit=function(t,e){if(!this.eventListeners.hasOwnProperty(t))return!1;s.log("Instance.emit",t,e,this.eventListeners[t]);for(var n=0;n<this.eventListeners[t].length;n++){var i=this.eventListeners[t][n];this.send(t,e,i)}return!0},s.Receiver.prototype.ready=function(){s.log("Receiver.ready"),this.isReady=!0;var t={src:r.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",t)||this.send("ready",t)},s.HTML5Adapter=function(t){if(!(this instanceof s.HTML5Adapter))return new s.HTML5Adapter(t);this.init(t)},s.HTML5Adapter.prototype.init=function(t){s.assert(t,"playerjs.HTML5Adapter requires a video element");var e=this.receiver=new s.Receiver;t.addEventListener("playing",(function(){e.emit("play")})),t.addEventListener("pause",(function(){e.emit("pause")})),t.addEventListener("ended",(function(){e.emit("ended")})),t.addEventListener("timeupdate",(function(){e.emit("timeupdate",{seconds:t.currentTime,duration:t.duration})})),t.addEventListener("progress",(function(){e.emit("buffered",{percent:t.buffered.length})})),e.on("play",(function(){t.play()})),e.on("pause",(function(){t.pause()})),e.on("getPaused",(function(e){e(t.paused)})),e.on("getCurrentTime",(function(e){e(t.currentTime)})),e.on("setCurrentTime",(function(e){t.currentTime=e})),e.on("getDuration",(function(e){e(t.duration)})),e.on("getVolume",(function(e){e(100*t.volume)})),e.on("setVolume",(function(e){t.volume=e/100})),e.on("mute",(function(){t.muted=!0})),e.on("unmute",(function(){t.muted=!1})),e.on("getMuted",(function(e){e(t.muted)})),e.on("getLoop",(function(e){e(t.loop)})),e.on("setLoop",(function(e){t.loop=e}))},s.HTML5Adapter.prototype.ready=function(){this.receiver.ready()},s.JWPlayerAdapter=function(t){if(!(this instanceof s.JWPlayerAdapter))return new s.JWPlayerAdapter(t);this.init(t)},s.JWPlayerAdapter.prototype.init=function(t){s.assert(t,"playerjs.JWPlayerAdapter requires a player object");var e=this.receiver=new s.Receiver;this.looped=!1,t.on("pause",(function(){e.emit("pause")})),t.on("play",(function(){e.emit("play")})),t.on("time",(function(t){var n=t.position,i=t.duration;if(!n||!i)return!1;var r={seconds:n,duration:i};e.emit("timeupdate",r)}));var n=this;t.on("complete",(function(){!0===n.looped?t.seek(0):e.emit("ended")})),t.on("error",(function(){e.emit("error")})),e.on("play",(function(){t.play(!0)})),e.on("pause",(function(){t.pause(!0)})),e.on("getPaused",(function(e){e(t.getState().toLowerCase()!=="PLAYING".toLowerCase())})),e.on("getCurrentTime",(function(e){e(t.getPosition())})),e.on("setCurrentTime",(function(e){t.seek(e)})),e.on("getDuration",(function(e){e(t.getDuration())})),e.on("getVolume",(function(e){e(t.getVolume())})),e.on("setVolume",(function(e){t.setVolume(e)})),e.on("mute",(function(){t.setMute(!0)})),e.on("unmute",(function(){t.setMute(!1)})),e.on("getMuted",(function(e){e(!0===t.getMute())})),e.on("getLoop",(function(t){t(this.looped)}),this),e.on("setLoop",(function(t){this.looped=t}),this)},s.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()},s.MockAdapter=function(){if(!(this instanceof s.MockAdapter))return new s.MockAdapter;this.init()},s.MockAdapter.prototype.init=function(){var t={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:!1,playing:!1,loop:!1,play:function(){t.interval=setInterval((function(){t.currentTime+=.25,t.timeupdate({seconds:t.currentTime,duration:t.duration})}),250),t.playing=!0},pause:function(){clearInterval(t.interval),t.playing=!1}},e=this.receiver=new s.Receiver;e.on("play",(function(){var e=this;t.play(),this.emit("play"),t.timeupdate=function(t){e.emit("timeupdate",t)}})),e.on("pause",(function(){t.pause(),this.emit("pause")})),e.on("getPaused",(function(e){e(!t.playing)})),e.on("getCurrentTime",(function(e){e(t.currentTime)})),e.on("setCurrentTime",(function(e){t.currentTime=e})),e.on("getDuration",(function(e){e(t.duration)})),e.on("getVolume",(function(e){e(t.volume)})),e.on("setVolume",(function(e){t.volume=e})),e.on("mute",(function(){t.mute=!0})),e.on("unmute",(function(){t.mute=!1})),e.on("getMuted",(function(e){e(t.mute)})),e.on("getLoop",(function(e){e(t.loop)})),e.on("setLoop",(function(e){t.loop=e}))},s.MockAdapter.prototype.ready=function(){this.receiver.ready()},s.VideoJSAdapter=function(t){if(!(this instanceof s.VideoJSAdapter))return new s.VideoJSAdapter(t);this.init(t)},s.VideoJSAdapter.prototype.init=function(t){s.assert(t,"playerjs.VideoJSReceiver requires a player object");var e=this.receiver=new s.Receiver;t.on("pause",(function(){e.emit("pause")})),t.on("play",(function(){e.emit("play")})),t.on("timeupdate",(function(n){var i=t.currentTime(),r=t.duration();if(!i||!r)return!1;var o={seconds:i,duration:r};e.emit("timeupdate",o)})),t.on("ended",(function(){e.emit("ended")})),t.on("error",(function(){e.emit("error")})),e.on("play",(function(){t.play()})),e.on("pause",(function(){t.pause()})),e.on("getPaused",(function(e){e(t.paused())})),e.on("getCurrentTime",(function(e){e(t.currentTime())})),e.on("setCurrentTime",(function(e){t.currentTime(e)})),e.on("getDuration",(function(e){e(t.duration())})),e.on("getVolume",(function(e){e(100*t.volume())})),e.on("setVolume",(function(e){t.volume(e/100)})),e.on("mute",(function(){t.volume(0)})),e.on("unmute",(function(){t.volume(1)})),e.on("getMuted",(function(e){e(0===t.volume())})),e.on("getLoop",(function(e){e(t.loop())})),e.on("setLoop",(function(e){t.loop(e)}))},s.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()},void 0===(i=function(){return s}.call(e,n,e,t))||(t.exports=i)}(window,document)},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(0),o=r.createTagScope(),s=r.createElementFactory(),a=n(4),u=n(1),p=u.ACTION,c=u.CAST,h=(u.WIDGET,u.SCON),l=(u.MSG,n(7).List),d=n(183),f=d.Branch,y=d.Trunk,m=n(194).Widget,g=n(77).Widgets,_=n(41).SpaceView,v=n(40),b=(v.Action,v.ActionManager),w=n(211).Client,x=n(24).AudioManager,S=n(212).Cursor,T=n(10).Dimensions,k=n(18).Scrim,A=n(213).PointerTracker,E=n(214).FileSystemWidget,C=n(215).SlidesWidget,D=n(82).EditorWidget,O=n(219).SidebarWidget,M=n(220).ExplorerPanel,L=n(221).DependenciesPanel,P=n(35).Container,N=n(23);n(222),o.extendTag("element",(function(t){t.prototype.sref=function(){return this._sref||(this._sref=this.dataset("sref"))},t.prototype.setSref=function(t){return this._sref!=t&&this.dataset("sref",this._sref=t),this}}));var $=0;function R(t,e){var n=this;void 0===e&&(e={}),window.SP=n,n._data={},n._model=t,n._id=n._model.id,n._promises={},n._options=e,n._namespace="sp"+$++,n._randomIncr=0,n._stats={viewers:0},n._counters={ticks:0},n._client=new w(n),n._toucher=function(){return n.dirty()},n.setReadyState("init"),n.container().setController(n)}e.Space=R,R.prototype.options=function(t){return this._options},R.prototype.setOptions=function(t){return this._options=t,this},R.prototype.playlist=function(t){return this._playlist},R.prototype.setPlaylist=function(t){return this._playlist=t,this},R.prototype.stats=function(t){return this._stats},R.prototype.setStats=function(t){return this._stats=t,this},R.prototype.offset=function(t){return this._offset},R.prototype.setOffset=function(t){return this._offset=t,this},R.prototype.trunk=function(t){return this._trunk},R.prototype.setTrunk=function(t){return this._trunk=t,this},R.prototype.branch=function(t){return this._branch},R.prototype.setBranch=function(t){return this._branch=t,this},R.prototype.cursor=function(t){return this._cursor},R.prototype.setCursor=function(t){return this._cursor=t,this},R.prototype.__agent={watch:"agentDidSet",name:"agent"},R.prototype.agent=function(t){return this._agent},R.prototype.setAgent=function(t){var e=this.agent();return t!=e&&(this._agent=t),t!=e&&this.agentDidSet&&this.agentDidSet(t,e,this.__agent),this},R.prototype.__timeline={watch:"timelineDidSet",name:"timeline"},R.prototype.timeline=function(t){return this._timeline},R.prototype.setTimeline=function(t){var e=this.timeline();return t!=e&&(this._timeline=t),t!=e&&this.timelineDidSet&&this.timelineDidSet(t,e,this.__timeline),this},R.prototype.__annotation={watch:"annotationDidSet",name:"annotation"},R.prototype.annotation=function(t){return this._annotation},R.prototype.setAnnotation=function(t){var e=this.annotation();return t!=e&&(this._annotation=t),t!=e&&this.annotationDidSet&&this.annotationDidSet(t,e,this.__annotation),this},R.prototype.widgets=function(t){return this._widgets},R.prototype.setWidgets=function(t){return this._widgets=t,this},R.prototype.files=function(t){return this._files},R.prototype.setFiles=function(t){return this._files=t,this},R.prototype.observers=function(t){return this._observers},R.prototype.setObservers=function(t){return this._observers=t,this},R.prototype.recording=function(t){return this._recording},R.prototype.setRecording=function(t){return this._recording=t,this},R.prototype.unauthorized=function(t){return this._unauthorized},R.prototype.setUnauthorized=function(t){return this._unauthorized=t,this},R.prototype.fs=function(t){return this._fs},R.prototype.setFs=function(t){return this._fs=t,this},R.prototype.layout=function(t){return this._layout},R.prototype.setLayout=function(t){return this._layout=t,this},R.prototype.console=function(t){return this._console},R.prototype.setConsole=function(t){return this._console=t,this},R.prototype.simulator=function(t){return this._simulator},R.prototype.setSimulator=function(t){return this._simulator=t,this},R.prototype.inspector=function(t){return this._inspector},R.prototype.setInspector=function(t){return this._inspector=t,this},R.prototype.browser=function(t){return this._browser},R.prototype.setBrowser=function(t){return this._browser=t,this},R.prototype.pointerTracker=function(t){return this._pointerTracker},R.prototype.setPointerTracker=function(t){return this._pointerTracker=t,this},R.prototype.primaryEditor=function(t){return this._primaryEditor},R.prototype.setPrimaryEditor=function(t){return this._primaryEditor=t,this},R.prototype.explorerPanel=function(t){return this._explorerPanel},R.prototype.setExplorerPanel=function(t){return this._explorerPanel=t,this},R.prototype.dependenciesPanel=function(t){return this._dependenciesPanel},R.prototype.setDependenciesPanel=function(t){return this._dependenciesPanel=t,this},R.prototype.slides=function(t){return this._slides},R.prototype.setSlides=function(t){return this._slides=t,this},R.prototype.sidebar=function(t){return this._sidebar},R.prototype.setSidebar=function(t){return this._sidebar=t,this},R.prototype.readyState=function(t){return this._readyState},R.prototype.setReadyState=function(t){return this._readyState=t,this},R.prototype.client=function(t){return this._client},R.prototype.setClient=function(t){return this._client=t,this},R.load=async function(t,e){(""+t).match(/^\d+$/)&&(t="cast-"+t);var n=await e.load(t);return await(n.pub||n.draft||n.fetch()),n&&404!=n.CODE?new this(n,{api:e}):null},R.prototype.id=function(){return this._model.id},R.prototype.model=function(){return this._model},R.prototype.data=function(){return this._data},R.prototype.namespace=function(){return this._namespace},R.prototype.state=function(){return this.model().state},R.prototype.type=function(){return this.model().type},R.prototype.uid=function(){return this.model().uid},R.prototype.touch=function(t){this._counters[t]||(this._counters[t]=0);return this._counters[t]+=1,this._dirty=!0,this},R.prototype.counter=function(t){return this._counters[t]||0},R.prototype.isEditing=function(){return this.branch().isEditing()},R.prototype.actions=function(){return this._actions||(this._actions=new b(this))},R.prototype.api=function(){return this._options.api},R.prototype.container=function(){return P.instance()},R.prototype.audio=function(){return x.instance()},R.prototype.space=function(){return this},R.prototype.branch=function(){return this.cursor().branch()},R.prototype.emit=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return r.emit(this,t,i)},R.prototype.on=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return r.listen.apply(r,[].concat([this,t],Array.from(i)))},R.prototype.once=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return r.once.apply(r,[].concat([this,t],Array.from(i)))},R.prototype.un=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return r.unlisten.apply(r,[].concat([this,t],Array.from(i)))},R.prototype.bundleFile=async function(t){void 0===t&&(t="/index.pack.js");let e=this.toRunStaticSnapshot(),n=await window.fetch("/rpc/bundle"+t,{headers:{"Content-Type":"application/json"},mode:"cors",method:"POST",body:JSON.stringify(e)});return await n.json()},R.prototype.oncontainermessage=async function(t,e){if("getState"==t.type)return e({data:this.toRunStaticSnapshot()});if("request"==t.type)return this.browser().node().oncontainermessage(t,e),e({data:{history:this.browser().node().history().state(),tracker:document.location.origin+"/__sw__tracker.js"}});if("resolveFile"==t.type){let n=this.browser().rootPath()+t.path.replace(/^\//,""),i=this.fs().find(n);if(n.match(/pack\.js|scss\.css|sass\.css/))try{let i=await this.bundleFile(n);return void(i&&e({type:"file",path:t.path,data:i}))}catch(t){console.error(t)}return!i&&this.browser().catchallPath()&&(i=this.fs().find(this.browser().rootPath()+this.browser().catchallPath())),e(i?{type:"file",path:t.path,data:{path:i.path(),name:i.name(),body:i.currentBody(),blobId:i.blobId()}}:{data:null})}},R.prototype.log=function(){for(var t,e=arguments,n=e.length,i=new Array(n>0?n:0);n>0;)i[n-1]=e[--n];return(t=this.api()).log.apply(t,[].concat(["space"],Array.from(i)))},R.prototype.async=function(t){var e=this;e._asyncTriggers||(e._asyncTriggers={});var n=e._asyncTriggers[t]||(e._asyncTriggers[t]=function(){return e[t]()});return r.TICKER.add(n),e},R.prototype.generateRandomId=function(){return this._randomIncr+++""+a.uuid().substr(0,8)},R.prototype.timelineDidSet=function(t,e){var n,i;return(n=e)&&n.deactivate&&n.deactivate(),(i=t)&&i.activate&&i.activate(),this.dirty()},R.prototype.getAnchor=function(){return this.primaryEditor().view().currentCodeAnchor("object")},R.prototype.gotoAnchor=function(t){var e=this;let n,i={},r=t.split(".");(n=r.shift())&&(i.index=parseInt(n)),(n=r.shift())&&(i.offset=parseInt(n)),(n=r.shift())&&(i.wid=parseInt(n)),(n=r.shift())&&(i.selection=h.decodeRangeString(n));try{let n=e.branch().stream().actions()[i.index];console.log("action",n);let r=n.offset()+i.offset;e.timeline().pause(),e.timeline().seek(r),e.tick();e.primaryEditor().currentFile();let s=e.widgets().get(i.wid);e.agent().setFile(s);var o={range:i.selection,options:{className:"question",stickiness:1,isWholeLine:!!i.selection[4],hoverMessage:{value:"Highlight"},glyphMarginClassName:"question",linesDecorationsClassName:"question",marginClassName:"question"}};return s.deltaDecorations(t,[o]),e.cursor().once("sync:start",(function(){return s.deltaDecorations(t,[]),e.agent().options().discardLocals(["file"])}))}catch(t){return console.warn("error",t)}},R.prototype.annotationDidSet=async function(t,e){var n,i,r=this;r.log("annotationDidSet",t);r._preAnnotationAnchor;if(r._preAnnotationAnchor={branch:r.branch(),offset:r.timeline().currentOffset()},e&&(n=r.agent().file())&&n.deltaDecorations&&n.deltaDecorations(e.id,[]),t){if(await r.navigateTo(t.cast()),t){var o=t.anchor||{};let e=h.decodeURI(o.uri);if(("number"==typeof(i=t.offset)||i instanceof Number)&&(r.timeline().pause(),r.timeline().seek(t.offset),r.tick()),e&&e.path&&e.selection){let n=r.space().fs().find(e.path);r.agent().setFile(n);var s={range:e.selection,options:{className:"question",stickiness:1,isWholeLine:!!e.selection[4],hoverMessage:{value:t.body||"Highlight"},glyphMarginClassName:"question",linesDecorationsClassName:"question",marginClassName:"question"}};n.deltaDecorations(t.id,[s])}r.cursor().once("sync:start",(function(){var e;if((e=r.agent().file())&&e.deltaDecorations&&e.deltaDecorations(t.id,[]),r.annotation()==t)return r.setAnnotation(null),null}))}return r}},R.prototype.clone=function(t){void 0===t&&(t={}),this.log("clone",t);var e=f.modelDataFromEvent(this.cursor().current()),n=this.cursor().branch().toSnapshot();e.title=this.model().title,e.state="draft",e.privacy="public",e.type="tutorial",e.parent_id=this.branch().model().id,e.snapshot=n;let i=this.branch();for(;!i.model().isPersisted();)i=i.parent();return i&&(e.parent_id=i.model().id),e},R.prototype.fork=async function(t){var e=this;return void 0===t&&(t={}),await e.api().tryLogin()?(e.navigateTo(e.trunk()),e.trunk().upsertResponse().then((function(t){return e.navigateTo(t)}))):window.alert("Not allowed to fork without logging in")},R.prototype.simulator=function(){return this.__lookup(c.SIMULATOR)},R.prototype.setup=function(){var t=this;return t._promises.setup||(t._promises.setup=new Promise((function(e,n){t.setReadyState("setup"),t._offset=0,t._widgets=new g(t),t._files=new l(t),t._observers=new l(t),t._trunk=new y(t,null,t.model()),t._cursor=new S(t),t._pointerTracker=new A(t),t.setLayout(t.widgets().add(t.widgets().create("layout",{id:c.WORKSPACE}))),t.setConsole(t.widgets().add(t.widgets().create("console",{id:c.CONSOLE}))),t.setInspector(t.widgets().add(t.widgets().create("inspector",{id:c.INSPECTOR}))),t.setAgent(t.widgets().add(t.widgets().create("agent",{id:c.AGENT}))),t.setFs(t.widgets().add(new E(t,{id:c.FS,expanded:!0}))),t.setPrimaryEditor(t.widgets().add(new D(t,{id:c.PRIMARY_EDITOR}))),t.setSidebar(t.widgets().add(new O(t,{id:c.SIDEBAR}))),t.setExplorerPanel(t.widgets().add(new M(t,{id:c.EXPLORER_PANEL}))),t.setDependenciesPanel(t.widgets().add(new L(t,{id:c.DEPENDENCIES_PANEL}))),t.setSlides(t.widgets().add(new C(t,{id:c.SLIDES})));var i=T.build({left:684,top:Math.round(140.4),width:300,height:300,vw:1024,vh:768,scaleX:100,scaleY:100,targetRef:c.BROWSER}).round();return t.setBrowser(t.widgets().add(t.widgets().create("browser",{id:c.BROWSER,layout:i._data,url:"index.html"}))),t.setTimeline(t.trunk().timeline()),t.view().render(),e(t)})))},R.prototype.load=function(){var t=this;return t._promises.load||(t._promises.load=new Promise((async function(e){return await t.setup(),await t.trunk().load(),t.view().render(),t.setReadyState("complete"),r.ticker().add(t),r.listen(r,"commit",t._toucher),t.trunk().canRecord()&&t.audio().devices(),e(t)})))},R.prototype.isEditing=function(){return this.branch().isEditing()},R.prototype.isRecording=function(){return this.branch().isRecording()},R.prototype.isWatching=function(){return this.branch().isWatching()},R.prototype.isPlaying=function(){return this.branch().isPlaying()},R.prototype.isLive=function(){return this.branch().isLive()},R.prototype.isPaused=function(){return this.branch().isPaused()},R.prototype.isAnnotating=function(){return this.branch().isAnnotating()},R.prototype.resolveBranchForModel=function(t){var e=this._trunk.model();return t==e?Promise.resolve(this._trunk):t.parent_id==e.id?this._trunk.loadChildBranch(t):void 0},R.prototype.navigateTo=function(t,e){var n=this;return t instanceof k?(n.log("resolve branch for model",t),n._isNavigating=!0,n.resolveBranchForModel(t).then((function(t){return n._isNavigating=!1,n.navigateTo(t,e)}))):(n.log("navigate to branch",t),t!=n.branch()&&(n.api().sendTracking(N.TYPES.BRANCH,[t.id()]),t.enter(),e&&t.setMode(e)),n)},R.prototype.sendStats=function(){var t=this.timeline().stats();return h.compare(t,this._sentStats)||0==t.played||(this._sentStats=t,this._sentStatsAt=Date.now()),this},R.prototype.apply=function(t){},R.prototype.revert=function(t){},R.prototype.reset=function(t){return this.deserialize(t,{}),this},R.prototype.synced_=function(){return this},R.prototype.createWidget=function(t,e){return void 0===e&&(e={}),t.id||(t.id=this.widgets().getNextId()),this.branch().push_(p.WIDGET_CREATE,[0,t],e)},R.prototype.createBranch=function(){return this.branch().push_(p.BRANCH,[])},R.prototype.__push=function(t,e){var n;if(void 0===e&&(e={}),n=this.cursor().stack()[0])return n.addSubAction(t,this.cursor());t.LOCAL=e;let i=this.cursor().branch();if(!this.cursor().canPush(t)){if(i.isWatching()&&i.canContribute()&&!this.cursor().current()._next)return this.log("could be able to contribute??",t),i.addLocalEvent(t,e),t;var r=f.branchFromEvent(this.cursor().current());return this.api().analytics().castBranch(this.id(),this.type()),r.head()&&this.cursor().sync(r.head()),this.client().flushLocals(),r.addLocalEvent(t,e),this.api().sendTracking(N.TYPES.BRANCH,[r.id()]),this.view().dispatch("scrimbranch",r),t}return this.cursor().canPush(t)?(this.cursor().branch().addLocalEvent(t,e),this._dirty=!0):(t.discard(),this.log("CANNOT __push",t)),t},R.prototype.__lookup=function(t,e){var n;return void 0===e&&(e=0),t instanceof Array?(n=this.widgets().get(t[e++]),e==t.length?n:n.__lookup(t,e)):this.widgets().get(t)},R.prototype.record=function(t){return this.log("start recording!",t),this.cursor().branch().record(t),this},R.prototype.serialize=function(t){void 0===t&&(t={});var e={id:this.id(),index:this.stream().index()},n=this.widgets().map((function(n){if(!(t.exclude&&r.indexOf(n.TYPE,t.exclude)>=0))return n.serialize(t,e)}));return e.widgets=n.filter((function(t){return t})),e},R.prototype.deserialize=function(t,e){this._deserialized=!0;var n={event:e,items:[],stack:[this]};for(let r,o=0,s=i((t=h.clone(t)).widgets),a=s.length;o<a;o++)r=s[o],"audio"!=r.type&&m.load(this,r,e).deserialize(r,n);for(let t=0,e=i(n.items),r=e.length;t<r;t++)e[t].deserialized(n);return this},R.prototype.isDeserialized=function(){return!!this._deserialized},R.prototype.dirty=function(){return this._dirty=!0},R.prototype.syncWithContainer=function(){var t=this.toRunStaticSnapshot();return this.container().send({type:"snapshot",data:t})},R.prototype.toRunStaticSnapshot=function(){var t,e,n,r=[];for(let t,e=0,n=i(this.files()),o=n.length;e<o;e++)t=n[e],r.push({path:t.path(),body:t.body(),blobId:t.blobId(),ref:t.id()});return{files:r,npmPackages:(t=this.space().browser())&&t.npmPackages&&t.npmPackages(),rootPath:(e=this.space().browser())&&e.rootPath&&e.rootPath(),catchallPath:(n=this.space().browser())&&n.catchallPath&&n.catchallPath()}},R.prototype.tick=function(){var t,e,n;if("disposing"!=this.readyState()){this._counters.ticks++,(t=this.timeline())&&t.tick&&t.tick(),(e=this.branch())&&e.tick&&e.tick(),(n=this.pointerTracker())&&n.tick&&n.tick();var o=this._offset=this.timeline().currentOffset(),s=this._currentEvent;this.cursor().sync(this.cursor()._target,0);s!=this.cursor().current()&&(this._currentEvent=this.cursor().current(),this._dirty=!0),o!=this._lastOffset&&(this._lastOffset=o,this._dirty=!0),this.api()._touches!=this._lastApiTouches&&(this._lastApiTouches=this.api()._touches,this._dirty=!0);for(let t=0,e=i(this.observers()),n=e.length;t<n;t++)e[t].tick_(o,this);var a=this.branch().mode(),u=!1;if(a!=this._mode){let t=this._mode;u=!0,this._mode=a,this._dirty=!0,this.emit("viewmode",a,t)}return(this._dirty||this.timeline().isPlaying())&&(this._dirty=!1,this.view().render()),this.emit("ticked",o),r.ticker().add(this),(this._counters.ticks%400==0||u)&&this.sendStats(),this}},R.prototype.terminate=function(){var t,e;this.recording()&&this.recording().stop();for(let e=0,n=i(document.body.querySelectorAll(".Dialog."+this.id())),r=n.length;e<r;e++)(t=n[e]._tag)&&t.terminate&&t.terminate();return(e=this.timeline())&&e.pause&&e.pause(),this},R.prototype.dispose=function(){if(this.isDisposing())return this;this.setReadyState("disposing"),this.emit("dispose"),r.unlisten(r,"commit",this._toucher),this.tick=function(){};for(let t=0,e=i(this.widgets()),n=e.length;t<n;t++)e[t].dispose();return this._trunk&&this._trunk.dispose&&this._trunk.dispose(),this._view&&this._view.dispose&&this._view.dispose(),this._actions&&this._actions.dispose&&this._actions.dispose(),this._widgets=null,this.emit("disposed"),this.__listeners__=null,window.SP==this&&(window.SP=null),this},R.prototype.isDisposing=function(){return"disposing"==this.readyState()},R.prototype.isSyncing=function(){return this.cursor().syncing()},R.prototype.view=function(){this.$$||(this.$$={});return this._view||(this._view=this._view||s(_,this).flag("view")).setData(this).end()},R.prototype.pointer=function(){return this._view?this._view._pointer:null},R.prototype.vw=function(){return this.view().box().width},R.prototype.vh=function(){return this.view().box().height}},function(t,e,n){function i(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=n(0),o=r.createElementFactory(),s=n(1),a=s.ACTION,u=s.SCON,p=s.MSG,c=s.SPIV,h=n(3).Widget,l=n(185).Recording,d=n(189),f=d.AbsTimeline,y=d.PubTimeline,m=n(7).List,g=n(190).StreamSyncer,_=(n(11).StreamAction,n(19).StreamBuffer),v=n(191).Stream,b=n(18).Scrim,w=(n(193).LocalBranchDialog,n(4)),x=(n(8),n(23));function S(t,e,n){var i;if(this._space=t,this._parent=e,this._model=n,this._level=e instanceof S?e.level()+1:0,this._currentOffset=0,this._draft=n.draft||{start:0,cues:[],audio:[]},this._pub=n.pub,this._stream=new v(n.buffer(),this,this.seed()),this._branches=new m(this),this._ancestors=e?e.ancestors().concat(e):[],this._model.orig.branch=this,e&&e.branches().add(this,this.id()),n.pub&&(!this.isMine()||this.api().isEmbed()||this.api().isMobile())){var r=n.pub.audio?y:f;this.setTimeline((this.setPubTimeline(i=new r(this,this._pub)),i))}else this.setTimeline((this.setAbsTimeline(i=new f(this,this._draft)),i));this._currentOffset=this.timeline().currentOffset()}function T(){return S.apply(this,arguments)}r.subclass(S,h),e.Branch=S,S.register("branch"),S.modelDataFromEvent=function(t,e){void 0===e&&(e={});var n=t.branch(),i=(n.id(),n.timeline().currentOffset()),r=n.timeline().currentTime(),o=SCRIMBA_API.uid(),s=(n.space().model().title,{type:"note",title:"Note at "+w.msToStr(r),privacy:"secret",access:"guests",spiv:c,uid:window.store.uid,gid:window.store.course?window.store.course.id:void 0,parent_id:n.id(),parent_index:t.index(),parent_offset:i,created_at:new Date,edited_at:new Date,v:-2});o||(s.LOCAL=!0);for(let t,n,i=0,r=Object.keys(e),o=r.length;i<o;i++)n=r[i],t=e[n],s[n]=t;return s},S.modelFromEvent=function(t){var e=this.modelDataFromEvent(t);return b.build(e)},S.branchFromEvent=function(t){var e=this.modelFromEvent(t),n=t.branch().toSnapshot(),i=t.branch().api();i.sendTracking(x.TYPES.CREATE_BRANCH,[e.id,e.parent_id,e.parent_index,e.parent_offset]);var r=_.encode([-a.SNAPSHOT,[n],-a.LOCK,[i.sid(),i.uid()]]);e.buffer().add(r,0);var o=new this(t.branch().space(),t.branch(),e);return o._initialSnapshot=n,o._parentPlayState=t.branch().timeline().state(),o._isLoaded=!0,o.setMode("editing"),o.stream().sync({local:!0}),o},S.prototype.absTimeline=function(t){return this._absTimeline},S.prototype.setAbsTimeline=function(t){return this._absTimeline=t,this},S.prototype.pubTimeline=function(t){return this._pubTimeline},S.prototype.setPubTimeline=function(t){return this._pubTimeline=t,this},S.prototype.__timeline={watch:"timelineDidSet",name:"timeline"},S.prototype.timeline=function(t){return this._timeline},S.prototype.setTimeline=function(t){var e=this.timeline();return t!=e&&(this._timeline=t),t!=e&&this.timelineDidSet&&this.timelineDidSet(t,e,this.__timeline),this},S.prototype.level=function(t){return this._level},S.prototype.setLevel=function(t){return this._level=t,this},S.prototype.draft=function(t){return this._draft},S.prototype.setDraft=function(t){return this._draft=t,this},S.prototype.branches=function(t){return this._branches},S.prototype.setBranches=function(t){return this._branches=t,this},S.prototype.recording=function(t){return this._recording},S.prototype.setRecording=function(t){return this._recording=t,this},S.prototype.ancestors=function(t){return this._ancestors},S.prototype.setAncestors=function(t){return this._ancestors=t,this},S.prototype.currentOffset=function(t){return this._currentOffset},S.prototype.setCurrentOffset=function(t){return this._currentOffset=t,this},S.prototype.stream=function(t){return this._stream},S.prototype.setStream=function(t){return this._stream=t,this},S.prototype.id=function(){return this._model.id},S.prototype.api=function(){return this.space().api()},S.prototype.inspect=function(){return"Branch(id="+this.id()+")"},S.prototype.title=function(){return this.model().title||"Branch"},S.prototype.model=function(){return this._model},S.prototype.data=function(){return this._model},S.prototype.parent=function(){return this._parent},S.prototype.dispose=function(){return this._stream&&this._stream.dispose&&this._stream.dispose(),this._syncer&&this._syncer.dispose&&this._syncer.dispose(),this},S.prototype.tick=function(){return this},S.prototype.syncer=function(){return this._syncer||(this._syncer=new g(this.stream(),this))},S.prototype.head=function(){return this._stream.tail()},S.prototype.seed=function(){return this._seed||(this._seed=this._parent.stream().actionAtIndex(this.model().parent_index))},S.prototype.ancestors=function(){return this._ancestors},S.prototype.branch=function(){return this},S.prototype.setup=function(){return this},S.prototype.state=function(){return this.model().state},S.prototype.type=function(){return this.model().type||"cast"},S.prototype.pub=function(){return this.model().pub},S.prototype.markerView=function(){return this._markerView||(this._markerView=o("graph:branch-marker").flag("branch").flag("angled").setData(this).end())},S.prototype.isInScope=function(){for(var t=this.space().branch();t;){if(t==this)return!0;t=t.parent()}return!1},S.prototype.isPublished=function(){return this.model().isPublished()},S.prototype.isLocked=function(){return this.isPublished()},S.prototype.isSignificant=function(){return this.stream().duration()>0},S.prototype.isTemplate=function(){return"template"==this.type()},S.prototype.isLab=function(){return"lab"==this.type()},S.prototype.isNote=function(){return"note"==this.type()},S.prototype.isFork=function(){return"fork"==this.type()},S.prototype.isTutorial=function(){return"tutorial"==this.type()},S.prototype.isLocal=function(){return this.model().isLocal()},S.prototype.isMine=function(){return this.model().uid==this.api().uid()||this.isLocal()},S.prototype.isActive=function(){return this.space().branch()==this},S.prototype.isCurrentBranch=function(){return this.space().branch()==this},S.prototype.isEnded=function(){return"ended"==this.state()},S.prototype.currentNestingLevel=function(){return this.space().cursor().branches().indexOf(this)},S.prototype.setMode=function(t){return this.timeline().setState(t)},S.prototype.mode=function(){return this.timeline().state()},S.prototype.isEditing=function(){return this.timeline().isEditing()},S.prototype.isRecording=function(){return this.timeline().isRecording()},S.prototype.isWatching=function(){return this.timeline().isWatching()},S.prototype.isPlaying=function(){return this.timeline().isPlaying()},S.prototype.isPaused=function(){return this.timeline().isPaused()},S.prototype.isAnnotating=function(){return this.timeline().isAnnotating()},S.prototype.isLive=function(){return this.timeline().isLive()},S.prototype.isForkable=function(){return"fork"!=this.type()&&(!this.isLab()||!this.isMine())&&this.model().isForkable()},S.prototype.hasUnsavedChanges=function(){return this.model().isLocal()||this._unsavedChanges},S.prototype.hasUnpublishedChanges=function(){return!this.model().pub||this.model().draft&&!u.compare(this.model().draft.cues,this.model().pub.cues)},S.prototype.hasRecordings=function(){return i(this.stream().recordings())>0},S.prototype.hasDuration=function(){return this.hasRecordings()||this.draft().end},S.prototype.canContribute=function(){return this.isLocal()||this.model().hasMember(this.api().uid())},S.prototype.canEdit=function(){return this._isLoaded&&(this.isLocal()||this.stream().currentSID()==this.api().sid())},S.prototype.canPush=function(t){return this.isEditing()&&this.space().cursor().current()==this.head()&&this.stream().canPush(t)},S.prototype.canPublish=function(){return(this.canContribute()||this.api().user()&&this.api().user().isAdmin())&&!this.isLocal()&&this.hasRecordings()&&!this.isTemplate()&&this.hasUnpublishedChanges()&&!this.hasUnsavedChanges()&&!this.api().isMobile()},S.prototype.canUnpublish=function(){return this.isPublished()&&(this.canContribute()||this.api().user()&&this.api().user().isAdmin())&&!this.isLocal()&&this.hasRecordings()&&!this.isTemplate()&&!this.api().isMobile()},S.prototype.canPrepare=function(){return this.canContribute()&&!this.hasRecordings()},S.prototype.canAnnotate=function(){return(this.canContribute()||this.api().user()&&this.api().user().isMod())&&this.hasRecordings()&&!this.api().ua().isPhone()&&this.timeline()instanceof f},S.prototype.canRecord=function(){return this.canContribute()&&!this.isLocked()&&!this.isTemplate()&&!this.isLocal()&&!this.isLab()&&(!this._parent||!this._parent.isLab())&&!this.api().isMobile()},S.prototype.canSave=function(){return this.isActive()&&this.canContribute()&&this.hasUnsavedChanges()&&this.api().uid()},S.prototype.checkIntegrity=async function(){var t=await this.api().rpc("castCheckIntegrity",[this.id()]);return console.log("result from integrity",t),t},S.prototype.ensureIntegrity=async function(){return Promise.resolve({issues:[]})},S.prototype.addLocalEvent=function(t,e){void 0===e&&(e={});var n=this.stream().write(t,e);return n?(this.forceToEnd(),this.syncer().schedule(),this.isWatching()&&this.setMode("editing"),n):(console.warn("action rejected by stream"),void t.discard())},S.prototype.forceToEnd=function(){var t;return(t=this.head())&&this.space().cursor().sync(t),this},S.prototype.currentOffset=function(){return-1==this._currentOffset?this._stream.duration()||0:this._currentOffset},S.prototype.didEnter=function(t){var e=this;return e.parent()&&(e.parent().setCurrentOffset(e.model().parent_offset),e.parent().didEnter(),t==e.parent()&&e.parent().isPlaying()&&e.parent().timeline().pause(),e.isWatching()&&e.isMine()&&e.canPrepare()&&setTimeout((function(){return e.startEditing()}),20)),e},S.prototype.didLeave=function(t){this.isEditing()&&this.setMode("watching");this.isInScope();if(!this.isInScope())return this.parent()?this.parent().didLeave(t):void 0},S.prototype.enter=function(){return this.isActive()||(this.space().setTimeline(this.timeline()),this.space().tick()),this},S.prototype.leave=function(){if(this.isActive())return this.space().navigateTo(this.parent())},S.prototype.discard=function(){let t=this.isActive(),e=this.parent();return this.timeline().isEditing()&&this.timeline().setState("watching"),e&&this.parent().branches().remove(this),this.isMine()&&this.model().del(!0),this.branch()._parentPlayState&&this.parent().timeline().setState(this.branch()._parentPlayState),t&&e&&e.enter(),this},S.prototype.load=async function(){var t=this;return t.isLocal()?(t.stream().sync(),t._isLoaded=!0,Promise.resolve(t)):(t.model().isLocal()||(t._myFork=t.model().branches().filter((function(e){return"fork"==e.type&&e.uid==t.api().uid()}))[0]),t._isLoaded&&t.log("already loaded!"),await t.model().fetchStreamBuffer(t.api()),t.api().log("streamsync",t.timeline().currentOffset()),t.stream().actionAtOffset(t.timeline().currentOffset()),t.timeline().isLive(),t.stream().sync(),t._isLoaded=!0,t.api().log("streamsync"),t)},S.prototype.flattenStream=function(){var t=this.toSnapshot();return[p.STREAMFLATTEN,this.id(),t]},S.prototype.seedOffset=function(){return this.model().parent_offset},S.prototype.refreshBranches=function(){return this},S.prototype.loadChildBranch=function(t){return this._branches.has(t.id)?Promise.resolve(this._branches.get(t.id)):new S(this.space(),this,t).load()},S.prototype.widgets=function(){return this.space().widgets()},S.prototype.record=async function(t){var e;return void 0===t&&(t={}),this.canRecord()?(await("number"==typeof(e=t.offset)||e instanceof Number?this.trimToTimeOffset(t.offset):Promise.resolve(this)),this.forceToEnd(),new l(this,t).start()):Promise.reject("Not allowed to record")},S.prototype.trimToTimeOffset=function(t){var e=this.stream().actionAtOffset(t);return this.trimToAction(e,t)},S.prototype.trimToAction=function(t,e,n){var i=this;return new Promise((function(r,o){("number"==typeof t||t instanceof Number)&&(t=i.stream().actionAtIndex(t)),e||(e=t.timeOffset());var s=Math.max(e-t.timeOffset(),0);i.space().cursor().sync(t),i.stream().buffer().trim(t._byteEnd);var u=[[p.STREAMTRIM,i.id(),t._byteEnd,i.stream().currentSID()||""]];return i.log("trimToTimeOffset",e,t,u),(n||s)&&u.push(s||0,-a.TRIM,[]),i.api().send(_.encode(u),(function(t){let n=i.timeline().cues().trimCuesAndAudio(e);return i.log("responded from trim",t,n),i.model().save({draft:i.draft()}),r(i)})),i}))},S.prototype.toSnapshot=function(t){void 0===t&&(t={});var e={},n=this.space().cursor().current();if(t.local=!0,n.branch()!=this)throw n;e.seed=[this.model().id,n.index()||0,Math.round(this.timeline().currentOffset())],e.spiv=c;var i=this.widgets().map((function(n){if(!(t.exclude&&r.indexOf(n.TYPE,t.exclude)>=0))return n.serialize(t,e)}));return e.widgets=i.filter((function(t){return t})),e},S.prototype.lock=function(t){return this.stream().lock(),this.stream().sync(),t&&t(null,!0)},S.prototype.startEditing=function(){var t=this;return t.lock((function(){if(t.canPrepare())return t.setMode("editing"),setTimeout((function(){return t.space().view().editor().focus()}),50)})),t},S.prototype.stopEditing=function(){if(!this.isEditing())throw this;return this.isTemplate()&&this.head().type()!=a.SNAPSHOT&&this.push_(a.SNAPSHOT,[this.toSnapshot()]),this.setMode(this.isRecording()?"paused":"watching"),this},S.prototype.stopRecording=function(){if(this.recording())return this.recording().stop()},S.prototype.myFork=function(){var t=this;return t.isLab()&&t.isMine()?t:t._myFork||(t._myFork=t.model().branches().filter((function(e){return"fork"==e.type&&e.uid==t.api().uid()}))[0])},S.prototype.upsertResponse=async function(){if(this.myFork())return Promise.resolve(this.myFork());if(this.isLab()&&this.isMine())return Promise.resolve(this);if("challenge"!=this.type()&&"lab"!=this.type())return Promise.resolve(null);if(this.space().trunk().model().uid==this.api().uid())return Promise.resolve(null);var t=this.toSnapshot(),e=await this.api().rpc("castRespond",[this.space().trunk().id(),t],{models:!0});return this._myFork=e,e},S.prototype.startAnnotating=function(){if(this.canAnnotate())return this._frozenDraft=JSON.stringify(this.draft()),this.log("startAnnotating"),this.timeline().setIsAnnotating(!0),this},S.prototype.finishAnnotating=async function(t){var e=this;return console.log("finishAnnotating",t),JSON.stringify(e.draft())!=e._frozenDraft&&await e.model().update({draft:e._draft}),e.timeline().setIsAnnotating(!1),setTimeout((function(){return e.space().view().render()}),0),e},S.prototype.cancelAnnotating=function(){var t=this;t.timeline().setIsAnnotating(!1);let e=JSON.parse(t._frozenDraft);return t._draft=t.model().draft=e,t.timeline().loadCues(e),setTimeout((function(){return t.space().view().render()}),0),t},S.prototype.persist=async function(){if(this.model().isLocal()){await this.model().persist();await this.syncer().persist(!0)}return this.model()},S.prototype.save=async function(t){void 0===t&&(t={});var e=this.model().isLocal();await this.api().tryLogin(),this.draft().end=this.stream().duration();var n={draft:this._draft};for(let e,i,r=0,o=Object.keys(t),s=o.length;r<s;r++)i=o[r],e=t[i],n[i]=e;if(!e&&this.model().uid||n.uid||(n.uid=this.api().uid()),!this.api().uid())throw"not allowed to save unless logged in";return this.model().uid||(n.uid=this.api().uid()),await this.model().update(n),await this.syncer().persist(!0),this},S.prototype.publish=async function(t){void 0===t&&(t={}),await this.save(!0);var e=await this.ensureIntegrity();if(i(e.issues))return console.log("HAS ISSUES!!!",e),Promise.resolve({error:"issues with publish!"});t.end=this.stream().duration(),await this.save(!0);let n=await window.$api.post("/scrims/"+this.id()+"/publish",{});return console.log("returned from publish",n),this},S.prototype.unpublish=async function(){return await this.save({pub:null,published_at:null}),await this.model().fetch(),this.model().pub=null,this.model().published_at=null,this},S.prototype.__uid=function(){return 0},r.subclass(T,S),e.Trunk=T,T.prototype.seed=function(){return null}},function(t,e,n){var i=n(1),r=(i.WIDGET,i.SCON),o=i.ACTION;i.KEYS;function s(){}function a(t){this._widget=t,this._changes={},this._dirty=!1,this._v=0}s.compare=function(t,e){return t==e},e.WidgetOptions=a,a.prototype.widget=function(t){return this._widget},a.prototype.setWidget=function(t){return this._widget=t,this},a.prototype.raw=function(){return this._widget._data},a.prototype.schema=function(){return this._widget._schema_||(this._widget._schema_={})},a.prototype.version=function(){return this._v},a.prototype.api=function(){return this._widget.api()},a.prototype.space=function(){return this._widget.space()},a.prototype.touch=function(t){return this._v++,this._widget.space().isSyncing()||this._widget&&this._widget.optionsDidUpdate&&this._widget.optionsDidUpdate(t),this},a.prototype.locals=function(){return this._locals||(this._locals=this._widget.space().client().optionsForItem(this._widget))},a.prototype.get=function(t,e){void 0===e&&(e=this._locals),1!=e&&void 0!==e||(e=this._locals);var n=e?e[t]:void 0,i=null!=n?n:this.raw()[t];return this.deserializedValueFor(this.schema()[t],i)},a.prototype.reset=function(t){return this.locals()[t]&&(this.locals()[t],delete this.locals()[t],this.space().touch("locals")),this},a.prototype.set=function(t,e){if(t instanceof Object){for(let e,n,i=0,r=Object.keys(t),o=r.length;i<o;i++)n=r[i],e=t[n],this.set(n,e);return this}let n=this.schema()[t]||{},i=n.type,a=i&&i.equals||s.compare;var u=e&&e.valueOf?e.valueOf("option"):this.serializedValueFor(this.schema()[t],e),p=this.raw()[t],c=this._locals?this._locals[t]:void 0;let h;if(!this.space().isEditing()){let e=n&&n.overridable||n.override;if(e)return a(c,u)||(this.locals()[t]=u,this.touch(),this.space().touch("locals"),"pause"==e&&this.space().isPlaying()&&this.space().timeline().pause()),this}if(null!=c&&(this.locals()[t],delete this.locals()[t]),a(u,p))return this;if(i&&i.diff&&(h=i.diff(p,u),!h))return this;let l=r.keyToRef(t);return n.action&&u instanceof Array?this._widget.push_(n.action,u):p&&h?this._widget.push_(o.PATCH,[this.widget().__uid(),l,h]):this._widget.push_(o.SET,[this.widget().__uid(),l,u]),this},a.prototype.proxy=function(t){var e=this;return e._proxies||(e._proxies={}),e._proxies[t]||(e._proxies[t]={name:t,schema:e.schema()[t],value:function(n){return e.get(t,n)},setValue:function(n){return e.set(t,n)}})},a.prototype.discardLocals=function(t){if(this._locals){var e,n={};for(let e,i,r=this._locals,o=0,s=Object.keys(r),a=s.length;o<a;o++)i=s[o],e=r[i],t&&-1==t.indexOf(i)||(e!=this.raw()[i]&&(n[i]=e),this._locals[i],delete this._locals[i]);return(e=Object.keys(n))&&(e.len instanceof Function?e.len():e.length)&&this.touch(n),this}},a.prototype.synced_=function(){return this._dirty?(this._widget.optionsDidUpdate(this._changes),this._changes={},this._dirty=!1,this):this},a.prototype.flush=function(){return this},a.prototype.serializedValueFor=function(t,e){return t&&"widget"==t.type&&e&&e.__uid?e.__uid():e},a.prototype.deserializedValueFor=function(t,e){return t&&"widget"==t.type?this._widget.space().__lookup(e):void 0===e&&null!=t.default?t.default:e}},function(t,e,n){var i=n(0),r=i.createTagCache,o=i.createElementFactory(),s=i.createTagScope(),a=n(1),u=(a.MSG,a.ACTION),p=(a.CAST,n(4)),c=n(186),h=n(188).RecDoneDialog,l=n(70).MediaRecording,d=s.defineTag("VolumeMeter",(function(t){t.prototype.__decibel={watch:"decibelDidSet",name:"decibel"},t.prototype.decibel=function(t){return this._decibel},t.prototype.setDecibel=function(t){var e=this.decibel();return t!=e&&(this._decibel=t),t!=e&&this.decibelDidSet&&this.decibelDidSet(t,e,this.__decibel),this},t.prototype.build=function(){($_=this.$).$build$||($_.$build$=r(this));return this.$open("build0").setChildren(this._meter=this._meter||o("div",this).flag("meter"),2).synced()},t.prototype.decibelDidSet=function(t){let e=Math.min(Math.max(0,t+100),100)/100;return this._meter.dom().style.transform="scaleX("+e+")",this}}));function f(t,e){void 0===e&&(e={}),this._branch=t,this._state="ready",this._options=e,this._live=e.live||!1,t.setRecording(this),this._startTimeOffset=t.currentOffset(),this._startTime=t.timeline().endTime(),this._draftEnd=t.draft().end,this._initialState=t.state()}e.Recording=f,f.prototype.branch=function(t){return this._branch},f.prototype.setBranch=function(t){return this._branch=t,this},f.prototype.state=function(t){return this._state},f.prototype.setState=function(t){return this._state=t,this},f.prototype.options=function(t){return this._options},f.prototype.setOptions=function(t){return this._options=t,this},f.prototype.audio=function(t){return this._audio},f.prototype.setAudio=function(t){return this._audio=t,this},f.prototype.live=function(t){return this._live},f.prototype.setLive=function(t){return this._live=t,this},f.prototype.startTimeOffset=function(t){return this._startTimeOffset},f.prototype.setStartTimeOffset=function(t){return this._startTimeOffset=t,this},f.prototype.space=function(){return this.branch().space()},f.prototype.log=function(){for(var t,e=arguments,n=e.length,i=new Array(n>0?n:0);n>0;)i[n-1]=e[--n];return(t=this.api()).log.apply(t,[].concat(["rec"],Array.from(i)))},f.prototype.api=function(){return this.space().api()},f.prototype.stream=function(){return this.branch().stream()},f.prototype.duration=function(){return this._startAt?(this._stopAt||Date.now())-this._startAt:0},f.prototype.startTime=function(){return this._startTime},f.prototype.currentTime=function(){return this.duration()},f.prototype.isRecording=function(){return"recording"==this.state()},f.prototype.volumeMeter=function(){this.$$||(this.$$={});return(this._volumeMeter=this._volumeMeter||o(d,this).flag("volumeMeter")).end()},f.prototype.controls=function(){this.$$||(this.$$={});return(this._controls=this._controls||o("div",this).flag("controls")).setContent(this.volumeMeter(),3)},f.prototype.start=function(){var t=this;return t._start||(t._start=new Promise((function(e,n){var i;t.space().setRecording(t),t._origin=t.space().cursor().current(),t._startTimeOffset=t.stream().lastTimeOffset(),t._isFirstRecording=0==((i=t.stream().recordings())&&(i.len instanceof Function?i.len():i.length)||0),t.api().analytics().castRecStart(t.branch().id()),t.setState("starting");var r=p.delay(100);t.options().mic&&(t.setAudio(window.MR=new l({chunkSize:2400,constraints:t.options().mic,space:t.space(),owner:t})),r=t.audio().start());return r.then((function(){t._startAt=t.audio()?t.audio().startedAt():Date.now(),t.setState("recording"),t.options().startTime=t._startAt,t.audio()&&(t._hark=c(t.audio().stream()),t._hark._stream=t.audio().stream(),t._hark.on("speaking",(function(){return!0})),t._hark.on("stopped_speaking",(function(){return!0})),t._hark.on("volume_change",(function(e){return t._volumeMeter&&t._volumeMeter.setDecibel(e)})),t.options().audiofile=t.audio()._model.toJSON());let n=[t.branch().toSnapshot({}),t.options()];return t.stream().anchorTime({offset:t._startTimeOffset,now:t._startAt}),t.stream().freezeTime(t._startAt,(function(){return console.log("setMode recording from",t.branch().mode()),t.branch().setMode("recording"),t._recEvent=t.branch().push_(u.RECSTART,n,{timeOffset:t._startTimeOffset}),t.space().view().focusViewport(),t.space().client().flushLocals(),t.space().pointerTracker().start(),e(t)})),t._interval=setInterval((function(){return t.branch().push_(u.PING,[Date.now()])}),1e4)}),(function(e){return t.space().setRecording(null),t.teardown(),n(e)})),t})))},f.prototype.onaudioerror=function(t){return console.log("audio-error!",t)},f.prototype.stop=async function(){return this._stopAt?this:(clearInterval(this._interval),this.setState("stopping"),this._stopAt=Date.now(),this.space().browser().stop(),this.space().pointerTracker().stop(),this.log("stop",this._stopAt),await(this.audio()?this.stopAudio():Promise.resolve({})),this._stopTimeOffset=Math.round(this._startTimeOffset+(this._stopAt-this._startAt)),this.stream().anchorTime({offset:this._stopTimeOffset,now:this._stopAt}),this._stopEvent=this.branch().push_(u.RECSTOP,[],{timeOffset:this._stopTimeOffset}),o(h).flag("modal").setData(this).end().show())},f.prototype.stopAudio=async function(){var t;return await(t=300,void 0===t&&(t=1e3),new Promise((function(e,n){return setTimeout(e,t)}))),await this.audio().stop(),this._hark&&(this._hark.stop(),this._hark=null),this._stopAt=this._startAt+this.audio().duration(),console.log("audio.duration",this.audio().duration()),this},f.prototype.discard=async function(){var t;return this.branch().timeline().pause(),await this.branch().trimToAction(this._origin),(t=this.audio())&&t.discard&&t.discard(),0==this.branch().timeline().duration()&&this.branch().timeline().setState("watching"),this.teardown(),this.api().analytics().castRecDiscard(this.branch().id()),Promise.resolve(this)},f.prototype.finish=async function(){await(this.audio()?this.audio().upload():{});if(this.audio()){var t=[1,this._startTimeOffset,this._stopTimeOffset-this._startTimeOffset,this.audio()._model.id];console.log("audioMarker",t,this.audio().duration(),this._stopTimeOffset-this._startTimeOffset),this.branch().draft().audio.push(t)}return this._isFirstRecording&&(this.branch().draft().start=this._startTimeOffset),this.branch().draft().end=this._stopTimeOffset,console.log("finishing",this._stopTimeOffset,this._startTimeOffset),await this.branch().save({}),this.setState("stopped"),this.branch().setMode("paused"),this.teardown(),i.Scheduler.event({type:"recstop"}),this.api().analytics().castRecSave(this.branch().id()),Promise.resolve(this)},f.prototype.teardown=function(){return clearInterval(this._interval),this.branch().state()!=this._initialState&&this.branch().model().update({state:this._initialState}),this.branch().setRecording(null),this.space().setRecording(null),null}},function(t,e,n){var i,r=n(187);"undefined"!=typeof window&&(i=window.AudioContext||window.webkitAudioContext);var o=null;t.exports=function(t,e){var n=new r;if(!i)return n;var s,a,u,p=(e=e||{}).smoothing||.1,c=e.interval||50,h=e.threshold,l=e.play,d=e.history||10,f=!0;o=e.audioContext||o||new i,(u=o.createAnalyser()).fftSize=512,u.smoothingTimeConstant=p,a=new Float32Array(u.frequencyBinCount),t.jquery&&(t=t[0]),t instanceof HTMLAudioElement||t instanceof HTMLVideoElement?(s=o.createMediaElementSource(t),void 0===l&&(l=!0),h=h||-50):(s=o.createMediaStreamSource(t),h=h||-50),s.connect(u),l&&u.connect(o.destination),n.speaking=!1,n.suspend=function(){return o.suspend()},n.resume=function(){return o.resume()},Object.defineProperty(n,"state",{get:function(){return o.state}}),o.onstatechange=function(){n.emit("state_change",o.state)},n.setThreshold=function(t){h=t},n.setInterval=function(t){c=t},n.stop=function(){f=!1,n.emit("volume_change",-100,h),n.speaking&&(n.speaking=!1,n.emit("stopped_speaking")),u.disconnect(),s.disconnect()},n.speakingHistory=[];for(var y=0;y<d;y++)n.speakingHistory.push(0);var m=function(){setTimeout((function(){if(f){var t=function(t,e){var n=-1/0;t.getFloatFrequencyData(e);for(var i=4,r=e.length;i<r;i++)e[i]>n&&e[i]<0&&(n=e[i]);return n}(u,a);n.emit("volume_change",t,h);var e=0;if(t>h&&!n.speaking){for(var i=n.speakingHistory.length-3;i<n.speakingHistory.length;i++)e+=n.speakingHistory[i];e>=2&&(n.speaking=!0,n.emit("speaking"))}else if(t<h&&n.speaking){for(i=0;i<n.speakingHistory.length;i++)e+=n.speakingHistory[i];0==e&&(n.speaking=!1,n.emit("stopped_speaking"))}n.speakingHistory.shift(),n.speakingHistory.push(0+(t>h)),m()}}),c)};return m(),n}},function(t,e){function n(){}t.exports=n,n.mixin=function(t){var e=t.prototype||t;e.isWildEmitter=!0,e.on=function(t,e,n){this.callbacks=this.callbacks||{};var i=3===arguments.length,r=i?arguments[1]:void 0,o=i?arguments[2]:arguments[1];return o._groupName=r,(this.callbacks[t]=this.callbacks[t]||[]).push(o),this},e.once=function(t,e,n){var i=this,r=3===arguments.length,o=r?arguments[1]:void 0,s=r?arguments[2]:arguments[1];function a(){i.off(t,a),s.apply(this,arguments)}return this.on(t,o,a),this},e.releaseGroup=function(t){var e,n,i,r;for(e in this.callbacks=this.callbacks||{},this.callbacks)for(n=0,i=(r=this.callbacks[e]).length;n<i;n++)r[n]._groupName===t&&(r.splice(n,1),n--,i--);return this},e.off=function(t,e){this.callbacks=this.callbacks||{};var n,i=this.callbacks[t];return i?1===arguments.length?(delete this.callbacks[t],this):(-1!==(n=i.indexOf(e))&&(i.splice(n,1),0===i.length&&delete this.callbacks[t]),this):this},e.emit=function(t){this.callbacks=this.callbacks||{};var e,n,i,r=[].slice.call(arguments,1),o=this.callbacks[t],s=this.getWildcardCallbacks(t);if(o)for(e=0,n=(i=o.slice()).length;e<n&&i[e];++e)i[e].apply(this,r);if(s)for(n=s.length,e=0,n=(i=s.slice()).length;e<n&&i[e];++e)i[e].apply(this,[t].concat(r));return this},e.getWildcardCallbacks=function(t){this.callbacks=this.callbacks||{};var e,n,i=[];for(e in this.callbacks)n=e.split("*"),("*"===e||2===n.length&&t.slice(0,n[0].length)===n[0])&&(i=i.concat(this.callbacks[e]));return i}},n.mixin(n)},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(2).Dialog,a=(n(20).LongPromise,n(4),o.defineTag("RecDoneDialog",s,(function(t){t.prototype.body=function(){let t;this.$$||(this.$$={});return this._body=this._body||(t=r("div",this)).flag("body").setContent([r("h2",t.$,"A",t).setText("Done recording"),r("p",t.$,"B",t).setText('Click "CONFIRM" to save your recording. If you don\'t want to save it, click "DISMISS".')],2)},t.prototype.onuxadismiss=function(){var t=this;return t.uxa().queue().add(300,(function(){return t.data().discard()}))},t.prototype.onuxasubmit=function(){var t=this;return t.uxa().queue().add(300,(function(){return t.data().finish()}))}})));e.RecDoneDialog=a},function(t,e,n){var i=n(0),r=n(1),o=(r.WIDGET,r.CAST,r.SCON,n(37).TimelineCues),s=n(24).AudioManager,a=(n(9).Delay,n(23)),u=0;function p(t,e,n){this._shouldScheduleAudio=0,this._branch=t,this._data=e,this._options=n,this._localRef=u++,e.start||(e.start=0),this._cues=new o(e),e.end||t.isLocked()?(this._initialOffset=e.start,this.anchorTime(this._initialOffset),this.setState("paused")):(this._initialOffset=this.endOffset(),this.anchorTime(this.endOffset()),this.setState("watching"))}function c(){return p.apply(this,arguments)}function h(t,e,n){h.prototype.__super__.constructor.apply(this,arguments),this._audioIsPlaying=!1,this._audioIsPaused=!0,this._audioWasPaused=0,this._playbackRate=this.space().api().sessionStore().getnum("playbackRate")||1,this.audio()}e.Timeline=p,p.prototype.branch=function(t){return this._branch},p.prototype.setBranch=function(t){return this._branch=t,this},p.prototype.data=function(t){return this._data},p.prototype.setData=function(t){return this._data=t,this},p.prototype.__active={default:!1,name:"active"},p.prototype.active=function(t){return this._active},p.prototype.setActive=function(t){return this._active=t,this},p.prototype._active=!1,p.prototype.__isAnnotating={default:!1,name:"isAnnotating"},p.prototype.isAnnotating=function(t){return this._isAnnotating},p.prototype.setIsAnnotating=function(t){return this._isAnnotating=t,this},p.prototype._isAnnotating=!1,p.prototype.__isBuffering={default:!1,watch:"isBufferingDidSet",name:"isBuffering"},p.prototype.isBuffering=function(t){return this._isBuffering},p.prototype.setIsBuffering=function(t){var e=this.isBuffering();return t!=e&&(this._isBuffering=t),t!=e&&this.isBufferingDidSet&&this.isBufferingDidSet(t,e,this.__isBuffering),this},p.prototype._isBuffering=!1,p.prototype.__playbackRate={watch:"playbackRateDidSet",default:1,name:"playbackRate"},p.prototype.playbackRate=function(t){return this._playbackRate},p.prototype.setPlaybackRate=function(t){var e=this.playbackRate();return t!=e&&(this._playbackRate=t),t!=e&&this.playbackRateDidSet&&this.playbackRateDidSet(t,e,this.__playbackRate),this},p.prototype._playbackRate=1,p.prototype.__loopSegment={watch:"loopSegmentDidSet",name:"loopSegment"},p.prototype.loopSegment=function(t){return this._loopSegment},p.prototype.setLoopSegment=function(t){var e=this.loopSegment();return t!=e&&(this._loopSegment=t),t!=e&&this.loopSegmentDidSet&&this.loopSegmentDidSet(t,e,this.__loopSegment),this},p.prototype.__state={watch:"stateDidSet",name:"state"},p.prototype.state=function(t){return this._state},p.prototype.setState=function(t){var e=this.state();return t!=e&&(this._state=t),t!=e&&this.stateDidSet&&this.stateDidSet(t,e,this.__state),this},p.prototype.cues=function(t){return this._cues},p.prototype.setCues=function(t){return this._cues=t,this},p.prototype.initialOffset=function(t){return this._initialOffset},p.prototype.setInitialOffset=function(t){return this._initialOffset=t,this},p.prototype.loadCues=function(t){return this._data=t,this._cues=new o(t)},p.prototype.space=function(){var t;return(t=this.branch())&&t.space&&t.space()},p.prototype.api=function(){return this.space()&&this.space().api()},p.prototype.isBufferingDidSet=function(t,e){var n=this;if(n.space().dirty(),n.log("isBuffering",t,e,e&&n.bufferingDuration()),n._isBuffering=e,n.anchorTime(),n._isBuffering=t,t){let t=n._bufferingSince;return n._bufferingSince=Date.now(),t||(n._bufferingSince-=260),setTimeout((function(){return n.space().dirty()}),252)}},p.prototype.isStalled=function(){return"playing"==this.state()&&this.isBuffering()&&this.bufferingDuration()>250},p.prototype.timeline=function(){return this},p.prototype.color=function(){return this.isRecording()?"red":this.isLive()?"yellow":"blue"},p.prototype.log=function(){for(var t,e=arguments,n=e.length,i=new Array(n>0?n:0);n>0;)i[n-1]=e[--n];if(this.api())return(t=this.api()).log.apply(t,[].concat(["timeline"],Array.from(i)))},p.prototype.mode=function(){return this.state()},p.prototype.isPlaying=function(){return"playing"==this.playState()},p.prototype.isPaused=function(){return"paused"==this.playState()},p.prototype.isSeeking=function(){return"seeking"==this.state()},p.prototype.isWatching=function(){return"watching"==this.state()},p.prototype.isRecording=function(){return"recording"==this.state()},p.prototype.isEditing=function(){return"editing"==this.state()||this.isRecording()},p.prototype.isLive=function(){return this.isWatching()||this.isEditing()},p.prototype.play=function(){return this.log("play",this.currentTime(),this.endTime()),!this.isPlaying()&&this.currentTime()>=this.endTime()&&this.seek(this.startOffset()),this.setState("playing").enter()},p.prototype.pause=function(){return this.setState("paused")},p.prototype.goLive=function(){return this.setState("live").enter()},p.prototype.ended=function(){if(this.pause(),this.space()&&!this.branch().parent())return this.space().view().trigger("spaceend"),this.space().view().dispatch("scrimend",this.branch())},p.prototype.playState=function(){return"seeking"==this.state()?this._prevState:this.state()},p.prototype.enter=function(){return this.space()&&this.space().setTimeline(this),this},p.prototype.setState=function(t){var e,n=this._state;if(n==t)return this;if(this.space().unauthorized())return this;var i=this.currentOffset(),r=this.currentTime();return this.anchorTime(i,r),this._wasLive=this.isLive(),this._prevState=n,this._state=t,this.trackPlayState(),this.enterState(t,n,i),(e=this.space())&&e.emit&&e.emit(t,this,n,i,r),this},p.prototype.enterState=function(t,e,n){return this.log(e+"->"+t),this._wasLive&&!this.isLive()&&this.liveLeave(),this[e+"Leave"]&&this[e+"Leave"](t,n),this.isLive()&&!this._wasLive&&this.liveEnter(),this[t+"Enter"]&&this[t+"Enter"](e,n),this},p.prototype.liveEnter=function(){return this},p.prototype.liveLeave=function(){return this},p.prototype.compute=function(){return this._cues.compute(),this},p.prototype.trackPlayState=function(){return this.api().sendTracking(a.TYPES.PLAYSTATE,[this._state,this.currentTime(),this.playbackRate()])},p.prototype.addMarker=function(t){return this._data.cues.push(t),this.compute()},p.prototype.removeMarker=function(t){var e=this._data.cues.indexOf(t);return e>=0&&this._data.cues.splice(e,1),this.compute(),this},p.prototype.span=function(){return this.data().end||this.branch().stream().duration()},p.prototype.duration=function(){return this.endTime()-this.startTime()},p.prototype.progress=function(){return this.currentTime()/this.duration()},p.prototype.bufferingDuration=function(){return this._bufferingSince?Date.now()-this._bufferingSince:0},p.prototype.timeToOffset=function(t){return Math.round(this.cues().timeToOffset(t+this.startTime()))},p.prototype.offsetToTime=function(t){return Math.round(this.cues().offsetToTime(t)-this.startTime())},p.prototype.offsetToProgress=function(t){return this.offsetToTime(t)/this.duration()},p.prototype.progressToOffset=function(t){return this.timeToOffset(this.duration()*t)},p.prototype.startOffset=function(){return this.data().start||0},p.prototype.endOffset=function(){return Math.max(this.data().end||0,this.span())},p.prototype.startTime=function(){return this.data().start?this.cues().offsetToTime(this.data().start):0},p.prototype.endTime=function(){return this.cues().offsetToTime(this.endOffset())},p.prototype.clampOffset=function(t){return Math.max(0,Math.min(t,this.endOffset()))},p.prototype.deactivate=function(){return this.setActive(!1),this.isPlaying()&&this.pause(),this},p.prototype.activate=function(){return this.anchorTime(),this.setActive(!0),this},p.prototype.anchorTime=function(t,e){return null==t&&(t=this.referenceOffset()),null==e&&(e=this.offsetToTime(t)),this._anchor={ts:Date.now(),offset:Math.round(t),elapsed:Math.round(e),speed:this.referencePlaybackRate()},this},p.prototype.currentTime=function(){return this.isLive()?this.offsetToTime(this.currentOffset()):"playing"!=this.state()||this.isBuffering()?this._anchor.elapsed:this._anchor.elapsed+Math.round((Date.now()-this._anchor.ts)*this._anchor.speed)},p.prototype.currentOffset=function(){return"scrubbing"==this.state()?this._scrubOffset:this.isLive()?this.branch().stream().duration():"playing"==this.state()?Math.round(Math.min(this.timeToOffset(this.currentTime()),this.endOffset())):this._anchor.offset},p.prototype.referenceTime=function(){return this.currentTime()},p.prototype.referenceOffset=function(){return this.currentOffset()},p.prototype.referencePlaybackRate=function(){return this.playbackRate()},p.prototype.scrub=function(t){return this.seek(t,!0)},p.prototype.skip=function(t){let e=Math.max(this.currentTime()+t,0);return this.seek(this.timeToOffset(e))},p.prototype.setProgress=function(t){return this.seek(this.progressToOffset(t))},p.prototype.seek=function(t,e){return void 0===e&&(e=!1),(t=this.clampOffset(t))==this._seekOffset&&Date.now()-this._seekAt<200&&e==this._seekScrub||(this._seekScrub=e,this._seekOffset=t,this._seekAt=Date.now(),this.syncSeek(t,e),this.unscheduleAudio(),this.branch().setCurrentOffset(t),this.enter(),this.isPlaying()&&this.scheduleAudio()),this},p.prototype.seekToEnd=function(){var t;return(t=this.branch().stream().tail())&&this.seek(t.timeOffset()),this},p.prototype.syncSeek=function(t,e){return this.anchorTime(t)},p.prototype.unscheduleAudio=function(){if(this._scheduledAudio)return s.instance().unscheduleClips(this._scheduledAudio),this._scheduledAudio=null},p.prototype.scheduleAudio=function(){return this},p.prototype.tick=function(){var t=this.currentOffset();return this.isPlaying()&&t>=this.endOffset()&&(this.anchorTime(t=this.endOffset()),this.ended()),this.branch().setCurrentOffset(t),this.space().cursor().target(this.targetEvent()),this},p.prototype.targetEvent=function(){return this.isLive()?(this.branch().stream().sync(),this.branch().head()):this.branch().stream().actionAtOffset(this.currentOffset())},p.prototype.editingLeave=function(t){return"recording"!=t&&(this.space().browser().stop(),this.space().browser().node().resetLayout(),this.space().emit("watch")),this},p.prototype.recordingLeave=function(){return this.space().browser().stop(),this.space().browser().node().resetLayout(),this.space().emit("watch")},p.prototype.editingEnter=function(){return this.branch().forceToEnd(),this.space().client().flushLocals()},p.prototype.recordingEnter=function(){return this.branch().forceToEnd()},p.prototype.watchingEnter=function(){return this},p.prototype.pausedEnter=function(t){return"playing"==t&&this.registerProgress(),this},p.prototype.registerProgress=function(){let t=this.currentOffset(),e=this.currentTime()/this.duration();return this.branch().model().registerProgress(e,t)},p.prototype.stats=function(){return{cid:this._branch.id(),state:this.playState(),localref:this._localRef,played:0}},p.prototype.describe=function(){return"Speed: "+this.playbackRate().toFixed(1)},i.subclass(c,p),e.AbsTimeline=c,c.prototype.loadAudio=function(){let t=[];for(let n=0,i=(e=this.cues().audio())?e.toArray?e.toArray():e:[],r=i.length;n<r;n++)t.push(s.instance().loadBufferForId(i[n][3]));var e;return t},c.prototype.clips=async function(){var t=this;let e=!1;return setTimeout((function(){if(!e)return console.log("forced buffering!"),t.setIsBuffering(!0),!0}),20),await Promise.all(t.loadAudio()),e=!0,t.setIsBuffering(!1),t.cues().audioclips(t.data().start,0)},c.prototype.buffered=function(){return this._buffered||(this._buffered=[[0,1]])},c.prototype.scheduleAudio=async function(){let t=++this._shouldScheduleAudio;var e=await this.clips();return this._shouldScheduleAudio==t&&s.instance().scheduleClips(this._scheduledAudio=e,this.currentTime(),this.playbackRate()),this},c.prototype.unscheduleAudio=function(){return++this._shouldScheduleAudio,this._scheduledAudio&&(s.instance().unscheduleClips(this._scheduledAudio),this._scheduledAudio=null),this},c.prototype.enterState=function(t,e,n){return this.unscheduleAudio(),c.prototype.__super__.enterState.apply(this,arguments)},c.prototype.playingEnter=function(){if(this.space()&&this.space().setTimeline(this),this.isPlaying())return this.unscheduleAudio(),this.scheduleAudio()},i.subclass(h,p),e.PubTimeline=h,h.prototype.stats=function(){for(var t={localref:this._localRef,cid:this._branch.id(),state:this.playState(),played:0,ranges:[]},e=this._audio.played.length,n=0;n<e;){let e=Math.round(this._audio.played.start(n)),i=Math.round(this._audio.played.end(n));i-e>1&&(t.ranges.push(e,i),t.played+=i-e),n++}return t},h.prototype.playbackRateDidSet=function(t){if(this.space().api().sessionStore().set("playbackRate",t),this._audio){var e=this.currentOffset();this._audio.playbackRate=t,this.anchorTime(e)}return this},h.prototype.isAnnotating=function(){return!1},h.prototype.audioSrc=function(){return this._data.audio&&s.instance().urlForId(this._data.audio.fid||this._data.audio)},h.prototype.tick=function(){var t=this.currentOffset();return this.branch().setCurrentOffset(t),this.space().cursor().target(this.targetEvent()),this},h.prototype.buffered=function(){if(this._buffered)return this._buffered;for(var t,e=[],n=this.duration()/1e3,i=this.audio().buffered,r=(t=i)&&(t.len instanceof Function?t.len():t.length)||0,o=0;o<r;){let t=i.start(o),r=i.end(o);e.push([t/n,r/n]),o++}return this._buffered=e},h.prototype.referenceTime=function(){return this._audio?Math.round(1e3*this._audio.currentTime):0},h.prototype.referenceOffset=function(){return this.timeToOffset(this.referenceTime())},h.prototype.referencePlaybackRate=function(){return!this._audio||this._audio.paused?0:this._audio.playbackRate},h.prototype.audio=function(){return this._audio||(this._audio=document.createElement("audio"),this.bindAudio(this._audio),this._audio.src=this.audioSrc(),this._audio.load(),this._audio.currentTime=this.currentTime()/1e3||0,this._audio.playbackRate=this.playbackRate(),SA=this._audio),this._audio},h.prototype.enterState=function(t,e,n){return this.log("enterState "+e+"->"+t),"playing"!=t&&this._audio&&!this.audio().paused&&this._audioIsPlaying&&(this._ignorePauseEvent=!0,this._audioWasPaused=Date.now(),this.audio().pause()),h.prototype.__super__.enterState.apply(this,arguments)},h.prototype.playingEnter=function(t,e){let n=this._branch.model();if(this.api().analytics().castPlay(n.id,n.type),this.branch().enter(),this.space().setTimeline(this),this.anchorTime(e),this.setIsBuffering(!0),this.audio().paused){if(s.instance().registerMedia(this.audio()),this._audioIsPlaying)return this._audioShouldPlay=!0;{let t=Math.round(this._anchor.elapsed||0);return this.setAudioTime(t),this.audio().play()}}},h.prototype.syncSeek=function(t,e){var n=this.offsetToTime(t);return e?this.anchorTime(t):(this.anchorTime(t),this.setAudioTime(n))},h.prototype.setAudioTime=function(t){return Math.round(1e3*this.audio().currentTime)!=Math.round(t)&&(this.audio().currentTime=t/1e3),t},h.prototype.activate=function(){return h.prototype.__super__.activate.apply(this,arguments)},h.prototype.deactivate=function(){return h.prototype.__super__.deactivate.apply(this,arguments),this._audio&&(this._audio.paused||this._audio.pause(),s.instance().deregisterMedia(this._audio)),this},h.prototype.bindAudio=function(t){var e=this;t.widget=e,t.preload="auto";var n=function(t){return!0};t.onpause=function(n){e.log("onpause @"+e.state()),e._audioIsPlaying=!1,e._audioIsPaused=!0;let i=Date.now()-e._audioWasPaused>300;return"playing"==e.state()&&i?t.currentTime==t.duration?e.ended():e.pause():"playing"!=e.state()||i?void 0:t.play()},t.onplaying=function(n){if(e.log("onplaying"),e._audioIsPlaying=!0,e._audioIsPaused=!1,e.setIsBuffering(!0),e.isPaused())return t.pause()},t.oncanplay=function(){return e.log("oncanplay")},t.onprogress=function(t){return e._buffered=null,e.space().dirty()},t.oncanplaythrough=function(){return e.log("oncanplaythrough"),e},t.onwaiting=function(){return e.log("onwaiting")},t.onplay=function(){if(e.log("onplay"),!e.isPlaying())return e.play()};let i=e._lastTimeUpdate={threshold:0,elapsed:[],timestamps:[]};return t.ontimeupdate=function(n){if(clearTimeout(i.timeout),t.paused)return i.elapsed=[],i.timestamps=[];{e.anchorTime();let n=1e3*t.currentTime,r=Date.now(),o=i.elapsed[0],s=i.timestamps[0];if(i.elapsed.unshift(n),i.timestamps.unshift(r),i.timeout=setTimeout((function(){return e.setIsBuffering(!0),!0}),i.threshold||500),s){let t=(n-o)/((r-s)*e.playbackRate());if(t>.8&&t<1.2)return i.threshold=Math.max(i.threshold,20+r-s),e.setIsBuffering(!1),!1}}},t.onseeked=function(t){return!0},t.onended=function(t){if("playing"==e.state())return e.ended()},t.onstalled=function(t){return e.log("onstalled")},t.onerror=n,t.onloadedmetadata=n,t},h.prototype.dispose=function(){return this}},function(t,e,n){function i(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=n(1).MSG,o=n(8),s=n(19).StreamBuffer,a=0,u=3;function p(t){var e=this;e._stream=t,e._buffer=t.buffer(),e._counter=0,e._lastOffset=0,e._remoteOffset=0,e._timeout=null,e._requests=[],e._state=a,e._tick=function(){return e._timeout=null,e.sync()},e._callback=function(t,n){return e.onresponse(t,n)},e._ontrim=function(t){return e.ontrim(t)},e._buffer.on("trim",e._ontrim)}e.StreamSyncer=p,p.prototype.stream=function(t){return this._stream},p.prototype.setStream=function(t){return this._stream=t,this},p.prototype.byteOffset=function(t){return this._byteOffset},p.prototype.setByteOffset=function(t){return this._byteOffset=t,this},p.prototype.__state={watch:"stateDidSet",name:"state"},p.prototype.state=function(t){return this._state},p.prototype.setState=function(t){var e=this.state();return t!=e&&(this._state=t),t!=e&&this.stateDidSet&&this.stateDidSet(t,e,this.__state),this},p.prototype.isRecovering=function(){return this.state()==u},p.prototype.branch=function(){return this.stream().owner()},p.prototype.api=function(){return this.branch().api()},p.prototype.latency=function(){var t=Date.now(),e=this._lastConfirmed,n=this._requests[this._requests.indexOf(e)+1],i=e?e.ms:0,r=n?t-n.ts:0;return Math.max(i,r)},p.prototype.confirm=function(t){return this._remoteOffset=this._lastOffset=t,this},p.prototype.onresponse=function(t,e){switch(this._lastResponse=t,t.CODE){case r.OK:this._lastConfirmed=e,this._remoteOffset=e.byteEnd,this.isRecovering()&&this.setState(a);break;case r.UNAUTHORIZED:console.warn("got message from server that we are unauthorized!"),this.api().analytics().streamUnauthorized(this.branch().id());break;case r.ERR_OUT_OF_RANGE:console.warn("server said we are out of range!",this.isRecovering(),this._remoteOffset,this._lastOffset),this.isRecovering()||(this.setState(u),this._recoveringSince=Date.now(),this._lastOffset=this._remoteOffset,this.api().analytics().streamRecovering(this.branch().id()),this.sync())}return this},p.prototype.ontrim=function(t){return this._stream.api().log("syncer","ontrim",t,this._lastOffset,this._remoteOffset),this._lastOffset=Math.min(this._lastOffset,t),this._remoteOffset=Math.min(this._buffer._verifiedOffset,t),this._lastConfirmed=null,this._requests=[],this},p.prototype.getPayload=function(){let t=this._lastOffset,e=i(this._buffer)-1;if(this._buffer._verifiedOffset>this._lastOffset&&(this._stream.api().log("syncer","buffer already has a confirmed remote offset",this._lastOffset,this._buffer._verifiedOffset),t=this._lastOffset=this._buffer._verifiedOffset),t>=e)return;let n=this.stream().id(),a=o.encode([r.STREAMAPPEND,n,t]);var u=this._buffer.slice(t);return{from:t,body:u,payload:s.concat([a,u])}},p.prototype.sync=function(t,e){var n=this;if(!n.branch().isLocal()&&(t||!n.branch().recording()||n.branch().recording().live())){var r=n.getPayload(),o=i(n._buffer);if(r){var s=new XMLHttpRequest;let t="/streams/"+n.stream().id()+"?from="+r.from;return s.onload=function(t){return 200==s.status?n._remoteOffset=n._lastOffset=o:console.warn("bad response from server")},s.open("POST",t),s.setRequestHeader("Content-Type","application/octet-stream"),s.send(r.body)}}},p.prototype.schedule=function(t){return void 0===t&&(t=1e3),clearTimeout(this._timeout),this._timeout=setTimeout(this._tick,t)},p.prototype.persist=function(t){return void 0===t&&(t=!0),t?(this._lastOffset=this._remoteOffset,this.sync(!0,"https")):this.sync(!0)},p.prototype.dispose=function(){return this._buffer.un("trim",this._ontrim),this}},function(t,e,n){n(22).Struct;var i=n(11),r=i.StreamAction,o=i.RecStart,s=i.LockAction,a=n(19).StreamBuffer,u=n(1),p=u.ACTION,c=u.ACTION_MAP,h=(u.MSG,u.SCON,n(192).Pointer),l=n(7).List,d=n(8);function f(t,e,n,i){var o=this;void 0===i&&(i={}),o._buffer=t,o._actions=[],o._owner=e,o._options=i,o._offset=i.offset||0,o._byteOffset=0,o._localOffset=0,o._lastLocalIndex=-1,o._lastActions={},o._lastTimeOffset=0,o._lastType=null,o._state={},o._dupes={},o._layouts={},o._recordings=new l(o),o._audio=new l(o),o._tail=o._first=r.seed(o),o._decoder=new d.Decoder({}),o._decoder.offset=0,n?o._tail._prev=o._seed=n:o._seed=o._tail,o.anchorTime(),o._ontrim=function(t){return o.api().log("stream","ontrim",t),o.rollbackToAction(o.actionAtByteOffset(t))},o._buffer.on("trim",o._ontrim)}e.Stream=f,f.prototype.buffer=function(t){return this._buffer},f.prototype.setBuffer=function(t){return this._buffer=t,this},f.prototype.owner=function(t){return this._owner},f.prototype.setOwner=function(t){return this._owner=t,this},f.prototype.parent=function(t){return this._parent},f.prototype.setParent=function(t){return this._parent=t,this},f.prototype.actions=function(t){return this._actions},f.prototype.setActions=function(t){return this._actions=t,this},f.prototype.realtime=function(t){return this._realtime},f.prototype.setRealtime=function(t){return this._realtime=t,this},f.prototype.seed=function(t){return this._seed},f.prototype.setSeed=function(t){return this._seed=t,this},f.prototype.tail=function(t){return this._tail},f.prototype.setTail=function(t){return this._tail=t,this},f.prototype.recordings=function(t){return this._recordings},f.prototype.setRecordings=function(t){return this._recordings=t,this},f.prototype.__currentLock={watch:"currentLockDidSet",name:"currentLock"},f.prototype.currentLock=function(t){return this._currentLock},f.prototype.setCurrentLock=function(t){var e=this.currentLock();return t!=e&&(this._currentLock=t),t!=e&&this.currentLockDidSet&&this.currentLockDidSet(t,e,this.__currentLock),this},f.prototype.lastActions=function(t){return this._lastActions},f.prototype.setLastActions=function(t){return this._lastActions=t,this},f.prototype.lastTimeOffset=function(t){return this._lastTimeOffset},f.prototype.setLastTimeOffset=function(t){return this._lastTimeOffset=t,this},f.prototype.state=function(t){return this._state},f.prototype.setState=function(t){return this._state=t,this},f.prototype.audio=function(t){return this._audio},f.prototype.setAudio=function(t){return this._audio=t,this},f.prototype.dupes=function(t){return this._dupes},f.prototype.setDupes=function(t){return this._dupes=t,this},f.prototype.layouts=function(t){return this._layouts},f.prototype.setLayouts=function(t){return this._layouts=t,this},f.prototype.dispose=function(){return this._buffer.un("trim",this._ontrim),this},f.prototype.id=function(){return this.owner().id()},f.prototype.space=function(){return this.owner().space()},f.prototype.api=function(){return this.space().api()},f.prototype.log=function(){for(var t,e=arguments,n=e.length,i=new Array(n>0?n:0);n>0;)i[n-1]=e[--n];return(t=this.api()).log.apply(t,[].concat(["stream"],Array.from(i)))},f.prototype.pointer=function(){return this._pointer||(this._pointer=new h(this))},f.prototype.anchorTime=function(t){return void 0===t&&(t={}),this._anchor={ts:t.now||Date.now(),offset:t.offset||this._tail.offset()||0,collapsed:!this.realtime(),rate:1}},f.prototype.currentLockDidSet=function(t){if(this.owner().isEditing()&&t&&t.sid()!=this.api().sid())return this.owner().stopEditing()},f.prototype.currentSID=function(){return this.currentLock()?this.currentLock().sid():null},f.prototype.currentTime=function(){return Date.now()-this._anchor.ts},f.prototype.lastTimeOffset=function(){return this._tail.offset()},f.prototype.nextTimeOffset=function(){return Math.max(this.lastTimeOffset(),this._anchor.offset+(this.now()-this._anchor.ts)*this._anchor.rate)},f.prototype.now=function(){return this._frozenTime||Date.now()},f.prototype.freezeTime=function(t,e){let n=this._frozenTime;return this._frozenTime=t||Date.now(),e(),this._frozenTime=n,this},f.prototype.byteLength=function(){return this._decoder.offset},f.prototype.read=function(t){var e=this._decoder;if(!(e.buffer=this._buffer._buffer)||e.offset>=this._buffer.size())return null;let n=e.fetch();if("number"==typeof n)return n>0?this._lastTimeOffset+=n:n<0&&(this._lastType=-n),this.read(t);var i=this._lastType,o=c[i];o||(o=r);var s=this._actions.length,a=this._lastActions[i],u=o.decode(n,a?a._params:null,this,s);return t&&(u.LOCAL=t),u.addToStream(this),u.commitToStream(this),this._tail=u},f.prototype.lock=function(){if(this.currentLock()&&this.currentLock().sid()==this.api().sid())return!0;var t=new s([this.api().sid(),this.api().uid()]);this.log("lock",t),t.addToStream(this);var e=a.encode([-p.LOCK,t.encode(this)]);return this.buffer().add(e,this.byteLength()),this._lastType=t._type,this.sync({}),!0},f.prototype.write=function(t,e){if(!this.lock())return!1;var n=this.nextTimeOffset();e&&null!=e.timeOffset&&(n=e.timeOffset);var i=n-this.lastTimeOffset();i>0&&i<3&&(i=0),this.space().recording()&&this.space().recording().isRecording()||e&&e.timeOffset||(i=0);var r=t._type;if(!this.canPush(t))return console.warn("not allowed to write to stream!",t),this;var o=[];i>0&&o.push(i),r!=this._lastType&&o.push(-r),t.addToStream(this);var s=t.encode(this);o.push(s);var u=a.encode(o);return this.buffer().add(u,this.byteLength()),this.log.apply(this,[].concat([n,i,t.constructor.name],Array.from(s))),this._lastLocalIndex=this._actions.length,this.read(e)},f.prototype.canPush=function(t){var e=this._recordings.last();return!e||!e.stop()||t instanceof o},f.prototype.encode=function(){var t,e=new d.Encoder({}),n=0,i=0;for(let r,o=0,s=(t=this.actions())?t.toArray?t.toArray():t:[],a=s.length;o<a;o++){r=s[o];let t=r.timeOffset();t>i&&(e.write(t-i),i=t),r._type!=n&&(e.write(-r._type),n=r._type);let a=r.encode(this);e.write(a)}return e.read()},f.prototype.sync=function(t){void 0===t&&(t=null);var e=this._buffer.size(),n=this._decoder.offset;if(n==e)return this;if(n>e)return console.warn("we are ahead of buffer(?!)"),this;for(;this.read(t););return this},f.prototype.len=function(){return this._actions.length},f.prototype.toArray=function(){return this._actions},f.prototype.map=function(t){return this._actions.map(t)},f.prototype.duration=function(){return this._tail.offset()},f.prototype.actionAtIndex=function(t){return t<0&&(t=this._actions.length+t),this._actions[t]},f.prototype.actionAtOffset=function(t){this.read();var e=this._lastSearchCursor||this._actions[0];if(!e)return null;for(var n=e;t>=this.duration();)if(!this.read())return this._tail;if(t<e.offset()){for(;e&&t<e.offset();)e=e._prev;return this._lastSearchCursor=e||this._actions[0]}for(;e&&t>=e.offset();)n=e,e=e._next;return this._lastSearchCursor=n},f.prototype.actionAtByteOffset=function(t){for(var e=this._tail;e&&e._byteEnd>t;)e=e._prev;return e},f.prototype.actionsOfType=function(t){return this._actions.filter((function(e){return e._type==t}))},f.prototype.rollbackToAction=function(t){this._decoder;var e=this.space().cursor().compare(this.space().cursor().current(),t);for(this.log("rollback-path",e),e.revertTo&&this.space().cursor().sync(t);this._tail!=t;){let t=this._tail._prev;this._tail.removeFromStream(this),this._tail=t,t._next=null}var n=this._tail.timeOffset();this._lastType=this._tail.type(),this._lastTimeOffset=n,this._lastSearchCursor=null,this._decoder.offset=this._tail.byteEnd(),this._actions.slice(0,t.index()+1);var i,r=((i=this._actions)&&(i.len instanceof Function?i.len():i.length)||0)-1;for(let t,e,n=this._dupes,i=0,o=Object.keys(n),s=o.length;i<s;i++)e=o[i],t=n[e],t>r&&(this._dupes[e]=void 0);var o=this._owner&&this._owner.timeline&&this._owner.timeline();return o&&o.currentOffset()>n&&o.seek(n),this},f.prototype.rollbackToByteOffset=function(t){for(var e=this._tail;e&&e.byteEnd()>t;)e=e._prev;return this.rollbackToAction(e),this}},function(t,e,n){n(22).Struct;var i=n(1),r=(i.ACTION,i.CAST,n(11).PointerUpdate);function o(t){this._stream=t}e.Pointer=o,o.prototype.last=function(t){return this._last},o.prototype.setLast=function(t){return this._last=t,this},o.prototype.stream=function(t){return this._stream},o.prototype.setStream=function(t){return this._stream=t,this},o.prototype.addFrame=function(t){var e=r.build(t);return this.stream()._owner.addLocalEvent(e),this},o.prototype.view=function(){return this._view||(this._view=this._stream._owner._space._view._pointer)}},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(2).Dialog,a=o.defineTag("LocalBranchDialog",s,(function(t){t.prototype.branch=function(){return this.data()},t.prototype.space=function(){return this.branch().space()},t.prototype.trunk=function(){return this.space().trunk()},t.prototype.cancelLabel=function(){return"play around"},t.prototype.submitLabel=function(){return this.trunk().myFork()?"goto your fork":"create fork"},t.prototype.onuxasubmit=function(){var t=this;return t.uxa().queue().add(100,(async function(){if(!await t.api().tryLogin())throw new Error("You must be logged in to create a fork");await t.space().navigateTo(t.trunk());var e=await t.trunk().upsertResponse();return t.space().navigateTo(e,"watching")}))},t.prototype.body=function(){let t;this.$$||(this.$$={});return(t=this._body=this._body||(t=r("div",this)).flag("body")).setContent(this.trunk().isLab()&&this.trunk().myFork()?i.static([t.$.A||r("p",t.$,"A",t).setText("You already have a fork of this playground.\nYou will not be able to save these changes."),t.$.B||r("p",t.$,"B",t).setText("Do you want to open your fork?")],2,1):this.trunk().isLab()?t.$.C||r("p",t.$,"C",t).setText("You have started editing a playground created by someone else.\nWould you like to create your own fork? (Recommended)"):void 0,3)}}));e.LocalBranchDialog=a},function(t,e,n){var i=n(3).Widget;n(195),n(199),n(200),n(78),n(201),n(202),n(205),n(206),n(82),e.Widget=i},function(t,e,n){var i=n(0),r=n(1).AGENT,o=n(3).Widget;n(78).FileWidget,r.FLAGS;function s(){return o.apply(this,arguments)}i.subclass(s,o),e.Agent=s,s.register("agent",r),s.prototype.name=function(t){return this.getAttribute("name")},s.prototype.setName=function(t){return this.setAttribute("name",t),this},s.prototype.body=function(t){return this.getAttribute("body")},s.prototype.setBody=function(t){return this.setAttribute("body",t),this},s.prototype.uid=function(t){return this.getAttribute("uid")},s.prototype.setUid=function(t){return this.setAttribute("uid",t),this},s.prototype.sid=function(t){return this.getAttribute("sid")},s.prototype.setSid=function(t){return this.setAttribute("sid",t),this},s.prototype.token=function(t){return this.getAttribute("token")},s.prototype.setToken=function(t){return this.setAttribute("token",t),this},s.prototype.color=function(t){return this.getAttribute("color")},s.prototype.setColor=function(t){return this.setAttribute("color",t),this},s.prototype.kind=function(t){return this.getAttribute("kind")},s.prototype.setKind=function(t){return this.setAttribute("kind",t),this},s.prototype.user_id=function(t){return this.getAttribute("user_id")},s.prototype.setUser_id=function(t){return this.setAttribute("user_id",t),this},s.prototype.editing=function(t){return this._editing},s.prototype.setEditing=function(t){return this._editing=t,this},s.prototype.audio=function(t){return this._audio},s.prototype.setAudio=function(t){return this._audio=t,this},s.option("focus",{type:"widget",triggerAsync:["refocus"],overridable:!0}),s.option("file",{type:"widget",triggerAsync:["refocus"],override:"pause"}),s.option("hover",{type:"widget",overridable:!0}),s.option("vw",{overridable:!0}),s.option("vh",{overridable:!0}),s.prototype.setup=function(){return this.space().widgets().add(this,this.id()),this},s.prototype.file=function(t){return this.options().get("file",t)||this.space().files().at(0)},s.prototype.isLocal=function(){return!1},s.prototype.isRecording=function(){return!1}},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope().defineTag("PaneView","section",(function(t){t.prototype.__title={default:"Pane",name:"title"},t.prototype.title=function(t){return this._title},t.prototype.setTitle=function(t){return this._title=t,this},t.prototype._title="Pane",t.prototype.key=function(t){return this._key},t.prototype.setKey=function(t){return this._key=t,this},t.prototype.build=function(){return this.setTabindex(0),t.prototype.__super__.build.apply(this,arguments)},t.prototype.oncontextmenu=function(t){var e;if(t.prevent().halt(),e=this.contextmenu())return e.showAt(t.x(),t.y())},t.prototype.contextmenu=function(){return null},t.prototype.onfocusin=function(t){var e;if(t.halt(),this.data().space().cursor().canPush())return this.data().space().agent().setFocus(e=this.data()),e},t.prototype.onfocusout=function(t){if(t.halt(),!t.event().relatedTarget&&this.data().space().cursor().canPush())return this.data().space().agent().setFocus(null),null},t.prototype.header=function(){return null},t.prototype.footer=function(){return null},t.prototype.body=function(){this.$$||(this.$$={});return(this._body=this._body||r("div",this).flag("body")).setText("Content of pane "+this.title())},t.prototype.render=function(){return this.$open(0).setChildren([this.header(),this.body(),this.footer()],1).synced()}}));e.PaneView=o},function(t,e,n){function i(t){return t&&(t.len instanceof Function?t.len():t.length)||0}n(1).LCRange;var r=function(t,e){var n=t[0]-1,i=t[1]-1,r=t[0]+(t[3]||0)-1,o=t[1]+(t[2]||0)-1,s=e[0]-1,a=e[1]-1,u=e[0]+(e[3]||0)-1,p=e[1]+(e[2]||0)-1;return r==u?o==p?n==a?i-a:n-s:o-p:r-u},o=function(t,e){let n=r(t[0],e[0]);return 0==n?e.I-t.I:-n},s=e.diffString=function(t,e){for(var n=0,i=t.length,r=e.length,o=Math.min(i,r),s=(Math.max(i,r),0);n<o;){var a=t[n],u=e[n];if(n++,a!=u)break;s++}if(s==n)return i>r?[s,i,""]:r>i?[s,s,e.slice(s)]:[];for(;i>=s&&r>=s&&(a=t[--i])==(u=e[--r]););return[s,i+1,e.slice(s,r+1)]},a=(e.patchString=function(t,e){return e instanceof Array?t.substr(0,e[0])+e[2]+t.slice(e[1]):e},e.getLineMaxColumn=function(t){return t.length}),u=/\r\n|\r|\n/;function p(t){void 0===t&&(t=""),this._raw=t,this._lines=t.split(u),this.reset()}e.TextModel=p,p.prototype.lines=function(t){return this._lines},p.prototype.setLines=function(t){return this._lines=t,this},p.prototype.reset=function(){return this._edited=[],this._body=null,this},p.prototype.reversedOperation=function(t){var e=this.textInRange(t[0]);return[this.expandedRange(t[0],t[1]),e]},p.prototype.expandedRange=function(t,e){var n=(e||"").split(u),i=t[0]+(n.length-1),r=n[n.length-1].length;return t[0]==i?r+=t[1]:r+=1,[t[0],t[1],r-t[1],i-t[0]]},p.prototype.textInRange=function(t,e){void 0===e&&(e=this._lines);var n=t[0]-1,i=t[1]-1,r=t[0]+(t[3]||0)-1,o=t[1]+(t[2]||0)-1;if(n==r)return e[n].slice(i,o);for(var s=e[n++].slice(i);n<r;)s+="\n"+e[n++];return s+="\n"+e[r].slice(0,o)},p.prototype.apply=function(t){var e=this._lines,n=null;this._body=null,t.UNDO||(t.FWD=1,(n=t.UNDO=[]).UNDO=t,n.REV=1);let i=t.length,r=0;for(i>1&&t.FWD&&(t=t.map((function(t,e){return t.I=e,t})).sort(o));r<i;){let i=t[r++];var s=i[0],a=i[1]||"",p=s[0]-1,c=s[1]-1,h=s[0]+(s[3]||0)-1,l=s[1]+(s[2]||0)-1;if(n&&n.unshift(this.reversedOperation(i)),p!=h){let t=e[p].slice(0,c),n=e[h].slice(l);e[p]=t+n,e.splice(p+1,h-p),l=c}let o=e[p];o=o.slice(0,c)+a+o.slice(l),a.indexOf("\n")>=0?e.splice.apply(e,[].concat([p,1],Array.from(o.split(u)))):e[p]=o}return t},p.prototype.getValue=function(){return this.body()},p.prototype.body=function(){return this._body||(this._body=this._lines.join("\n"))},p.prototype.getDiff=function(t){var e=this._lines;("string"==typeof t||t instanceof String)&&(t=t.split(u).map((function(t,e){return{_text:t}})));for(var n,r=t,o=i(r),p=i(e),c=0,h=0,l=o-1,d=0,f=p-1,y=Math.min(o,p);c<y&&e[c]==r[c]._text;)c+=1;if(c==y){if(p==o)return null;p>o?(c=l,h=d=a(r[l]._text),n="\n"+e.slice(o).join("\n")):o>p&&(h=a(e[c=p-1]),d=a(r[l=o-1]._text),n="")}else{for(;f>c&&l>c&&e[f]==r[l]._text;)f-=1,l-=1;if(d=a(r[l]._text),c==l&&f>=l){var m=r[c]._text,g=e.slice(c,f+1).join("\n"),_=s(m,g);h=_[0],d=_[1],n=_[2]}}var v=[c+1,h+1,d-h,l-c];return null==n&&(n=this.textInRange([c+1,h+1,1e3,f-c])),[v,n]}},function(t,e){var n={},i=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEF8]|\uD83E[\uDD00-\uDDE6])/;e.containsEmoji=n.containsEmoji=function(t){return i.test(t)},e.isEmail=n.isEmail=function(t){return/^\S+@\S+\.\S+$/.test(t)},e.describeDuration=n.describeDuration=function(t){var e=(t/1e3).toFixed(0),n=(e/60).toFixed(0),i=(e/3600).toFixed(0);return e>3600?i+" "+(i>1?" hours":" hour"):e>60?n+" min":e+" sec"}},function(t,e,n){var i=n(0),r=n(1),o=(r.WIDGET,r.POINTER),s=(r.SCON,n(3).Widget);n(9).Delay,o.STATEFLAGS,n(4);function a(){return s.apply(this,arguments)}i.subclass(a,s),e.PointerWidget=a,a.register("pointer",o),a.prototype.setup=function(){return this}},function(t,e,n){var i=n(0),r=n(3).Widget;function o(){return r.apply(this,arguments)}i.subclass(o,r),e.LayoutWidget=o,o.register("layout"),o.option("renderWhitespace",{default:!1,overridable:!0}),o.option("viewport",{type:Array,overridable:!0}),o.prototype.setup=function(){return this},o.prototype.deserialized=function(){return this}},function(t,e,n){function i(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=n(0),s=o.createTagList,a=o.createTagMap,u=o.createTagLoopResult,p=o.createTagScope(),c=o.createElementFactory(),h=n(26),l=h.PaneWidget,d=h.PaneView,f=n(1),y=f.CONSOLE,m=(f.SIMULATOR,f.POINTER,f.ACTION),g=(n(3).Widget,n(7).List,n(4)),_=0,v={};o.Events&&o.Events.register(["mouseover","mouseout"]),v.Instance=function(t){this._type=t},v.Instance.prototype.type=function(t){return this._type},v.Instance.prototype.setType=function(t){return this._type=t,this},v.Func=function(t){this._type=t},v.Func.prototype.type=function(t){return this._type},v.Func.prototype.setType=function(t){return this._type=t,this},v.Error=function(t){this._data=t,this.message=t.message};"undefined"!=typeof window&&window;var b=function(t,e){var n=y.TYPES;if(e instanceof Array&&e[0]==n.MARKER)switch(e[1]){case n.NULL:return null;case n.UNDEFINED:return;case n.ELEMENT:if(e[2]instanceof Array)return null;var i=document.createElement("div");return i.innerHTML=e[2],i.firstElementChild;case n.INSTANCE:return new v.Instance(e[2]);case n.FUNCTION:return new v.Func(e[2]);case n.ERROR:return new v.Error(e[2])}return e},w=p.defineTag("ValPart",(function(t){t.prototype.entry=function(){return this._entry||(this._entry=this.up(".ConsoleEntry"))},t.prototype.offsetTopFromConsole=function(){for(var t=0,e=this.dom(),n=[],i=this.entry();e&&(t+=e.offsetTop,n.push(t),!e.contains(i.dom()));)e=e.offsetParent;return t}})),x=p.defineTag("Val",w,(function(t){t.prototype.ref=function(t){return this.getAttribute("ref")},t.prototype.setRef=function(t){return this.setAttribute("ref",t),this},t.prototype.__expanded={watch:"expandedDidSet",name:"expanded"},t.prototype.expanded=function(t){return this._expanded},t.prototype.setExpanded=function(t){var e=this.expanded();return t!=e&&(this._expanded=t),t!=e&&this.expandedDidSet&&this.expandedDidSet(t,e,this.__expanded),this},t.prototype.render=function(){var t,e,n=this.$;return _++,this.$open(0).setChildren("string"==typeof(t=this.data())||t instanceof String?(n[0]||c(k,n,0,this)).bindData(this,"data",[]).end():"number"==typeof(e=this.data())||e instanceof Number?(n[1]||c(A,n,1,this)).bindData(this,"data",[]).end():this.data()instanceof v.Instance?(n[2]||c(M,n,2,this)).bindData(this,"data",[]).end():this.data()instanceof v.Func?(n[3]||c(D,n,3,this)).bindData(this,"data",[]).end():this.data()instanceof v.Error?(n[4]||c(O,n,4,this)).bindData(this,"data",[]).end():null==this.data()?n[5]||c("div",n,5,this).flag("null").setText("null"):null==this.data()?n[6]||c("div",n,6,this).flag("cundefined").setText("undefined"):1==this.data()?n[7]||c("div",n,7,this).flag("cbool").flag("true").setText("true"):0==this.data()?n[8]||c("div",n,8,this).flag("cbool").flag("false").setText("false"):this.data()&&this.data()._dom?(n[9]||c(L,n,9,this)).bindData(this.data(),"_dom").end():this.data()instanceof Element?(n[10]||c(L,n,10,this)).bindData(this,"data",[]).end():"function"==typeof this.data()?(n[11]||c(D,n,11,this)).bindData(this,"data",[]).end():_>3?n[12]||c("div",n,12,this).flag("more").setText("..."):Array.isArray(this.data())?(n[13]||c(T,n,13,this)).bindData(this,"data",[]).end():this.data()instanceof Object||"object"==typeof this.data()?(n[14]||c(C,n,14,this)).bindData(this,"data",[]).end():n[15]||c("span",n,15,this).flag("blank").setText(""),3).synced(),_--,this},t.prototype.__uid=function(){return this._uid||(this._uid=this.entry().refForElement(this.dom()))},t.prototype.ontap=function(t){return t.halt(),this.__uid()},t.prototype.getChildByRef=function(t){var e=this._dom.firstElementChild._tag;return e&&e.getChildByRef?e.getChildByRef(t):this},t.prototype.space=function(){return this.entry().space()},t.prototype.entry=function(){return this.up(".ConsoleEntry")},t.prototype.expandedDidSet=function(t){return this.first().flag("expanded",!!t)},t.prototype.first=function(){return o.getTagForDom(this.dom().firstElementChild)},t.prototype.up=function(t){return t?this.parent()&&this.parent().closest(t):this.parent()},t.prototype.ontap=function(t){if(t.halt(),t.event().target==this.dom()||t.event().target==this.first().dom())return this.space().console().push_(m.CONSOLE_VAL_EXPAND,[this.space().console().id(),this.__uid(),!this._expanded])}}));e.Val=x,x.DEPTH=0;var S=p.defineTag("Rich",w,(function(t){t.prototype.ref=function(t){return this.getAttribute("ref")},t.prototype.setRef=function(t){return this.setAttribute("ref",t),this},t.prototype.body=function(){return this},t.prototype.entry=function(){return this.parent().entry()},t.prototype.getChildByRef=function(t){var e=this.body().dom().children[t];return e?e._tag:null}})),T=p.defineTag("Arr",S,(function(t){t.prototype.render=function(){var t=this,e=this.$;return t.$open(0).setChildren([function(e){var n=e.$iter();for(let i=0,o=r(t.data()),s=o.length;i<s;i++)i>=10||n.push((e[i]||c(x,e,i)).setData(o[i]).dataset("ref",i).end());return n}(e[0]||a(e,0)),t.data().length>10?e[1]||c("div",e,1,t).flag("more").setText("..."):void 0],1).synced()}})),k=p.defineTag("Str",w,(function(t){t.prototype.render=function(){return this.$open(0).setChildren(this.data(),3).synced()}})),A=p.defineTag("Num",w,(function(t){t.prototype.render=function(){return this.$open(0).setChildren(this.data(),3).synced()}})),E=p.defineTag("KeyValPair",w,(function(t){t.prototype.ref=function(t){return this.getAttribute("ref")},t.prototype.setRef=function(t){return this.setAttribute("ref",t),this},t.prototype.entry=function(){return this._entry||(this._entry=this.up(".ConsoleEntry"))},t.prototype.ontap=function(t){this.__uid();return this},t.prototype.__uid=function(){return this._uid||(this._uid=this.entry().refForElement(this.dom()))},t.prototype.getChildByRef=function(t){return this.dom().children[t]._tag},t.prototype.scrollIntoView=function(){if(this.entry().data().isEnabled()){var t=this.offsetTopFromConsole();return this.entry().parent().dom().scrollTop=Math.max(t-40,0)}}})),C=p.defineTag("Obj",S,(function(t){t.prototype.body=function(){return this._body},t.prototype.name=function(){return this._name||(this._name=this.data().constructor.name)},t.prototype.keys=function(){return Object.keys(this.data())},t.prototype.render=function(){var t=this.$,e=this;return e.$open(0).flag("inline").setChildren("Object"==e.name()?(e._body=e._body||c("div",e).flag("body")).setContent(function(t){var n;for(let i,o=0,s=r(e.keys()),a=t.taglen=s.length;o<a;o++)i=s[o],(n=t[o]||(n=c(E,t,o)).flag("pair").setContent([c("div",n.$,"A",n).flag("key"),c(x,n.$,"B",n).dataset("ref","1")],2)).dataset("ref",o).setFlag(0,"k"+o).end((n.$.A.setContent(i,3),n.$.B.bindData(e.data(),i).end(),!0));return t}(t[0]||s(t,0,e._body)),4):(t[1]||c("div",t,1,e).flag("type")).setContent(e.name(),3),3).synced()}})),D=p.defineTag("Func",w,(function(t){t.prototype.render=function(){return this.$open(0).setText("Function").synced()}})),O=p.defineTag("Err",w,(function(t){t.prototype.render=function(){return this.$open(0).setChildren(this.data().message,3).synced()}})),M=p.defineTag("Instance",w,(function(t){t.prototype.render=function(){var t=this.$;return this.$open(0).setChildren(t[0]||c("div",t,0,this).flag("type"),2).synced((t[0].setContent(this.data().type(),3),!0))}})),L=p.defineTag("El",(function(t){var e={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,circle:!0,line:!0};t.prototype.el=function(){return this.data()},t.prototype.name=function(){return 8==this.type()?"comment":this.el().tagName.toLowerCase()},t.prototype.type=function(){return this.el().nodeType},t.prototype.classNames=function(){var t=this.el().className||"";return null!=t.baseVal&&(t=t.baseVal),t.replace(/\b(rnd(\d+)|__hover|__focus|__active)(\s+|$)/g,"").trim()},t.prototype.render=function(){var t=this.$,n=this;return n.$open(0).flag("el").setFlag(-1,"type"+n.type()).flagIf("selfclosing",e[n.name()]).setChildren(8==n.type()?(t[0]||c("span",t,0,n)).setContent(n.el().textContent,3):o.static([(t[1]||c("div",t,1,n).flag("open")).setContent([(t[2]||c("div",t,2,1).flag("name")).setText("<"+n.name()),function(t){var e,i=t.$iter();for(let s,a=0,u=r(n.el().attributes),p=u.length;a<p;a++){s=u[a];var o="class"==s.name?n.classNames():s.value;i.push((e=t[a]||(e=c("div",t,a)).flag("attr").setContent([c("div",e.$,"A",e).flag("name"),c("div",e.$,"B",e).flag("value")],2)).flagIf("hide","class"==s.name&&!o).end((e.$.A.setContent(s.name,3),e.$.B.setContent(o,3),!0)))}return i}(t[3]||a(t,3,t[1])),t[4]||c("div",t,4,1).flag("rb").setText(">")],1),(t[5]||c("div",t,5,n).flag("children")).flagIf("multi",n.el().children.length>0).setContent(function(t,e,i){for(let o,s=0,a=r(n.el().childNodes),u=a.length;s<u;s++)o=a[s],3==o.nodeType?i.push((t[s]||c("div",t,s).flag("text")).setContent(o.textContent,3)):i.push((e[s]||c(L,e,s)).setData(o).end());return i}(t[6]||a(t,6,t[5]),t[7]||a(t,7,t[5]),u()),5),(t[8]||c("div",t,8,n).flag("close")).setText("</"+n.name()+">")],2,1),3).synced()},t.prototype.ontap=function(t){var e;if(console.log("tapped element!"),8!=this.type())return(e=o.getTagForDom(this.data()))&&e.ontap&&e.ontap(t)}}));e.El=L;var P=p.defineTag("CommentEl",L,(function(t){t.prototype.render=function(){return this.$open(0).flag("el").setChildren(this.el().textContent,3).synced()},t.prototype.ontap=function(){return this}}));e.CommentEl=P;var N=p.defineTag("ConsoleEntry",(function(t){t.prototype.type=function(t){return this._type},t.prototype.setType=function(t){return this._type=t,this},t.prototype.options=function(t){return this._options},t.prototype.setOptions=function(t){return this._options=t,this},t.prototype.offset=function(t){return this._offset},t.prototype.setOffset=function(t){return this._offset=t,this},t.prototype.entry=function(t){return this._entry},t.prototype.setEntry=function(t){return this._entry=t,this},t.prototype.__hover={watch:"hoverDidSet",name:"hover"},t.prototype.hover=function(t){return this._hover},t.prototype.setHover=function(t){var e=this.hover();return t!=e&&(this._hover=t),t!=e&&this.hoverDidSet&&this.hoverDidSet(t,e,this.__hover),this},t.prototype.__selected={watch:"selectedDidSet",name:"selected"},t.prototype.selected=function(t){return this._selected},t.prototype.setSelected=function(t){var e=this.selected();return t!=e&&(this._selected=t),t!=e&&this.selectedDidSet&&this.selectedDidSet(t,e,this.__selected),this},t.prototype.hoverDidSet=function(t){return this.flag("__hover",!!t)},t.prototype.selectedDidSet=function(t){return this.flag("__selected",!!t)},t.prototype.isError=function(){return this.type()==y.LOG_TYPES.ERROR},t.prototype.icon=function(){switch(this.type()){case y.LOG_TYPES.INFO:return"directions";case y.LOG_TYPES.WARN:return"warning";case y.LOG_TYPES.ERROR:return"error";case y.LOG_TYPES.META:return"report";case y.LOG_TYPES.RESULT:return"keyboard_arrow_left";default:return"info"}},t.prototype.render=function(){var t=this.$;return _=0,0,this.$open(0).flag("scon").setFlag(-1,"t"+this.type()).setChildren([t[0]||c("span",t,0,this).flag("gutter").flag("icon"),this.counter()>1?(t[1]||c("div",t,1,this).flag("badge").flag("repeats")).setContent(this.counter(),3):void 0,this.body()],1).synced(),this},t.prototype.type=function(){return this.entry()[1]},t.prototype.items=function(){var t;return(t=this.entry()).ITEMS||(t.ITEMS=this.data().deserializeParams(this.entry()[0]))},t.prototype.ref=function(){return this.entry()[2]},t.prototype.counter=function(){return this.entry()[3]||1},t.prototype.space=function(){return this.data().space()},t.prototype.body=function(){this.$$||(this.$$={});var t,e=this;return(t=e._body=e._body||(t=c("div",e)).flag("body").flag("items")).flagIf("firstIsString",e.items()&&("string"==typeof e.items()[0]||e.items()[0]instanceof String)).setContent([t.$.A||c("div",t.$,"A",t).flag("offset"),function(t){for(let n=0,i=r(e.items()),o=t.taglen=i.length;n<o;n++)(t[n]||c(x,t,n)).setData(i[n]).dataset("ref",n).end();return t}(t.$.B||s(t.$,"B",e._body))],1).end((t.$.A.setContent(e.offset()?g.msToStr(e.offset()):"",3),!0))},t.prototype.onmouseover=function(t){t.event().relatedTarget},t.prototype.onmouseout=function(t){t.event().relatedTarget},t.prototype.ontap=function(t){},t.prototype.scrollIntoView=function(){var t;if(t=this.dom().parentNode){var e=t.scrollTop,n=e+t.offsetHeight,i=this.dom().offsetTop;if(i<e)return t.scrollTop=i;if(i>n)return t.scrollTop=i+20}},t.prototype.__uid=function(){return this._uid||(this._uid=[this.data().id(),this.ref()])},t.prototype.__lookup=function(t,e){void 0===e&&(e=0);var n=this;if(t instanceof Array)for(;e<i(t);){var r=t[e++];n=n.getChildByRef(r)}else n=this.getChildByRef(t);return n},t.prototype.getChildByRef=function(t){return this._body.dom().children[t+1]._tag},t.prototype.refForElement=function(t){t=t._dom||t;for(var e,n=[];t&&this.dom().contains(t);)(e=t.dataset.ref)&&(e.match(/^\d+$/)&&(e=parseInt(e)),n.unshift(e)),t=t.parentNode;return n.unshift(this.ref()),n.unshift(this.data().id()),n}}));e.ConsoleEntry=N;var $=p.defineTag("ConsolePane",d,(function(t){t.prototype.__hoverEntry={watch:"hoverEntryDidSet",name:"hoverEntry"},t.prototype.hoverEntry=function(t){return this._hoverEntry},t.prototype.setHoverEntry=function(t){var e=this.hoverEntry();return t!=e&&(this._hoverEntry=t),t!=e&&this.hoverEntryDidSet&&this.hoverEntryDidSet(t,e,this.__hoverEntry),this},t.prototype.space=function(){return this.data().space()},t.prototype.body=function(){this.$$||(this.$$={});return this._body||(this._body=this._body||c("div",this).flag("body"))},t.prototype.header=function(){let t;this.$$||(this.$$={});return(t=this._header=this._header||(t=c("div",this)).flag("header").on$(0,["tap","toggleEnabled"],this).setContent([c("div",t.$,"A",t).flag("title").setText("Console"),c("div",t.$,"B",t).flag("tools").setContent(t.$.C||c("div",t.$,"C","B").flag("tool").flag("toggler").dataset("icon","mup"),2)],2)).end((t.$.C.end(),!0))},t.prototype.toggleEnabled=function(){var t;return this.data().setEnabled(t=!this.data().enabled()),t},t.prototype.ontryclear=function(){return this.data().clear()},t.prototype.onwheel=function(t){return t.halt()},t.prototype.add=function(t){return this._group?this._group.add(t):this.body().dom().appendChild(t.dom()),this},t.prototype.rem=function(t){t.parent();return t.orphanize(),t==this._group&&(this._group=t.PREV_GROUP),this},t.prototype.group=function(t){return t.PREV_GROUP=this._group,this._group=t,this.body().dom().appendChild(this._group.dom()),this},t.prototype.refresh=function(){var t=this.body().dom().lastElementChild;return t&&t.offsetParent&&(this.body().dom().scrollTop=t.offsetTop+t.offsetHeight),this},t.prototype.hoverEntryDidSet=function(t,e){return this},t.prototype.relayout=function(){return this},t.prototype.clear=function(){let t=[];for(let e=0,n=r(this.body().dom().children),i=n.length;e<i;e++)t.push(n[e]._tag);var e=t;return this.body().dom().innerHTML="",e},t.prototype.set=function(t){this.body().dom().innerHTML="";for(let e=0,n=r(t),i=n.length;e<i;e++)this._body.dom().appendChild(n[e].dom());return this},t.prototype.revealEntriesInline=function(){return this},t.prototype.render=function(){return this.$open(0).setHoverEntry(this.data().getEntryForId(this.data().hoverEntry())).setChildren([this.header(),this.space().browser().page()?this.space().browser().page().logs().end():this.body(),this.footer()],1).synced()}}));function R(){return l.apply(this,arguments)}e.ConsolePane=$,o.subclass(R,l),e.Console=R,R.register("console",y),R.option("hoverEntry"),R.option("selectedEntry"),R.option("enabled",{default:!1,overridable:!0}),R.prototype.native=function(){return console},R.prototype.setup=function(){return this._entryMap={},this._activeEntries=[],this},R.prototype.nextEntryId=function(){return this.space().generateRandomId()},R.prototype.addEntry=function(t,e){var n=this.serializeParams(e);if(this._queue){var r=this._queue[i(this._queue)-1];r&&JSON.stringify(r[1][0])==JSON.stringify(n)?(console.log("second entry is the same!"),r[1][3]++):this._queue.push([y.LOG,[n,t,this.nextEntryId(),1]])}else this.push_(y.LOG,[n,t,this.nextEntryId(),1])},R.prototype.createEntry=function(t,e,n){void 0===n&&(n=1);var i=this.serializeParams(e);return[y.LOG,[i,t,this.nextEntryId(),n]]},R.prototype.getEntryForId=function(t){return t&&this._entryMap[t]},R.prototype.getChildById=function(t){return t&&this._entryMap[t]},R.prototype.startQueue=function(){return this._queue=[],this},R.prototype.flushQueue=function(){if(this._queue&&i(this._queue)){var t=i(this._queue),e=this._queue;if(t>30){var n=this._queue.slice(0,10),r=this._queue.slice(-10),o=this.createEntry(y.LOG_TYPES.META,["truncated "+(t-20)+" log entries"],t-20);n.push(o),e=n.concat(r)}this.batch_(e)}return this._queue=null,this},R.prototype.log=function(){for(var t,e=arguments,n=e.length,i=new Array(n>0?n:0);n>0;)i[n-1]=e[--n];return this.addEntry(y.LOG_TYPES.LOG,i),(t=this.native()).log.apply(t,i)},R.prototype.info=function(){for(var t=arguments,e=t.length,n=new Array(e>0?e:0);e>0;)n[e-1]=t[--e];return this.addEntry(y.LOG_TYPES.INFO,n)},R.prototype.error=function(){for(var t=arguments,e=t.length,n=new Array(e>0?e:0);e>0;)n[e-1]=t[--e];return this.addEntry(y.LOG_TYPES.ERROR,n)},R.prototype.warn=function(){for(var t=arguments,e=t.length,n=new Array(e>0?e:0);e>0;)n[e-1]=t[--e];return this.addEntry(y.LOG_TYPES.WARN,n)},R.prototype.result=function(){for(var t=arguments,e=t.length,n=new Array(e>0?e:0);e>0;)n[e-1]=t[--e];return this.addEntry(y.LOG_TYPES.RESULT,n)},R.prototype.clear=function(){return this.push_(m.CONSOLE_CLEAR,[])},R.prototype.serializeParams=function(t){return JSON.parse(JSON.stringify(t,JSONFormatter))},R.prototype.deserializeParams=function(t){return t&&(t=JSON.stringify(t)),"string"==typeof t?JSON.parse(t,b):t},R.prototype.isEnabled=function(){return this.enabled()},R.prototype.clearEntryCollections=function(){return this._errors=null,this._warnings=null},R.prototype.errors=function(){return this._errors||(this._errors=this._activeEntries.filter((function(t){return t[1]==y.LOG_TYPES.ERROR})))},R.prototype.apply=function(t){var e,n=t._params;switch(t._type){case m.CONSOLE_CLEAR:n.REV=this.node().clear(),n.REVTAB||(n.REVTAB=[this.tab().warnings(),this.tab().errors()]),n.REVACTIVE=this._activeEntries||[],this._activeEntries=[],this.tab().setWarnings(0),this.tab().setErrors(0);break;case m.CONSOLE_LOG:this.clearEntryCollections();var i=n[2],r=(n[1],n.ENTRY,n.ENTRY||(n.ENTRY=c(N).flag("collapsed").setData(this).setEntry(n).setOffset(t._offset).end()));this._entryMap[i]||(this._entryMap[i]=r),this.node().add(r),this._activeEntries.push(n),this.async("refresh");break;case y.VAL_EXPAND:(e=this.space().__lookup(n[0]))&&e.setExpanded&&e.setExpanded(n[1])}return this.clearEntryCollections(),this},R.prototype.revert=function(t){var e;this.clearEntryCollections();var n=t._params;if(n.ENTRY){this.node().rem(n.ENTRY),n!=this._activeEntries.pop()&&console.warn("tried op.ENTRY opp")}switch(t._type){case m.CONSOLE_CLEAR:this.node().set(n.REV),this.async("refresh"),this._activeEntries=n.REVACTIVE||[];break;case m.CONSOLE_VAL_EXPAND:(e=this.space().__lookup(n[0]))&&e.setExpanded&&e.setExpanded(!n[1])}return n.REVTAB&&(this.tab().setWarnings(n.REVTAB[0]),this.tab().setErrors(n.REVTAB[1])),this},R.prototype.refresh=function(){return this.node().refresh()},R.prototype.title=function(){return"Console"},R.prototype.valForOp=function(t){return t.VAL||(t.VAL=c(x).setData(this.deserializeParams(t[0])).end())},R.prototype.dispose=function(){return this._entryMap=null,this},R.prototype.persist_=function(){var t=this._activeEntries;return t.length?this._data.activeEntries=t:(this._data.activeEntries,delete this._data.activeEntries),this},R.prototype.deserialized=function(){R.prototype.__super__.deserialized.apply(this,arguments);var t=this._data.activeEntries;if(t)for(let e=0,n=r(t),i=n.length;e<i;e++){let t={_offset:0,_params:n[e],_type:m.CONSOLE_LOG};this.apply(t)}return this},R.prototype.node=function(){return this._node||(this._node=c($).flag("normal").setData(this).end())}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(0),o=r.createElementFactory(),s=n(1),a=s.SIMULATOR,u=s.ACTION,p=s.SPIV,c=(n(7).List,n(3).Widget,n(26).PaneWidget),h=(n(80).Stylesheet,n(203).SimulatorView),l=(n(40).Action,n(10).Dimensions);function d(){return c.apply(this,arguments)}r.subclass(d,c),e.Simulator=d,d.register("simulator",a),d.prototype.ctx=function(t){return this._ctx},d.prototype.setCtx=function(t){return this._ctx=t,this},d.prototype.player=function(t){return this._player},d.prototype.setPlayer=function(t){return this._player=t,this},d.prototype.bundle=function(t){return this._bundle},d.prototype.setBundle=function(t){return this._bundle=t,this},d.prototype.elements=function(t){return this._elements},d.prototype.setElements=function(t){return this._elements=t,this},d.prototype.running=function(t){return this._running},d.prototype.setRunning=function(t){return this._running=t,this},d.prototype.loading=function(t){return this._loading},d.prototype.setLoading=function(t){return this._loading=t,this},d.prototype.mode=function(t){return this.getAttribute("mode")},d.prototype.setMode=function(t){return this.setAttribute("mode",t),this},d.option("baseStyle",{default:"normalize"}),d.option("area",{default:"aside",overridable:!0}),d.option("resizing",{default:!1}),d.option("autoIncludeCSS",{default:!0}),d.option("externaljs"),d.option("visible",{default:!1}),d.option("spiv"),d.prototype.width=function(){return this.layout()?this.layout()[2]:300},d.prototype.height=function(){return this.layout()?this.layout()[3]:400},d.prototype.clientLayout=function(){return(this._clientLayout||(this._clientLayout=new l(null))).wrap(this._node?this._node._layout:null)},d.prototype.defaultLayout=function(){var t=this.space().vw(),e=this.space().vh(),n=t-300-40,i=.3*(e-400);return l.build({left:n,top:i,width:300,height:400,vw:t,vh:e,scaleX:100,scaleY:100}).round()},d.prototype.console=function(){return this.root_().console()},d.prototype.node=function(){return this._node||(this._node=o(h).setTitle("Preview").setData(this).end())},d.prototype.setup=function(){var t=this;t.node(),t.setPlayer(t.node().player());for(let e=0,n=i(t.space().files()),r=n.length;e<r;e++)t.bindFile(n[e]);return t.space().files().on("add",(function(e){return t.bindFile(e)})),t.space().files().on("remove",(function(e){return t.unbindFile(e)})),t},d.prototype.bindFile=function(t){if(t.on("modified",this,"onfilemodified"),"css"==t.lang())return this.player().addCSSFile(t),this},d.prototype.unbindFile=function(t){return t.un("modified",this,"onfilemodified"),"css"==t.lang()&&this.player().removeCSSFile(t),this},d.prototype.onfilemodified=function(t){if("css"!=t.lang())return this},d.prototype.persist_=function(){return this._data.body=this.player().bridge().toSnapshot(),this},d.prototype.refresh=function(){return this},d.prototype.root=function(){return this.player().doc()&&this.player().doc().body},d.prototype.enabled=function(){return!0},d.prototype.deserializeWidgets=function(){return this},d.prototype.deserialized=function(){var t;return d.prototype.__super__.deserialized.apply(this,arguments),(t=this.player())&&t.deserialized&&t.deserialized()},d.prototype.title=function(){return"Preview"},d.prototype.stop=function(){return this.running()&&this.setRunning(!1),this},d.prototype.apply=function(t){let e=t.params();return t._type==u.SIM_BUILD?(t.PREV=this.bundle(),this.space().timeline().isPaused()||this.setLoading(!0)):t._type==u.SIM_RESULT&&(this.setLoading(!1),this.setVisible(!!e[1])),this},d.prototype.revert=function(t){switch(t._type){case u.SIM_BUILD:this.setLoading(!1)}return this},d.prototype.convertToBrowser=function(){if(this.spiv()!=p){var t={};for(let e,n=0,r=i(this.space().files()),o=r.length;n<o;n++)e=r[n],t[e.name()]=e;var e=t["index.html"],n=t["index.css"],r=t["index.js"],o=[],s=[];for(let t=0,e=i(this.externaljs()),n=e.length;t<n;t++)s.push('\t<script src="'+e[t]+'"><\/script>');if(n&&s.push('\t<link rel="stylesheet" href="'+n.name()+'">'),r){let t=r.name();r.body().indexOf("require")>=0&&(t+=".pack.js"),o.push('\t<script src="'+t+'"><\/script>')}var a=e?e.body():"";return a=a.indexOf("<body")<0?"<html>\n<head>\n"+s.join("\n")+"\n</head>\n<body>\n"+a+"\n"+o.join("\n")+"\n</body>\n</html>":s.join("\n")+a+"\n"+o.join("\n"),e?e.replaceBody(a,!0):this.space().createWidget({type:"file",name:"index.html",body:a}),this.layout()&&this.space().browser().setLayout(this.streamLayout().clone().set({targetRef:this.space().browser().id()})),this.setVisible(!1),this.setSpiv(p),this}},d.prototype.dispose=function(){return this._lastResultEvent=null,this.node().dispose()}},function(t,e,n){var i=n(0),r=i.createTagScope(),o=i.createElementFactory(),s=n(1),a=(s.SIMULATOR,s.SCON,n(7).List),u=n(204).DOMPlayer,p=n(80).Stylesheet,c=(n(64).WindowGesture,n(81).LayoutGesture),h=(n(9).Delay,n(10).Dimensions,r.defineTag("Frame","iframe",(function(t){t.prototype.sandbox=function(t){return this.getAttribute("sandbox")},t.prototype.setSandbox=function(t){return this.setAttribute("sandbox",t),this},t.prototype.zoom=function(t){return this._zoom},t.prototype.setZoom=function(t){return this._zoom=t,this},t.prototype.src=function(t){return this._src},t.prototype.setSrc=function(t){return this._src=t,this},t.prototype.__baseStyle={watch:"baseStyleDidSet",name:"baseStyle"},t.prototype.baseStyle=function(t){return this._baseStyle},t.prototype.setBaseStyle=function(t){var e=this.baseStyle();return t!=e&&(this._baseStyle=t),t!=e&&this.baseStyleDidSet&&this.baseStyleDidSet(t,e,this.__baseStyle),this},t.prototype.cssFiles=function(t){return this._cssFiles},t.prototype.setCssFiles=function(t){return this._cssFiles=t,this},t.prototype.__frameContext={watch:"frameContextDidSet",name:"frameContext"},t.prototype.frameContext=function(t){return this._frameContext},t.prototype.setFrameContext=function(t){var e=this.frameContext();return t!=e&&(this._frameContext=t),t!=e&&this.frameContextDidSet&&this.frameContextDidSet(t,e,this.__frameContext),this},t.prototype.didFocus=function(){return this.data().focus_()},t.prototype.cssOptions=function(){return{}},t.prototype.addCSSFile=function(t){var e;this._cssFiles.add(t);var n=this._cssSheets[e=t.id()]||(this._cssSheets[e]=new p(t,this.cssOptions()));return n&&n.setDoc(this.doc()),this},t.prototype.removeCSSFile=function(t){var e;return(e=this._cssSheets[t.id()])&&e.setDoc(null),this._cssFiles.remove(t),this},t.prototype.getSheetForCSSFile=function(t){return this._cssSheets[t.id()]},t.prototype.setup=function(){var e=this;return e._cssSheets={},e._cssFiles=new a(e,[]),e._docflags={},e.dom().src=e.src(),e.dom().onload=function(t){return e.setFrameContext(e.dom().contentWindow),e.loaded(t)},t.prototype.__super__.setup.apply(e,arguments)},t.prototype.reload=function(t){return t&&i.once(this,"ready",t),this.ctx().location.reload()},t.prototype.ctx=function(){return this.dom().contentWindow},t.prototype.doc=function(){return this.dom().contentDocument||this.ctx()&&this.ctx().document},t.prototype.body=function(){return this.doc().body},t.prototype.scripts=function(){return[]},t.prototype.isReady=function(){return this._isReady},t.prototype.resetStylesheets=function(){var t;for(let n=0,i=(t=this.cssFiles())?t.toArray?t.toArray():t:[],r=i.length;n<r;n++){var e=this.getSheetForCSSFile(i[n]);e&&e.setDoc(this.doc())}return this},t.prototype.cssSuffix=function(){return""},t.prototype.loaded=function(t){var e=this,n="<link href='/static/simulator/"+(e.baseStyle()||"normalize")+e.cssSuffix()+".css' rel='stylesheet' type='text/css' id='scrimbaBaseStyleLink' />";e.doc().head.innerHTML=n,e.resetStylesheets();var i=e.scripts().slice(0),r=function(){var t;if(t=i.shift()){var n=e.doc().createElement("script");return n.type="text/javascript",n.src=t,e.doc().head.appendChild(n),n.onload=r}return e.onready(e)};return r(),e},t.prototype.onready=function(){return this._isReady=!0,this.trigger("frameload"),i.emit(this,"ready"),this},t.prototype.setZoom=function(t){return this._zoom=t,this},t.prototype.commit=function(){return this.setBaseStyle(this.data().baseStyle()),this},t.prototype.resize=function(){return this},t.prototype.baseStyleDidSet=function(t,e){return this.ctx()&&this.ctx().scrimbaBaseStyleLink&&this.ctx().scrimbaBaseStyleLink.setAttribute("href","/static/simulator/"+(t||"blank")+this.cssSuffix()+".css"),this},t.prototype.frameContextDidSet=function(t,e){return e&&(e.ScrimbaConsole=null),t&&(t.NativeConsole=t.console),this},t.prototype.dispose=function(){var t=this;return t.dom().onload=null,t.setFrameContext(null),t._cssFiles.toClonedArray().map((function(e){return t.removeCSSFile(e)})),t._cssSheets=null,t._cssFiles=null,t.ctx()&&t.ctx().location.reload(),t}}))),l=r.defineTag("Player",h,(function(t){t.prototype.cssOptions=function(){return{fakePseudoStates:!0}},t.prototype.cssSuffix=function(){return".preview"},t.prototype.src=function(){return"/cast/"+this.data().space().id()+".preview"},t.prototype.mutator=function(){return this._mutator||(this._mutator=new u(this))},t.prototype.bridge=function(){return this.mutator()},t.prototype.onready=function(){return this.bridge().attachTo(this.ctx(),this.body()),t.prototype.__super__.onready.apply(this,arguments),this._snapshot&&(this.bridge().fromSnapshot(this._snapshot),this._snapshot=null),this},t.prototype.nodeForPath=function(t){return this.bridge().nodeForPath(t)},t.prototype.dispose=function(){return this._mutator&&this._mutator.dispose&&this._mutator.dispose(),this._mutator=null,t.prototype.__super__.dispose.apply(this,arguments)},t.prototype.deserialized=function(){var t=this.data().data().body;return this.bridge().fromSnapshot(t),this}})),d=r.defineTag("Resizer"),f=r.defineTag("SimulatorHeader",(function(t){t.prototype.zoom=function(t){return this._zoom},t.prototype.setZoom=function(t){return this._zoom=t,this},t.prototype.close=function(t){return t.halt(),this.api().log("warn","SIM_CLOSE - not implemented - should stop running")},t.prototype.min=function(t){return t.halt(),this.data().blur_()},t.prototype.render=function(){var t=this.$;return this.$open(0).dataset("gesture","move").setChildren(t.$=t.$||[o("div",t,0,this).flag("center").setContent([o("div",t,1,0).flag("title").setText("Preview"),o("div",t,2,0).flag("sizing").setContent([o("span",t,3,2).flag("size").setContent([o("span",t,4,3).flag("w"),o("span",t,5,3).flag("x").setText("×"),o("span",t,6,3).flag("h")],2),o("span",t,7,2).flag("zoom")],2)],2),o("div",t,8,this).flag("lft")],2).synced((t[4].setContent(this.data().width(!1),3),t[6].setContent(this.data().height(!1),3),t[7].setText(" ("+(100*(this.zoom()||1)).toFixed(0)+"%)"),!0))}})),y=r.defineTag("SimulatorView",(function(t){t.prototype.title=function(t){return this._title},t.prototype.setTitle=function(t){return this._title=t,this},t.prototype.__playback={default:!0,name:"playback"},t.prototype.playback=function(t){return this._playback},t.prototype.setPlayback=function(t){return this._playback=t,this},t.prototype._playback=!0,t.prototype.__show={watch:"showDidSet",name:"show"},t.prototype.show=function(t){return this._show},t.prototype.setShow=function(t){var e=this.show();return t!=e&&(this._show=t),t!=e&&this.showDidSet&&this.showDidSet(t,e,this.__show),this},t.prototype.zoom=function(t){return this._zoom},t.prototype.setZoom=function(t){return this._zoom=t,this},t.prototype.__autoPos={default:!0,name:"autoPos"},t.prototype.autoPos=function(t){return this._autoPos},t.prototype.setAutoPos=function(t){return this._autoPos=t,this},t.prototype._autoPos=!0,t.prototype.__autoSize={default:!0,name:"autoSize"},t.prototype.autoSize=function(t){return this._autoSize},t.prototype.setAutoSize=function(t){return this._autoSize=t,this},t.prototype._autoSize=!0,t.prototype.setup=function(){return this._zoom=1,this.body(),this},t.prototype.mount=function(){var t=this;return t.data().space().on("reflow",(function(){return t.reflow(!0)})),t.data().space().on("resize",(function(){var e=t.data().space().view().box();return t.log("viewport resized",e)})),t._mounted=!0,t.reflow(!0),t},t.prototype.body=function(){this.$$||(this.$$={});return this._body=this._body||o("div",this).flag("body")},t.prototype.onresizeupdate=function(t){var e;this.setAutoSize(!1);let n=t.layout(),i={width:n.width()+t.dx()*t.ax(),height:n.height()+t.dy()*t.ay(),left:n.left(),top:n.top()};return t.ax()<0&&(i.left+=(i.width-n.width())*t.ax()),t.ay()<0&&(i.top+=(i.height-n.height())*t.ay()),this.redraw(this._layout.set(i)),this.data().setLayout(e=this._layout.clone()),e},t.prototype.onmoveupdate=function(t){this.setAutoPos(!1);var e=Math.round(t.layout().left()+t.dx()),n=Math.round(Math.max(t.layout().top()+t.dy(),40));return this._layout.set({left:e,top:n}),this.data().setLayout(this._layout.clone()),this.redraw()},t.prototype.ondblclick=function(){return this.setAutoPos(!0),this.setAutoSize(!0),this.reflow(!0)},t.prototype.relayout=function(){return this},t.prototype.redraw=function(t){void 0===t&&(t=this._layout);let e="calc((100% - "+t.width()+"px) * "+t.anchorX()+")",n="calc((100% - "+t.height()+"px) * "+t.anchorY()+")";return this._body.css({width:"100%",height:"100%",transform:"scale(1)"}),this.css({width:t.width(),height:t.height(),left:e,top:n}),this.flag("narrow",t.width()<150)},t.prototype.reflow=function(t){void 0===t&&(t=!1);var e=this.data().agentLayout(),n=e._v;if((n!=this._v||t)&&e._data){var i=this.data().space().view().box(),r=i.width,o=i.height,s=this._layout||(this._layout=e.clone());n!=this._v?this.autoPos()&&this.autoSize()?s.set(e.toObject()).resizeParent(r,o):this.autoSize()?s.resizeParent(r,o).resize(e.width(),e.height()):this.autoPos():s.resizeParent(r,o),this._v=n,s.round(),this.redraw(this._layout=s)}},t.prototype.isMovable=function(){return!this.api().isMobile()},t.prototype.ontouchstart=function(t){if(this.isMovable())return c.wrap(t,{layout:this._layout})},t.prototype.discardLocalSize=function(){return this.setAutoSize(!0),this.reflow()},t.prototype.dirty=function(){return this._dirty=!0},t.prototype.showDidSet=function(t,e){return this.flag("show",!!t)},t.prototype.shouldFocus=function(){return this.data().isFocused()},t.prototype.focus_=function(){return this.data().focus_()},t.prototype.ontap=function(){if(!(this._resizedAt&&Date.now()-this._resizedAt<200)&&this.data().space().branch().canPush())return this.data().focus_()},t.prototype.interact=function(){return this.data().space().actions().exec("run")},t.prototype.onwheel=function(t){return t.silence(),this},t.prototype.clientLayout=function(){return this._layout},t.prototype.dispose=function(){return this._player&&this._player.dispose&&this._player.dispose(),this},t.prototype.player=function(){this.$$||(this.$$={});return this._player||(this._player=this._player||o(l,this).flag("player").setSandbox("allow-same-origin")).bindData(this,"data",[]).end()},t.prototype.render=function(){var t,e=this.$;return!this.data().visible()&&this._rendered?(this.setShow(!1),this):(this._mounted&&this.reflow(),this._rendered=!0,this.$open(0).flag("reflow").dataset("gesture","move").flagIf("focus",this.shouldFocus()).flagIf("running",this.data().running()).setShow(this.data().visible()).setChildren(e.$=e.$||[t=this._chrome=this._chrome||(t=o("div",this)).flag("chrome").setContent([this._header=this._header||o(f,t).flag("header").flag("handle"),o(d,e,0,t).flag("left").dataset("gesture","resize,l"),o(d,e,1,t).flag("right").dataset("gesture","resize,r"),o(d,e,2,t).flag("bottom").dataset("gesture","resize,b"),o(d,e,3,t).flag("br").dataset("gesture","resize,b,r"),o(d,e,4,t).flag("bl").dataset("gesture","resize,b,l")],2),this._pointerframe=this._pointerframe||o("div",this).flag("pointerframe"),this._body=this._body||o("div",this).flag("body")],2).synced((this._header.bindData(this,"data",[]).setZoom(this._zoom).end(),e[0].end(),e[1].end(),e[2].end(),e[3].end(),e[4].end(),this._body.setContent(this.player().end(),3),!0)))}}));e.SimulatorView=y},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(1).DOM.MUTS,o=n(74).patchString,s={head:"html",body:"html",thead:"table",tbody:"table",tr:"tbody",td:"tr",th:"td",option:"select"};function a(t,e){void 0===e&&(e={}),this._owner=t,this._listener=null,this._options=e,this._queue=[],this._context=window,this._root=document.createElement("body")}e.DOMPlayer=a,a.prototype.root=function(t){return this._root},a.prototype.setRoot=function(t){return this._root=t,this},a.prototype.__focusNode={watch:"focusNodeDidSet",name:"focusNode"},a.prototype.focusNode=function(t){return this._focusNode},a.prototype.setFocusNode=function(t){var e=this.focusNode();return t!=e&&(this._focusNode=t),t!=e&&this.focusNodeDidSet&&this.focusNodeDidSet(t,e,this.__focusNode),this},a.prototype.__hoverNode={watch:"hoverNodeDidSet",name:"hoverNode"},a.prototype.hoverNode=function(t){return this._hoverNode},a.prototype.setHoverNode=function(t){var e=this.hoverNode();return t!=e&&(this._hoverNode=t),t!=e&&this.hoverNodeDidSet&&this.hoverNodeDidSet(t,e,this.__hoverNode),this},a.prototype.__activeNode={watch:"activeNodeDidSet",name:"activeNode"},a.prototype.activeNode=function(t){return this._activeNode},a.prototype.setActiveNode=function(t){var e=this.activeNode();return t!=e&&(this._activeNode=t),t!=e&&this.activeNodeDidSet&&this.activeNodeDidSet(t,e,this.__activeNode),this},a.prototype.scrollNode=function(t){return this._scrollNode},a.prototype.setScrollNode=function(t){return this._scrollNode=t,this},a.prototype.__selection={watch:"selectionDidSet",name:"selection"},a.prototype.selection=function(t){return this._selection},a.prototype.setSelection=function(t){var e=this.selection();return t!=e&&(this._selection=t),t!=e&&this.selectionDidSet&&this.selectionDidSet(t,e,this.__selection),this},a.prototype.attachTo=function(t,e){if(this._root){t.document.body;t.document.adoptNode(this._root),e.parentNode.replaceChild(this._root,e),this.reindexNodes()}else this._root=e;return this._context=t,this._context.onsubmit=function(t){return t.stopPropagation(),t.preventDefault(),!1},this},a.prototype.win=function(){return this._context},a.prototype.doc=function(){return this.win().document},a.prototype.indexNode=function(t,e){if(void 0===e&&(e=!0),!t.hasChildNodes()){if(!e)return this;let n=this._nodes.push(t);return t.SCRIMBA_INDEX=n-1,this}for(var n,i=NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT|NodeFilter.SHOW_COMMENT,r=this.doc().createNodeIterator(t,i,null);n=r.nextNode();)(e||n!=t)&&(n.SCRIMBA_INDEX=this._nodes.push(n)-1);return this},a.prototype.reindexNodes=function(){return this._nodes=[],this.indexNode(this.root()),this},a.prototype.nodeForPath=function(t){return this._nodes?this._nodes[t]:null},a.prototype.deserializeNode=function(t){return"number"==typeof t||t instanceof Number?this.nodeForPath(t):this.nodeForHTML(t)},a.prototype.serializeRoot=function(){return this.root().innerHTML},a.prototype.toSnapshot=function(t){return void 0===t&&(t={}),{html:this.serializeRoot()}},a.prototype.fromSnapshot=function(t){return t&&t.html&&(this.root().innerHTML=t.html),this},a.prototype.nodeForHTML=function(t){if(t instanceof Array)t="<div>placeholder</div>";else{if(t.text)return this.doc().createTextNode(t.text);if(t.comment)return this.doc().createComment(t.comment);if(8==t.TYPE)return this.doc().createComment(t.value)}var e=t.slice(1).match(/^\w+/)[0],n=this.doc().createElement(s[e]||"div");return n.innerHTML=t,"body"==e?n.lastElementChild:n.firstElementChild},a.prototype.cleanTextSplitters=function(t){for(var e,n=this.doc().createNodeIterator(t,NodeFilter.SHOW_COMMENT,null);e=n.nextNode();)"§S§"==e.textContent?e.parentNode.removeChild(e):"§S§B"==e.textContent&&e.parentNode.replaceChild(this.doc().createTextNode(""),e);return t},a.prototype.applyMutations=function(t){var e,n=!1;for(let h,l=0,d=i(t),f=d.length;l<f;l++)if(h=d[l],h[0]==r.INIT)if(n=!0,this.setSelection(null),h.PREV||(h.PREV=[].slice.call(this.root().childNodes)),h.NODES){this.root().innerHTML="";for(let t=0,e=i(h.NODES),n=e.length;t<n;t++)this.root().appendChild(e[t])}else this.root().innerHTML=h[1],h[1].indexOf("§S§")>=0&&this.cleanTextSplitters(this.root()),h.NODES=[].slice.call(this.root().childNodes);else if(h[0]==r.INSERT){n=!0;var s=this.nodeForPath(h[1]),a=h[2],u=h.NODE||(h.NODE=this.deserializeNode(h[3])),p=s.childNodes[a];p?s.insertBefore(u,p):s.appendChild(u),this.indexNode(u)}else if(h[0]==r.INSERT_ADJACENT){n=!0;let t=h.RELNODE||(h.RELNODE=this.nodeForPath(h[1])),e=r.POS[h[2]];if(h.NODES){for(let e,n=0,r=i(h.NODES),o=r.length;n<o;n++)e=r[n],0==h[2]?t.parentNode.insertBefore(e,t):2==h[2]?t.appendChild(e):console.log("node not added in M.INSERT_ADJACENT!!",h);continue}let o,s,a=h[3],u=t.previousSibling,p=(t.nextSibling,t.parentNode),c=t.lastChild,l="",d=[];if(0==h[2]&&t.nodeType!=Node.ELEMENT_NODE&&(o=document.createElement("span"),p.insertBefore(o,t),t=o),"number"==typeof a){let n=this.nodeForPath(a);t.insertAdjacentElement(e,n),d.push(n),h.NODES=[n],o&&p.removeChild(o);continue}if("string"==typeof a)t.insertAdjacentHTML(e,a),l+=a;else for(let n,r=0,o=i(a),s=o.length;r<s;r++)if(n=o[r],"string"==typeof n)t.insertAdjacentHTML(e,n),l+=n;else if("number"==typeof n){let i=this.nodeForPath(n);t.insertAdjacentElement(e,i),d.push(i)}let f=[];for(l.indexOf("§S§")>=0&&this.cleanTextSplitters(p),"beforeend"==e?s=c?c.nextSibling:t.firstChild:"beforebegin"==e&&(s=u?u.nextSibling:p.firstChild);s&&s!=t;)d.indexOf(s)<0&&this.indexNode(s),f.push(s),s=s.nextSibling;o&&p.removeChild(o),h.NODES=f}else if(h[0]==r.REMOVE)n=!0,(e=h.NODE||(h.NODE=this.nodeForPath(h[1])))&&(h.REL||(h.REL=e.nextSibling),h.PARENT||(h.PARENT=e.parentNode),e.parentNode?e.parentNode.removeChild(e):console.warn("M.REMOVE has no parent",e,e.parentNode,h,h.PARENT));else if(h[0]==r.SETTEXT)(e=h.NODE=this.nodeForPath(h[1]))&&(h.PREV=e.textContent,e.textContent=o(h.PREV,h[2]));else if((e=h.NODE=this.nodeForPath(h[1]))&&h[0]==r.SETPROP){var c=r.NAME_MAP[h[2]]||h[2];h.PREV||(h.PREV=e[c]),e[c]=h[3]}else e&&h[0]==r.SETATTR&&(c=r.NAME_MAP[h[2]]||h[2],h.PREV||(h.PREV=e.getAttribute(c)),"class"==c&&(h.STATEFLAGS||(h.STATEFLAGS=e.className.split(" ").filter((function(t){return t.match(/^__\w+/)})))),null==h[3]?e.removeAttribute(c):e.setAttribute(c,h[3]),h.STATEFLAGS&&h.STATEFLAGS.map((function(t){return e.classList.add(t)})));return n&&this.reindexNodes(),this},a.prototype.revertMutations=function(t){for(var e,n,o=!1,s=((n=t)&&(n.len instanceof Function?n.len():n.length)||0)-1;s>=0;){var a=t[s--];if(a[0]==r.INIT){this.root().innerHTML="";for(let t=0,e=i(a.PREV),n=e.length;t<n;t++)this.root().appendChild(e[t]);this.setSelection(null),o=!0}else if(a[0]==r.INSERT)o=!0,(e=a.NODE)&&(e.parentNode?e.parentNode.removeChild(e):console.warn("revert INSERT - no parent!",e));else if(a[0]==r.INSERT_ADJACENT){o=!0;for(let t,e=0,n=i(a.NODES),r=n.length;e<r;e++)t=n[e],t.parentNode?t.parentNode.removeChild(t):console.warn("revert INSERT_ADJACENT - no parent!",t,a)}else if(a[0]==r.REMOVE){o=!0;var u=a.PARENT;a.REL?u.insertBefore(a.NODE,a.REL):u.appendChild(a.NODE)}else if(a[0]==r.SETTEXT&&a.NODE)a.NODE.textContent=a.PREV;else if(a[0]==r.SETPROP&&a.NODE){var p=r.NAME_MAP[a[2]]||a[2];a.NODE[p]=a.PREV}else a[0]==r.SETATTR&&a.NODE&&(p=r.NAME_MAP[a[2]]||a[2],null==a.PREV?a.NODE.removeAttribute(p):a.NODE.setAttribute(p,a.PREV))}return o&&this.reindexNodes(),this},a.prototype.synced_=function(){return this},a.prototype.refreshPseudoClass=function(t,e,n){for(;n&&n!=this.root()&&(!e||!n.contains(e));)n.classList&&n.classList.remove(t),n=n.parentNode;for(;e&&e!=this.root()&&this.root().contains(e);)e.classList&&e.classList.add(t),e=e.parentNode},a.prototype.focusNodeDidSet=function(t,e){if(e&&e.classList&&e.classList.remove("__focus"),t&&t.classList)return t.classList.add("__focus")},a.prototype.hoverNodeDidSet=function(t,e){return this.refreshPseudoClass("__hover",t,e)},a.prototype.activeNodeDidSet=function(t,e){return this.refreshPseudoClass("__active",t,e)},a.prototype.selectionDidSet=function(t,e){if(this.win()==window||!this.win()||!this.win().getSelection)return this;var n=this.win().getSelection();if(n){if(!t||!t.NODE||t.NODE==this.root())return n&&n.removeAllRanges(),this;var i=t.NODE,r=t[1],o=t[2],s=t[3]?this.nodeForPath(t[3]):i;if("INPUT"==i.nodeName||"TEXTAREA"==i.nodeName){if("INPUT"==i.nodeName&&!/text|search|password|tel|url/.test(i.type))return;r<o?i.setSelectionRange(r,o,"forward"):r>o?i.setSelectionRange(o,r,"backward"):i.setSelectionRange(r,o,"none")}else{var a=this.doc().createRange();if(i!=s)i.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_PRECEDING?(a.setStart(s,o),a.setEnd(i,r)):(a.setStart(i,r),a.setEnd(s,o));else 3==i.nodeType&&(r=Math.min(i.length,r),o=Math.min(i.length,o)),r<=o?(a.setStart(i,r),a.setEnd(i,o)):(a.setStart(i,o),a.setEnd(i,r)),r==o&&a.collapse();n.removeAllRanges(),n.addRange(a)}}},a.prototype.dispose=function(){return this.setActiveNode(null),this.setFocusNode(null),this.setHoverNode(null),this.setSelection(null),this._nodes=[],this._context=null,this}},function(t,e,n){var i=n(0),r=i.createTagScope(),o=i.createElementFactory(),s=n(1).WIDGET,a=n(3).Widget,u=r.defineTag("InspectorView",(function(t){t.prototype.flex=function(){return"0 0 "+Math.round(this.data().colspan()/1.2).toFixed()+"%"},t.prototype.render=function(){return this.$open(0).flag("dark").flag("abs").flag("scroll").setFlag(-1,this.data().dock()).flagIf("show",this.data().shouldShow()).css("flex",this.flex()).setChildren(this.data().space().console().node().end(),3).synced()}}));function p(){return a.apply(this,arguments)}e.InspectorView=u,i.subclass(p,a),e.InspectorWidget=p,p.register("inspector",s),p.option("dock",{options:["right","bottom","detached"],default:"right"}),p.option("colspan",{default:40}),p.prototype.__reveal={default:-1,chainable:!0,watch:"revealDidSet",name:"reveal"},p.prototype.reveal=function(t){return void 0!==t?(this.setReveal(t),this):this._reveal},p.prototype.setReveal=function(t){var e=this.reveal();return t!=e&&(this._reveal=t),t!=e&&this.revealDidSet&&this.revealDidSet(t,e,this.__reveal),this},p.prototype._reveal=-1,p.prototype.cssWidth=function(){return Math.round(this.colspan()/1.2).toFixed()+"%"},p.prototype.shouldShow=function(){return this.space().console().isEnabled()},p.prototype.node=function(){this.$$||(this.$$={});return this._node||(this._node=this._node||o(u,this).flag("node")).setData(this).end()},p.prototype.revealDidSet=function(t){return this}},function(t,e,n){function i(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=n(0),s=o.createTagScope(),a=o.createElementFactory(),u=n(1),p=u.ACTION,c=u.DOM,h=u.KEYS,l=u.LAYOUTMASK,d=n(10).Dimensions,f=(n(2).IconButton,n(26).PaneWidget),y=n(81).LayoutGesture,m=(n(9).Delay,n(25).PlayerPage),g=n(207).History,_=n(208).ContentEditable,v=n(2).Indicator,b=n(209),w=(b.SKCubeGrid,b.SKCubeMove,b.SKDoubleBounce),x=n(210).BrowserConfigurationDialog,S=n(76),T=(e.BROWSER_MAX="max",e.BROWSER_MIN="min",e.BROWSER_WINDOWED="win",s.defineTag("BrowserPathField",(function(t){t.prototype.ontap=function(t){return t.halt(),new _(this.dom()),this},t.prototype.ontouchstart=function(t){return this}})));s.extendTag("iframe",(function(t){t.prototype.srcdoc=function(t){return this.getAttribute("srcdoc")},t.prototype.setSrcdoc=function(t){return this.setAttribute("srcdoc",t),this}}));var k=s.defineTag("PlayerFrame","iframe",(function(t){t.prototype.allow=function(t){return this.getAttribute("allow")},t.prototype.setAllow=function(t){return this.setAttribute("allow",t),this},t.prototype.__data={watch:"dataDidSet",name:"data"},t.prototype.data=function(t){return this._data},t.prototype.setData=function(t){var e=this.data();return t!=e&&(this._data=t),t!=e&&this.dataDidSet&&this.dataDidSet(t,e,this.__data),this},t.prototype.build=function(){var t=this;return t._dom.onload=function(){return t._loaded=!0,t.render()},t},t.prototype.dataDidSet=function(t){return this},t.prototype.render=function(){return this._loaded&&this.data()&&this.dom().contentWindow&&this.data().render(this.dom().contentWindow),this}})),A=s.defineTag("RunnerFrame","iframe",(function(t){t.prototype.allow=function(t){return this.getAttribute("allow")},t.prototype.setAllow=function(t){return this.setAttribute("allow",t),this},t.prototype.history=function(t){return this._history},t.prototype.setHistory=function(t){return this._history=t,this},t.prototype.page=function(){return this.data().browser().page()},t.prototype.build=function(){var t=this;return t._history=new g(t),t._queuedMessages=[],t._onmessage=function(e){if(t.parent()&&e.source===t.dom().contentWindow)return t._winUnload&&Date.now()-t._winUnload<5e3?(t.log("winUnload",Date.now()-t._winUnload),t._queuedMessages.push(e)):t.data().onrunnermessage(e,e.data)},t._onunload=function(e){return t._winUnload=Date.now(),setTimeout((function(){return t.log("removed winUnload again",Date.now()-t._winUnload),t._winUnload=null}),100)},t.dom().onload=function(e){t.log("onload",e);let n=t.data().currentRequest();if(n&&!n.loaded||setTimeout((function(){return t.go("/403.html")}),20),n)return n.loaded=!0},t},t.prototype.onloadexternal=function(t){return t.halt(),this},t.prototype.post=function(t){return this.dom().contentWindow.postMessage(t,"*")},t.prototype.isActive=function(){return!!this.dom().offsetParent&&!!this.dom().contentWindow},t.prototype.start=function(){return this.log("start"),this.parent()||(this.data()._body.dom().appendChild(this.dom()),this.data()._body.flag("running"),window.addEventListener("message",this._onmessage),window.addEventListener("beforeunload",this._onunload,!0),this.history().reset()),this},t.prototype.stop=function(){return this.log("stop"),this.parent()&&(this.parent().unflag("running"),this.parent().dom().removeChild(this.dom()),window.removeEventListener("message",this._onmessage),window.removeEventListener("beforeunload",this._onunload,!0),this.history().reset()),this},t.prototype.go=function(t){return t=this.data().browser().encodeURI(t),this.parent()&&this.src()==t?this.data().browser().refresh():(this.setSrc(t),this.start())}})),E=s.defineTag("BrowserFrame",(function(t){t.prototype.layoutMask=function(){return l.SCALED|l.BOUNDLESS}})),C=s.defineTag("BrowserView",(function(t){t.prototype.__autoPos={default:!0,name:"autoPos"},t.prototype.autoPos=function(t){return this._autoPos},t.prototype.setAutoPos=function(t){return this._autoPos=t,this},t.prototype._autoPos=!0,t.prototype.__autoSize={default:!0,name:"autoSize"},t.prototype.autoSize=function(t){return this._autoSize},t.prototype.setAutoSize=function(t){return this._autoSize=t,this},t.prototype._autoSize=!0,t.prototype.__autoMinimize={default:!1,name:"autoMinimize"},t.prototype.autoMinimize=function(t){return this._autoMinimize},t.prototype.setAutoMinimize=function(t){return this._autoMinimize=t,this},t.prototype._autoMinimize=!1,t.prototype.__page={watch:"pageDidSet",name:"page"},t.prototype.page=function(t){return this._page},t.prototype.setPage=function(t){var e=this.page();return t!=e&&(this._page=t),t!=e&&this.pageDidSet&&this.pageDidSet(t,e,this.__page),this},t.prototype.__pipScale={watch:"pipScaleDidSet",name:"pipScale"},t.prototype.pipScale=function(t){return this._pipScale},t.prototype.setPipScale=function(t){var e=this.pipScale();return t!=e&&(this._pipScale=t),t!=e&&this.pipScaleDidSet&&this.pipScaleDidSet(t,e,this.__pipScale),this},t.prototype.fullScale=function(t){return this._fullScale},t.prototype.setFullScale=function(t){return this._fullScale=t,this},t.prototype.__visible={watch:"visibleDidSet",name:"visible"},t.prototype.visible=function(t){return this._visible},t.prototype.setVisible=function(t){var e=this.visible();return t!=e&&(this._visible=t),t!=e&&this.visibleDidSet&&this.visibleDidSet(t,e,this.__visible),this},t.prototype.__minimized={watch:"minimizedDidSet",name:"minimized"},t.prototype.minimized=function(t){return this._minimized},t.prototype.setMinimized=function(t){var e=this.minimized();return t!=e&&(this._minimized=t),t!=e&&this.minimizedDidSet&&this.minimizedDidSet(t,e,this.__minimized),this},t.prototype.__windowed={watch:"windowedDidSet",name:"windowed"},t.prototype.windowed=function(t){return this._windowed},t.prototype.setWindowed=function(t){var e=this.windowed();return t!=e&&(this._windowed=t),t!=e&&this.windowedDidSet&&this.windowedDidSet(t,e,this.__windowed),this},t.prototype.__focused={watch:"focusedDidSet",name:"focused"},t.prototype.focused=function(t){return this._focused},t.prototype.setFocused=function(t){var e=this.focused();return t!=e&&(this._focused=t),t!=e&&this.focusedDidSet&&this.focusedDidSet(t,e,this.__focused),this},t.prototype.userMinimized=function(t){return this._userMinimized},t.prototype.setUserMinimized=function(t){return this._userMinimized=t,this},t.prototype.__hasUserFocus={watch:"hasUserFocusDidSet",name:"hasUserFocus"},t.prototype.hasUserFocus=function(t){return this._hasUserFocus},t.prototype.setHasUserFocus=function(t){var e=this.hasUserFocus();return t!=e&&(this._hasUserFocus=t),t!=e&&this.hasUserFocusDidSet&&this.hasUserFocusDidSet(t,e,this.__hasUserFocus),this},t.prototype.__hasPointerFocus={watch:"hasPointerFocusDidSet",name:"hasPointerFocus"},t.prototype.hasPointerFocus=function(t){return this._hasPointerFocus},t.prototype.setHasPointerFocus=function(t){var e=this.hasPointerFocus();return t!=e&&(this._hasPointerFocus=t),t!=e&&this.hasPointerFocusDidSet&&this.hasPointerFocusDidSet(t,e,this.__hasPointerFocus),this},t.prototype.currentRequest=function(t){return this._currentRequest},t.prototype.setCurrentRequest=function(t){return this._currentRequest=t,this},t.prototype.__mode={watch:"modeDidSet",name:"mode"},t.prototype.mode=function(t){return this._mode},t.prototype.setMode=function(t){var e=this.mode();return t!=e&&(this._mode=t),t!=e&&this.modeDidSet&&this.modeDidSet(t,e,this.__mode),this},t.prototype.runner=function(t){return this._runner},t.prototype.setRunner=function(t){return this._runner=t,this},t.prototype.__minWidth={watch:"syncStyleVar",unit:"px",name:"minWidth"},t.prototype.minWidth=function(t){return this._minWidth},t.prototype.setMinWidth=function(t){var e=this.minWidth();return t!=e&&(this._minWidth=t),t!=e&&this.syncStyleVar&&this.syncStyleVar(t,e,this.__minWidth),this},t.prototype.__maxWidth={watch:"syncStyleVar",unit:"px",name:"maxWidth"},t.prototype.maxWidth=function(t){return this._maxWidth},t.prototype.setMaxWidth=function(t){var e=this.maxWidth();return t!=e&&(this._maxWidth=t),t!=e&&this.syncStyleVar&&this.syncStyleVar(t,e,this.__maxWidth),this},t.prototype.__maxHeight={watch:"syncStyleVar",unit:"px",name:"maxHeight"},t.prototype.maxHeight=function(t){return this._maxHeight},t.prototype.setMaxHeight=function(t){var e=this.maxHeight();return t!=e&&(this._maxHeight=t),t!=e&&this.syncStyleVar&&this.syncStyleVar(t,e,this.__maxHeight),this},t.prototype.__winHeight={watch:"syncStyleVar",unit:"px",name:"winHeight"},t.prototype.winHeight=function(t){return this._winHeight},t.prototype.setWinHeight=function(t){var e=this.winHeight();return t!=e&&(this._winHeight=t),t!=e&&this.syncStyleVar&&this.syncStyleVar(t,e,this.__winHeight),this},t.prototype.__winWidth={watch:"syncStyleVar",unit:"px",name:"winWidth"},t.prototype.winWidth=function(t){return this._winWidth},t.prototype.setWinWidth=function(t){var e=this.winWidth();return t!=e&&(this._winWidth=t),t!=e&&this.syncStyleVar&&this.syncStyleVar(t,e,this.__winWidth),this},t.prototype.__winTop={watch:"syncStyleVar",unit:"px",name:"winTop"},t.prototype.winTop=function(t){return this._winTop},t.prototype.setWinTop=function(t){var e=this.winTop();return t!=e&&(this._winTop=t),t!=e&&this.syncStyleVar&&this.syncStyleVar(t,e,this.__winTop),this},t.prototype.__winLeft={watch:"syncStyleVar",unit:"px",name:"winLeft"},t.prototype.winLeft=function(t){return this._winLeft},t.prototype.setWinLeft=function(t){var e=this.winLeft();return t!=e&&(this._winLeft=t),t!=e&&this.syncStyleVar&&this.syncStyleVar(t,e,this.__winLeft),this},t.prototype.__winScale={watch:"syncStyleVar",name:"winScale"},t.prototype.winScale=function(t){return this._winScale},t.prototype.setWinScale=function(t){var e=this.winScale();return t!=e&&(this._winScale=t),t!=e&&this.syncStyleVar&&this.syncStyleVar(t,e,this.__winScale),this},t.prototype.__winMinScale={watch:"syncStyleVar",name:"winMinScale"},t.prototype.winMinScale=function(t){return this._winMinScale},t.prototype.setWinMinScale=function(t){var e=this.winMinScale();return t!=e&&(this._winMinScale=t),t!=e&&this.syncStyleVar&&this.syncStyleVar(t,e,this.__winMinScale),this},t.prototype.__maxMinScale={watch:"syncStyleVar",name:"maxMinScale"},t.prototype.maxMinScale=function(t){return this._maxMinScale},t.prototype.setMaxMinScale=function(t){var e=this.maxMinScale();return t!=e&&(this._maxMinScale=t),t!=e&&this.syncStyleVar&&this.syncStyleVar(t,e,this.__maxMinScale),this},t.prototype.__maxScale={watch:"syncStyleVar",name:"maxScale"},t.prototype.maxScale=function(t){return this._maxScale},t.prototype.setMaxScale=function(t){var e=this.maxScale();return t!=e&&(this._maxScale=t),t!=e&&this.syncStyleVar&&this.syncStyleVar(t,e,this.__maxScale),this},t.prototype.browser=function(){return this.data()},t.prototype.space=function(){return this.browser().space()},t.prototype.syncStyleVar=function(t,e,n){let i=n.name,r=n.unit;return this.dom().style.setProperty("--"+i,r?t+r:t)},t.prototype.setup=function(){return this._sentStyleSheets={},this._layoutMask=0,this._runner=a(A).flag("runner").setAllow("geolocation").setData(this).end(),this.setSref(this.data().id()),this},t.prototype.stop=function(){return this.runner().stop()},t.prototype.mount=function(){var t=this;return t.data().space().on("reflow",(function(){return t.reflow(!0)})),t.data().space().on("playing",(function(){return t.browser().options().discardLocals(["minimized","windowed","focused"])})),t._mounted=!0,t.reflow(!0),t},t.prototype.go=function(t,e){return void 0===e&&(e=null),this.runner().go(t),this.render(),this},t.prototype.history=function(){return this.runner().history()},t.prototype.back=function(){if(this.history().hasPrev())if(this.history().isInvalidated()){let t=this.history().relative(-1);this.history().reset(),this.runner().go(t)}else this.runner().post({type:"back"});return this},t.prototype.forward=function(){return this.history().hasNext()&&this.runner().post({type:"forward"}),this},t.prototype.refresh=function(){var t=this;return t.runner().isActive()?t.runner().post({type:"reload"}):t.go(t.browser().url(),0),setTimeout((function(){if(!t.windowed())return t._frame.dom().focus()}),20)},t.prototype.onpathchange=function(t){let e=t.data()||"/";return e==this.browser().url()?this.refresh():this.go(e)},t.prototype.oncontainermessage=function(t){if(this.log("oncontainermessage",t),"request"==t.type){this.setCurrentRequest(t);let e=this.browser().normalizeURL(t.url);t.isHistoryNavigation||e!=this.history().current()&&this.history().push(e),this.browser().push_(p.PAGE_REQUEST,[h.GET,e||null])}return this},t.prototype.onrunnermessage=function(t,e){var n,i=this;if("actions"==e.type){let t=i.space().pointerTracker().isActive(),n=[];for(let o,s,a=0,u=r(e.actions),h=u.length;a<h;a++){o=u[a];let e=o[0];(t||e!=p.DOM_ACTIVEIN&&e!=p.DOM_HOVERIN&&e!=p.DOM_FOCUSIN)&&(i.data().push_(o[0],o[1]),n.push(o[0]==p.PAGE_LOADED?(s=o[1][0],s=s.replace(/<script\b[^>]*>([^]*?)<\/script>/g,""),!/<body\b[^>]*>\s*<\/body>/.test(s)&&i.browser().setVisible(!0)):o[0]==c.MUTATE?i.browser().setVisible(!0):o[0]==p.PAGE_LOG&&!0))}return n}if("domevent"==e.type)return i.browser().space().emit("browserevent",e.data);if("location"==e.type)return i.browser().setUrl(n=i.browser().normalizeURL(e.url)),n;if("history"==e.type){if(i.log("history",e),"go"==e.action)return void i.history().go(e.delta);let t=i.browser().normalizeURL(e.url);if(i.browser().push_(p.PAGE_HISTORY,[e.action,e.state,t]),"pushState"==e.action)return i.history().push(t);if("replaceState"==e.action)return i.history().replace(t).trim()}else{if("beforeunload"==e.type)return i.log("beforeunload",e.predictedTarget);if("cancelled"==e.type)return i.log("cancelled"),i.browser().page().setCancelled(!0),i.runner().stop(),i.render();if("pageload"!=e.type)return"loader:busy"==e.type?(i.browser().page().setLoading(!0),i.render()):"loader:done"==e.type?setTimeout((function(){return i.browser().page().setLoading(!1),i.render()}),100):i.log("tracker message",e.type);var o=e.status,s=i.browser().normalizeURL(e.url);if(i.browser().push_(p.PAGE_LOAD,[o,s]),i.currentRequest())return i.currentRequest().loading=!0}},t.prototype.posToScreen=function(t,e){return this.data().posToScreen(t,e)},t.prototype.sendStyleSheets=function(){var t,e;let n=[];for(let i,o=0,s=r(this.data().space().files()),a=s.length;o<a;o++)i=s[o],n.push("css"==i.lang()&&(t=i.path(),e=i.currentBody(),this._sentStyleSheets[t]!=e&&(this._sentStyleSheets[t]=e,this.runner().post({type:"stylesheet",path:t,body:S.process(e)}))));return n},t.prototype.isMovable=function(){return!this.api().isMobile()},t.prototype.ontouchstart=function(t){if(this.autoMinimize())return this.setHasUserFocus(!this.hasUserFocus()),this.render();if(this.minimized())return t.event().preventDefault(),this._frame.dom().focus(),this.browser().setMinimized(!1),!1;if(this.isMovable()){let e=t.event().target;if(e&&!e.matches("input,.tool"))return y.wrap(t,{layout:this._layout})}},t.prototype.onmoveupdate=function(t,e){if(void 0===e&&(e=!1),this.windowed()&&!this.minimized()&&((t.dx()||t.dy())&&this.setAutoPos(!1),0==this.autoPos())){var n=e?this._layoutMask:d.MOVING,i=Math.round(t.layout().left()+t.dx()),r=Math.round(Math.max(t.layout().top()+t.dy(),40));return this._layout.set({left:i,top:r,targetRef:this.data().id(),mask:n}).ensureInsideParent(),this.data().setLayout(this._layout.clone()),this.redraw(),this.data().space().emit("rearranging",this.data())}},t.prototype.onmoveend=function(t){if(this.windowed()&&!this.minimized())return this.onmoveupdate(t,!0)},t.prototype.onresizestart=function(t){this.flag("resizing");let e=this.space().view().box(),n=t.x()-e.left,i=t.y()-e.top;t._dxClamp=[e.width-n-40,40-n],t._dyClamp=[e.height-i-40,40-i];let r=d.RESIZING;return this.windowed()||(t._maxWidth=this.browser().maxWidth(),t._maxHeight=this.browser().maxHeight()),t.ax()&&(r|=t.ax()>0?d.PIN_LEFT:d.PIN_RIGHT),t.ay()&&(r|=t.ay()>0?d.PIN_TOP:d.PIN_BOTTOM),this._layoutMask=r},t.prototype.clamp=function(t,e,n,i){return void 0===i&&(i=1),Math.min(Math.max(Math.round(e/i)*i,t),n)},t.prototype.onresizeupdate=function(t,e){void 0===e&&(e=!1),this.setAutoSize(!1);let n=t.dx(),i=t.dy();if(n=Math.min(t._dxClamp[0],Math.max(n,t._dxClamp[1])),i=Math.min(t._dyClamp[0],Math.max(i,t._dyClamp[1])),!this.windowed()){let e=t._maxWidth+n*t.ax()*2,r=t._maxHeight+i*t.ay()*2;return this.browser().setMaxWidth(this.clamp(240,e,1280,2)),this.browser().setMaxHeight(this.clamp(140,r,1080,2)),this}let r=t.layout(),o={width:r.width()+n*t.ax(),height:r.height()+i*t.ay(),left:r.left(),top:r.top(),targetRef:this.data().id(),mask:this._layoutMask||0};return o.width=2*Math.round(Math.max(o.width,120)/2),o.height=2*Math.round(Math.max(o.height,80)/2),t.ax()<0&&(o.left+=(o.width-r.width())*t.ax(),o.left=Math.max(o.left,20)),t.ay()<0&&(o.top+=(o.height-r.height())*t.ay()),this.redraw(this._layout.set(o).ensureInsideParent()),this.data().setLayout(this._layout.clone()),this.data().space().emit("rearranging",this.data())},t.prototype.onresizeend=function(t){return this.log("onresizeend",this._layoutMask),this._layoutMask=0,this.onresizeupdate(t,!0),this.unflag("resizing")},t.prototype.clientLayout=function(){return this._layout},t.prototype.redraw=function(t){void 0===t&&(t=this._layout);this._prevLayout,t.anchorX(),t.anchorY();let e=this.space().vw(),n=this.space().vh();Math.round(t.left()),Math.round(t.top());return this.setMinWidth(e<500?100:140),this.setWinHeight(Math.round(t.height())),this.setWinWidth(Math.round(t.width())),this.setWinMinScale(this.minWidth()/this.winWidth()),this.setWinTop(Math.round(t.top())+.5*this.winHeight()),this.setWinLeft(Math.round(t.left())+.5*this.winWidth()),this.setWinScale(e&&n?Math.min((e-40)/this.winWidth(),(n-100)/this.winHeight(),1):1),this.setAutoMinimize(this.winWidth()>.3*e&&e<800),this.flag("autofit",this.autoMinimize()),this.flag("narrow",t.width()<150)},t.prototype.reflow=function(t){void 0===t&&(t=!1);var e=this.browser().agentLayout(),n=this.browser().space().view().box(),i=n.width,r=n.height;this.setMinWidth(i<500?100:140),this.setMaxWidth(this.browser().maxWidth()||Math.min(i-200,600)),this.setMaxHeight(this.browser().maxHeight()||Math.min(r-200,460)),this.setMaxMinScale(this.minWidth()/this.maxWidth()),this.setMaxScale(i&&r?Math.min((i-40)/this.maxWidth(),(r-100)/this.maxHeight(),1):1),this.setWindowed(this.browser().windowed()),this.setMinimized(this.browser().minimized()||this.autoMinimize()&&!this.hasPointerFocus()&&!this.hasUserFocus()),this.setFocused(this.space().agent().focus()==this.browser());var o=e._v;if((o!=this._v||t)&&e._data){var s=this._layout||(this._layout=e.clone()),a=e.mask();o!=this._v||t?this.autoPos()&&this.autoSize()?a&d.RESIZING?s.resizeParent(i,r).resize(e.width(),e.height(),a):s.set(e.toObject()).resizeParent(i,r):this.autoSize()?s.resizeParent(i,r).resize(e.width(),e.height()):this.autoPos():s.resizeParent(i,r),this._v=o,s.round(),this.redraw(this._layout=s),!t&&this.browser().space().isEditing()||this.data().setLayout(s.clone())}},t.prototype.visibleDidSet=function(t){if(this.flag("visible",t),this._layout){var e=this._layout.clone().ensureInsideParent();return this.data().setLayout(e)}},t.prototype.minimizedDidSet=function(t){return this.transitioning(),this.flag("minimized",t),this},t.prototype.transitioning=function(t){var e=this;if(void 0===t&&(t=400),"seeking"!=e.space().timeline().mode())return clearTimeout(e._transitioningTimeout),e.flag("transitioning"),e._transitioningTimeout=setTimeout((function(){return e.unflag("transitioning")}),t)},t.prototype.windowedDidSet=function(t){return this.transitioning(),t?(this.flag("windowed"),this.unflag("centered")):(this.flag("centered"),this.unflag("windowed"))},t.prototype.targetForPointer=function(){return this},t.prototype.nodeForLayout=function(){return this._frame},t.prototype.resetLayout=function(){return this.setAutoSize(!0),this.setAutoPos(!0),this._v=-1,this.reflow(!0),this},t.prototype.hasLocalLayout=function(){return!(this.data().space().isEditing()||this.autoPos()&&this.autoSize())},t.prototype.dispose=function(){return this},t.prototype.isLoading=function(){return this.browser().page()&&this.browser().page().isLoading()},t.prototype.gotoUrlInput=function(t){try{t.stop().prevent();let e=t.target().value();return e!=this.browser().url()&&this.go(e),t.target().blur()}catch(t){}},t.prototype.showSettings=function(){return this.uxa().open(a(x).flag("modal").bindData(this,"browser",[]).setFormData(this.browser().configurationData()).end())},t.prototype.closeWindow=function(){return this.browser().setVisible(!1),this},t.prototype.minimize=function(){return this.browser().setMinimized(!0),this},t.prototype.toggleMinimized=function(){var t;return this.browser().setMinimized(t=!this.browser().minimized()),t},t.prototype.toggleWindowed=function(){if(this.browser().setWindowed(!this.browser().windowed()),this.browser().windowed()){var t=this._layout.clone().ensureInsideParent();t.set({height:Math.min(this.space().vh()-180,t.height())}),t.set({width:Math.min(this.space().vw()-80,t.width())}),this.redraw(this._layout=t),this.browser().setLayout(this._layout.clone())}else this.browser().maxWidth()||(this.browser().setMaxWidth(this.clamp(800,this._layout.width(),this.space().vw()-200)),this.browser().setMaxHeight(this.clamp(460,this._layout.height(),this.space().vh()-200)))},t.prototype.focusWidgetForNode=function(){return this.browser()},t.prototype.render=function(){var t,e,n,i=this.$;if(this.browser().page()!=this.page()){let t=this.space().isPlaying()||this.space().isLive(),e=this.browser().page();t&&this._indicator&&this._indicator.start&&this._indicator.start(),e&&e.loaded()&&(this._indicator&&this._indicator.stop&&this._indicator.stop(),this.setPage(e))}return this.runner().isActive()&&!this.isLoading()&&this.sendStyleSheets(),this.page()&&(this.page().syncStyleSheets(this.data().space().files()),this.setFlag("status","status-"+this.page().status())),this._mounted&&this.reflow(),this.$open(0).flagIf("loading",this.isLoading()).dataset("gesture","move").setVisible(this.browser().visible()).flagIf("detached",this.hasLocalLayout()).setChildren(i.$=i.$||[this._cover=this._cover||a("div",this).flag("cover").on$(0,["tap","minimize"],this),t=this._frame=this._frame||(t=a(E,this)).flag("frame").setContent([e=this._chrome=this._chrome||(e=a("div",t)).flag("chrome").setContent([a("div",i,0,this._chrome).flag("resizer").flag("left").dataset("gesture","resize,l"),a("div",i,1,this._chrome).flag("resizer").flag("right").dataset("gesture","resize,r"),this._header=this._header||a("div",e).flag("header").setContent([a("div",i,2,this._header).flag("tools").setContent([a("div",i,3,2).flag("tool").flag("round").flag("close").on$(0,["tap","stop","closeWindow"],this),a("div",i,4,2).flag("tool").flag("round").flag("min").on$(0,["tap","stop","minimize"],this),a("div",i,5,2).flag("tool").flag("round").flag("max").on$(0,["tap","stop","toggleWindowed"],this),a("div",i,6,2).flag("tool").on$(0,["tap","stop","back"],this).dataset("icon","browserback"),a("div",i,7,2).flag("tool").on$(0,["tap","stop","forward"],this).dataset("icon","browserforward"),a("div",i,8,2).flag("tool").on$(0,["tap","stop","refresh"],this).dataset("icon","browserrefresh")],2),a(T,i,9,this._header).flag("path").on$(0,["change","onpathchange"],this),a("div",i,10,this._header).flag("tool").dataset("icon","morevert").on$(0,["tap","stop","showSettings"],this)],2),a("div",i,11,e).flag("resizer").flag("bottom").dataset("gesture","resize,b"),a("div",i,12,e).flag("resizer").flag("br").dataset("gesture","resize,b,r"),a("div",i,13,e).flag("resizer").flag("bl").dataset("gesture","resize,b,l")],2),n=this._body=this._body||(n=a("div",t)).flag("body"),this._indicator=this._indicator||a(v,t).flag("indicator").flag("abs").flag("manual").setType("forward")],2)],2).synced((this._frame.setTabindex(-1).end((i[0].end(),i[1].end(),i[5].flagIf("active",!this.windowed()),i[6].flagIf("disabled",!this.history().hasPrev()).end(),i[7].flagIf("disabled",!this.history().hasNext()).end(),i[8].end(),i[9].setContent(this.browser().url()||"/index.html",3).end(),i[10].end(),i[11].end(),i[12].end(),i[13].end(),this._body.setContent([(this._frameCover=this._frameCover||a("div",n).flag("frameCover").flag("mainCover").setContent([a("div",i,14,this._frameCover).flag("tool").flag("run").dataset("icon","browserrefresh").on$(0,["tap","stop","refresh"],this),a("div",i,15,this._frameCover).flag("tool").flag("follow").dataset("icon","visibility").on$(0,["tap","stop","resetLayout"],this)],2)).end((i[14].end(),i[15].flagIf("disabled",!this.hasLocalLayout()).end(),!0)),this.page()&&this.page().loading()?(i[16]||a("div",i,16,n).flag("frameCover").flag("bundler").setContent(i[17]||a(w,i,17,16),2)).end((i[17].end(),!0)):void 0,this.page()&&this.page().cancelled()?(i[18]||a("div",i,18,n).flag("frameCover").flag("error").flag("sm").setContent(i[19]||a("div",i,19,18).setContent([a("h2",i,20,19).setText("Something went wrong"),a("p",i,21,19).setText("The tracker has stopped because of excessive amount of events originating from the page.\nThis could be due to certain browser extensions. Try disabling extensions to see if it helps."),a("p",i,22,19).setContent([a("span",i,23,22).setText("For more help, "),a("a",i,24,22).setHref("https://gitter.im/scrimba_community/Lobby").setTarget("_blank").setText("chat with us"),a("span",i,25,22).setText(" or "),a("a",i,26,22).setHref("https://github.com/scrimba/community/issues").setTarget("_blank").setText("file an issue")],2)],2),2)).end((i[24].end(),i[26].end(),!0)):void 0,(this._player=this._player||a(k,n).flag("player").setSrc("/__sw__blank.html").setSandbox("allow-same-origin").setAllow("geolocation")).bindData(this,"page",[]).end()],1),this._indicator.end(),!0)),!0))}}));function D(){return f.apply(this,arguments)}o.subclass(D,f),e.Browser=D,D.register("browser"),D.option("npmPackages"),D.option("layout",{overridable:!0,type:d,action:p.BROWSER_LAYOUT}),D.option("page",{type:m}),D.option("url"),D.option("rootPath",{default:"/"}),D.option("catchallPath"),D.option("visible",{default:!1}),D.option("minimized",{default:!1,overridable:!0}),D.option("windowed",{default:!0,overridable:!0}),D.option("maxWidth"),D.option("maxHeight"),D.prototype.isResolvingPackages=function(t){return this._isResolvingPackages},D.prototype.setIsResolvingPackages=function(t){return this._isResolvingPackages=t,this},D.prototype.configurationData=function(){return{rootPath:this.rootPath(),catchallPath:this.catchallPath()}},D.prototype.browser=function(){return this},D.prototype.posToScreen=function(t,e,n,i){return this.minimized()||!this.windowed()||this.node().autoMinimize()?null:D.prototype.__super__.posToScreen.apply(this,arguments)},D.prototype.setup=function(){var t=this;return t.space().on("quicksave",(function(e){if(t.log("quicksave",e),e)return t.fileDidSave(e)})),t.node(),t},D.prototype.baseURI=function(){return this.space().container().origin()},D.prototype.normalizeURL=function(t){return t.startsWith(this.baseURI())?t.slice(this.baseURI().length):t},D.prototype.encodeURI=function(t){return 0==t.indexOf(this.baseURI())?t:("/"!=t[0]&&(t="/"+t),""+this.baseURI()+t)},D.prototype.clientLayout=function(){return(this._clientLayout||(this._clientLayout=new d(null))).wrap(this._node?this._node._layout:null)},D.prototype.deserialize=function(t,e){return t.page&&(t.page=m.fromOptionValue(t.page,this)),D.prototype.__super__.deserialize.apply(this,arguments)},D.prototype.node=function(){return this._node||(this._node=a(C).setData(this).end())},D.prototype.stop=function(){return this._node&&this._node.stop&&this._node.stop()},D.prototype.run=function(){return this.space().simulator()&&this.space().simulator().convertToBrowser(),this.refresh(),this},D.prototype.refresh=function(){return this.node().refresh(),this},D.prototype.fileDidSave=function(t){if(!this.space().simulator())return"css"==t.ext()||("html"==t.ext()?this.url().indexOf(t.name())>=0&&this.refresh():this.refresh()),this},D.prototype.enabled=function(){return!0},D.prototype.title=function(){return"Preview"},D.prototype.npmPackageNames=function(){return(this.npmPackages()||{resolved:[]}).resolved},D.prototype.parsePackageQuery=function(t,e){var n=t.match(/.[^@]*/)[0],r=t.substr(i(n)+1);return e[n]=r||"*"},D.prototype.currentPackageMap=function(){var t={};for(let e=0,n=r(this.npmPackageNames()),i=n.length;e<i;e++)this.parsePackageQuery(n[e],t);return t},D.prototype.addPackages=function(t){var e=Object.assign(this.packageMap(),t);return this.overwritePackages(e)},D.prototype.overwritePackages=async function(t){var e=[];for(let n in t){let i;i=t[n],e.push(n+"@"+i)}var n=await this.resolvePackages(e);return this.setNpmPackages(n),this},D.prototype.addPackage=function(t){this.api().analytics().dependencyAdded(t,this.space().type());var e=this.currentPackageMap();return this.parsePackageQuery(t,e),this.overwritePackages(e)},D.prototype.removePackage=function(t){var e=this.currentPackageMap();return e[t],delete e[t],this.overwritePackages(e)},D.prototype.upgradePackage=function(t){return this.addPackage(t)},D.prototype.resolvePackages=async function(t){this.setIsResolvingPackages(!0);try{var e=await this._resolvePackages(t)}finally{this.setIsResolvingPackages(!1),o.commit()}return e},D.prototype._resolvePackages=async function(t){if(0!=i(t)){var e="/rpc/yaas/resolve?patterns="+window.encodeURIComponent(t.join(",")),n=await window.fetch(e);if(this.setIsResolvingPackages(!1),200==n.status){var r=await n.json();return this.log("returned from yaas",n,r),r}throw new Error("could not resolve "+t)}},D.prototype.dispose=function(){return this._node&&this._node.dispose&&this._node.dispose()}},function(t,e,n){n(1).ACTION;function i(t){this._browser=t,this._index=0,this._stack=[]}e.History=i,i.prototype.index=function(t){return this._index},i.prototype.setIndex=function(t){return this._index=t,this},i.prototype.replace=function(t){return this._stack[this._index]=t,this},i.prototype.push=function(t){return this._stack=this._stack.slice(0,this._index+1),this._index=this._stack.push(t)-1,this},i.prototype.trim=function(){return this._stack=this._stack.slice(0,this._index+1),this},i.prototype.go=function(t,e){void 0===e&&(e=!1);var n=this._index+t;return this._stack[this._index=n]},i.prototype.apply=function(t,e){var n=[this._index,this._stack.slice()];if(null==e)this.push(t);else if(0==e)this.replace(t);else{this.go(e);this.replace(t)}return n},i.prototype.reset=function(t){return t||(t=[-1,[]]),this._index=t[0],this._stack=t[1],this},i.prototype.current=function(){return this._stack[this._index]},i.prototype.relative=function(t){return this._stack[this._index+t]},i.prototype.len=function(){return this._stack.length},i.prototype.hasNext=function(){return((t=this)&&(t.len instanceof Function?t.len():t.length)||0)>this._index+1;var t},i.prototype.hasPrev=function(){return this._index>0},i.prototype.isInvalidated=function(){return this.current()&&this.current().match(/^\/([345]\d\d)\.html/)},i.prototype.state=function(){return[this._index,this._stack]}},function(t,e){function n(t,e){var n=this;void 0===e&&(e={}),n._dom=t,n._node=t._tag,n._state="init",n._options=e,n._contentEditableMode="true",n.supportsPlaintextEditables=function(){var t=document.createElement("div");return t.setAttribute("contenteditable","plaintext-only"),"plaintext-only"===t.contentEditable},n.supportsPlaintextEditables()&&(n._contentEditableMode="plaintext-only"),t.ContentEditableInstance||(t.ContentEditableInstance=n,n._handlers={},n._handlers.keydown=function(t){if(console.log("keydown",t),t.stopPropagation(),13==t.keyCode)return t.preventDefault(),n.submit()},n._handlers.keyup=function(t){if(t.stopPropagation(),27==t.keyCode)return t.preventDefault(),n.cancel()},n._handlers.blur=function(t){if(t.stopPropagation(),"init"==n._state)return n.cancel()},n.activate())}e.ContentEditable=n,n.prototype.node=function(t){return this._node},n.prototype.setNode=function(t){return this._node=t,this},n.prototype.dom=function(t){return this._dom},n.prototype.setDom=function(t){return this._dom=t,this},n.prototype.value=function(){return this._dom.innerText},n.prototype.isValid=function(){return!this._options.pattern||this._options.pattern.test(this.value())},n.prototype.submit=function(){if(!this.isValid())return this.cancel();this._state="submit";let t=this.value();return this.deactivate(),this._node.trigger("change",t),this},n.prototype.cancel=function(){return this._state="cancel",this._dom.innerText=this._initialValue,this.deactivate(),this},n.prototype.activate=function(){var t=this;t._initialValue=t.value(),t.dom().tabindex=0,t.dom().contenteditable=!0,t.dom().setAttribute("contenteditable",t._contentEditableMode),t.dom().focus();for(let e,n,i=t._handlers,r=0,o=Object.keys(i),s=o.length;r<s;r++)n=o[r],e=i[n],t.dom().addEventListener(n,e,!0);return setTimeout((function(){return t.dom().focus(),t.selectAll()}),5)},n.prototype.deactivate=function(){this.dom().contenteditable=!1,this.dom().removeAttribute("contenteditable"),this.dom().blur(),this.dom().tabindex=null,window.getSelection().removeAllRanges(),this.dom().ContentEditableInstance=null,this._node._text_=this._node._tree_=null;for(let t,e,n=this._handlers,i=0,r=Object.keys(n),o=r.length;i<o;i++)e=r[i],t=n[e],this.dom().removeEventListener(e,t,!0);return this},n.prototype.selectAll=function(){var t,e;return window.getSelection&&document.createRange?((e=document.createRange()).selectNodeContents(this._dom),(t=window.getSelection()).removeAllRanges(),t.addRange(e)):document.body.createTextRange&&((e=document.body.createTextRange()).moveToElementText(this._dom),e.select()),this}},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=o.defineTag("SKCubeGrid",(function(t){t.prototype.render=function(){var t=this.$;return this.$open(0).flag("sk-cube-grid").setChildren(t.$=t.$||[r("div",t,0,this).flag("sk-cube").flag("sk-cube1"),r("div",t,1,this).flag("sk-cube").flag("sk-cube2"),r("div",t,2,this).flag("sk-cube").flag("sk-cube3"),r("div",t,3,this).flag("sk-cube").flag("sk-cube4"),r("div",t,4,this).flag("sk-cube").flag("sk-cube5"),r("div",t,5,this).flag("sk-cube").flag("sk-cube6"),r("div",t,6,this).flag("sk-cube").flag("sk-cube7"),r("div",t,7,this).flag("sk-cube").flag("sk-cube8"),r("div",t,8,this).flag("sk-cube").flag("sk-cube9")],2).synced()}}));e.SKCubeGrid=s;var a=o.defineTag("SKCubeMove",(function(t){t.prototype.render=function(){var t=this.$;return this.$open(0).flag("sk-cube-move").setChildren(t.$=t.$||[r("div",t,0,this).flag("cube"),r("div",t,1,this).flag("cube")],2).synced()}}));e.SKCubeMove=a;var u=o.defineTag("SKDoubleBounce",(function(t){t.prototype.render=function(){var t=this.$;return this.$open(0).setChildren(t.$=t.$||[r("div",t,0,this),r("div",t,1,this)],2).synced()}}));e.SKDoubleBounce=u},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(2),a=s.Dialog,u=s.TextField,p=o.defineTag("BrowserConfigurationDialog",a,(function(t){t.prototype.browser=function(){return this.data()},t.prototype.body=function(){let t;this.$$||(this.$$={});return(t=this._body=this._body||(t=r("div",this)).flag("body").setContent([r(u,t.$,"A",t).setType("text").setName("rootPath").setLabel("Root directory").setRequired(!1).setPlaceholder("/").setDesc("The browser will serve files from this directory"),r(u,t.$,"B",t).setType("text").setName("catchallPath").setLabel("Catch-all filename").setDesc("This file will be served if the URL doesn't match a static file. Relative to root path.")],2)).end((t.$.A.end(),t.$.B.end(),!0))},t.prototype.onuxasubmit=function(t){var e=this;return e.uxa().queue().add(200,(function(){var t,n=e.formData();return e.browser().setRootPath((n.rootPath+"/").replace(/\/+/g,"/")),e.browser().setCatchallPath(t=n.catchallPath||null),t}))}}));e.BrowserConfigurationDialog=p},function(t,e){function n(t){this._space=t,this._options=new Map,this._space.on("playing",(function(){return t.agent().options().discardLocals()}))}e.Client=n,n.prototype.idle=function(t){return this._idle},n.prototype.setIdle=function(t){return this._idle=t,this},n.prototype.options=function(t){return this._options},n.prototype.setOptions=function(t){return this._options=t,this},n.prototype.space=function(t){return this._space},n.prototype.setSpace=function(t){return this._space=t,this},n.prototype.optionsForItem=function(t){var e;return(e=this._options.get(t))||this._options.set(t,e={}),e},n.prototype.set=function(t,e,n){return this.optionsForItem(t)[e]=n,this},n.prototype.clearOptions=function(){var t=[];this._options.forEach((function(e,n){var i,r;if((r=Object.keys(e))&&(r.len instanceof Function?r.len():r.length)){t.push(n);let r=[];for(let t,n,o=0,s=Object.keys(e),a=s.length;o<a;o++)n=s[o],t=e[n],r.push((i=e[n],delete e[n],i));return r}}));for(let e=0,n=t.length;e<n;e++)t[e].optionsDidUpdate();return this},n.prototype.flushLocals=function(){return this.options().forEach((function(t,e){return e.options().set(t)})),this.space().files().forEach((function(t){return t.flushLocals()}))}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}function r(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var o=n(0);n(11).StreamAction;function s(t){this._space=t,this._stack=[],this._event={},this._syncing=!1,this._reverting=!1,this._targets=[],this._branch=t.trunk(),this._current=this._target=this._tail=t.trunk().stream().seed(),this._branches=[this._branch]}e.Cursor=s,s.prototype.space=function(t){return this._space},s.prototype.setSpace=function(t){return this._space=t,this},s.prototype.stack=function(t){return this._stack},s.prototype.setStack=function(t){return this._stack=t,this},s.prototype.current=function(t){return this._current},s.prototype.setCurrent=function(t){return this._current=t,this},s.prototype.syncing=function(t){return this._syncing},s.prototype.setSyncing=function(t){return this._syncing=t,this},s.prototype.__branch={watch:"branchDidSet",name:"branch"},s.prototype.branch=function(t){return this._branch},s.prototype.setBranch=function(t){var e=this.branch();return t!=e&&(this._branch=t),t!=e&&this.branchDidSet&&this.branchDidSet(t,e,this.__branch),this},s.prototype.skipping=function(t){return this._skipping},s.prototype.setSkipping=function(t){return this._skipping=t,this},s.prototype.branches=function(t){return this._branches},s.prototype.setBranches=function(t){return this._branches=t,this},s.prototype.emit=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return o.emit(this,t,i)},s.prototype.on=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return o.listen.apply(o,[].concat([this,t],Array.from(i)))},s.prototype.once=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return o.once.apply(o,[].concat([this,t],Array.from(i)))},s.prototype.un=function(t){for(var e=arguments,n=e.length,i=new Array(n>1?n-1:0);n>1;)i[--n-1]=e[n];return o.unlisten.apply(o,[].concat([this,t],Array.from(i)))},s.prototype.lineage=function(t){for(var e=t.branch(),n=[t];e&&e.seed();)n.unshift(e._seed),e=e._seed._branch;return n},s.prototype.compare=function(t,e){if(t.branch()==e.branch())return e.INDEX<t.INDEX?{revertTo:e}:{stepTo:e};for(var n=this.lineage(t),i=this.lineage(e),o=Math.min(r(n),r(i)),s=0,a=0;s<o-1;)n[s].branch()==i[s].branch()&&(a=s),s++;var u=i[a];return n[a].INDEX<i[a].INDEX&&(u=n[a]),{revertTo:u,route:i.slice(a)}},s.prototype.branchDidSet=function(t,e){var n,r;this.setBranches(t.ancestors().concat(t).reverse());for(let t=0,e=i(this.branches()),n=e.length;t<n;t++){let n=this.branches()[t-1];e[t].model().orig.focus=n?n.model().orig:null}return(n=e)&&n.didLeave&&n.didLeave(t),(r=t)&&r.didEnter&&r.didEnter(e),this.space().emit("branch:enter",t,e),window.imba&&window.imba.commit(),this},s.prototype.target=function(t){return t?(this._target=t,this):this._target},s.prototype.canPush=function(t){return!this.current()._next&&this.branch().canPush(t)},s.prototype.sync=function(t,e){if(void 0===t&&(t=this._target),void 0===e&&(e=0),t){this._current||(console.log("first cursor.sync!",t),this._current=this.space().trunk().stream().seed());var n=this.current(),r=Date.now();if(this._syncing=!0,this._prev=n,this._next=t,this._targets=[],this._skipping=!("playing"==this.space().timeline().state()||this.space().isLive())||!this.space()._currentEvent,n==this._tail&&(n=this._space.trunk().stream().actionAtIndex(0))&&this.apply(n),t==n);else if(t._prev==n)this.emit("sync:start",t,n,this),n=this.apply(t,n);else{this.emit("sync:start",t,n,this);var o=this.compare(n,t);if(o.revertTo)for(;n!=o.revertTo;)if(n=this.revert(n),e&&Date.now()-r>e){t=n;break}if(o.stepTo)for(;n!=o.stepTo;){let i=n._next;if(n=this.apply(i,n),e&&Date.now()-r>e){t=n;break}}if(o.route){let e=0,i=o.route;for(;n!=t;){let t=n._next;n==i[e]&&(t=i[++e].branch().stream()._first),n=this.apply(t)}}}if(this._current=this._target=t,this.setBranch(this._current.branch()),this._space.setTimeline(this._current.branch().timeline()),this.branch().isEditing()&&this._current._next&&(console.log("throw us out of editing mode",this._current),this.branch().setMode("watching")),this._targets.length)for(let t=0,e=i(this._targets),n=e.length;t<n;t++)e[t].synced_();return this._syncing=!1,this._targets}},s.prototype.markTarget=function(t){-1==this._targets.indexOf(t)&&this._targets.push(t)},s.prototype.apply=function(t,e){if(t!=this._tail){if(e&&t._prev!=e)for(;e&&e!=t._prev;)e=this.revert(e);return t.isEnabled()&&t.commitWithCursor(this),t}},s.prototype.revert=function(t){return this._reverting=!0,t.isEnabled()&&t.revertWithCursor(this),this._reverting=!1,t._prev}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(1),o=(r.ACTION,r.POINTERMASK,n(11).PointerUpdate);function s(t){var e=this;e._space=t,e._handler=function(t){return e.onevent(t)},e._intercept=["mousemove","mousedown","mouseup"],e._last=Date.now(),e._captures=!1,e._evoptions={passive:!0,capture:!1},e._mask=0,e._hover=null,t.on("browserevent",(function(t){return e.onbrowserevent(t)}))}e.PointerTracker=s,s.prototype.space=function(t){return this._space},s.prototype.setSpace=function(t){return this._space=t,this},s.prototype.hover=function(t){return this._hover},s.prototype.setHover=function(t){return this._hover=t,this},s.prototype.lockedOnTarget=function(t){return this._lockedOnTarget},s.prototype.setLockedOnTarget=function(t){return this._lockedOnTarget=t,this},s.prototype.agent=function(){return this.space().agent()},s.prototype.isActive=function(){return this._active},s.prototype.start=function(){if(!this._active){for(let t=0,e=i(this._intercept),n=e.length;t<n;t++)this.space().view().dom().addEventListener(e[t],this._handler,this._evoptions);return this._active=this._ts=Date.now(),this}},s.prototype.stop=function(){if(this._active){for(let t=0,e=i(this._intercept),n=e.length;t<n;t++)this.space().view().dom().removeEventListener(e[t],this._handler,this._evoptions);return this._active=!1,this}},s.prototype.targetForElement=function(t){for(var e=null,n=t;t&&!(t._tag&&t._tag.targetForPointer&&(e=t._tag.targetForPointer(n)));)t=t.parentNode;return e},s.prototype.onbrowserevent=function(t){var e=this.space().browser()._node,n=this.space().view().layoutForNode(e),i={type:t.type,buttons:t.buttons,spaceX:n[1]+t.clientX*(n[2]/t.windowWidth),spaceY:n[0]+t.clientY*(n[3]/t.windowHeight),spaceTarget:e,shiftKey:t.shiftKey};return this.onevent(i)},s.prototype.onevent=function(t){var e=this.space().recording(),n=Date.now(),i=(this._last,this.space().view().box()),r=null!=t.spaceX?t.spaceX:t.clientX-i.left,o=null!=t.spaceY?t.spaceY:t.clientY-i.top,s=this.lockedOnTarget()||t.spaceTarget||this.targetForElement(t.target);r=Math.round(r),o=Math.round(o);var a=r!=this._x||o!=this._y;if(e||t.shiftKey)return"mousemove"!=t.type&&(a=!0),this._mask=t.buttons,s!=this._hover&&(this.setHover(s),a=!0),a?(this._x=r,this._y=o,this.stamp(),this._last=n):void 0},s.prototype.stamp=function(){var t={x:this._x,y:this._y,flags:this._mask,hover:this._hover?this._hover.sref():null};return this.push(t,this._hover),this},s.prototype.push=function(t,e){if(this.space().isEditing()){e&&this.space().view().pushNodeLayout(e);var n=o.build(t);n._branch=this.space().branch(),this.space().branch().addLocalEvent(n),this.space().view()._pointer.render()}return this},s.prototype.tick=function(){return this}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(0),o=n(3).Widget,s=n(1),a=s.ACTION,u=(s.SCON,n(7).List);function p(){return o.apply(this,arguments)}function c(){return p.apply(this,arguments)}r.subclass(p,o),e.DirWidget=p,p.register("dir"),p.option("name"),p.option("parent",{type:"widget"}),p.option("expanded"),p.prototype.setup=function(){return this},p.prototype.entries=function(){return this._entries||(this._entries=new u(this,[]))},p.prototype.uri=function(){return this.space().namespace()+"/"+this.name()},p.prototype.ext=function(){return this.name().substr(this.name().lastIndexOf(".")+1)},p.prototype.mkdir=function(t){var e={name:t,parent:this.id(),type:"dir"};return this.space().createWidget(e).widget()},p.prototype.mkfile=function(t,e){void 0===e&&(e={});var n={name:t,parent:this.id(),type:"file",body:e.body||""};for(let t,i,r=0,o=Object.keys(e),s=o.length;r<s;r++)i=o[r],t=e[i],n[i]||(n[i]=t);return!t||this.entries().any((function(e){return e.name()==t}))?(console.log("file already exists "+t),null):this.space().createWidget(n).widget()},p.prototype.rename=function(t){return!t||t==this.name()||this.parentDir().entries().any((function(e){return e.name()==t}))?this:this.push_(a.FS_RENAME,[this.id(),t])},p.prototype.rm=function(){return(t=this.entries())&&(t.len instanceof Function?t.len():t.length)?(this.log("Directory is not empty"),this):this.push_(a.FS_REMOVE,[this.id()]);var t},p.prototype.moveTo=function(t){return this.log("moveTo",t),0==t.path().indexOf(this.path())?(this.log("target is inside folder - not allowed"),this):(this.parent()==t||this.push_(a.FS_MOVE,[this.id(),t.id()]),this)},p.prototype.mount_=function(){if(p.prototype.__super__.mount_.apply(this,arguments),this.parentDir())return this.parentDir().entries().add(this)},p.prototype.unmount_=function(){if(p.prototype.__super__.unmount_.apply(this,arguments),this.parentDir())return this.parentDir().entries().remove(this)},p.prototype.parentDir=function(){return this.parent()||this.space().fs()},p.prototype.path=function(){return this.parentDir().path()+"/"+this.name()},r.subclass(c,p),e.FileSystemWidget=c,c.register("fs"),c.prototype.name=function(){return"project"},c.prototype.path=function(){return""},c.prototype.rm=function(){return this},c.prototype.parentDir=function(){return null},c.prototype.find=function(t){"/"!=t[0]&&(t="/"+t);for(let e,n=0,r=i(this.space().widgets()),o=r.length;n<o;n++)if(e=r[n],"file"==e.TYPE&&e.path()==t)return e;return null},c.prototype.nodemap=function(){var t={};for(let e,n=0,r=i(this.space().widgets()),o=r.length;n<o;n++)e=r[n],"file"==e.TYPE&&(t[e.path()]=e.id());return t}},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}function r(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var o=n(0),s=o.createElementFactory(),a=n(3).Widget,u=n(216).SlideWidget,p=n(217).SlidesView;function c(){return a.apply(this,arguments)}o.subclass(c,a),e.SlidesWidget=c,c.option("url"),c.option("visible",{default:!1,overridable:!0}),c.option("currentSlide"),c.option("currentIndex",{default:0}),c.option("items"),c.option("width"),c.option("height"),c.prototype.setup=function(){return this},c.prototype.node=function(){return this._node||(this._node=s(p).setData(this).end())},c.prototype.stepForward=function(t){void 0===t&&(t=!1);let e=this.currentSlide();return e&&e.steps()&&e.steps()[e.currentStep()+1]?(t?e.setCurrentStep(r(e.steps())-1):e.setCurrentStep(e.currentStep()+1),this):(this.setCurrentIndex(Math.min(this.currentIndex()+1,this.items().length-1)),t?this.currentSlide().setCurrentStep(r(this.currentSlide().steps()||[])-1):this.currentSlide().setCurrentStep(-1),this)},c.prototype.stepBackward=function(t){void 0===t&&(t=!1);let e=this.currentSlide();return e&&!t&&e.currentStep()>=0?(e.setCurrentStep(e.currentStep()-1),this):(this.currentIndex()>0&&this.setCurrentIndex((this.currentIndex()||this.items().length)-1),this.currentSlide().setCurrentStep(r(this.currentSlide().steps()||[])-1),this)},c.prototype.currentSlideId=function(){return this.items()?this.items()[this.currentIndex()]:null},c.prototype.currentSlide=function(){return this.slides()[this.currentIndex()]},c.prototype.nextSlide=function(){return this.slides()[this.currentIndex()+1]},c.prototype.prevSlide=function(){return this.slides()[this.currentIndex()-1]},c.prototype.slides=function(){var t,e=this;return e.items()?(t=e.items()).SLIDES||(t.SLIDES=e.items().map((function(t){return e.space().widgets().get(t)}))):[]},c.prototype.importFromGoogleSlides=async function(t){try{var e=await $api.post("/api/import-google-slides",{url:t}),n={};for(let t,e=0,r=i(this.space().widgets()),o=r.length;e<o;e++)t=r[e],t instanceof u&&(n[t.name()]=t);var o=[];for(let t,r=0,s=i(e.slides),a=s.length;r<a;r++){t=s[r];let e=n[t.name];e&&(e.setTitle(t.title),e.setWidth(t.width),e.setHeight(t.height),e.setBlobId(t.blobId),e.setSteps(t.steps),e.setBody(null));let i=e||this.space().createWidget({type:"slide",name:t.name,title:t.title,width:t.width,height:t.height,blobId:t.blobId,steps:t.steps}).widget();o.push(i.id())}String(this.items())!=String(o)&&this.setItems(o),this.setWidth(e.width),this.setHeight(e.height),this.setUrl(e.url),this.space().view().uxa().flash("Imported "+r(o)+" slides")}catch(t){this.space().view().uxa().flash("Could not import slides"),console.log("something went wrong during import",t)}return this}},function(t,e,n){var i=n(0),r=n(3).Widget,o=n(1);o.WIDGET,o.SCON,o.ACTION,n(7).List;function s(){}function a(){return r.apply(this,arguments)}s.equals=function(t,e){return t&&e&&JSON.stringify(t)==JSON.stringify(e)},i.subclass(a,r),e.SlideWidget=a,a.register("slide"),a.option("extid"),a.option("name"),a.option("title"),a.option("blobId"),a.option("body"),a.option("meta"),a.option("width"),a.option("height"),a.option("steps",{type:s}),a.option("currentStep",{default:-1}),a.prototype.setup=function(){var t=this;return t._bodies={},t._fetches={inline:{then:function(e){return e(t.body())}}},t},a.prototype.posToScreen=function(t,e,n,i){return this},a.prototype.upload=async function(){if(this.body()){var t=await this.space().api().uploadBlob(this.body());return this.setBlobId(t.id),this.setBody(null),null}},a.prototype.preload=async function(){var t=await this.space().api().fetchBlob(this.blobId());return await t.text()},a.prototype.fetchBody=function(){var t=this;let e=t.blobId()||"inline";return t._fetches[e]||(t._fetches[e]=new Promise((async function(n,i){var r=await t.space().api().fetchBlob(e),o=await r.text();return t._bodies[e]=o,t._fetches[e]={then:function(t){return t(o)}},n(o)})))},a.prototype.ext=function(){return this.name().substr(this.name().lastIndexOf(".")+1)},a.prototype.commitAdd=function(){return a.prototype.__super__.commitAdd.apply(this,arguments),this},a.prototype.buffer=function(){return this.data().buffer||this.data().body},a.prototype.toString=function(){return this.body()},a.prototype.persist_=function(){return this},a.prototype.node=function(){return this._editor},a.prototype.isBinary=function(){return!!this.blobId()}},function(t,e,n){var i=n(0),r=i.createElementFactory(),o=i.createTagScope(),s=n(1).LAYOUTMASK,a=n(13).InterfaceView,u=n(218).SlideAnimator,p=o.defineTag("SlideView",(function(t){t.prototype.__svg={watch:"svgDidSet",name:"svg"},t.prototype.svg=function(t){return this._svg},t.prototype.setSvg=function(t){var e=this.svg();return t!=e&&(this._svg=t),t!=e&&this.svgDidSet&&this.svgDidSet(t,e,this.__svg),this},t.prototype.__fetcher={watch:"fetcherDidSet",name:"fetcher"},t.prototype.fetcher=function(t){return this._fetcher},t.prototype.setFetcher=function(t){var e=this.fetcher();return t!=e&&(this._fetcher=t),t!=e&&this.fetcherDidSet&&this.fetcherDidSet(t,e,this.__fetcher),this},t.prototype.setup=function(){return this},t.prototype.fetcherDidSet=function(t){var e=this;t&&t.then&&t.then((function(t){return e.setSvg(t),t}))},t.prototype.svgDidSet=function(t){return this.body().dom().innerHTML=t,this.initAnimations(),this},t.prototype.body=function(){this.$$||(this.$$={});return this._body=this._body||r("div",this).flag("body")},t.prototype.isWiderThanViewport=function(){return this.data().width()/this.data().height()>this.data().space().vw()/(this.data().space().vh()-30)},t.prototype.initAnimations=function(){let t=this._body.dom().firstElementChild;return this._animator=new u(this.data(),t,this.data().steps()),this._animator.reset(),this},t.prototype.render=function(){return this.$open(0).setFetcher(this.data().fetchBody()).setChildren(this.body(),3).synced(),this._animator&&this._animator.setCurrentStep(this.data().currentStep()),this},t.prototype.ontap=function(t){var e;try{if(e=t.native().target.closest("a")){let n=e.getAttribute("target");t.stop(),n?t._responder=null:(t.prevent(),window.open(e.getAttribute("href"),"_blank"))}}catch(t){}return this}})),c=o.defineTag("SlidesBody",(function(t){t.prototype.layoutMask=function(){return s.SCALED|s.BOUNDLESS}})),h=o.defineTag("SlidesView",a,(function(t){t.prototype.data=function(t){return this._data},t.prototype.setData=function(t){return this._data=t,this},t.prototype.space=function(){return this.data().space()},t.prototype.commit=function(){return this.setEnabled(!0),t.prototype.__super__.commit.apply(this,arguments),this.flag("pip",!this.data().visible())},t.prototype.tapBody=function(t){if(t.stop().prevent(),!this.data().visible()&&this.data().currentSlide())return this.data().setVisible(!0),!0},t.prototype.hide=function(){return this.data().setVisible(!1),this},t.prototype.slideForId=function(t){let e,n=this.$$||(this.$$={});return t&&(n[e="id$"+t]||r(p,n,e,this)).setData(this.data().space().widgets().get(t)).end()},t.prototype.targetForPointer=function(t){return this._body},t.prototype.reflow=function(){let t=this.space().vw(),e=this.space().vh(),n=this.data().width(),i=this.data().height(),r=(this.data().width()||16)/(this.data().height()||9),o=r>t/e;if(!this.invalidated(t,e,n,i))return this._sizing;let s={},a={left:0,bottom:0,width:200};o?(s.width=Math.ceil(.9*t),s.height=Math.round(s.width/r)):(s.height=Math.round(.9*(e-30)),s.width=Math.ceil(s.height*r));var u=.5*(e-s.height),p=(s.width,u<64?64-u:0);return this._body.css(s),this.dom().style.setProperty("--pip-transform","scale("+a.width/s.width+")"),this.dom().style.setProperty("--max-transform","translate(-50%,50%) translateY(-"+p+"px)"),this._sizing={max:s,pip:a}},t.prototype.render=function(){var t,e,n,i=this.$;return(t=this.data().nextSlide())&&t.fetchBody&&t.fetchBody(),(e=this.data().prevSlide())&&e.fetchBody&&e.fetchBody(),this.$open(0).flagIf("empty",!this.data().currentSlideId()).setChildren(i.$=i.$||[this._cover=this._cover||r("div",this).flag("cover").on$(0,["tap","hide"],this),n=this._body=this._body||(n=r(c,this)).flag("body").on$(0,["tap","tapBody"],this)],2).synced((this._body.setSref(this.data().id()).setContent([this._shadow=this._shadow||r("div",n).flag("shadow"),this.data().currentSlideId()?this._slideView=this.slideForId(this.data().currentSlideId()):void 0],1).end(),!0)),this.reflow(),this}}));e.SlidesView=h},function(t,e,n){function i(t){return t?t.toArray?t.toArray():t:[]}var r=n(83);function o(t,e,n){var i=this;i._slide=t,i._space=t.space(),i._svg=e,i._steps=n,i._time=0,i._duration=0,i._stops=[],i._animations=[],i._updater=function(t){return i.update(t)},i.build()}e.SlideAnimator=o,o.prototype.svg=function(t){return this._svg},o.prototype.setSvg=function(t){return this._svg=t,this},o.prototype.space=function(t){return this._space},o.prototype.setSpace=function(t){return this._space=t,this},o.prototype.steps=function(t){return this._steps},o.prototype.setSteps=function(t){return this._steps=t,this},o.prototype.duration=function(t){return this._duration},o.prototype.setDuration=function(t){return this._duration=t,this},o.prototype.animations=function(t){return this._animations},o.prototype.setAnimations=function(t){return this._animations=t,this},o.prototype.__animator={watch:"animatorDidSet",name:"animator"},o.prototype.animator=function(t){return this._animator},o.prototype.setAnimator=function(t){var e=this.animator();return t!=e&&(this._animator=t),t!=e&&this.animatorDidSet&&this.animatorDidSet(t,e,this.__animator),this},o.prototype.__currentStep={default:-1,watch:"currentStepDidSet",name:"currentStep"},o.prototype.currentStep=function(t){return this._currentStep},o.prototype.setCurrentStep=function(t){var e=this.currentStep();return t!=e&&(this._currentStep=t),t!=e&&this.currentStepDidSet&&this.currentStepDidSet(t,e,this.__currentStep),this},o.prototype._currentStep=-1,o.prototype.build=function(){var t=this;for(let e,n=0,o=i(t.steps()),s=o.length;n<s;n++){e=o[n];let s=0;e.T0=t.duration(),e[0].map((function(n){let o=e.T0;if(2==n[6])return;n.EL=t.svg().querySelector("#"+n[1]);let a=n.DUR=n[2],u=n.DELAY=n[3];return s=Math.max(s,n.DELAY+n.DUR),n.PROGRESS=1,n.UPDATE=function(e){let s=Math.max(Math.min(e-o-u,a),0)/a,p=this.PROGRESS;this.EL||(this.EL=t.svg().querySelector("#"+n[1]));if(p==s||!this.EL)return;this.PROGRESS=s;let c=this.EL.style;for(let t,e=0,n=i(this[0]),o=n.length;e<o;e++){let i;if(t=n[e],0==t[0])i=t[1]+(t[2]-t[1])*s,c.opacity=i;else if(3==t[0]){let e=r.easings.easeInOutCubic(s,0,1,1),n=t[1]+(t[3]-t[1])*e,i=t[2]+(t[4]-t[2])*e;c.transform="translate("+100*n+"%,"+100*i+"%)"}}},t._animations.push(n)})),t.setDuration(t.duration()+s),e.T1=t.duration()}return t},o.prototype.reset=function(){return this._time=this.duration(),this.update(0),this},o.prototype.update=function(t){let e=this._time,n=this.animations();if(t>e)for(let r=0,o=i(n),s=o.length;r<s;r++)o[r].UPDATE(t,e);else if(t<e){let i=(r=n)&&(r.len instanceof Function?r.len():r.length)||0;for(;i>0;)n[--i].UPDATE(t,e)}var r;return this._time=t,this},o.prototype.animate=function(t,e,n){return null==n&&(n=Math.abs(e-t)),this.setAnimator(r.animate(t,e,n,this._updater,"linear")),this},o.prototype.animatorDidSet=function(t,e){if(e)return e.cancel()},o.prototype.currentStepDidSet=function(t,e){let n=0,i=this._steps[t];if(i&&(n=i.T1),this.setAnimator(null),t-e==1){let t=(i.T1-i.T0)/(this.space().timeline().playbackRate()||1);this.animate(i.T0,n,t)}else this.update(n);return this}},function(t,e,n){var i=n(0),r=n(3).Widget;function o(){return r.apply(this,arguments)}i.subclass(o,r),e.SidebarWidget=o,o.register("sidebar"),o.option("width",{default:200,overridable:!0,cssvar:{name:"sidebar-width",unit:"px"}}),o.prototype.view=function(t){return this._view},o.prototype.setView=function(t){return this._view=t,this},o.prototype.setup=function(){return this}},function(t,e,n){var i=n(0),r=n(3).Widget;function o(){return r.apply(this,arguments)}i.subclass(o,r),e.ExplorerPanel=o,o.register("explorer"),o.prototype.view=function(t){return this._view},o.prototype.setView=function(t){return this._view=t,this},o.prototype.setup=function(){return this}},function(t,e,n){var i=n(0),r=n(3).Widget;function o(){return r.apply(this,arguments)}i.subclass(o,r),e.DependenciesPanel=o,o.prototype.view=function(t){return this._view},o.prototype.setView=function(t){return this._view=t,this},o.prototype.setup=function(){return this}},function(t,e,n){var i=n(40).Action,r=n(1),o=(r.MSG,r.CAST,n(67).Notification);i.register({name:"toggleConsole",desc:"Toggle console",scope:["space","simulator"],shortcut:"mod+shift+y",state:function(t){return t.space().console().enabled()?"on":"off"},cmd:function(t){var e;return t.space().console().setEnabled(e=!t.space().console().enabled()),e}}),i.register({name:"toggleBrowser",desc:"Toggle browser",scope:["space"],shortcut:"mod+shift+u",state:function(t){return t.space().browser().visible()?"on":"off"},cmd:function(t){var e;let n=t.space();return n.simulator()&&n.simulator().setVisible(!1),n.browser().setVisible(e=!n.browser().visible()),e}}),i.register({name:"toggleBrowserMinification",desc:"Toggle Browser",scope:["space"],shortcut:"mod+b",enabled:function(){return!0},cmd:function(t){var e;return t.space().browser().setMinimized(e=!t.space().browser().minimized()),e}});i.register({name:"slidesStepForward",desc:"Next step in slideshow",scope:"slides+editing",shortcut:"right",cmd:function(t){return t.space().slides().stepForward()}}),i.register({name:"startPointerTracker",scope:"editing",shortcut:"alt+shift+p",cmd:function(t){return t.space().pointerTracker().start()}}),i.register({name:"slidesStepBackward",desc:"Previous step in slideshow",scope:"slides+editing",shortcut:"left",cmd:function(t){return t.space().slides().stepBackward()}}),i.register({name:"slideToStart",desc:"Previous slide",scope:"slides+editing",shortcut:"shift+left",cmd:function(t){return t.space().slides().stepBackward(!0)}}),i.register({name:"slideToEnd",desc:"Next slide",scope:"slides+editing",shortcut:"shift+right",cmd:function(t){return t.space().slides().stepForward(!0)}}),i.register({name:"minimizeSlides",desc:"Minimize slides",scope:"slides+editing",shortcut:"x",cmd:function(t){return t.space().slides().setVisible(!1),!1}}),i.register({name:"refresh",desc:"Run code / Reload browser",scope:["space"],shortcut:["mod+r","mod+shift+r"],cooldown:0,enabled:function(t){return!!t.space().isEditing()},cmd:function(t){return t.space().browser().run()}}),i.register({name:"quicksave",desc:"Save",scope:["space"],shortcut:"mod+s",cooldown:0,enabled:function(){return!0},cmd:function(t){var e=t.space().agent().file();if(e)return e.quicksave()}}),i.register({name:"recstop",desc:"Stop Recording",scope:"recording",shortcut:"mod+shift+2",cooldown:0,state:function(t){return t.recording().state()},enabled:function(t){return t.recording()&&"recording"==t.recording().state()},cmd:function(t){var e;return(e=t.recording())&&e.stop&&e.stop()}}),i.register({name:"togglePlayback",desc:"Play / pause",scope:"watching",shortcut:"space",state:function(t){return t.timeline().playState()},enabled:function(t){return!!t.branch().hasDuration()},cmd:function(t,e){var n=t.timeline();if(n.isPlaying()?n.pause():n.play(),e instanceof Event)return e.preventDefault()}}),i.register({name:"play",desc:"Play",state:function(){return"paused"},enabled:function(t){return!!t.branch().hasDuration()&&!t.branch().timeline().isPlaying()},cmd:function(t){return t.timeline().play()}}),i.register({name:"skipForward",desc:"Go forward 10s",scope:"playback",shortcut:"right",cmd:function(t){return t.timeline().skip(1e4)}}),i.register({name:"skipBack",desc:"Go back 10s",scope:"playback",shortcut:"left",cmd:function(t){return t.timeline().skip(-1e4)}}),i.register({name:"fasterPlayback",desc:"Faster playback",scope:"playback",shortcut:"ctrl+shift+right",cmd:function(t){let e=t.timeline().playbackRate();if(e<4)return e=Math.min(e+.1,4).round(2),window.store.settings.playbackRate=e,t.timeline().setPlaybackRate(e),o.show(t.timeline().describe(),{info:!0})}}),i.register({name:"slowerPlayback",desc:"Slower playback",scope:"playback",shortcut:"ctrl+shift+left",cmd:function(t){let e=t.timeline().playbackRate();if(e>.4)return e=Math.max(e-.1,.4).round(2),window.store.settings.playbackRate=e,t.timeline().setPlaybackRate(e),o.show(t.timeline().describe(),{info:!0})}}),i.register({name:"fontSizeInc",scope:["space"],shortcut:["shift+alt+l"],cmd:function(t){var e,n;return(e=t.api()).setFontSize(n=e.fontSize()+1),n}}),i.register({name:"fontSizeDecr",scope:["space"],shortcut:["shift+alt+k"],cmd:function(t){var e,n;return(e=t.api()).setFontSize(n=e.fontSize()-1),n}}),i.register({name:"toggleWhitespace",scope:["space"],shortcut:["shift+alt+i"],cmd:function(t){var e;return t.primaryEditor().setRenderWhitespace(e=!t.primaryEditor().renderWhitespace()),e}})}]);